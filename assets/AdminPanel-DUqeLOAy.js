const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C09NoPC0.js","assets/three-DYdjUtCm.js","assets/contentful-6-L6ww-u.js","assets/firebase-D5dyMTPx.js","assets/index-BtsQyA5c.css","assets/jspdf.es.min-C3WVfA9O.js","assets/storage-CDzUfK7n.js","assets/support-Ct0jW65w.js"])))=>i.map(i=>d[i]);
import{r as k,j as r,_ as Ie,R,P as nt}from"./three-DYdjUtCm.js";import{e as Qe,aZ as j0,q as te,l as J,C as q,U as Po,w as H,B as $,X as lk,M as wn,P as EP,a8 as Hx,az as jl,H as zt,t as Ra,I as xe,aA as In,g as na,n as $o,bE as DP,bF as MP,a2 as Bt,a4 as mt,y as dn,S as dr,i as ur,j as hr,k as fr,m as Oe,D as Et,z as Dt,E as $t,F as Lt,bI as sn,b2 as xt,b3 as pt,b4 as gt,aO as Gx,b0 as _a,T as Kr,L as le,bJ as Lo,aP as jn,bb as kr,bK as IP,b1 as RP,bL as vy,bM as wy,bN as $P,bt as br,bO as Pe,bP as Ce,bQ as je,A as LP,b5 as Nc,b6 as Sc,b7 as ht,b9 as lt,bR as jy,J as Kx,aa as Ny,bS as st,ap as js,bT as bc,c as Fa,bU as _s,bV as Es,bW as Qr,bX as pa,bY as N0,bZ as Ns,b_ as Ve,b$ as BP,c0 as FP,c1 as qP,r as aa,G as UP,aX as _t,o as Dn,x as zP,au as ck,av as kc,c2 as VP,c3 as Yx,aY as WP,c4 as Qn,c5 as Ea,ar as Jl,a3 as $a,c6 as di,_ as Ui,aj as HP,R as GP,W as Nl,V as Cd,$ as gs,af as cs,ag as KP,c7 as YP,d as XP,O as QP,c8 as JP,c9 as Co,ca as ao,a5 as ZP,cb as eC,Z as tC,cc as Sy,cd as so,ce as Zl,bv as ky,a9 as ec,aN as io,bp as rC,cf as nC,cg as Ay,ch as tc,ci as Jn,cj as Ys,ck as Cu,cl as aC,cm as sC,cn as iC,co as oC,cp as lC}from"./index-C09NoPC0.js";import{T as Mn}from"./textarea-D-68KDl_.js";import{a as Od,b as cC,P as Py,S as ta,c as dk}from"./storage-CDzUfK7n.js";import{T as ui}from"./trending-down-PXnwlVQp.js";import{D as S0}from"./dollar-sign-IO6ipdcE.js";import{S as uk}from"./send-BGSUsxhY.js";import{C as k0}from"./copy-C9jg9k1g.js";import{q as Da,o as ni,c as Rn,b as hk,w as Oo,d as Td,e as fk,s as $n,a as mk,f as Xx,h as ai,i as dC,T as ia,l as No,m as oo,j as Cy,R as uC,P as Oy,k as hC}from"./firebase-D5dyMTPx.js";import{j as Ou,k as Tu,l as fC,m as mC,A as xC,a as pC,b as gC,d as yC,e as bC,f as vC,i as wC,h as jC,L as NC,S as xk}from"./alert-dialog-BLh5rnsa.js";import{g as Pt}from"./contentful-6-L6ww-u.js";import{K as SC}from"./key-Cp6N6-Eb.js";import{A as on,S as kC}from"./share-2-cgNTc9il.js";import{C as Ty}from"./checkbox-DXTpAKAu.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=Qe("AlignCenter",[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=Qe("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=Qe("AlignRight",[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=Qe("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=Qe("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=Qe("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=Qe("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=Qe("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=Qe("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=Qe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=Qe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=Qe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=Qe("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=Qe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=Qe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=Qe("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=Qe("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=Qe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=Qe("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Du=Qe("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=Qe("MousePointerClick",[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=Qe("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=Qe("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=Qe("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=Qe("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=Qe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=Qe("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=Qe("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=Qe("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=Qe("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=Qe("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=Qe("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=Qe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=Qe("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=Qe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function An(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Ss(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const bk=6048e5,UC=864e5;let zC={};function _d(){return zC}function Fo(e,t){var l,c,d,u;const n=_d(),a=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,s=An(e),i=s.getDay(),o=(i<a?7:0)+i-a;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Ac(e){return Fo(e,{weekStartsOn:1})}function vk(e){const t=An(e),n=t.getFullYear(),a=Ss(e,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const s=Ac(a),i=Ss(e,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=Ac(i);return t.getTime()>=s.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Ry(e){const t=An(e);return t.setHours(0,0,0,0),t}function $y(e){const t=An(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function VC(e,t){const n=Ry(e),a=Ry(t),s=+n-$y(n),i=+a-$y(a);return Math.round((s-i)/UC)}function WC(e){const t=vk(e),n=Ss(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Ac(n)}function HC(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function GC(e){if(!HC(e)&&typeof e!="number")return!1;const t=An(e);return!isNaN(Number(t))}function KC(e){const t=An(e),n=Ss(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const YC={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},XC=(e,t,n)=>{let a;const s=YC[e];return typeof s=="string"?a=s:t===1?a=s.one:a=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function Mu(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const QC={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},JC={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ZC={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},eO={date:Mu({formats:QC,defaultWidth:"full"}),time:Mu({formats:JC,defaultWidth:"full"}),dateTime:Mu({formats:ZC,defaultWidth:"full"})},tO={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},rO=(e,t,n,a)=>tO[e];function lo(e){return(t,n)=>{const a=n!=null&&n.context?String(n.context):"standalone";let s;if(a==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;s=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const nO={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},aO={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},sO={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},iO={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},oO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},lO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},cO=(e,t)=>{const n=Number(e),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},dO={ordinalNumber:cO,era:lo({values:nO,defaultWidth:"wide"}),quarter:lo({values:aO,defaultWidth:"wide",argumentCallback:e=>e-1}),month:lo({values:sO,defaultWidth:"wide"}),day:lo({values:iO,defaultWidth:"wide"}),dayPeriod:lo({values:oO,defaultWidth:"wide",formattingValues:lO,defaultFormattingWidth:"wide"})};function co(e){return(t,n={})=>{const a=n.width,s=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const o=i[0],l=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?hO(l,h=>h.test(o)):uO(l,h=>h.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function uO(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function hO(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function fO(e){return(t,n={})=>{const a=t.match(e.matchPattern);if(!a)return null;const s=a[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(s.length);return{value:o,rest:l}}}const mO=/^(\d+)(th|st|nd|rd)?/i,xO=/\d+/i,pO={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},gO={any:[/^b/i,/^(a|c)/i]},yO={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},bO={any:[/1/i,/2/i,/3/i,/4/i]},vO={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},wO={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},jO={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},NO={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},SO={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},kO={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},AO={ordinalNumber:fO({matchPattern:mO,parsePattern:xO,valueCallback:e=>parseInt(e,10)}),era:co({matchPatterns:pO,defaultMatchWidth:"wide",parsePatterns:gO,defaultParseWidth:"any"}),quarter:co({matchPatterns:yO,defaultMatchWidth:"wide",parsePatterns:bO,defaultParseWidth:"any",valueCallback:e=>e+1}),month:co({matchPatterns:vO,defaultMatchWidth:"wide",parsePatterns:wO,defaultParseWidth:"any"}),day:co({matchPatterns:jO,defaultMatchWidth:"wide",parsePatterns:NO,defaultParseWidth:"any"}),dayPeriod:co({matchPatterns:SO,defaultMatchWidth:"any",parsePatterns:kO,defaultParseWidth:"any"})},PO={code:"en-US",formatDistance:XC,formatLong:eO,formatRelative:rO,localize:dO,match:AO,options:{weekStartsOn:0,firstWeekContainsDate:1}};function CO(e){const t=An(e);return VC(t,KC(t))+1}function OO(e){const t=An(e),n=+Ac(t)-+WC(t);return Math.round(n/bk)+1}function wk(e,t){var u,h,f,m;const n=An(e),a=n.getFullYear(),s=_d(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=Ss(e,0);o.setFullYear(a+1,0,i),o.setHours(0,0,0,0);const l=Fo(o,t),c=Ss(e,0);c.setFullYear(a,0,i),c.setHours(0,0,0,0);const d=Fo(c,t);return n.getTime()>=l.getTime()?a+1:n.getTime()>=d.getTime()?a:a-1}function TO(e,t){var l,c,d,u;const n=_d(),a=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,s=wk(e,t),i=Ss(e,0);return i.setFullYear(s,0,a),i.setHours(0,0,0,0),Fo(i,t)}function _O(e,t){const n=An(e),a=+Fo(n,t)-+TO(n,t);return Math.round(a/bk)+1}function ct(e,t){const n=e<0?"-":"",a=Math.abs(e).toString().padStart(t,"0");return n+a}const Na={y(e,t){const n=e.getFullYear(),a=n>0?n:1-n;return ct(t==="yy"?a%100:a,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):ct(n+1,2)},d(e,t){return ct(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return ct(e.getHours()%12||12,t.length)},H(e,t){return ct(e.getHours(),t.length)},m(e,t){return ct(e.getMinutes(),t.length)},s(e,t){return ct(e.getSeconds(),t.length)},S(e,t){const n=t.length,a=e.getMilliseconds(),s=Math.trunc(a*Math.pow(10,n-3));return ct(s,t.length)}},Xs={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ly={G:function(e,t,n){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const a=e.getFullYear(),s=a>0?a:1-a;return n.ordinalNumber(s,{unit:"year"})}return Na.y(e,t)},Y:function(e,t,n,a){const s=wk(e,a),i=s>0?s:1-s;if(t==="YY"){const o=i%100;return ct(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):ct(i,t.length)},R:function(e,t){const n=vk(e);return ct(n,t.length)},u:function(e,t){const n=e.getFullYear();return ct(n,t.length)},Q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return ct(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return ct(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,n){const a=e.getMonth();switch(t){case"M":case"MM":return Na.M(e,t);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,n){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return ct(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,n,a){const s=_O(e,a);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):ct(s,t.length)},I:function(e,t,n){const a=OO(e);return t==="Io"?n.ordinalNumber(a,{unit:"week"}):ct(a,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Na.d(e,t)},D:function(e,t,n){const a=CO(e);return t==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):ct(a,t.length)},E:function(e,t,n){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,n,a){const s=e.getDay(),i=(s-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return ct(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,a){const s=e.getDay(),i=(s-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return ct(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const a=e.getDay(),s=a===0?7:a;switch(t){case"i":return String(s);case"ii":return ct(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const a=e.getHours();let s;switch(a===12?s=Xs.noon:a===0?s=Xs.midnight:s=a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const a=e.getHours();let s;switch(a>=17?s=Xs.evening:a>=12?s=Xs.afternoon:a>=4?s=Xs.morning:s=Xs.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let a=e.getHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return Na.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Na.H(e,t)},K:function(e,t,n){const a=e.getHours()%12;return t==="Ko"?n.ordinalNumber(a,{unit:"hour"}):ct(a,t.length)},k:function(e,t,n){let a=e.getHours();return a===0&&(a=24),t==="ko"?n.ordinalNumber(a,{unit:"hour"}):ct(a,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Na.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Na.s(e,t)},S:function(e,t){return Na.S(e,t)},X:function(e,t,n){const a=e.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return Fy(a);case"XXXX":case"XX":return is(a);case"XXXXX":case"XXX":default:return is(a,":")}},x:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"x":return Fy(a);case"xxxx":case"xx":return is(a);case"xxxxx":case"xxx":default:return is(a,":")}},O:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+By(a,":");case"OOOO":default:return"GMT"+is(a,":")}},z:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+By(a,":");case"zzzz":default:return"GMT"+is(a,":")}},t:function(e,t,n){const a=Math.trunc(e.getTime()/1e3);return ct(a,t.length)},T:function(e,t,n){const a=e.getTime();return ct(a,t.length)}};function By(e,t=""){const n=e>0?"-":"+",a=Math.abs(e),s=Math.trunc(a/60),i=a%60;return i===0?n+String(s):n+String(s)+t+ct(i,2)}function Fy(e,t){return e%60===0?(e>0?"-":"+")+ct(Math.abs(e)/60,2):is(e,t)}function is(e,t=""){const n=e>0?"-":"+",a=Math.abs(e),s=ct(Math.trunc(a/60),2),i=ct(a%60,2);return n+s+t+i}const qy=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},jk=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},EO=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],a=n[1],s=n[2];if(!s)return qy(e,t);let i;switch(a){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",qy(a,t)).replace("{{time}}",jk(s,t))},DO={p:jk,P:EO},MO=/^D+$/,IO=/^Y+$/,RO=["D","DD","YY","YYYY"];function $O(e){return MO.test(e)}function LO(e){return IO.test(e)}function BO(e,t,n){const a=FO(e,t,n);if(console.warn(a),RO.includes(e))throw new RangeError(a)}function FO(e,t,n){const a=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const qO=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,UO=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,zO=/^'([^]*?)'?$/,VO=/''/g,WO=/[a-zA-Z]/;function us(e,t,n){var u,h,f,m;const a=_d(),s=a.locale??PO,i=a.firstWeekContainsDate??((h=(u=a.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,o=a.weekStartsOn??((m=(f=a.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,l=An(e);if(!GC(l))throw new RangeError("Invalid time value");let c=t.match(UO).map(g=>{const p=g[0];if(p==="p"||p==="P"){const x=DO[p];return x(g,s.formatLong)}return g}).join("").match(qO).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const p=g[0];if(p==="'")return{isToken:!1,value:HO(g)};if(Ly[p])return{isToken:!0,value:g};if(p.match(WO))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:g}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return c.map(g=>{if(!g.isToken)return g.value;const p=g.value;(LO(p)||$O(p))&&BO(p,t,String(e));const x=Ly[p[0]];return x(l,p,s.localize,d)}).join("")}function HO(e){const t=e.match(zO);return t?t[1].replace(VO,"'"):e}function GO({customerId:e,onClose:t}){const{user:n}=j0(),[a,s]=k.useState(!0),[i,o]=k.useState(null),[l,c]=k.useState([]),[d,u]=k.useState([]),[h,f]=k.useState(""),[m,g]=k.useState(""),[p,x]=k.useState(!1),b=k.useCallback(async()=>{try{if(s(!0),!n)return;const A=n,P=A.getIdToken?await A.getIdToken():"",T=await fetch("/api/admin/crm/segments?segment=all",{headers:{Authorization:`Bearer ${P}`}});if(!T.ok)throw new Error("Failed to fetch customer data");const E=(await T.json()).customers.find(C=>C.id===e);if(!E){te.error("Customer not found"),t();return}o(E),f(E.notes||""),c([]),u([])}catch(A){J.error("Error fetching customer data",A),te.error("Failed to load customer data")}finally{s(!1)}},[e,t,n]);k.useEffect(()=>{b()},[b]);async function y(){try{if(x(!0),!n)throw new Error("Not authenticated");const{updateDoc:A,doc:P}=await Ie(async()=>{const{updateDoc:M,doc:E}=await import("./firebase-D5dyMTPx.js").then(C=>C.B);return{updateDoc:M,doc:E}},[]),{db:T}=await Ie(async()=>{const{db:M}=await import("./index-C09NoPC0.js").then(E=>E.cq);return{db:M}},__vite__mapDeps([0,1,2,3,4]));await A(P(T,"users",e),{notes:h}),te.success("Notes saved"),i&&o({...i,notes:h})}catch(A){J.error("Error saving notes",A),te.error("Failed to save notes")}finally{x(!1)}}async function w(){if(!(!m.trim()||!i))try{const{updateDoc:A,doc:P,arrayUnion:T}=await Ie(async()=>{const{updateDoc:E,doc:C,arrayUnion:O}=await import("./firebase-D5dyMTPx.js").then(_=>_.B);return{updateDoc:E,doc:C,arrayUnion:O}},[]),{db:M}=await Ie(async()=>{const{db:E}=await import("./index-C09NoPC0.js").then(C=>C.cq);return{db:E}},__vite__mapDeps([0,1,2,3,4]));await A(P(M,"users",e),{tags:T(m.trim())}),o({...i,tags:[...i.tags,m.trim()]}),g(""),te.success("Tag added")}catch(A){J.error("Error adding tag",A),te.error("Failed to add tag")}}async function S(A){if(i)try{const{updateDoc:P,doc:T,arrayRemove:M}=await Ie(async()=>{const{updateDoc:C,doc:O,arrayRemove:_}=await import("./firebase-D5dyMTPx.js").then(D=>D.B);return{updateDoc:C,doc:O,arrayRemove:_}},[]),{db:E}=await Ie(async()=>{const{db:C}=await import("./index-C09NoPC0.js").then(O=>O.cq);return{db:C}},__vite__mapDeps([0,1,2,3,4]));await P(T(E,"users",e),{tags:M(A)}),o({...i,tags:i.tags.filter(C=>C!==A)}),te.success("Tag removed")}catch(P){J.error("Error removing tag",P),te.error("Failed to remove tag")}}const v=A=>{switch(A){case"high-value":return"bg-yellow-500/20 border-yellow-500/40 text-yellow-400";case"vip":return"bg-purple-500/20 border-purple-500/40 text-purple-400";case"at-risk":return"bg-red-500/20 border-red-500/40 text-red-400";case"frequent-buyer":return"bg-green-500/20 border-green-500/40 text-green-400";case"first-time":return"bg-blue-500/20 border-blue-500/40 text-blue-400";case"recent":return"bg-sky-500/20 border-sky-500/40 text-sky-400";default:return"bg-gray-500/20 border-gray-500/40 text-gray-400"}},N=A=>A>=4?"text-green-400":A>=3?"text-yellow-400":"text-red-400";return a?r.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center",children:r.jsx(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-8",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-sky-500"}),r.jsx("span",{className:"text-white",children:"Loading customer profile..."})]})})}):i?r.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 overflow-y-auto",children:r.jsx("div",{className:"min-h-screen p-4 flex items-start justify-center",children:r.jsxs("div",{className:"w-full max-w-6xl my-8",children:[r.jsx(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6 mb-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 rounded-full bg-sky-500/20 border border-sky-500/30",children:r.jsx(Po,{className:"w-8 h-8 text-sky-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:i.name}),r.jsx("p",{className:"text-gray-400",children:i.email}),r.jsx("div",{className:"flex items-center gap-2 mt-2",children:i.tags.map(A=>r.jsx(H,{className:v(A),children:A},A))})]})]}),r.jsx($,{onClick:t,variant:"outline",size:"icon",className:"border-white/20 text-white hover:bg-white/10",children:r.jsx(lk,{className:"w-5 h-5"})})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[r.jsx(wn,{className:"w-5 h-5 text-sky-400"}),"Contact Information"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[r.jsx(wn,{className:"w-4 h-4 text-gray-400 mt-0.5"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400",children:"Email"}),r.jsx("div",{className:"text-white",children:i.email})]})]}),i.phone&&r.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[r.jsx(EP,{className:"w-4 h-4 text-gray-400 mt-0.5"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400",children:"Phone"}),r.jsx("div",{className:"text-white",children:i.phone})]})]}),i.address&&r.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[r.jsx(Hx,{className:"w-4 h-4 text-gray-400 mt-0.5"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400",children:"Address"}),r.jsx("div",{className:"text-white",children:i.address})]})]}),i.createdAt&&r.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[r.jsx(jl,{className:"w-4 h-4 text-gray-400 mt-0.5"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-400",children:"Member Since"}),r.jsx("div",{className:"text-white",children:us(i.createdAt,"MMM dd, yyyy")})]})]})]})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[r.jsx(zt,{className:"w-5 h-5 text-green-400"}),"Customer Value"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Lifetime Value"}),r.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["£",i.totalSpent.toLocaleString()]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Total Orders"}),r.jsx("div",{className:"text-xl font-semibold text-white",children:i.totalOrders})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Avg Order"}),r.jsxs("div",{className:"text-xl font-semibold text-white",children:["£",i.avgOrderValue.toFixed(0)]})]})]}),i.lastOrderDate&&r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Last Order"}),r.jsx("div",{className:"text-white",children:us(i.lastOrderDate,"MMM dd, yyyy")})]})]})]}),i.rfmScore&&r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[r.jsx(Ra,{className:"w-5 h-5 text-purple-400"}),"RFM Score"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Recency"}),r.jsxs("span",{className:`text-lg font-bold ${N(i.rfmScore.recency)}`,children:[i.rfmScore.recency,"/5"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Frequency"}),r.jsxs("span",{className:`text-lg font-bold ${N(i.rfmScore.frequency)}`,children:[i.rfmScore.frequency,"/5"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Monetary"}),r.jsxs("span",{className:`text-lg font-bold ${N(i.rfmScore.monetary)}`,children:[i.rfmScore.monetary,"/5"]})]}),r.jsx("div",{className:"pt-2 border-t border-white/10",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-white font-semibold",children:"Total Score"}),r.jsxs("span",{className:"text-2xl font-bold text-sky-400",children:[i.rfmScore.total,"/15"]})]})})]})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[r.jsx(vc,{className:"w-5 h-5 text-blue-400"}),"Tags"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"flex flex-wrap gap-2",children:i.tags.map(A=>r.jsxs(H,{className:`${v(A)} group`,children:[A,r.jsx("button",{onClick:()=>S(A),className:"ml-2 hover:text-red-400",children:"×"})]},A))}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(xe,{value:m,onChange:A=>g(A.target.value),onKeyDown:A=>A.key==="Enter"&&w(),placeholder:"Add tag...",className:"bg-white/5 border-white/10 text-white"}),r.jsx($,{onClick:w,variant:"outline",size:"sm",className:"border-sky-500/30 text-sky-400 hover:bg-sky-500/10",children:"Add"})]})]})]})]}),r.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[r.jsx(In,{className:"w-5 h-5 text-green-400"}),"Order History"]}),l.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-400",children:[r.jsx(In,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"No orders found"}),r.jsx("p",{className:"text-sm",children:"Order history will appear here"})]}):r.jsx("div",{className:"space-y-3",children:l.map(A=>r.jsxs("div",{className:"p-3 rounded-lg bg-white/5 border border-white/10",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"font-semibold text-white",children:A.orderNumber}),r.jsx(H,{className:"bg-sky-500/20 border-sky-500/30 text-sky-400",children:A.status})]}),r.jsxs("div",{className:"text-sm text-gray-400",children:[us(A.createdAt,"MMM dd, yyyy")," • £",A.total.toFixed(2)]})]},A.id))})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[r.jsx(na,{className:"w-5 h-5 text-blue-400"}),"Support Tickets"]}),d.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-400",children:[r.jsx(na,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"No support tickets"})]}):r.jsx("div",{className:"space-y-3",children:d.map(A=>r.jsxs("div",{className:"p-3 rounded-lg bg-white/5 border border-white/10",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"font-semibold text-white",children:A.subject}),r.jsx(H,{className:"bg-yellow-500/20 border-yellow-500/30 text-yellow-400",children:A.status})]}),r.jsx("div",{className:"text-sm text-gray-400",children:us(A.createdAt,"MMM dd, yyyy")})]},A.id))})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[r.jsx(na,{className:"w-5 h-5 text-purple-400"}),"Internal Notes"]}),r.jsx(Mn,{value:h,onChange:A=>f(A.target.value),placeholder:"Add internal notes about this customer...",rows:6,className:"bg-white/5 border-white/10 text-white mb-3"}),r.jsx($,{onClick:y,disabled:p,className:"bg-gradient-to-r from-sky-600 to-blue-600",children:p?r.jsxs(r.Fragment,{children:[r.jsx($o,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Od,{className:"w-4 h-4 mr-2"}),"Save Notes"]})})]})]})]})]})})}):null}const KO=({order:e})=>{var o,l,c,d,u,h,f;const t="displayId"in e?e:cC(e),n=k.useRef(null),a=()=>{var w;const m=n.current;if(!m){alert("Sheet content not ready yet.");return}const g=m.cloneNode(!0);g.querySelectorAll(".no-print").forEach(S=>S.remove());const p=g.innerHTML,x=Array.from(document.querySelectorAll('style,link[rel="stylesheet"]')).map(S=>S.outerHTML).join(""),b=`<!DOCTYPE html><html><head><meta charset='utf-8'/><title>Production Sheet - ${t.displayId}</title>${x}
    <style>@media print{.no-print{display:none!important}}body{background:#0a0a0a;color:#fff;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Fira Sans','Droid Sans','Helvetica Neue',Arial,sans-serif;margin:0;padding:0;} .sheet-wrapper{background:#111827;border:1px solid rgba(255,255,255,0.08);border-radius:12px;box-shadow:0 8px 24px -6px rgba(0,0,0,0.5);padding:20px;max-width:190mm;margin:0 auto;} table th{background:linear-gradient(to right,#0ea5e9,#2563eb);color:#fff;} table td,table th{font-size:12px;} footer{margin-top:14mm;font-size:11px;opacity:.85;} </style>
    <script>window.onload=function(){setTimeout(function(){window.print();},200);};window.onafterprint=function(){try{window.close();}catch(e){}};<\/script>
    </head><body><div class='sheet-wrapper'>${p}</div><footer><img src='/vortexpcs-logo-dark.png' alt='Vortex PCs' style='height:34px;object-fit:contain;display:block;margin:5mm auto 3mm;' onerror="this.style.display='none'"/>Vortex PCs Ltd - Custom PCs Built to Order<br/>This sheet accompanies the completed system for warranty records</footer></body></html>`;let y=null;try{y=window.open("","productionSheetPrint","width=900,height=1100")}catch(S){J.error("Print window blocked",S)}if(y){try{y.document.open(),y.document.write(b),y.document.close()}catch(S){J.error("Write to print window failed",S)}return}try{const S=document.createElement("iframe");S.style.position="fixed",S.style.right="0",S.style.bottom="0",S.style.width="0",S.style.height="0",S.style.border="0",document.body.appendChild(S);const v=S.contentDocument||((w=S.contentWindow)==null?void 0:w.document);v&&(v.open(),v.write(b),v.close(),setTimeout(()=>{var N;return(N=S.contentWindow)==null?void 0:N.print()},250))}catch{alert("Unable to open print view. Popup blocker may be active.")}},s=()=>{var w,S;const m=[],g=v=>`"${String(v??"").replace(/"/g,'""')}"`;m.push("Order Metadata"),m.push([g("Display ID"),g("Customer Name"),g("Email"),g("Status"),g("Order Date"),g("Estimated Completion"),g("Payment Method"),g("Total (£)"),g("Shipping Method"),g("Shipping Cost (£)"),g("Updated At")].join(",")),m.push([g(t.displayId),g(((w=t.original)==null?void 0:w.customerName)||""),g(((S=t.original)==null?void 0:S.customerEmail)||""),g(t.status),g(t.orderDate?new Date(t.orderDate).toISOString():""),g(t.estimatedCompletion?new Date(t.estimatedCompletion).toISOString():""),g(t.paymentMethod||""),g(t.total.toFixed(2)),g(t.shippingMethod||""),g(typeof t.shippingCost=="number"?t.shippingCost.toFixed(2):""),g(t.updatedAt?new Date(t.updatedAt).toISOString():"")].join(",")),m.push(""),m.push("Items"),m.push(["Component","Category","Qty","Unit Price (£)","Line Total (£)"].map(g).join(",")),t.items.forEach(v=>{const N=v.quantity?v.lineTotal/v.quantity:v.lineTotal;m.push([g(v.name),g(v.category||""),g(v.quantity),g(N.toFixed(2)),g(v.lineTotal.toFixed(2))].join(","))});const p=m.join(`\r
`),x=new Blob([p],{type:"text/csv;charset=utf-8;"}),b=URL.createObjectURL(x),y=document.createElement("a");y.href=b,y.download=`production-sheet-${t.displayId}.csv`,y.click(),setTimeout(()=>URL.revokeObjectURL(b),4e3)},i=async()=>{var m,g,p,x;try{const{jsPDF:b}=await Ie(async()=>{const{jsPDF:M}=await import("./jspdf.es.min-C3WVfA9O.js").then(E=>E.j);return{jsPDF:M}},__vite__mapDeps([5,1,2])),y=new b({orientation:"portrait",unit:"mm",format:"a4"}),w=14,S=196;let v=20;y.setFillColor(14,165,233),y.rect(0,0,210,15,"F"),y.setTextColor(255,255,255),y.setFontSize(18),y.setFont("helvetica","bold"),y.text("VORTEX PCS",w,10),y.setFontSize(10),y.setFont("helvetica","normal"),y.text("Production Sheet",S-40,10),v=22,y.setTextColor(0,0,0),y.setFontSize(14),y.setFont("helvetica","bold"),y.text(`Order #${t.displayId}`,w,v),y.setFontSize(10),y.setFont("helvetica","normal");const N=t.orderDate?new Date(t.orderDate).toLocaleDateString("en-GB"):"N/A";y.text(N,S-y.getTextWidth(N),v),v+=10,y.setFillColor(240,240,240),y.rect(w-2,v-5,S-w+4,8,"F"),y.setFontSize(11),y.setFont("helvetica","bold"),y.text("CUSTOMER INFORMATION",w,v),v+=8,y.setFontSize(9),y.setFont("helvetica","normal"),y.text(`Name: ${((m=t.original)==null?void 0:m.customerName)||"N/A"}`,w,v),v+=5,y.text(`Email: ${((g=t.original)==null?void 0:g.customerEmail)||"N/A"}`,w,v),v+=5;const A=t.address||((p=t.original)==null?void 0:p.address);A?(y.text(`Address: ${A.line1||""}${A.line2?", "+A.line2:""}, ${A.city||""}, ${A.postcode||""}, ${A.country||""}`,w,v,{maxWidth:S-w-10}),v+=10):v+=5,y.setFillColor(240,240,240),y.rect(w-2,v-5,S-w+4,8,"F"),y.setFontSize(11),y.setFont("helvetica","bold"),y.text("ORDER DETAILS",w,v),v+=8,y.setFontSize(9),y.setFont("helvetica","normal"),y.text(`Status: ${t.status.toUpperCase()}`,w,v),y.text(`Payment: ${t.paymentMethod||"N/A"}`,w+60,v),v+=5,y.text(`Total: £${t.total.toFixed(2)}`,w,v),y.text(`Shipping: ${t.shippingMethod||"N/A"}`,w+60,v),v+=10;const P=t.notes||((x=t.original)==null?void 0:x.notes)||"";if(P){y.setFontSize(9),y.setFont("helvetica","bold"),y.text("Notes:",w,v),v+=5,y.setFont("helvetica","normal");const M=y.splitTextToSize(P,S-w-10);y.text(M,w,v),v+=M.length*4+5}y.setFillColor(240,240,240),y.rect(w-2,v-5,S-w+4,8,"F"),y.setFontSize(11),y.setFont("helvetica","bold"),y.text("COMPONENTS",w,v),v+=8,y.setFillColor(14,165,233),y.rect(w,v-4,S-w,7,"F"),y.setTextColor(255,255,255),y.setFontSize(8),y.setFont("helvetica","bold"),y.text("Component",w+2,v),y.text("Category",w+95,v),y.text("Qty",w+130,v),y.text("Price",w+145,v),v+=6,y.setTextColor(0,0,0),y.setFont("helvetica","normal"),t.items.forEach((M,E)=>{v>270&&(y.addPage(),v=20),E%2===0&&(y.setFillColor(250,250,250),y.rect(w,v-4,S-w,6,"F")),y.setFontSize(8);const C=M.name.length>50?M.name.slice(0,47)+"...":M.name;y.text(C,w+2,v),y.text((M.category||"").slice(0,15),w+95,v),y.text(String(M.quantity),w+130,v),y.text(`£${M.lineTotal.toFixed(2)}`,w+145,v),v+=6}),v+=2,y.setDrawColor(0),y.line(w+130,v-2,S-2,v-2),y.setFont("helvetica","bold"),y.setFontSize(10),y.text("TOTAL:",w+95,v+2),y.text(`£${t.total.toFixed(2)}`,w+145,v+2);const T=y.getNumberOfPages();for(let M=1;M<=T;M++)y.setPage(M),y.setFontSize(8),y.setTextColor(128,128,128),y.setFont("helvetica","normal"),y.text(`Generated by Vortex PCs Production System - Page ${M} of ${T}`,105,290,{align:"center"});y.save(`production-sheet-${t.displayId}.pdf`)}catch(b){J.error("PDF export failed",b),alert("PDF export failed. See console for details.")}};return r.jsx(r.Fragment,{children:r.jsxs("div",{id:"production-sheet-root",ref:n,className:"production-sheet bg-white text-black p-8 max-w-[210mm] mx-auto",children:[r.jsx("div",{className:"border-b-4 border-sky-600 pb-4 mb-6",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex flex-col items-start",children:[r.jsx("img",{src:"/vortexpcs-logo-dark.png",alt:"Vortex PCs Logo",className:"w-32 h-auto object-contain mb-1",onError:m=>{m.currentTarget.src="/vortexpcs-logo.png"}}),r.jsx("p",{className:"text-base text-gray-600 font-semibold",children:"Order Completion & QA Checklist"})]}),r.jsxs("div",{className:"text-right space-y-1",children:[r.jsxs("div",{className:"text-2xl font-bold",children:["#",t.displayId]}),r.jsx("div",{className:"text-sm text-gray-600",children:t.orderDate?new Date(t.orderDate).toLocaleDateString("en-GB"):"N/A"}),r.jsxs("div",{className:"text-xs text-gray-500",children:["Serial: ",((o=t.original)==null?void 0:o.serialNumber)||"TBD"]}),r.jsxs("div",{className:"text-xs text-gray-500",children:["Build Tech: ",((l=t.original)==null?void 0:l.buildTechnician)||"TBD"]})]})]})}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-lg font-bold bg-gray-200 px-3 py-2 mb-3",children:"CUSTOMER INFORMATION"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 px-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold",children:"Name:"}),r.jsx("p",{className:"text-base border-b border-gray-300 pb-1",children:((c=t.original)==null?void 0:c.customerName)||"N/A"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold",children:"Email:"}),r.jsx("p",{className:"text-base border-b border-gray-300 pb-1",children:((d=t.original)==null?void 0:d.customerEmail)||"N/A"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("p",{className:"text-sm font-semibold",children:"Delivery Address:"}),r.jsx("p",{className:"text-base border-b border-gray-300 pb-1",children:t.address?`${t.address.line1||""}${t.address.line2?", "+t.address.line2:""}, ${t.address.city||""}, ${t.address.postcode||""}, ${t.address.country||""}`:(u=t.original)!=null&&u.address?`${t.original.address.line1||""}${t.original.address.line2?", "+t.original.address.line2:""}, ${t.original.address.city||""}, ${t.original.address.postcode||""}, ${t.original.address.country||""}`:"N/A"})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-lg font-bold bg-gray-200 px-3 py-2 mb-3",children:"ORDER DETAILS"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 px-3 mb-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold",children:"Order Status:"}),r.jsx("p",{className:"text-base border-b border-gray-300 pb-1 uppercase",children:t.status})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold",children:"Payment Method:"}),r.jsx("p",{className:"text-base border-b border-gray-300 pb-1",children:t.paymentMethod||"N/A"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold",children:"Estimated Completion:"}),r.jsx("p",{className:"text-base border-b border-gray-300 pb-1",children:t.estimatedCompletion?new Date(t.estimatedCompletion).toLocaleDateString("en-GB"):"TBD"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold",children:"Total Value:"}),r.jsxs("p",{className:"text-base border-b border-gray-300 pb-1 font-bold",children:["£",t.total.toFixed(2)]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold",children:"Shipping Method:"}),r.jsx("p",{className:"text-base border-b border-gray-300 pb-1",children:t.shippingMethod||"N/A"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold",children:"Shipping Cost:"}),r.jsx("p",{className:"text-base border-b border-gray-300 pb-1",children:typeof t.shippingCost=="number"?`£${t.shippingCost.toFixed(2)}`:"N/A"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold",children:"Updated At:"}),r.jsx("p",{className:"text-base border-b border-gray-300 pb-1",children:t.updatedAt?new Date(t.updatedAt).toLocaleDateString("en-GB"):"N/A"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold",children:"Notes:"}),r.jsx("p",{className:"text-base border-b border-gray-300 pb-1",children:t.notes||((h=t.original)==null?void 0:h.notes)||"None"})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-lg font-bold bg-gray-200 px-3 py-2 mb-3",children:"COMPONENTS CHECKLIST"}),r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-100",children:[r.jsx("th",{className:"border border-gray-400 px-2 py-2 text-left text-sm w-12",children:"✓"}),r.jsx("th",{className:"border border-gray-400 px-2 py-2 text-left text-sm",children:"Component"}),r.jsx("th",{className:"border border-gray-400 px-2 py-2 text-center text-sm w-16",children:"Qty"}),r.jsx("th",{className:"border border-gray-400 px-2 py-2 text-right text-sm w-24",children:"Price"})]})}),r.jsx("tbody",{children:t.items.map((m,g)=>r.jsxs("tr",{children:[r.jsx("td",{className:"border border-gray-400 px-2 py-3 text-center",children:r.jsx("div",{className:"w-5 h-5 border-2 border-gray-400 mx-auto"})}),r.jsx("td",{className:"border border-gray-400 px-2 py-2 text-sm",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{children:m.name}),m.category&&r.jsx("span",{className:"text-[10px] uppercase tracking-wide text-gray-600",children:m.category})]})}),r.jsx("td",{className:"border border-gray-400 px-2 py-2 text-center text-sm",children:m.quantity}),r.jsxs("td",{className:"border border-gray-400 px-2 py-2 text-right text-sm",children:["£",m.lineTotal.toFixed(2)]})]},g))})]})]}),r.jsxs("div",{className:"mb-6 page-break",children:[r.jsx("h2",{className:"text-lg font-bold bg-gray-200 px-3 py-2 mb-3",children:"BUILD PROCESS CHECKLIST"}),r.jsx("div",{className:"space-y-2 px-3",children:["Install CPU and apply thermal paste","Install CPU cooler and verify mounting","Install RAM modules in correct slots","Mount motherboard in case with standoffs","Install PSU and route power cables","Install storage drives (M.2/SSD/HDD)","Install GPU and secure with bracket","Connect all power cables (24-pin, 8-pin CPU, PCIe)","Connect front panel headers (power, reset, USB, audio)","Install case fans and connect to headers/hub","Cable management and tie down","Install RGB/lighting components"].map((m,g)=>r.jsxs("div",{className:"flex items-start space-x-3 py-1",children:[r.jsx("div",{className:"w-5 h-5 border-2 border-gray-400 mt-0.5 flex-shrink-0"}),r.jsx("span",{className:"text-sm",children:m})]},g))})]}),r.jsxs("div",{className:"mb-6 page-break",children:[r.jsx("h2",{className:"text-lg font-bold bg-gray-200 px-3 py-2 mb-3",children:"QUALITY CONTROL & TESTING"}),r.jsx("div",{className:"space-y-2 px-3",children:["POST test - System powers on and displays BIOS","RAM detection - All modules recognised at correct speed","Storage detection - All drives visible in BIOS","GPU detection - Graphics card recognised","BIOS configuration - XMP/DOCP enabled, boot order set","Windows installation - OS installed and activated","Driver installation - Chipset, GPU, audio drivers","Stress test - CPU (15 min) and GPU (15 min)","Temperature check - All components within spec","RGB/lighting test - All effects working","Colour calibration - Display output validated (if applicable)","Port functionality - USB, audio, network tested","Final visual inspection - Cable routing, no damage"].map((m,g)=>r.jsxs("div",{className:"flex items-start space-x-3 py-1",children:[r.jsx("div",{className:"w-5 h-5 border-2 border-gray-400 mt-0.5 flex-shrink-0"}),r.jsx("span",{className:"text-sm",children:m})]},g))})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-lg font-bold bg-gray-200 px-3 py-2 mb-3",children:"TECHNICIAN NOTES"}),r.jsx("div",{className:"border-2 border-gray-300 min-h-[100px] p-3 text-sm",children:t.notes||((f=t.original)==null?void 0:f.notes)||""})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-6",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold mb-2",children:"Built By:"}),r.jsx("div",{className:"border-b-2 border-gray-400 pb-1 mb-1"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Name"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold mb-2",children:"Date Completed:"}),r.jsx("div",{className:"border-b-2 border-gray-400 pb-1 mb-1"}),r.jsx("p",{className:"text-xs text-gray-600",children:"DD/MM/YYYY"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold mb-2",children:"QC Checked By:"}),r.jsx("div",{className:"border-b-2 border-gray-400 pb-1 mb-1"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Name"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold mb-2",children:"QC Date:"}),r.jsx("div",{className:"border-b-2 border-gray-400 pb-1 mb-1"}),r.jsx("p",{className:"text-xs text-gray-600",children:"DD/MM/YYYY"})]})]}),r.jsxs("div",{className:"border-t-2 border-gray-300 pt-4 text-center text-xs text-gray-600 no-print",children:[r.jsx("p",{children:"Vortex PCs Ltd - Custom PCs Built to Order"}),r.jsx("p",{className:"mt-1",children:"This sheet accompanies the completed system for warranty records"})]}),r.jsx("div",{className:"no-print mt-8 text-center",children:r.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[r.jsx("button",{onClick:a,className:"bg-gradient-to-r from-sky-600 to-blue-600 hover:from-sky-500 hover:to-blue-500 text-white font-semibold py-3 px-6 rounded-lg shadow-lg transition-all duration-300 hover:scale-105",children:"🖨️ Print"}),r.jsx("button",{onClick:i,className:"bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 text-white font-semibold py-3 px-6 rounded-lg shadow-lg transition-all duration-300 hover:scale-105",children:"📄 Download PDF"}),r.jsx("button",{onClick:s,className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-semibold py-3 px-6 rounded-lg shadow-lg transition-all duration-300 hover:scale-105",children:"📊 Download CSV"})]})})]})})};function YO(){const[e,t]=k.useState([]),[n,a]=k.useState([]),[s,i]=k.useState({totalItems:0,lowStock:0,outOfStock:0,totalValue:0}),[o,l]=k.useState(!0),[c,d]=k.useState(""),[u,h]=k.useState("all"),[f,m]=k.useState(null),[g,p]=k.useState(!1),[x,b]=k.useState(1),[y,w]=k.useState(10),S=k.useCallback(()=>{let O=[...e];if(c){const _=c.toLowerCase();O=O.filter(D=>D.name.toLowerCase().includes(_)||D.ean.toLowerCase().includes(_)||D.category.toLowerCase().includes(_))}u==="low"?O=O.filter(_=>_.stock<=_.reorderPoint&&_.stock>0):u==="out"&&(O=O.filter(_=>_.stock===0)),a(O)},[u,e,c]);k.useEffect(()=>{v()},[]),k.useEffect(()=>{S()},[S]);async function v(){try{l(!0);const[O,_]=await Promise.all([DP(),MP()]),D=[...O.map(W=>{var ce;return{id:W.id,name:W.name,ean:W.ean||W.id.toUpperCase(),category:W.category||"Components",stock:W.stockLevel??(W.inStock?10:0),reorderPoint:5,price:W.price||0,supplier:W.supplierName||"Spire",lastRestocked:null,notes:W.description||"",thumbnail:(ce=W.images)==null?void 0:ce[0],brand:W.brand,costPrice:W.costPrice,profitMargin:W.profitMargin}}),..._.map(W=>{var ce;return{id:W.id,name:W.name,ean:W.ean||W.id.toUpperCase(),category:"Optional Extras",stock:W.stockLevel??(W.inStock?10:0),reorderPoint:5,price:W.price||0,supplier:W.supplierName||"Target",lastRestocked:null,notes:W.description||"",thumbnail:(ce=W.images)==null?void 0:ce[0],brand:W.brand,costPrice:W.costPrice,profitMargin:W.profitMargin}})];t(D);const L=D.reduce((W,ce)=>W+ce.stock*ce.price,0),V=D.filter(W=>W.stock<=W.reorderPoint&&W.stock>0).length,X=D.filter(W=>W.stock===0).length;i({totalItems:D.length,lowStock:V,outOfStock:X,totalValue:L}),D.length===0?te.info("No inventory items found in Contentful",{duration:5e3}):te.success(`Loaded ${D.length} items from Contentful`)}catch(O){J.error("Error fetching inventory",O),te.error("Failed to load inventory from Contentful")}finally{l(!1)}}async function N(O){te.info("Please edit items in your Contentful dashboard",{duration:4e3}),p(!1),m(null)}const A=O=>O.stock===0?r.jsx(H,{className:"bg-red-500/20 border-red-500/40 text-red-400",children:"Out of Stock"}):O.stock<=O.reorderPoint?r.jsx(H,{className:"bg-yellow-500/20 border-yellow-500/40 text-yellow-400",children:"Low Stock"}):r.jsx(H,{className:"bg-green-500/20 border-green-500/40 text-green-400",children:"In Stock"}),P=x*y,T=P-y,M=n.slice(T,P),E=Math.ceil(n.length/y),C=O=>b(O);return o?r.jsx("div",{className:"flex items-center justify-center p-12",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Bt,{className:"w-12 h-12 text-sky-400 animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400",children:"Loading inventory..."})]})}):!o&&e.length===0?r.jsx("div",{className:"flex items-center justify-center p-12",children:r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-8 max-w-lg text-center",children:[r.jsx(In,{className:"w-16 h-16 text-gray-400 mx-auto mb-4 opacity-50"}),r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No Inventory Items"}),r.jsx("p",{className:"text-gray-400 mb-6",children:"Get started by adding your first inventory item in Firebase Console."}),r.jsxs("div",{className:"space-y-3 text-left bg-white/5 rounded-lg p-4 mb-4",children:[r.jsx("p",{className:"text-sm text-gray-300 font-semibold",children:"Quick Setup:"}),r.jsxs("ol",{className:"text-sm text-gray-400 space-y-2 list-decimal list-inside",children:[r.jsx("li",{children:"Go to Firebase Console → Firestore Database"}),r.jsxs("li",{children:["Create collection:"," ",r.jsx("code",{className:"text-sky-400",children:"inventory"})]}),r.jsxs("li",{children:["Add a document with these fields:",r.jsxs("ul",{className:"ml-6 mt-1 space-y-1 list-disc list-inside text-xs",children:[r.jsx("li",{children:"name (string): Product name"}),r.jsx("li",{children:"sku (string): Stock keeping unit"}),r.jsx("li",{children:"category (string): Product category"}),r.jsx("li",{children:"stock (number): Current quantity"}),r.jsx("li",{children:"reorderPoint (number): Min stock level"}),r.jsx("li",{children:"price (number): Unit price"})]})]})]})]}),r.jsxs($,{onClick:v,className:"bg-gradient-to-r from-sky-600 to-blue-600",children:[r.jsx(Bt,{className:"w-4 h-4 mr-2"}),"Refresh Inventory"]})]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Total Items"}),r.jsx("p",{className:"text-2xl font-bold text-white",children:s.totalItems})]}),r.jsx(In,{className:"w-8 h-8 text-blue-400"})]})}),r.jsx(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Low Stock"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:s.lowStock})]}),r.jsx(mt,{className:"w-8 h-8 text-yellow-400"})]})}),r.jsx(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Out of Stock"}),r.jsx("p",{className:"text-2xl font-bold text-red-400",children:s.outOfStock})]}),r.jsx(ui,{className:"w-8 h-8 text-red-400"})]})}),r.jsx(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Total Value"}),r.jsxs("p",{className:"text-2xl font-bold text-green-400",children:["£",s.totalValue.toLocaleString()]})]}),r.jsx(S0,{className:"w-8 h-8 text-green-400"})]})})]}),r.jsx(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-4",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:[r.jsx("div",{className:"flex-1 max-w-md",children:r.jsx(xe,{value:c,onChange:O=>d(O.target.value),placeholder:"Search by name, EAN, or category...",className:"bg-white/5 border-white/10 text-white"})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx($,{variant:u==="all"?"default":"outline",onClick:()=>h("all"),className:u==="all"?"bg-gradient-to-r from-sky-600 to-blue-600":"border-white/20 text-white hover:bg-white/10",children:"All Items"}),r.jsx($,{variant:u==="low"?"default":"outline",onClick:()=>h("low"),className:u==="low"?"bg-gradient-to-r from-yellow-600 to-orange-600":"border-white/20 text-white hover:bg-white/10",children:"Low Stock"}),r.jsx($,{variant:u==="out"?"default":"outline",onClick:()=>h("out"),className:u==="out"?"bg-gradient-to-r from-red-600 to-pink-600":"border-white/20 text-white hover:bg-white/10",children:"Out of Stock"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs($,{onClick:()=>{window.open("https://app.contentful.com/","_blank"),te.info("Opening Contentful dashboard to add items")},className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500",children:[r.jsx(dn,{className:"w-4 h-4 mr-2"}),"Add in Contentful"]}),r.jsxs($,{onClick:v,variant:"outline",className:"border-sky-500/30 text-sky-400 hover:bg-sky-500/10",children:[r.jsx(Bt,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]})}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-white/10",children:[r.jsx("th",{className:"text-left p-4 text-sm font-semibold text-gray-300",children:"Product"}),r.jsx("th",{className:"text-left p-4 text-sm font-semibold text-gray-300",children:"Category"}),r.jsx("th",{className:"text-left p-4 text-sm font-semibold text-gray-300",children:"Brand"}),r.jsx("th",{className:"text-left p-4 text-sm font-semibold text-gray-300",children:"Price"}),r.jsx("th",{className:"text-left p-4 text-sm font-semibold text-gray-300 whitespace-nowrap",children:"Stock Qty"}),r.jsx("th",{className:"text-left p-4 text-sm font-semibold text-gray-300",children:"Supplier"}),r.jsx("th",{className:"text-left p-4 text-sm font-semibold text-gray-300 whitespace-nowrap",children:"Cost Price"}),r.jsx("th",{className:"text-left p-4 text-sm font-semibold text-gray-300",children:"Profit"}),r.jsx("th",{className:"text-left p-4 text-sm font-semibold text-gray-300",children:"Margin"}),r.jsx("th",{className:"text-left p-4 text-sm font-semibold text-gray-300",children:"Status"}),r.jsx("th",{className:"text-right p-4 text-sm font-semibold text-gray-300",children:"Actions"})]})}),r.jsx("tbody",{children:M.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:11,className:"p-8 text-center text-gray-400",children:[r.jsx(In,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"No items found"})]})}):M.map(O=>{const _=O.costPrice?O.price-O.costPrice:0,D=O.profitMargin||(O.costPrice?_/O.price*100:0);return r.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[O.thumbnail?r.jsx("img",{src:O.thumbnail,alt:O.name,className:"w-12 h-12 rounded-lg object-cover bg-white/5"}):r.jsx("div",{className:"w-12 h-12 rounded-lg bg-white/5 flex items-center justify-center",children:r.jsx(In,{className:"w-6 h-6 text-gray-500"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-white",children:O.name}),r.jsx("div",{className:"text-xs text-gray-400",children:O.ean})]})]})}),r.jsx("td",{className:"p-4",children:r.jsx(H,{className:"bg-blue-500/20 border-blue-500/40 text-blue-400",children:O.category})}),r.jsx("td",{className:"p-4 text-sm text-gray-300",children:O.brand||"-"}),r.jsxs("td",{className:"p-4 text-sm text-green-400 font-semibold",children:["£",O.price.toFixed(2)]}),r.jsx("td",{className:"p-4 text-sm text-white font-medium",children:O.stock}),r.jsx("td",{className:"p-4 text-sm text-gray-300",children:O.supplier}),r.jsx("td",{className:"p-4 text-sm text-orange-400",children:O.costPrice?`£${O.costPrice.toFixed(2)}`:"-"}),r.jsx("td",{className:"p-4 text-sm text-cyan-400 font-semibold",children:O.costPrice?`£${_.toFixed(2)}`:"-"}),r.jsx("td",{className:"p-4",children:r.jsx("span",{className:`text-sm font-semibold ${D>30?"text-green-400":D>15?"text-yellow-400":"text-orange-400"}`,children:D>0?`${D.toFixed(1)}%`:"-"})}),r.jsx("td",{className:"p-4",children:A(O)}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx($,{size:"sm",variant:"outline",onClick:()=>{m(O),p(!0)},className:"border-sky-500/30 text-sky-400 hover:bg-sky-500/10",title:"Edit",children:r.jsx(A0,{className:"w-4 h-4"})}),r.jsx($,{size:"sm",variant:"outline",className:"border-white/10 text-gray-400 hover:bg-white/5",title:"Lock",children:r.jsx(mt,{className:"w-4 h-4"})})]})})]},O.id)})})]})}),E>1&&r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-white/10",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"text-sm text-gray-400",children:["Showing ",T+1," to"," ",Math.min(P,n.length)," of"," ",n.length," items"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Show:"}),r.jsxs(dr,{value:y.toString(),onValueChange:O=>{w(Number(O)),b(1)},children:[r.jsx(ur,{className:"w-[70px] h-8 bg-white/5 border-white/10 text-white",children:r.jsx(hr,{})}),r.jsxs(fr,{className:"bg-gray-900 border-white/10",children:[r.jsx(Oe,{value:"5",className:"text-white hover:bg-white/10",children:"5"}),r.jsx(Oe,{value:"10",className:"text-white hover:bg-white/10",children:"10"}),r.jsx(Oe,{value:"25",className:"text-white hover:bg-white/10",children:"25"}),r.jsx(Oe,{value:"50",className:"text-white hover:bg-white/10",children:"50"}),r.jsx(Oe,{value:"100",className:"text-white hover:bg-white/10",children:"100"})]})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx($,{size:"sm",variant:"outline",onClick:()=>C(x-1),disabled:x===1,className:"border-white/10 text-white hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:E},(O,_)=>_+1).filter(O=>O===1||O===E||Math.abs(O-x)<=1).map((O,_,D)=>{const L=_>0&&O-D[_-1]>1;return r.jsxs("div",{className:"flex gap-2",children:[L&&r.jsx("span",{className:"px-3 py-1 text-gray-400",children:"..."}),r.jsx($,{size:"sm",variant:x===O?"default":"outline",onClick:()=>C(O),className:x===O?"bg-gradient-to-r from-sky-600 to-blue-600":"border-white/10 text-white hover:bg-white/10",children:O})]},O)}),r.jsx($,{size:"sm",variant:"outline",onClick:()=>C(x+1),disabled:x===E,className:"border-white/10 text-white hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}),r.jsx(Et,{open:g,onOpenChange:p,children:r.jsxs(Dt,{className:"bg-gray-900 border-white/10 text-white max-w-2xl",children:[r.jsx($t,{children:r.jsx(Lt,{children:"Edit Inventory Item"})}),f&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400 mb-1 block",children:"Product Name"}),r.jsx(xe,{value:f.name,onChange:O=>m({...f,name:O.target.value}),className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400 mb-1 block",children:"EAN"}),r.jsx(xe,{value:f.ean,onChange:O=>m({...f,ean:O.target.value}),className:"bg-white/5 border-white/10 text-white"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400 mb-1 block",children:"Category"}),r.jsx(xe,{value:f.category,onChange:O=>m({...f,category:O.target.value}),className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400 mb-1 block",children:"Supplier"}),r.jsx(xe,{value:f.supplier,onChange:O=>m({...f,supplier:O.target.value}),className:"bg-white/5 border-white/10 text-white"})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400 mb-1 block",children:"Current Stock"}),r.jsx(xe,{type:"number",value:f.stock,onChange:O=>m({...f,stock:parseInt(O.target.value)||0}),className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400 mb-1 block",children:"Reorder Point"}),r.jsx(xe,{type:"number",value:f.reorderPoint,onChange:O=>m({...f,reorderPoint:parseInt(O.target.value)||5}),className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400 mb-1 block",children:"Price"}),r.jsx(xe,{type:"number",step:"0.01",value:f.price,onChange:O=>m({...f,price:parseFloat(O.target.value)||0}),className:"bg-white/5 border-white/10 text-white"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-400 mb-1 block",children:"Notes"}),r.jsx(Mn,{value:f.notes,onChange:O=>m({...f,notes:O.target.value}),rows:3,className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsxs($,{variant:"outline",onClick:()=>{p(!1),m(null)},className:"border-white/20 text-white hover:bg-white/10",children:[r.jsx(lk,{className:"w-4 h-4 mr-2"}),"Cancel"]}),r.jsxs($,{onClick:()=>N(),className:"bg-gradient-to-r from-sky-600 to-blue-600",children:[r.jsx(Od,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})]})})]})}function XO(){const[e,t]=k.useState([{id:"1",name:"Black Friday 2025",type:"email",status:"scheduled",segment:"All Customers",startDate:new Date("2025-11-29"),endDate:new Date("2025-11-30"),metrics:{sent:0,opened:0,clicked:0,converted:0,revenue:0},createdAt:new Date("2025-11-15")},{id:"2",name:"Gaming PC Launch",type:"email",status:"active",segment:"Gaming Enthusiasts",startDate:new Date("2025-11-20"),metrics:{sent:1234,opened:890,clicked:456,converted:89,revenue:156780},createdAt:new Date("2025-11-18")},{id:"3",name:"Holiday Banner",type:"banner",status:"active",segment:"All Visitors",startDate:new Date("2025-12-01"),endDate:new Date("2025-12-25"),metrics:{sent:8943,clicked:234},createdAt:new Date("2025-11-25")}]),[n,a]=k.useState(!1),[s,i]=k.useState(null),[o,l]=k.useState(""),[c,d]=k.useState("email"),[u,h]=k.useState("all"),[f,m]=k.useState(""),[g,p]=k.useState(""),x=P=>{switch(P){case"active":return"bg-green-500/20 text-green-400 border-green-500/30";case"scheduled":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"paused":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"completed":return"bg-gray-500/20 text-gray-400 border-gray-500/30";default:return"bg-orange-500/20 text-orange-400 border-orange-500/30"}},b=P=>{switch(P){case"email":return r.jsx(wn,{className:"w-4 h-4"});case"banner":return r.jsx(Lo,{className:"w-4 h-4"});case"discount":return r.jsx(Gx,{className:"w-4 h-4"})}},y=P=>{if(P.type==="email"&&P.metrics.sent){const T=P.metrics.opened?(P.metrics.opened/P.metrics.sent*100).toFixed(1):"0.0",M=P.metrics.clicked?(P.metrics.clicked/P.metrics.sent*100).toFixed(1):"0.0",E=P.metrics.converted?(P.metrics.converted/P.metrics.sent*100).toFixed(1):"0.0";return{openRate:T,clickRate:M,conversionRate:E}}return null},w=()=>{if(!(!o||!f)){if(s)t(e.map(P=>P.id===s.id?{...P,name:o,type:c,segment:u,startDate:new Date(f),endDate:g?new Date(g):void 0}:P));else{const P={id:Date.now().toString(),name:o,type:c,status:"draft",segment:u,startDate:new Date(f),endDate:g?new Date(g):void 0,metrics:{},createdAt:new Date};t([P,...e])}a(!1),S()}},S=()=>{l(""),d("email"),h("all"),m(""),p(""),i(null)},v=P=>{t(e.map(T=>T.id===P?{...T,status:T.status==="active"?"paused":"active"}:T))},N=P=>{confirm("Are you sure you want to delete this campaign?")&&t(e.filter(T=>T.id!==P))},A=P=>{i(P),l(P.name),d(P.type),h(P.segment),m(P.startDate.toISOString().split("T")[0]),p(P.endDate?P.endDate.toISOString().split("T")[0]:""),a(!0)};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[r.jsx(sn,{className:"w-6 h-6 text-sky-400"}),"Campaign Manager"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Create and manage marketing campaigns across channels"})]}),r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsxs($,{onClick:()=>a(!0),className:"bg-gradient-to-r from-sky-600 to-blue-600 hover:from-sky-500 hover:to-blue-500",title:"Create a new marketing campaign",children:[r.jsx(dn,{className:"w-4 h-4 mr-2"}),"New Campaign"]})}),r.jsx(gt,{children:r.jsx("p",{children:"Create a new marketing campaign"})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Active Campaigns"}),r.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:e.filter(P=>P.status==="active").length})]}),r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 flex items-center justify-center",children:r.jsx(Iy,{className:"w-6 h-6 text-white"})})]})}),r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Total Sent"}),r.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:e.reduce((P,T)=>P+(T.metrics.sent||0),0).toLocaleString()})]}),r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-sky-500 to-blue-500 flex items-center justify-center",children:r.jsx(uk,{className:"w-6 h-6 text-white"})})]})}),r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Total Conversions"}),r.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:e.reduce((P,T)=>P+(T.metrics.converted||0),0).toLocaleString()})]}),r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center",children:r.jsx(Gx,{className:"w-6 h-6 text-white"})})]})}),r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Total Revenue"}),r.jsxs("p",{className:"text-3xl font-bold text-white mt-1",children:["£",e.reduce((P,T)=>P+(T.metrics.revenue||0),0).toLocaleString()]})]}),r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-green-500 to-teal-500 flex items-center justify-center",children:r.jsx(zt,{className:"w-6 h-6 text-white"})})]})})]}),r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl",children:r.jsx("div",{className:"p-6 space-y-4",children:e.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(wn,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No Campaigns Yet"}),r.jsx("p",{className:"text-gray-400 mb-4",children:"Create your first marketing campaign to get started"}),r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsxs($,{onClick:()=>a(!0),className:"bg-gradient-to-r from-sky-600 to-blue-600 hover:from-sky-500 hover:to-blue-500",title:"Create your first marketing campaign",children:[r.jsx(dn,{className:"w-4 h-4 mr-2"}),"Create Campaign"]})}),r.jsx(gt,{children:r.jsx("p",{children:"Create your first marketing campaign"})})]})]}):e.map(P=>{const T=y(P);return r.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10 hover:border-sky-500/30 transition-all",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-r from-sky-500 to-blue-500 flex items-center justify-center flex-shrink-0",children:b(P.type)}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-bold text-white",children:P.name}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx(H,{className:"bg-white/5 text-gray-300 border-white/10",children:P.type}),r.jsx(H,{className:`${x(P.status)} border`,children:P.status}),r.jsxs("span",{className:"text-sm text-gray-400",children:[r.jsx(_a,{className:"w-3 h-3 inline mr-1"}),P.segment]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[P.status==="active"&&r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsx($,{size:"sm",variant:"outline",onClick:()=>v(P.id),className:"border-yellow-500/30 text-yellow-400 hover:bg-yellow-500/10",children:r.jsx(IC,{className:"w-4 h-4"})})}),r.jsx(gt,{children:r.jsx("p",{children:"Pause campaign"})})]}),P.status==="paused"&&r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsx($,{size:"sm",variant:"outline",onClick:()=>v(P.id),className:"border-green-500/30 text-green-400 hover:bg-green-500/10",children:r.jsx(Iy,{className:"w-4 h-4"})})}),r.jsx(gt,{children:r.jsx("p",{children:"Resume campaign"})})]}),r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsx($,{size:"sm",variant:"outline",onClick:()=>A(P),className:"border-white/20 text-white hover:bg-white/10",title:"Edit campaign details",children:r.jsx(A0,{className:"w-4 h-4"})})}),r.jsx(gt,{children:r.jsx("p",{children:"Edit campaign details"})})]}),r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsx($,{size:"sm",variant:"outline",onClick:()=>N(P.id),className:"border-red-500/30 text-red-400 hover:bg-red-500/10",title:"Delete campaign permanently",children:r.jsx(Kr,{className:"w-4 h-4"})})}),r.jsx(gt,{children:r.jsx("p",{children:"Delete campaign permanently"})})]})]})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400 mb-3",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(jl,{className:"w-4 h-4"}),"Start: ",P.startDate.toLocaleDateString()]}),P.endDate&&r.jsxs("span",{className:"flex items-center gap-1",children:["End: ",P.endDate.toLocaleDateString()]})]}),P.metrics.sent&&r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 p-3 bg-black/20 rounded-lg border border-white/5",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Sent"}),r.jsx("p",{className:"text-lg font-bold text-white",children:P.metrics.sent.toLocaleString()})]}),P.metrics.opened!==void 0&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Opened"}),r.jsxs("p",{className:"text-lg font-bold text-white",children:[P.metrics.opened.toLocaleString(),T&&r.jsxs("span",{className:"text-sm text-sky-400 ml-1",children:["(",T.openRate,"%)"]})]})]}),P.metrics.clicked!==void 0&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Clicked"}),r.jsxs("p",{className:"text-lg font-bold text-white",children:[P.metrics.clicked.toLocaleString(),T&&r.jsxs("span",{className:"text-sm text-purple-400 ml-1",children:["(",T.clickRate,"%)"]})]})]}),P.metrics.converted!==void 0&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Converted"}),r.jsxs("p",{className:"text-lg font-bold text-white",children:[P.metrics.converted.toLocaleString(),T&&r.jsxs("span",{className:"text-sm text-green-400 ml-1",children:["(",T.conversionRate,"%)"]})]})]}),P.metrics.revenue!==void 0&&P.metrics.revenue>0&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Revenue"}),r.jsxs("p",{className:"text-lg font-bold text-green-400",children:["£",P.metrics.revenue.toLocaleString()]})]})]})]},P.id)})})}),r.jsx(Et,{open:n,onOpenChange:a,children:r.jsxs(Dt,{className:"bg-slate-900 border-white/10 text-white max-w-2xl",children:[r.jsx($t,{children:r.jsx(Lt,{children:s?"Edit Campaign":"Create New Campaign"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"campaignName",className:"text-white",children:"Campaign Name"}),r.jsx(xe,{id:"campaignName",value:o,onChange:P=>l(P.target.value),placeholder:"e.g., Black Friday Sale 2025",className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"campaignType",className:"text-white",children:"Campaign Type"}),r.jsxs(dr,{value:c,onValueChange:P=>d(P),children:[r.jsx(ur,{className:"bg-white/5 border-white/10 text-white",children:r.jsx(hr,{})}),r.jsxs(fr,{className:"bg-slate-800 border-white/10",children:[r.jsx(Oe,{value:"email",children:"Email Campaign"}),r.jsx(Oe,{value:"banner",children:"Banner/Announcement"}),r.jsx(Oe,{value:"discount",children:"Discount Code"})]})]})]}),r.jsxs("div",{children:[r.jsx(le,{htmlFor:"campaignSegment",className:"text-white",children:"Target Segment"}),r.jsxs(dr,{value:u,onValueChange:h,children:[r.jsx(ur,{className:"bg-white/5 border-white/10 text-white",children:r.jsx(hr,{})}),r.jsxs(fr,{className:"bg-slate-800 border-white/10",children:[r.jsx(Oe,{value:"all",children:"All Customers"}),r.jsx(Oe,{value:"gaming",children:"Gaming Enthusiasts"}),r.jsx(Oe,{value:"business",children:"Business Customers"}),r.jsx(Oe,{value:"new",children:"New Customers"}),r.jsx(Oe,{value:"vip",children:"VIP Customers"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"startDate",className:"text-white",children:"Start Date"}),r.jsx(xe,{id:"startDate",type:"date",value:f,onChange:P=>m(P.target.value),className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{children:[r.jsx(le,{htmlFor:"endDate",className:"text-white",children:"End Date (Optional)"}),r.jsx(xe,{id:"endDate",type:"date",value:g,onChange:P=>p(P.target.value),className:"bg-white/5 border-white/10 text-white"})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx($,{variant:"outline",onClick:()=>{a(!1),S()},className:"border-white/20 text-white hover:bg-white/10",children:"Cancel"}),r.jsx($,{onClick:w,disabled:!o||!f,className:"bg-gradient-to-r from-sky-600 to-blue-600 hover:from-sky-500 hover:to-blue-500",children:s?"Update Campaign":"Create Campaign"})]})]})]})})]})}function QO(){const[e,t]=k.useState([{id:"1",code:"BLACKFRIDAY25",type:"percentage",value:25,usageLimit:100,usageCount:34,expiresAt:new Date("2025-11-30"),createdAt:new Date("2025-11-01"),active:!0},{id:"2",code:"WELCOME10",type:"percentage",value:10,usageCount:156,createdAt:new Date("2025-10-01"),active:!0},{id:"3",code:"FREESHIP50",type:"fixed",value:50,usageLimit:50,usageCount:23,expiresAt:new Date("2025-12-31"),createdAt:new Date("2025-11-15"),active:!0}]),[n,a]=k.useState(!1),[s,i]=k.useState(""),[o,l]=k.useState("percentage"),[c,d]=k.useState(""),[u,h]=k.useState(""),[f,m]=k.useState(""),[g,p]=k.useState("1"),[x,b]=k.useState(""),[y,w]=k.useState(""),[S,v]=k.useState(!1),N=(D="")=>{const L="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let V=D.toUpperCase();for(let X=0;X<(D?6:8);X++)V+=L.charAt(Math.floor(Math.random()*L.length));return V},A=()=>{if(!c)return;const D=parseInt(g)||1,L=[];for(let V=0;V<D;V++){const X={id:Date.now().toString()+V,code:D>1?N(s):(s||N()).toUpperCase(),type:o,value:parseFloat(c),usageLimit:u?parseInt(u):void 0,usageCount:0,expiresAt:f?new Date(f):void 0,customerSpecific:x||void 0,createdAt:new Date,active:!0};L.push(X)}t([...L,...e]),a(!1),P()},P=()=>{i(""),l("percentage"),d(""),h(""),m(""),p("1"),b("")},T=D=>{navigator.clipboard.writeText(D),te.success(`Code "${D}" copied to clipboard!`)},M=D=>{t(e.map(L=>L.id===D?{...L,active:!L.active}:L))},E=D=>{confirm("Are you sure you want to delete this discount code?")&&t(e.filter(L=>L.id!==D))},C=()=>{const D=[["Code","Type","Value","Usage","Limit","Expires","Status"],...e.map(W=>[W.code,W.type,W.value,W.usageCount,W.usageLimit||"Unlimited",W.expiresAt?W.expiresAt.toLocaleDateString():"Never",W.active?"Active":"Inactive"])].map(W=>W.join(",")).join(`
`),L=new Blob([D],{type:"text/csv"}),V=URL.createObjectURL(L),X=document.createElement("a");X.href=V,X.download=`discount-codes-${new Date().toISOString().split("T")[0]}.csv`,X.click()},O=e.filter(D=>!S&&!D.active?!1:y?D.code.toLowerCase().includes(y.toLowerCase())||D.customerSpecific&&D.customerSpecific.toLowerCase().includes(y.toLowerCase()):!0),_=e.reduce((D,L)=>{const X=L.type==="percentage"?1500*L.value/100:L.value;return D+X*L.usageCount},0);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[r.jsx(vc,{className:"w-6 h-6 text-purple-400"}),"Discount Code Manager"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Generate and manage discount codes for your store"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsxs($,{variant:"outline",onClick:C,className:"border-white/20 text-white hover:bg-white/10",children:[r.jsx(jn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})}),r.jsx(gt,{children:r.jsx("p",{children:"Export all discount codes to CSV file"})})]}),r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsxs($,{onClick:()=>a(!0),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500",children:[r.jsx(dn,{className:"w-4 h-4 mr-2"}),"Generate Codes"]})}),r.jsx(gt,{children:r.jsx("p",{children:"Generate new discount codes"})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Total Codes"}),r.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:e.length}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[e.filter(D=>D.active).length," active"]})]}),r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center",children:r.jsx(vc,{className:"w-6 h-6 text-white"})})]})}),r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Total Uses"}),r.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:e.reduce((D,L)=>D+L.usageCount,0)})]}),r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-sky-500 to-blue-500 flex items-center justify-center",children:r.jsx(_a,{className:"w-6 h-6 text-white"})})]})}),r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Avg. Discount"}),r.jsxs("p",{className:"text-3xl font-bold text-white mt-1",children:[e.length>0?(e.reduce((D,L)=>D+(L.type==="percentage"?L.value:L.value/15),0)/e.length).toFixed(0):0,"%"]})]}),r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-orange-500 to-amber-500 flex items-center justify-center",children:r.jsx(Py,{className:"w-6 h-6 text-white"})})]})}),r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Est. Savings"}),r.jsxs("p",{className:"text-3xl font-bold text-white mt-1",children:["£",_.toLocaleString()]})]}),r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 flex items-center justify-center",children:r.jsx(zt,{className:"w-6 h-6 text-white"})})]})})]}),r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-4",children:r.jsxs("div",{className:"flex gap-3 items-center",children:[r.jsx("div",{className:"flex-1",children:r.jsx(xe,{placeholder:"Search codes or customer email...",value:y,onChange:D=>w(D.target.value),className:"bg-white/5 border-white/10 text-white"})}),r.jsx($,{variant:"outline",onClick:()=>v(!S),className:`border-white/20 text-white hover:bg-white/10 ${S?"bg-white/10":""}`,children:S?r.jsxs(r.Fragment,{children:[r.jsx(kr,{className:"w-4 h-4 mr-2"}),"Show All"]}):r.jsxs(r.Fragment,{children:[r.jsx(Qx,{className:"w-4 h-4 mr-2"}),"Hide Inactive"]})})]})}),r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl",children:r.jsx("div",{className:"p-6 space-y-4",children:O.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(vc,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No Discount Codes"}),r.jsx("p",{className:"text-gray-400 mb-4",children:"Generate discount codes to offer deals to your customers"}),r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsxs($,{onClick:()=>a(!0),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500",title:"Generate your first discount codes",children:[r.jsx(dn,{className:"w-4 h-4 mr-2"}),"Generate Codes"]})}),r.jsx(gt,{children:r.jsx("p",{children:"Generate your first discount codes"})})]})]}):O.map(D=>r.jsx("div",{className:`p-4 rounded-lg border transition-all ${D.active?"bg-white/5 border-white/10 hover:border-purple-500/30":"bg-black/20 border-white/5 opacity-60"}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("code",{className:"text-2xl font-bold text-white font-mono bg-black/30 px-3 py-1 rounded border border-white/10",children:D.code}),r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsx($,{size:"sm",variant:"outline",onClick:()=>T(D.code),className:"border-white/20 text-white hover:bg-white/10",title:"Copy code to clipboard",children:r.jsx(k0,{className:"w-4 h-4"})})}),r.jsx(gt,{children:r.jsx("p",{children:"Copy code to clipboard"})})]}),!D.active&&r.jsx(H,{className:"bg-red-500/20 text-red-400 border-red-500/30",children:"Inactive"}),D.customerSpecific&&r.jsx(H,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30",children:"Customer-Specific"})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mt-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Discount"}),r.jsx("p",{className:"text-lg font-bold text-white",children:D.type==="percentage"?r.jsxs(r.Fragment,{children:[D.value,"%",r.jsx(Py,{className:"w-4 h-4 inline ml-1 text-purple-400"})]}):r.jsxs(r.Fragment,{children:["£",D.value,r.jsx(S0,{className:"w-4 h-4 inline ml-1 text-green-400"})]})})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Usage"}),r.jsxs("p",{className:"text-lg font-bold text-white",children:[D.usageCount,D.usageLimit&&r.jsxs("span",{className:"text-sm text-gray-400",children:[" ","/ ",D.usageLimit]})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Remaining"}),r.jsx("p",{className:"text-lg font-bold text-white",children:D.usageLimit?D.usageLimit-D.usageCount:"∞"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Expires"}),r.jsx("p",{className:"text-sm font-medium text-white",children:D.expiresAt?r.jsx("span",{className:new Date(D.expiresAt)<new Date?"text-red-400":"",children:D.expiresAt.toLocaleDateString()}):"Never"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Created"}),r.jsx("p",{className:"text-sm font-medium text-white",children:D.createdAt.toLocaleDateString()})]})]}),D.customerSpecific&&r.jsxs("div",{className:"mt-3 text-sm text-gray-400",children:[r.jsx(_a,{className:"w-4 h-4 inline mr-1"}),"Customer: ",D.customerSpecific]})]}),r.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsx($,{size:"sm",variant:"outline",onClick:()=>M(D.id),className:`border-white/20 hover:bg-white/10 ${D.active?"text-yellow-400":"text-green-400"}`,children:D.active?r.jsx(Qx,{className:"w-4 h-4"}):r.jsx(kr,{className:"w-4 h-4"})})}),r.jsx(gt,{children:r.jsx("p",{children:D.active?"Deactivate code":"Activate code"})})]}),r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsx($,{size:"sm",variant:"outline",onClick:()=>E(D.id),className:"border-red-500/30 text-red-400 hover:bg-red-500/10",children:r.jsx(Kr,{className:"w-4 h-4"})})}),r.jsx(gt,{children:r.jsx("p",{children:"Delete code permanently"})})]})]})]})},D.id))})}),r.jsx(Et,{open:n,onOpenChange:a,children:r.jsxs(Dt,{className:"bg-slate-900 border-white/10 text-white max-w-2xl",children:[r.jsx($t,{children:r.jsx(Lt,{children:"Generate Discount Codes"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"codePrefix",className:"text-white",children:"Code Prefix (Optional)"}),r.jsx(xe,{id:"codePrefix",value:s,onChange:D=>i(D.target.value),placeholder:"e.g., SUMMER",className:"bg-white/5 border-white/10 text-white uppercase"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Leave empty for random codes"})]}),r.jsxs("div",{children:[r.jsx(le,{htmlFor:"bulkCount",className:"text-white",children:"Number of Codes"}),r.jsx(xe,{id:"bulkCount",type:"number",min:"1",max:"100",value:g,onChange:D=>p(D.target.value),className:"bg-white/5 border-white/10 text-white"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"codeType",className:"text-white",children:"Discount Type"}),r.jsxs(dr,{value:o,onValueChange:D=>l(D),children:[r.jsx(ur,{className:"bg-white/5 border-white/10 text-white",children:r.jsx(hr,{})}),r.jsxs(fr,{className:"bg-slate-800 border-white/10",children:[r.jsx(Oe,{value:"percentage",children:"Percentage Off"}),r.jsx(Oe,{value:"fixed",children:"Fixed Amount"})]})]})]}),r.jsxs("div",{children:[r.jsx(le,{htmlFor:"codeValue",className:"text-white",children:"Discount Value"}),r.jsx(xe,{id:"codeValue",type:"number",value:c,onChange:D=>d(D.target.value),placeholder:o==="percentage"?"e.g., 10":"e.g., 50",className:"bg-white/5 border-white/10 text-white"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:o==="percentage"?"%":"£"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"usageLimit",className:"text-white",children:"Usage Limit (Optional)"}),r.jsx(xe,{id:"usageLimit",type:"number",value:u,onChange:D=>h(D.target.value),placeholder:"Unlimited",className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{children:[r.jsx(le,{htmlFor:"expiryDate",className:"text-white",children:"Expiry Date (Optional)"}),r.jsx(xe,{id:"expiryDate",type:"date",value:f,onChange:D=>m(D.target.value),className:"bg-white/5 border-white/10 text-white"})]})]}),r.jsxs("div",{children:[r.jsx(le,{htmlFor:"customerEmail",className:"text-white",children:"Customer Email (Optional)"}),r.jsx(xe,{id:"customerEmail",type:"email",value:x,onChange:D=>b(D.target.value),placeholder:"For customer-specific codes",className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx($,{variant:"outline",onClick:()=>{a(!1),P()},className:"border-white/20 text-white hover:bg-white/10",children:"Cancel"}),r.jsxs($,{onClick:A,disabled:!c,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500",children:[r.jsx(Bt,{className:"w-4 h-4 mr-2"}),"Generate ",g," Code",parseInt(g)>1?"s":""]})]})]})]})})]})}function JO(){const[e,t]=k.useState([]),[n,a]=k.useState(!0);k.useEffect(()=>{const F=IP(Te=>{t(Te),a(!1)});return()=>F()},[]);const[s,i]=k.useState(!1),[o,l]=k.useState(null),[c,d]=k.useState(""),[u,h]=k.useState(""),[f,m]=k.useState("promo"),[g,p]=k.useState("top"),[x,b]=k.useState(""),[y,w]=k.useState(""),[S,v]=k.useState(""),[N,A]=k.useState(""),[P,T]=k.useState("all"),[M,E]=k.useState("default"),[C,O]=k.useState(!1),_=F=>{switch(F){case"info":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"success":return"bg-green-500/20 text-green-400 border-green-500/30";case"warning":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"promo":return"bg-sky-500/20 text-sky-400 border-sky-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},D=F=>{switch(F){case"info":return r.jsx(Ra,{className:"w-4 h-4"});case"success":return r.jsx(Lo,{className:"w-4 h-4"});case"warning":return r.jsx(Ra,{className:"w-4 h-4"});case"promo":return r.jsx(Du,{className:"w-4 h-4"})}},L=async()=>{if(!c||!u||!S){te.error("Please fill in all required fields");return}O(!0);try{if(o){const F={title:c,message:u,type:f,position:g,startDate:new Date(S),targeting:P,...M!=="default"&&{color:M},...x&&{link:x},...y&&{linkText:y},...N&&{endDate:new Date(N)}};await vy(o.id,F),te.success("Banner updated successfully!")}else{const F={title:c,message:u,type:f,position:g,startDate:new Date(S),targeting:P,active:!0,...M!=="default"&&{color:M},...x&&{link:x},...y&&{linkText:y},...N&&{endDate:new Date(N)}};await wy(F),te.success("Banner created successfully!")}i(!1),V()}catch(F){J.error("Error saving banner",F),te.error(o?"Failed to update banner. Please try again.":"Failed to create banner. Please try again.")}finally{O(!1)}},V=()=>{d(""),h(""),m("promo"),E("default"),p("top"),b(""),w(""),v(""),A(""),T("all"),l(null)},X=async F=>{const Te=e.find(pe=>pe.id===F);Te&&await vy(F,{active:!Te.active})},W=async F=>{confirm("Are you sure you want to delete this banner?")&&await $P(F)},ce=async F=>{await wy({title:`${F.title} (Copy)`,message:F.message,type:F.type,color:F.color,position:F.position,link:F.link,linkText:F.linkText,startDate:F.startDate,endDate:F.endDate,targeting:F.targeting,targetCountries:F.targetCountries,active:!1})},de=F=>F.views===0?"0.0":(F.clicks/F.views*100).toFixed(1),fe=F=>{l(F),d(F.title),h(F.message),m(F.type),E(F.color||"default"),p(F.position),b(F.link||""),w(F.linkText||""),v(F.startDate.toISOString().split("T")[0]),A(F.endDate?F.endDate.toISOString().split("T")[0]:""),T(F.targeting),i(!0)};return r.jsx(RP,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[r.jsx(Du,{className:"w-6 h-6 text-orange-400"}),"Promotional Banners"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Create site-wide announcements and promotional messages"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsxs($,{onClick:()=>{sessionStorage.removeItem("dismissed-banner"),te.success("Dismissed banners cleared! Refresh the page to see active banners.")},variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:[r.jsx(Bt,{className:"w-4 h-4 mr-2"}),"Reset Dismissed"]})}),r.jsx(gt,{children:r.jsx("p",{children:"Clear dismissed banners from session storage"})})]}),r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsxs($,{onClick:()=>i(!0),className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-500 hover:to-red-500",children:[r.jsx(dn,{className:"w-4 h-4 mr-2"}),"Create Banner"]})}),r.jsx(gt,{children:r.jsx("p",{children:"Create a new promotional banner"})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Active Banners"}),r.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:e.filter(F=>F.active).length})]}),r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 flex items-center justify-center",children:r.jsx(kr,{className:"w-6 h-6 text-white"})})]})}),r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Total Views"}),r.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:e.reduce((F,Te)=>F+Te.views,0).toLocaleString()})]}),r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-sky-500 to-blue-500 flex items-center justify-center",children:r.jsx(kr,{className:"w-6 h-6 text-white"})})]})}),r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Total Clicks"}),r.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:e.reduce((F,Te)=>F+Te.clicks,0).toLocaleString()})]}),r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center",children:r.jsx(Lo,{className:"w-6 h-6 text-white"})})]})}),r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Avg. CTR"}),r.jsxs("p",{className:"text-3xl font-bold text-white mt-1",children:[e.length>0?(e.reduce((F,Te)=>F+parseFloat(de(Te)),0)/e.length).toFixed(1):"0.0","%"]})]}),r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-orange-500 to-amber-500 flex items-center justify-center",children:r.jsx(ha,{className:"w-6 h-6 text-white"})})]})})]}),e.filter(F=>F.active).length>0&&r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-4",children:[r.jsx(le,{className:"text-white mb-3 block",children:"Live Banner Preview"}),e.filter(F=>F.active).slice(0,1).map(F=>r.jsx("div",{className:`p-4 rounded-lg border ${F.type==="promo"?"bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-purple-500/30":F.type==="success"?"bg-gradient-to-r from-green-500/10 to-emerald-500/10 border-green-500/30":F.type==="warning"?"bg-gradient-to-r from-yellow-500/10 to-orange-500/10 border-yellow-500/30":"bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-blue-500/30"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[D(F.type),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-white",children:F.title}),r.jsx("p",{className:"text-sm text-gray-300",children:F.message})]})]}),F.link&&F.linkText&&r.jsx($,{size:"sm",className:"bg-white/20 hover:bg-white/30 text-white",children:F.linkText})]})},F.id))]}),r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl",children:r.jsx("div",{className:"p-6 space-y-4",children:e.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Du,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No Banners Yet"}),r.jsx("p",{className:"text-gray-400 mb-4",children:"Create promotional banners to engage your visitors"}),r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsxs($,{onClick:()=>i(!0),className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-500 hover:to-red-500",title:"Create your first promotional banner",children:[r.jsx(dn,{className:"w-4 h-4 mr-2"}),"Create Banner"]})}),r.jsx(gt,{children:r.jsx("p",{children:"Create your first promotional banner"})})]})]}):e.map(F=>r.jsxs("div",{className:`p-4 rounded-lg border-2 transition-all ${F.active?"bg-white/10 border-orange-500/50 hover:border-orange-500":"bg-black/30 border-white/10 opacity-60"}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg bg-gradient-to-r ${F.type==="promo"?"from-purple-500 to-pink-500":F.type==="success"?"from-green-500 to-emerald-500":F.type==="warning"?"from-yellow-500 to-orange-500":"from-sky-500 to-blue-500"} flex items-center justify-center flex-shrink-0`,children:D(F.type)}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-lg font-bold text-white",children:F.title}),r.jsx("p",{className:"text-sm text-gray-300",children:F.message})]})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx(H,{className:`${_(F.type)} border`,children:F.type}),r.jsx(H,{className:"bg-white/10 text-gray-200 border-white/20",children:F.position}),r.jsx(H,{className:"bg-white/10 text-gray-200 border-white/20",children:F.targeting==="all"?"All Visitors":F.targeting==="geographic"?"Geographic":F.targeting==="new"?"New Visitors":"Returning"}),!F.active&&r.jsx(H,{className:"bg-red-500/20 text-red-400 border-red-500/30",children:"Inactive"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsx($,{size:"sm",variant:"outline",onClick:()=>X(F.id),className:`border-white/30 hover:bg-white/10 ${F.active?"text-yellow-400":"text-green-400"}`,title:F.active?"Deactivate banner":"Activate banner",children:F.active?r.jsx(Qx,{className:"w-4 h-4"}):r.jsx(kr,{className:"w-4 h-4"})})}),r.jsx(gt,{children:r.jsx("p",{children:F.active?"Deactivate banner":"Activate banner"})})]}),r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsx($,{size:"sm",variant:"outline",onClick:()=>ce(F),className:"border-white/30 text-white hover:bg-white/10",title:"Duplicate banner",children:r.jsx(k0,{className:"w-4 h-4"})})}),r.jsx(gt,{children:r.jsx("p",{children:"Duplicate banner"})})]}),r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsx($,{size:"sm",variant:"outline",onClick:()=>fe(F),className:"border-white/30 text-white hover:bg-white/10",title:"Edit banner details",children:r.jsx(A0,{className:"w-4 h-4"})})}),r.jsx(gt,{children:r.jsx("p",{children:"Edit banner details"})})]}),r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsx($,{size:"sm",variant:"outline",onClick:()=>W(F.id),className:"border-red-500/50 text-red-400 hover:bg-red-500/10",title:"Delete banner permanently",children:r.jsx(Kr,{className:"w-4 h-4"})})}),r.jsx(gt,{children:r.jsx("p",{children:"Delete banner permanently"})})]})]})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-300 mb-3",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(jl,{className:"w-4 h-4"}),"Start: ",F.startDate.toLocaleDateString()]}),F.endDate&&r.jsxs("span",{className:"flex items-center gap-1",children:["End: ",F.endDate.toLocaleDateString()]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 p-3 bg-black/30 rounded-lg border border-white/10",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Views"}),r.jsx("p",{className:"text-lg font-bold text-white",children:F.views.toLocaleString()})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Clicks"}),r.jsx("p",{className:"text-lg font-bold text-white",children:F.clicks.toLocaleString()})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-400",children:"CTR"}),r.jsxs("p",{className:"text-lg font-bold text-white",children:[de(F),"%"]})]})]}),F.link&&r.jsxs("div",{className:"mt-3 text-sm text-gray-300 flex items-center gap-2",children:[r.jsx(ha,{className:"w-4 h-4"}),"Link: ",r.jsx("span",{className:"text-sky-400",children:F.link}),F.linkText&&r.jsxs("span",{className:"text-white",children:['→ "',F.linkText,'"']})]})]},F.id))})}),r.jsx(Et,{open:s,onOpenChange:i,children:r.jsxs(Dt,{className:"bg-slate-900 border-white/10 text-white max-w-2xl",children:[r.jsx($t,{children:r.jsx(Lt,{children:o?"Edit Banner":"Create Promotional Banner"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"bannerTitle",className:"text-white",children:"Banner Title"}),r.jsx(xe,{id:"bannerTitle",value:c,onChange:F=>d(F.target.value),placeholder:"e.g., Black Friday Sale",className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{children:[r.jsx(le,{htmlFor:"bannerMessage",className:"text-white",children:"Banner Message"}),r.jsx(Mn,{id:"bannerMessage",value:u,onChange:F=>h(F.target.value),placeholder:"e.g., Save up to 25% on all Gaming PCs! Limited time only.",className:"bg-white/5 border-white/10 text-white",rows:2})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"bannerType",className:"text-white",children:"Banner Type"}),r.jsxs(dr,{value:f,onValueChange:F=>m(F),children:[r.jsx(ur,{className:"bg-white/5 border-white/10 text-white",children:r.jsx(hr,{})}),r.jsxs(fr,{className:"bg-slate-800 border-white/10",children:[r.jsx(Oe,{value:"promo",children:"Promotional"}),r.jsx(Oe,{value:"info",children:"Information"}),r.jsx(Oe,{value:"success",children:"Success/Update"}),r.jsx(Oe,{value:"warning",children:"Warning/Alert"})]})]})]}),r.jsxs("div",{children:[r.jsx(le,{htmlFor:"bannerPosition",className:"text-white",children:"Position"}),r.jsxs(dr,{value:g,onValueChange:F=>p(F),children:[r.jsx(ur,{className:"bg-white/5 border-white/10 text-white",children:r.jsx(hr,{})}),r.jsxs(fr,{className:"bg-slate-800 border-white/10",children:[r.jsx(Oe,{value:"top",children:"Top of Page"}),r.jsx(Oe,{value:"bottom",children:"Bottom of Page"})]})]})]})]}),r.jsxs("div",{children:[r.jsx(le,{htmlFor:"bannerColor",className:"text-white",children:"Custom Color (Optional)"}),r.jsxs(dr,{value:M,onValueChange:F=>E(F),children:[r.jsx(ur,{className:"bg-white/5 border-white/10 text-white",children:r.jsx(hr,{placeholder:"Use default color based on type"})}),r.jsxs(fr,{className:"bg-slate-800 border-white/10",children:[r.jsx(Oe,{value:"default",children:"Default (Based on Type)"}),r.jsx(Oe,{value:"bg-gradient-to-r from-sky-600 to-blue-600",children:"Blue Gradient"}),r.jsx(Oe,{value:"bg-gradient-to-r from-purple-600 to-pink-600",children:"Purple-Pink Gradient"}),r.jsx(Oe,{value:"bg-gradient-to-r from-green-600 to-emerald-600",children:"Green Gradient"}),r.jsx(Oe,{value:"bg-gradient-to-r from-yellow-600 to-orange-600",children:"Yellow-Orange Gradient"}),r.jsx(Oe,{value:"bg-gradient-to-r from-red-600 to-rose-600",children:"Red Gradient"}),r.jsx(Oe,{value:"bg-gradient-to-r from-cyan-600 to-teal-600",children:"Cyan-Teal Gradient"}),r.jsx(Oe,{value:"bg-gradient-to-r from-indigo-600 to-purple-600",children:"Indigo-Purple Gradient"})]})]}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Leave empty to use the default color based on banner type"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"bannerLink",className:"text-white",children:"Link URL (Optional)"}),r.jsx(xe,{id:"bannerLink",value:x,onChange:F=>b(F.target.value),placeholder:"/finder",className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{children:[r.jsx(le,{htmlFor:"bannerLinkText",className:"text-white",children:"Link Text (Optional)"}),r.jsx(xe,{id:"bannerLinkText",value:y,onChange:F=>w(F.target.value),placeholder:"Shop Now",className:"bg-white/5 border-white/10 text-white"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"bannerStartDate",className:"text-white",children:"Start Date"}),r.jsx(xe,{id:"bannerStartDate",type:"date",value:S,onChange:F=>v(F.target.value),className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{children:[r.jsx(le,{htmlFor:"bannerEndDate",className:"text-white",children:"End Date (Optional)"}),r.jsx(xe,{id:"bannerEndDate",type:"date",value:N,onChange:F=>A(F.target.value),className:"bg-white/5 border-white/10 text-white"})]})]}),r.jsxs("div",{children:[r.jsx(le,{htmlFor:"bannerTargeting",className:"text-white",children:"Target Audience"}),r.jsxs(dr,{value:P,onValueChange:F=>T(F),children:[r.jsx(ur,{className:"bg-white/5 border-white/10 text-white",children:r.jsx(hr,{})}),r.jsxs(fr,{className:"bg-slate-800 border-white/10",children:[r.jsx(Oe,{value:"all",children:"All Visitors"}),r.jsx(Oe,{value:"new",children:"New Visitors Only"}),r.jsx(Oe,{value:"returning",children:"Returning Visitors"}),r.jsx(Oe,{value:"geographic",children:"Geographic Targeting"})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx($,{variant:"outline",onClick:()=>{i(!1),V()},className:"border-white/20 text-white hover:bg-white/10",children:"Cancel"}),r.jsx($,{onClick:L,disabled:!c||!u||!S||C,className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-500 hover:to-red-500 disabled:opacity-50",children:C?"Saving...":o?"Update Banner":"Create Banner"})]})]})]})})]})})}const Ed="admin_competitors",Sl="admin_competitor_prices";function ZO(e){const t=Da(Rn(br,Ed),ni("createdAt","desc"));return hk(t,n=>{const a=n.docs.map(s=>{const i=s.data();return{id:s.id,name:i.name,website:i.website,status:i.status,addedDate:i.addedDate instanceof ia?i.addedDate.toDate():new Date(i.addedDate),lastChecked:i.lastChecked?i.lastChecked instanceof ia?i.lastChecked.toDate():new Date(i.lastChecked):void 0,createdAt:i.createdAt instanceof ia?i.createdAt.toDate():new Date(i.createdAt),updatedAt:i.updatedAt instanceof ia?i.updatedAt.toDate():i.updatedAt?new Date(i.updatedAt):void 0}});e(a)})}function e5(e,t){const n=Da(Rn(br,Sl),Oo("competitorId","==",e),ni("lastUpdated","desc"));return hk(n,a=>{const s=a.docs.map(i=>{const o=i.data();return{id:i.id,competitorId:o.competitorId,productName:o.productName,category:o.category,currentPrice:o.currentPrice,previousPrice:o.previousPrice,url:o.url,lastUpdated:o.lastUpdated instanceof ia?o.lastUpdated.toDate():new Date(o.lastUpdated),priceHistory:(o.priceHistory||[]).map(l=>({date:l.date instanceof ia?l.date.toDate():l.date instanceof Date?l.date:new Date(l.date),price:l.price}))}});t(s)})}async function t5(e){return mk(Rn(br,Ed),{...e,addedDate:$n(),createdAt:$n(),updatedAt:$n()})}async function r5(e,t){const n=Td(br,Ed,e);await fk(n,{...t,updatedAt:$n()})}async function n5(e){const t=Td(br,Ed,e);await Xx(t);const n=await ai(Da(Rn(br,Sl),Oo("competitorId","==",e)));await Promise.all(n.docs.map(a=>Xx(a.ref)))}async function a5(e){return mk(Rn(br,Sl),{...e,lastUpdated:$n(),priceHistory:[{date:$n(),price:e.currentPrice}],createdAt:$n(),updatedAt:$n()})}async function s5(e,t){const n=Td(br,Sl,e),s=(await dC(n)).data(),i=s==null?void 0:s.currentPrice,o=((s==null?void 0:s.priceHistory)||[]).slice();t.currentPrice&&t.currentPrice!==i&&o.push({date:new Date,price:t.currentPrice}),await fk(n,{...t,previousPrice:i,priceHistory:o.map(l=>({date:l.date,price:l.price})),lastUpdated:$n(),updatedAt:$n()})}async function i5(e){const t=Td(br,Sl,e);await Xx(t)}function Iu(e){const t=new Date(e);return isNaN(t.getTime())?"Invalid Date":t.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})}function Uy(e){const t=new Date(e);return isNaN(t.getTime())?"Invalid Date":t.toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}const o5=()=>{const[e,t]=k.useState([]),[n,a]=k.useState([]),[s]=k.useState([]),[i,o]=k.useState(!1),[l,c]=k.useState(!1),[d,u]=k.useState(null),[h,f]=k.useState(null),[m,g]=k.useState(""),[p,x]=k.useState(""),[b,y]=k.useState(""),[w,S]=k.useState(""),[v,N]=k.useState(""),[A,P]=k.useState(""),[T,M]=k.useState(""),[E,C]=k.useState(""),[O,_]=k.useState(!1),[D,L]=k.useState(!1);k.useEffect(()=>{const I=ZO(ge=>{t(ge)});return()=>I()},[]),k.useEffect(()=>{if(!w)return;const I=e5(w,ge=>{a(ge)});return()=>I()},[w]);const V=async()=>{if(!O){if(!p||!b){te.error("Please fill in all required fields");return}_(!0);try{await t5({name:p,website:b,status:"active"}),te.success(`Competitor "${p}" added successfully`),F()}catch(I){const ge=I instanceof Error?I.message:"Failed to add competitor";te.error(ge)}finally{_(!1)}}},X=async()=>{if(!O){if(!d||!p||!b){te.error("Please fill in all required fields");return}_(!0);try{await r5(String(d.id),{name:p,website:b}),te.success("Competitor updated successfully"),F()}catch(I){const ge=I instanceof Error?I.message:"Failed to update competitor";te.error(ge)}finally{_(!1)}}},W=async I=>{await n5(I),te.success("Competitor deleted")},ce=async()=>{if(!D){if(!w||!v||!A||!T||!E){te.error("Please fill in all required fields");return}L(!0);try{await a5({competitorId:w,productName:v,category:A,currentPrice:parseFloat(T),url:E}),te.success(`Product "${v}" added successfully`),Te()}catch(I){const ge=I instanceof Error?I.message:"Failed to add product";te.error(ge)}finally{L(!1)}}},de=async()=>{if(!D){if(!h||!v||!A||!T||!E){te.error("Please fill in all required fields");return}L(!0);try{await s5(String(h.id),{productName:v,category:A,currentPrice:parseFloat(T),url:E}),te.success("Product updated successfully"),Te()}catch(I){const ge=I instanceof Error?I.message:"Failed to update product";te.error(ge)}finally{L(!1)}}},fe=async I=>{await i5(I),te.success("Product deleted")},F=()=>{x(""),y(""),u(null),o(!1)},Te=()=>{S(""),N(""),P(""),M(""),C(""),f(null),c(!1)},pe=I=>{u(I),x(I.name),y(I.website),o(!0)},re=I=>{f(I),S(I.competitorId.toString()),N(I.productName),P(I.category),M(I.currentPrice.toString()),C(I.url),c(!0)},be=(I,ge)=>ge?I<ge?r.jsx(ui,{className:"h-4 w-4 text-green-500"}):I>ge?r.jsx(zt,{className:"h-4 w-4 text-red-500"}):r.jsx(bc,{className:"h-4 w-4 text-gray-400"}):r.jsx(bc,{className:"h-4 w-4 text-gray-400"}),se=I=>{switch(I){case"up":return r.jsx(zt,{className:"h-4 w-4 text-red-500"});case"down":return r.jsx(ui,{className:"h-4 w-4 text-green-500"});default:return r.jsx(bc,{className:"h-4 w-4 text-gray-400"})}},oe=I=>{const ge=e.find(Ne=>String(Ne.id)===String(I));return(ge==null?void 0:ge.name)||"Unknown"},me=n.filter(I=>I.productName.toLowerCase().includes(m.toLowerCase())||I.category.toLowerCase().includes(m.toLowerCase())||oe(I.competitorId).toLowerCase().includes(m.toLowerCase())),ve=["Gaming PCs","Workstations","Budget PCs","High-End PCs","Components"];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs(q,{className:"bg-gradient-to-br from-sky-500/10 to-blue-500/10 backdrop-blur-xl border-sky-500/20 hover:border-sky-500/40 transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-sky-500/20 group",children:[r.jsxs(Pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ce,{className:"text-sm font-medium text-gray-300 group-hover:text-sky-300 transition-colors",children:"Total Competitors"}),r.jsx(Lo,{className:"h-5 w-5 text-sky-400 group-hover:scale-110 transition-transform"})]}),r.jsxs(je,{children:[r.jsx("div",{className:"text-3xl font-bold bg-gradient-to-r from-sky-400 to-blue-400 bg-clip-text text-transparent",children:e.length}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[e.filter(I=>I.status==="active").length," active,"," ",e.filter(I=>I.status==="inactive").length," ","inactive"]})]})]}),r.jsxs(q,{className:"bg-gradient-to-br from-purple-500/10 to-pink-500/10 backdrop-blur-xl border-purple-500/20 hover:border-purple-500/40 transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-purple-500/20 group",children:[r.jsxs(Pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ce,{className:"text-sm font-medium text-gray-300 group-hover:text-purple-300 transition-colors",children:"Tracked Products"}),r.jsx(_y,{className:"h-5 w-5 text-purple-400 group-hover:scale-110 transition-transform"})]}),r.jsxs(je,{children:[r.jsx("div",{className:"text-3xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:n.length}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Across"," ",ve.filter(I=>n.some(ge=>ge.category===I)).length," ","categories"]})]})]}),r.jsxs(q,{className:"bg-gradient-to-br from-yellow-500/10 to-orange-500/10 backdrop-blur-xl border-yellow-500/20 hover:border-yellow-500/40 transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-yellow-500/20 group",children:[r.jsxs(Pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ce,{className:"text-sm font-medium text-gray-300 group-hover:text-yellow-300 transition-colors",children:"Price Alerts"}),r.jsx(mt,{className:"h-5 w-5 text-yellow-400 group-hover:scale-110 transition-transform animate-pulse"})]}),r.jsxs(je,{children:[r.jsx("div",{className:"text-3xl font-bold bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent",children:n.filter(I=>I.previousPrice&&I.currentPrice<I.previousPrice).length}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Competitor price drops"})]})]}),r.jsxs(q,{className:"bg-gradient-to-br from-green-500/10 to-emerald-500/10 backdrop-blur-xl border-green-500/20 hover:border-green-500/40 transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-green-500/20 group",children:[r.jsxs(Pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ce,{className:"text-sm font-medium text-gray-300 group-hover:text-green-300 transition-colors",children:"Market Position"}),r.jsx(LP,{className:"h-5 w-5 text-green-400 group-hover:scale-110 transition-transform"})]}),r.jsxs(je,{children:[r.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-green-400 to-emerald-400 bg-clip-text text-transparent",children:"Competitive"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Based on price analysis"})]})]})]}),r.jsxs(Nc,{defaultValue:"competitors",className:"space-y-4",children:[r.jsxs(Sc,{className:"bg-white/5 border-white/10",children:[r.jsx(ht,{value:"competitors",children:"Competitors"}),r.jsx(ht,{value:"products",children:"Price Comparison"}),r.jsx(ht,{value:"trends",children:"Market Trends"})]}),r.jsxs(lt,{value:"competitors",className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Competitor Management"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Track and manage your competitors"})]}),r.jsxs(Et,{open:i,onOpenChange:o,children:[r.jsx(jy,{asChild:!0,children:r.jsxs($,{className:"bg-gradient-to-r from-sky-600 to-blue-600 hover:from-sky-500 hover:to-blue-500",onClick:()=>{u(null),F()},children:[r.jsx(dn,{className:"h-4 w-4 mr-2"}),"Add Competitor"]})}),r.jsxs(Dt,{className:"bg-gray-900 border-white/10",children:[r.jsxs($t,{children:[r.jsx(Lt,{className:"text-white",children:d?"Edit Competitor":"Add New Competitor"}),r.jsx(Kx,{className:"text-gray-400",children:d?"Update competitor information":"Add a new competitor to track"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"comp-name",className:"text-gray-300",children:"Competitor Name *"}),r.jsx(xe,{id:"comp-name",value:p,onChange:I=>x(I.target.value),placeholder:"e.g., PC Specialist",className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{children:[r.jsx(le,{htmlFor:"comp-website",className:"text-gray-300",children:"Website URL *"}),r.jsx(xe,{id:"comp-website",value:b,onChange:I=>y(I.target.value),placeholder:"https://example.com",className:"bg-white/5 border-white/10 text-white"})]})]}),r.jsxs(Ny,{children:[r.jsx($,{variant:"outline",onClick:F,children:"Cancel"}),r.jsxs($,{onClick:d?X:V,className:"bg-gradient-to-r from-sky-600 to-blue-600",children:[d?"Update":"Add"," Competitor"]})]})]})]})]}),r.jsxs("div",{className:"grid gap-4",children:[e.map(I=>r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsx(Pe,{children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ce,{className:"text-white",children:I.name}),r.jsx(H,{className:I.status==="active"?"bg-green-500/20 border-green-500/40 text-green-400":"bg-gray-500/20 border-gray-500/40 text-gray-400",children:I.status})]}),r.jsx(st,{className:"text-gray-400 flex items-center gap-2 mt-1",children:r.jsxs("a",{href:I.website,target:"_blank",rel:"noopener noreferrer",className:"hover:text-sky-400 transition-colors flex items-center gap-1",children:[I.website,r.jsx(Tr,{className:"h-3 w-3"})]})})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsx($,{variant:"ghost",size:"sm",onClick:()=>pe(I),className:"text-blue-400 hover:text-blue-300 hover:bg-blue-500/10",children:r.jsx(ta,{className:"h-4 w-4"})})}),r.jsx(gt,{children:"Edit competitor"})]}),r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsx($,{variant:"ghost",size:"sm",onClick:()=>W(I.id),className:"text-red-400 hover:text-red-300 hover:bg-red-500/10",children:r.jsx(Kr,{className:"h-4 w-4"})})}),r.jsx(gt,{children:"Delete competitor"})]})]})]})}),r.jsx(je,{children:r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400",children:"Added"}),r.jsx("p",{className:"text-white font-medium",children:Iu(I.addedDate)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400",children:"Last Checked"}),r.jsx("p",{className:"text-white font-medium",children:I.lastChecked?Iu(I.lastChecked):"Never"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400",children:"Tracked Products"}),r.jsx("p",{className:"text-white font-medium",children:n.filter(ge=>ge.competitorId===I.id).length})]})]})})]},I.id)),e.length===0&&r.jsx(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 border-dashed",children:r.jsxs(je,{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(Lo,{className:"h-12 w-12 text-gray-600 mb-4"}),r.jsx("p",{className:"text-gray-400 text-center",children:'No competitors added yet. Click "Add Competitor" to start tracking.'})]})})]})]}),r.jsxs(lt,{value:"products",className:"space-y-4",children:[r.jsxs("div",{className:"bg-gradient-to-r from-sky-500/10 to-blue-500/10 border border-sky-500/20 rounded-lg p-4",children:[r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(xe,{placeholder:"Search products by name or category...",value:m,onChange:I=>g(I.target.value),className:"pl-10 bg-white/5 border-white/10 text-white placeholder:text-gray-500 focus:border-sky-500/50"})]})}),r.jsxs(dr,{value:A||"all",onValueChange:I=>P(I==="all"?"":I),children:[r.jsx(ur,{className:"w-full md:w-48 bg-white/5 border-white/10 text-white",children:r.jsx(hr,{placeholder:"Filter by category"})}),r.jsxs(fr,{className:"bg-gray-900 border-white/10",children:[r.jsx(Oe,{value:"all",children:"All Categories"}),ve.map(I=>r.jsx(Oe,{value:I,children:I},I))]})]}),r.jsxs(Et,{open:l,onOpenChange:c,children:[r.jsx(jy,{asChild:!0,children:r.jsxs($,{className:"bg-gradient-to-r from-sky-600 to-blue-600 hover:from-sky-500 hover:to-blue-500 shadow-lg shadow-sky-500/20 hover:shadow-sky-500/30 transition-all whitespace-nowrap",onClick:()=>{f(null),Te()},children:[r.jsx(dn,{className:"h-4 w-4 mr-2"}),"Add Product"]})}),r.jsxs(Dt,{className:"bg-gray-900 border-white/10",children:[r.jsxs($t,{children:[r.jsx(Lt,{className:"text-white",children:h?"Edit Product":"Add New Product"}),r.jsx(Kx,{className:"text-gray-400",children:h?"Update product information and price":"Track a competitor's product pricing"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"prod-competitor",className:"text-gray-300",children:"Competitor *"}),r.jsxs(dr,{value:w,onValueChange:S,disabled:!!h,children:[r.jsx(ur,{className:"bg-white/5 border-white/10 text-white",children:r.jsx(hr,{placeholder:"Select competitor"})}),r.jsx(fr,{className:"bg-gray-900 border-white/10",children:e.map(I=>r.jsx(Oe,{value:I.id.toString(),children:I.name},I.id))})]})]}),r.jsxs("div",{children:[r.jsx(le,{htmlFor:"prod-name",className:"text-gray-300",children:"Product Name *"}),r.jsx(xe,{id:"prod-name",value:v,onChange:I=>N(I.target.value),placeholder:"e.g., Gaming PC - RTX 4070",className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{children:[r.jsx(le,{htmlFor:"prod-category",className:"text-gray-300",children:"Category *"}),r.jsxs(dr,{value:A,onValueChange:P,children:[r.jsx(ur,{className:"bg-white/5 border-white/10 text-white",children:r.jsx(hr,{placeholder:"Select category"})}),r.jsx(fr,{className:"bg-gray-900 border-white/10",children:ve.map(I=>r.jsx(Oe,{value:I,children:I},I))})]})]}),r.jsxs("div",{children:[r.jsx(le,{htmlFor:"prod-price",className:"text-gray-300",children:"Price (£) *"}),r.jsx(xe,{id:"prod-price",type:"number",step:"0.01",value:T,onChange:I=>M(I.target.value),placeholder:"999.99",className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{children:[r.jsx(le,{htmlFor:"prod-url",className:"text-gray-300",children:"Product URL *"}),r.jsx(xe,{id:"prod-url",value:E,onChange:I=>C(I.target.value),placeholder:"https://competitor.com/product",className:"bg-white/5 border-white/10 text-white"})]})]}),r.jsxs(Ny,{children:[r.jsx($,{variant:"outline",onClick:Te,children:"Cancel"}),r.jsxs($,{onClick:h?de:ce,className:"bg-gradient-to-r from-sky-600 to-blue-600",children:[h?"Update":"Add"," Product"]})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[r.jsxs("div",{className:"bg-white/5 rounded-lg p-3 border border-white/10",children:[r.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider",children:"Total Products"}),r.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:me.length})]}),r.jsxs("div",{className:"bg-gradient-to-br from-green-500/10 to-emerald-500/10 rounded-lg p-3 border border-green-500/20",children:[r.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider",children:"Price Drops"}),r.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:me.filter(I=>I.previousPrice&&I.currentPrice<I.previousPrice).length})]}),r.jsxs("div",{className:"bg-gradient-to-br from-red-500/10 to-orange-500/10 rounded-lg p-3 border border-red-500/20",children:[r.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider",children:"Price Increases"}),r.jsx("p",{className:"text-2xl font-bold text-red-400 mt-1",children:me.filter(I=>I.previousPrice&&I.currentPrice>I.previousPrice).length})]}),r.jsxs("div",{className:"bg-gradient-to-br from-sky-500/10 to-blue-500/10 rounded-lg p-3 border border-sky-500/20",children:[r.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider",children:"Avg Price"}),r.jsxs("p",{className:"text-2xl font-bold text-sky-400 mt-1",children:["£",me.length>0?(me.reduce((I,ge)=>I+ge.currentPrice,0)/me.length).toFixed(2):"0.00"]})]})]})]}),r.jsxs("div",{className:"grid gap-4",children:[me.map(I=>{const ge=I.previousPrice?(I.currentPrice-I.previousPrice)/I.previousPrice*100:0,Ne=I.previousPrice&&I.currentPrice<I.previousPrice,He=I.previousPrice&&I.currentPrice>I.previousPrice;return r.jsxs(q,{className:`group relative overflow-hidden bg-white/5 backdrop-blur-xl border-white/10 hover:border-sky-500/30 transition-all duration-300 hover:shadow-xl hover:shadow-sky-500/10 hover:-translate-y-1 ${Ne?"border-green-500/20":He?"border-red-500/20":""}`,children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-sky-500/0 via-blue-500/0 to-purple-500/0 group-hover:from-sky-500/5 group-hover:via-blue-500/5 group-hover:to-purple-500/5 transition-all duration-500"}),Ne&&r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-green-500 to-emerald-500 animate-pulse"}),He&&r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-red-500 to-orange-500 animate-pulse"}),r.jsx(Pe,{className:"relative",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx(Ce,{className:"text-white group-hover:text-sky-300 transition-colors",children:I.productName}),Ne&&r.jsxs(H,{className:"bg-gradient-to-r from-green-500/20 to-emerald-500/20 border-green-500/50 text-green-300 animate-pulse shadow-lg shadow-green-500/20",children:[r.jsx(ui,{className:"h-3 w-3 mr-1"}),"Price Drop"]}),He&&r.jsxs(H,{className:"bg-gradient-to-r from-red-500/20 to-orange-500/20 border-red-500/50 text-red-300 shadow-lg shadow-red-500/20",children:[r.jsx(zt,{className:"h-3 w-3 mr-1"}),"Price Increase"]})]}),r.jsxs("div",{className:"flex items-center gap-4 mt-2 flex-wrap",children:[r.jsx(st,{className:"text-gray-400 font-medium",children:oe(I.competitorId)}),r.jsx(H,{className:"bg-gradient-to-r from-blue-500/20 to-cyan-500/20 border-blue-500/40 text-blue-300 shadow-sm",children:I.category})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsx($,{variant:"ghost",size:"sm",onClick:()=>window.open(I.url,"_blank"),className:"text-sky-400 hover:text-sky-300 hover:bg-sky-500/20 hover:scale-110 transition-all duration-200",children:r.jsx(Tr,{className:"h-4 w-4"})})}),r.jsx(gt,{children:"View product page"})]}),r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsx($,{variant:"ghost",size:"sm",onClick:()=>re(I),className:"text-blue-400 hover:text-blue-300 hover:bg-blue-500/20 hover:scale-110 transition-all duration-200",children:r.jsx(ta,{className:"h-4 w-4"})})}),r.jsx(gt,{children:"Edit product"})]}),r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsx($,{variant:"ghost",size:"sm",onClick:()=>fe(I.id),className:"text-red-400 hover:text-red-300 hover:bg-red-500/20 hover:scale-110 transition-all duration-200",children:r.jsx(Kr,{className:"h-4 w-4"})})}),r.jsx(gt,{children:"Delete product"})]})]})]})}),r.jsxs(je,{className:"relative",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-gradient-to-br from-sky-500/10 to-blue-500/10 border border-sky-500/20 rounded-lg p-4 hover:scale-105 transition-transform duration-200",children:[r.jsx("p",{className:"text-gray-400 text-xs uppercase tracking-wider mb-1",children:"Current Price"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("p",{className:"text-white font-bold text-2xl bg-gradient-to-r from-sky-400 to-blue-400 bg-clip-text text-transparent",children:["£",I.currentPrice.toFixed(2)]}),be(I.currentPrice,I.previousPrice)]}),I.previousPrice&&r.jsxs("p",{className:"text-xs text-gray-500 mt-1 line-through",children:["was £",I.previousPrice.toFixed(2)]})]}),r.jsxs("div",{className:`rounded-lg p-4 border transition-all duration-200 hover:scale-105 ${Ne?"bg-gradient-to-br from-green-500/10 to-emerald-500/10 border-green-500/20":He?"bg-gradient-to-br from-red-500/10 to-orange-500/10 border-red-500/20":"bg-white/5 border-white/10"}`,children:[r.jsx("p",{className:"text-gray-400 text-xs uppercase tracking-wider mb-1",children:"Change %"}),r.jsx("p",{className:`font-bold text-2xl ${Ne?"text-green-400":He?"text-red-400":"text-gray-400"}`,children:I.previousPrice?`${ge>0?"+":""}${ge.toFixed(1)}%`:"N/A"}),I.previousPrice&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Ne?"Saving opportunity":He?"Price increased":"No change"})]}),r.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4 hover:scale-105 transition-transform duration-200",children:[r.jsx("p",{className:"text-gray-400 text-xs uppercase tracking-wider mb-1",children:"Difference (£)"}),r.jsx("p",{className:`font-bold text-2xl ${I.previousPrice?I.currentPrice<I.previousPrice?"text-green-400":I.currentPrice>I.previousPrice?"text-red-400":"text-gray-400":"text-gray-400"}`,children:I.previousPrice?`${I.currentPrice<I.previousPrice?"-":"+"}£${Math.abs(I.currentPrice-I.previousPrice).toFixed(2)}`:"N/A"}),I.previousPrice&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"from previous price"})]}),r.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4 hover:scale-105 transition-transform duration-200",children:[r.jsx("p",{className:"text-gray-400 text-xs uppercase tracking-wider mb-1",children:"Last Updated"}),r.jsx("p",{className:"text-white font-semibold text-lg",children:Iu(I.lastUpdated)}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Track date"})]})]}),I.previousPrice&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400 mb-2",children:[r.jsx("span",{children:"Price Trend"}),r.jsx("span",{children:Ne?"Favorable":He?"Unfavorable":"Stable"})]}),r.jsx("div",{className:"h-2 bg-white/5 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full transition-all duration-1000 ${Ne?"bg-gradient-to-r from-green-500 to-emerald-500":He?"bg-gradient-to-r from-red-500 to-orange-500":"bg-gradient-to-r from-gray-500 to-gray-600"}`,style:{width:`${Math.min(Math.abs(ge)*10,100)}%`}})})]})]})]},I.id)}),me.length===0&&r.jsx(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 border-dashed",children:r.jsxs(je,{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(_y,{className:"h-12 w-12 text-gray-600 mb-4"}),r.jsx("p",{className:"text-gray-400 text-center",children:m?"No products match your search":"No products added yet. Click 'Add Product' to start tracking prices."})]})})]})]}),r.jsxs(lt,{value:"trends",className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Market Trends & Analysis"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Popular components and pricing trends in the market"})]}),r.jsx("div",{className:"grid gap-4",children:s.map((I,ge)=>r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsx(Pe,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[se(I.trend),r.jsxs("div",{children:[r.jsx(Ce,{className:"text-white",children:I.component}),r.jsx(st,{className:"text-gray-400",children:"Average market price"})]})]}),r.jsx(H,{className:I.trend==="down"?"bg-green-500/20 border-green-500/40 text-green-400":I.trend==="up"?"bg-red-500/20 border-red-500/40 text-red-400":"bg-gray-500/20 border-gray-500/40 text-gray-400",children:I.trend==="down"?"Decreasing":I.trend==="up"?"Increasing":"Stable"})]})}),r.jsx(je,{children:r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Average Price"}),r.jsxs("p",{className:"text-white font-bold text-lg",children:["£",I.averagePrice.toFixed(2)]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"30-Day Change"}),r.jsxs("p",{className:`font-bold text-lg ${I.priceChange<0?"text-green-400":I.priceChange>0?"text-red-400":"text-gray-400"}`,children:[I.priceChange>0?"+":"",I.priceChange.toFixed(1),"%"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Popularity"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex-1 bg-white/10 rounded-full h-2",children:r.jsx("div",{className:"bg-gradient-to-r from-sky-500 to-blue-500 h-2 rounded-full",style:{width:`${I.popularity}%`}})}),r.jsxs("span",{className:"text-white font-medium",children:[I.popularity,"%"]})]})]})]})})]},ge))}),r.jsxs(q,{className:"bg-gradient-to-r from-sky-500/10 to-blue-500/10 border-sky-500/20",children:[r.jsx(Pe,{children:r.jsxs(Ce,{className:"text-white flex items-center gap-2",children:[r.jsx(mt,{className:"h-5 w-5 text-yellow-400"}),"Market Insights"]})}),r.jsxs(je,{className:"space-y-2 text-gray-300",children:[r.jsx("p",{children:"• RTX 4070 prices are trending down (-5.2%), making it a good time to stock up or offer competitive pricing"}),r.jsx("p",{children:"• AMD Ryzen 7 7800X3D remains extremely popular (95% popularity) with decreasing prices"}),r.jsx("p",{children:"• RTX 4060 prices are rising (+3.1%), consider adjusting your pricing strategy"}),r.jsx("p",{children:"• Current market sentiment favors mid-range gaming builds over high-end workstations"})]})]})]})]})]})};function Pa({className:e,...t}){return r.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:r.jsx("table",{"data-slot":"table",className:Fa("w-full caption-bottom text-sm",e),...t})})}function Ca({className:e,...t}){return r.jsx("thead",{"data-slot":"table-header",className:Fa("[&_tr]:border-b",e),...t})}function Oa({className:e,...t}){return r.jsx("tbody",{"data-slot":"table-body",className:Fa("[&_tr:last-child]:border-0",e),...t})}function yr({className:e,...t}){return r.jsx("tr",{"data-slot":"table-row",className:Fa("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function Le({className:e,...t}){return r.jsx("th",{"data-slot":"table-head",className:Fa("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function Re({className:e,...t}){return r.jsx("td",{"data-slot":"table-cell",className:Fa("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}var Ru,zy;function zi(){if(zy)return Ru;zy=1;var e=_s(),t=Es(),n="[object Symbol]";function a(s){return typeof s=="symbol"||t(s)&&e(s)==n}return Ru=a,Ru}var $u,Vy;function P0(){if(Vy)return $u;Vy=1;var e=Qr(),t=zi(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function s(i,o){if(e(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||t(i)?!0:a.test(i)||!n.test(i)||o!=null&&i in Object(o)}return $u=s,$u}var Lu,Wy;function qa(){if(Wy)return Lu;Wy=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return Lu=e,Lu}var Bu,Hy;function C0(){if(Hy)return Bu;Hy=1;var e=_s(),t=qa(),n="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!t(l))return!1;var c=e(l);return c==a||c==s||c==n||c==i}return Bu=o,Bu}var Fu,Gy;function l5(){if(Gy)return Fu;Gy=1;var e=pa(),t=e["__core-js_shared__"];return Fu=t,Fu}var qu,Ky;function c5(){if(Ky)return qu;Ky=1;var e=l5(),t=(function(){var a=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""})();function n(a){return!!t&&t in a}return qu=n,qu}var Uu,Yy;function Nk(){if(Yy)return Uu;Yy=1;var e=Function.prototype,t=e.toString;function n(a){if(a!=null){try{return t.call(a)}catch{}try{return a+""}catch{}}return""}return Uu=n,Uu}var zu,Xy;function d5(){if(Xy)return zu;Xy=1;var e=C0(),t=c5(),n=qa(),a=Nk(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,d=l.hasOwnProperty,u=RegExp("^"+c.call(d).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(f){if(!n(f)||t(f))return!1;var m=e(f)?u:i;return m.test(a(f))}return zu=h,zu}var Vu,Qy;function u5(){if(Qy)return Vu;Qy=1;function e(t,n){return t==null?void 0:t[n]}return Vu=e,Vu}var Wu,Jy;function Ds(){if(Jy)return Wu;Jy=1;var e=d5(),t=u5();function n(a,s){var i=t(a,s);return e(i)?i:void 0}return Wu=n,Wu}var Hu,Zy;function Dd(){if(Zy)return Hu;Zy=1;var e=Ds(),t=e(Object,"create");return Hu=t,Hu}var Gu,eb;function h5(){if(eb)return Gu;eb=1;var e=Dd();function t(){this.__data__=e?e(null):{},this.size=0}return Gu=t,Gu}var Ku,tb;function f5(){if(tb)return Ku;tb=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return Ku=e,Ku}var Yu,rb;function m5(){if(rb)return Yu;rb=1;var e=Dd(),t="__lodash_hash_undefined__",n=Object.prototype,a=n.hasOwnProperty;function s(i){var o=this.__data__;if(e){var l=o[i];return l===t?void 0:l}return a.call(o,i)?o[i]:void 0}return Yu=s,Yu}var Xu,nb;function x5(){if(nb)return Xu;nb=1;var e=Dd(),t=Object.prototype,n=t.hasOwnProperty;function a(s){var i=this.__data__;return e?i[s]!==void 0:n.call(i,s)}return Xu=a,Xu}var Qu,ab;function p5(){if(ab)return Qu;ab=1;var e=Dd(),t="__lodash_hash_undefined__";function n(a,s){var i=this.__data__;return this.size+=this.has(a)?0:1,i[a]=e&&s===void 0?t:s,this}return Qu=n,Qu}var Ju,sb;function g5(){if(sb)return Ju;sb=1;var e=h5(),t=f5(),n=m5(),a=x5(),s=p5();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=a,i.prototype.set=s,Ju=i,Ju}var Zu,ib;function y5(){if(ib)return Zu;ib=1;function e(){this.__data__=[],this.size=0}return Zu=e,Zu}var eh,ob;function O0(){if(ob)return eh;ob=1;function e(t,n){return t===n||t!==t&&n!==n}return eh=e,eh}var th,lb;function Md(){if(lb)return th;lb=1;var e=O0();function t(n,a){for(var s=n.length;s--;)if(e(n[s][0],a))return s;return-1}return th=t,th}var rh,cb;function b5(){if(cb)return rh;cb=1;var e=Md(),t=Array.prototype,n=t.splice;function a(s){var i=this.__data__,o=e(i,s);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():n.call(i,o,1),--this.size,!0}return rh=a,rh}var nh,db;function v5(){if(db)return nh;db=1;var e=Md();function t(n){var a=this.__data__,s=e(a,n);return s<0?void 0:a[s][1]}return nh=t,nh}var ah,ub;function w5(){if(ub)return ah;ub=1;var e=Md();function t(n){return e(this.__data__,n)>-1}return ah=t,ah}var sh,hb;function j5(){if(hb)return sh;hb=1;var e=Md();function t(n,a){var s=this.__data__,i=e(s,n);return i<0?(++this.size,s.push([n,a])):s[i][1]=a,this}return sh=t,sh}var ih,fb;function Id(){if(fb)return ih;fb=1;var e=y5(),t=b5(),n=v5(),a=w5(),s=j5();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=a,i.prototype.set=s,ih=i,ih}var oh,mb;function T0(){if(mb)return oh;mb=1;var e=Ds(),t=pa(),n=e(t,"Map");return oh=n,oh}var lh,xb;function N5(){if(xb)return lh;xb=1;var e=g5(),t=Id(),n=T0();function a(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return lh=a,lh}var ch,pb;function S5(){if(pb)return ch;pb=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return ch=e,ch}var dh,gb;function Rd(){if(gb)return dh;gb=1;var e=S5();function t(n,a){var s=n.__data__;return e(a)?s[typeof a=="string"?"string":"hash"]:s.map}return dh=t,dh}var uh,yb;function k5(){if(yb)return uh;yb=1;var e=Rd();function t(n){var a=e(this,n).delete(n);return this.size-=a?1:0,a}return uh=t,uh}var hh,bb;function A5(){if(bb)return hh;bb=1;var e=Rd();function t(n){return e(this,n).get(n)}return hh=t,hh}var fh,vb;function P5(){if(vb)return fh;vb=1;var e=Rd();function t(n){return e(this,n).has(n)}return fh=t,fh}var mh,wb;function C5(){if(wb)return mh;wb=1;var e=Rd();function t(n,a){var s=e(this,n),i=s.size;return s.set(n,a),this.size+=s.size==i?0:1,this}return mh=t,mh}var xh,jb;function _0(){if(jb)return xh;jb=1;var e=N5(),t=k5(),n=A5(),a=P5(),s=C5();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=a,i.prototype.set=s,xh=i,xh}var ph,Nb;function Sk(){if(Nb)return ph;Nb=1;var e=_0(),t="Expected a function";function n(a,s){if(typeof a!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var i=function(){var o=arguments,l=s?s.apply(this,o):o[0],c=i.cache;if(c.has(l))return c.get(l);var d=a.apply(this,o);return i.cache=c.set(l,d)||c,d};return i.cache=new(n.Cache||e),i}return n.Cache=e,ph=n,ph}var gh,Sb;function O5(){if(Sb)return gh;Sb=1;var e=Sk(),t=500;function n(a){var s=e(a,function(o){return i.size===t&&i.clear(),o}),i=s.cache;return s}return gh=n,gh}var yh,kb;function T5(){if(kb)return yh;kb=1;var e=O5(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,a=e(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(t,function(o,l,c,d){i.push(c?d.replace(n,"$1"):l||o)}),i});return yh=a,yh}var bh,Ab;function E0(){if(Ab)return bh;Ab=1;function e(t,n){for(var a=-1,s=t==null?0:t.length,i=Array(s);++a<s;)i[a]=n(t[a],a,t);return i}return bh=e,bh}var vh,Pb;function _5(){if(Pb)return vh;Pb=1;var e=N0(),t=E0(),n=Qr(),a=zi(),s=e?e.prototype:void 0,i=s?s.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return t(l,o)+"";if(a(l))return i?i.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return vh=o,vh}var wh,Cb;function kk(){if(Cb)return wh;Cb=1;var e=_5();function t(n){return n==null?"":e(n)}return wh=t,wh}var jh,Ob;function Ak(){if(Ob)return jh;Ob=1;var e=Qr(),t=P0(),n=T5(),a=kk();function s(i,o){return e(i)?i:t(i,o)?[i]:n(a(i))}return jh=s,jh}var Nh,Tb;function $d(){if(Tb)return Nh;Tb=1;var e=zi();function t(n){if(typeof n=="string"||e(n))return n;var a=n+"";return a=="0"&&1/n==-1/0?"-0":a}return Nh=t,Nh}var Sh,_b;function D0(){if(_b)return Sh;_b=1;var e=Ak(),t=$d();function n(a,s){s=e(s,a);for(var i=0,o=s.length;a!=null&&i<o;)a=a[t(s[i++])];return i&&i==o?a:void 0}return Sh=n,Sh}var kh,Eb;function Pk(){if(Eb)return kh;Eb=1;var e=D0();function t(n,a,s){var i=n==null?void 0:e(n,a);return i===void 0?s:i}return kh=t,kh}var E5=Pk();const Yr=Pt(E5);var Ah,Db;function D5(){if(Db)return Ah;Db=1;function e(t){return t==null}return Ah=e,Ah}var M5=D5();const Ue=Pt(M5);var I5=C0();const De=Pt(I5);var R5=qa();const Vi=Pt(R5);var Ph={exports:{}},at={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mb;function $5(){if(Mb)return at;Mb=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),g;g=Symbol.for("react.module.reference");function p(x){if(typeof x=="object"&&x!==null){var b=x.$$typeof;switch(b){case e:switch(x=x.type,x){case n:case s:case a:case d:case u:return x;default:switch(x=x&&x.$$typeof,x){case l:case o:case c:case f:case h:case i:return x;default:return b}}case t:return b}}}return at.ContextConsumer=o,at.ContextProvider=i,at.Element=e,at.ForwardRef=c,at.Fragment=n,at.Lazy=f,at.Memo=h,at.Portal=t,at.Profiler=s,at.StrictMode=a,at.Suspense=d,at.SuspenseList=u,at.isAsyncMode=function(){return!1},at.isConcurrentMode=function(){return!1},at.isContextConsumer=function(x){return p(x)===o},at.isContextProvider=function(x){return p(x)===i},at.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===e},at.isForwardRef=function(x){return p(x)===c},at.isFragment=function(x){return p(x)===n},at.isLazy=function(x){return p(x)===f},at.isMemo=function(x){return p(x)===h},at.isPortal=function(x){return p(x)===t},at.isProfiler=function(x){return p(x)===s},at.isStrictMode=function(x){return p(x)===a},at.isSuspense=function(x){return p(x)===d},at.isSuspenseList=function(x){return p(x)===u},at.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===n||x===s||x===a||x===d||x===u||x===m||typeof x=="object"&&x!==null&&(x.$$typeof===f||x.$$typeof===h||x.$$typeof===i||x.$$typeof===o||x.$$typeof===c||x.$$typeof===g||x.getModuleId!==void 0)},at.typeOf=p,at}var Ib;function L5(){return Ib||(Ib=1,Ph.exports=$5()),Ph.exports}var B5=L5(),Ch,Rb;function Ck(){if(Rb)return Ch;Rb=1;var e=_s(),t=Es(),n="[object Number]";function a(s){return typeof s=="number"||t(s)&&e(s)==n}return Ch=a,Ch}var Oh,$b;function F5(){if($b)return Oh;$b=1;var e=Ck();function t(n){return e(n)&&n!=+n}return Oh=t,Oh}var q5=F5();const Wi=Pt(q5);var U5=Ck();const z5=Pt(U5);var Er=function(t){return t===0?0:t>0?1:-1},hs=function(t){return Ns(t)&&t.indexOf("%")===t.length-1},he=function(t){return z5(t)&&!Wi(t)},V5=function(t){return Ue(t)},nr=function(t){return he(t)||Ns(t)},W5=0,Ms=function(t){var n=++W5;return"".concat(t||"").concat(n)},Dr=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!he(t)&&!Ns(t))return a;var i;if(hs(t)){var o=t.indexOf("%");i=n*parseFloat(t.slice(0,o))/100}else i=+t;return Wi(i)&&(i=a),s&&i>n&&(i=n),i},Ta=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},H5=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,a={},s=0;s<n;s++)if(!a[t[s]])a[t[s]]=!0;else return!0;return!1},rr=function(t,n){return he(t)&&he(n)?function(a){return t+a*(n-t)}:function(){return n}};function Pc(e,t,n){return!e||!e.length?null:e.find(function(a){return a&&(typeof t=="function"?t(a):Yr(a,t))===n})}var G5=function(t,n){return he(t)&&he(n)?t-n:Ns(t)&&Ns(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function hi(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function Zx(e){"@babel/helpers - typeof";return Zx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zx(e)}var K5=["viewBox","children"],Y5=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Lb=["points","pathLength"],Th={svg:K5,polygon:Lb,polyline:Lb},M0=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Cc=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(k.isValidElement(t)&&(a=t.props),!Vi(a))return null;var s={};return Object.keys(a).forEach(function(i){M0.includes(i)&&(s[i]=n||function(o){return a[i](a,o)})}),s},X5=function(t,n,a){return function(s){return t(n,a,s),null}},ks=function(t,n,a){if(!Vi(t)||Zx(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];M0.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=X5(o,n,a))}),s},Q5=["children"],J5=["children"];function Bb(e,t){if(e==null)return{};var n=Z5(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Z5(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function ep(e){"@babel/helpers - typeof";return ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ep(e)}var Fb={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},da=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},qb=null,_h=null,I0=function e(t){if(t===qb&&Array.isArray(_h))return _h;var n=[];return k.Children.forEach(t,function(a){Ue(a)||(B5.isFragment(a)?n=n.concat(e(a.props.children)):n.push(a))}),_h=n,qb=t,n};function Xr(e,t){var n=[],a=[];return Array.isArray(t)?a=t.map(function(s){return da(s)}):a=[da(t)],I0(e).forEach(function(s){var i=Yr(s,"type.displayName")||Yr(s,"type.name");a.indexOf(i)!==-1&&n.push(s)}),n}function Hr(e,t){var n=Xr(e,t);return n&&n[0]}var Ub=function(t){if(!t||!t.props)return!1;var n=t.props,a=n.width,s=n.height;return!(!he(a)||a<=0||!he(s)||s<=0)},eT=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],tT=function(t){return t&&t.type&&Ns(t.type)&&eT.indexOf(t.type)>=0},Ok=function(t){return t&&ep(t)==="object"&&"clipDot"in t},rT=function(t,n,a,s){var i,o=(i=Th==null?void 0:Th[s])!==null&&i!==void 0?i:[];return n.startsWith("data-")||!De(t)&&(s&&o.includes(n)||Y5.includes(n))||a&&M0.includes(n)},ke=function(t,n,a){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(k.isValidElement(t)&&(s=t.props),!Vi(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;rT((l=s)===null||l===void 0?void 0:l[o],o,n,a)&&(i[o]=s[o])}),i},tp=function e(t,n){if(t===n)return!0;var a=k.Children.count(t);if(a!==k.Children.count(n))return!1;if(a===0)return!0;if(a===1)return zb(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var s=0;s<a;s++){var i=t[s],o=n[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!zb(i,o))return!1}return!0},zb=function(t,n){if(Ue(t)&&Ue(n))return!0;if(!Ue(t)&&!Ue(n)){var a=t.props||{},s=a.children,i=Bb(a,Q5),o=n.props||{},l=o.children,c=Bb(o,J5);return s&&l?hi(i,c)&&tp(s,l):!s&&!l?hi(i,c):!1}return!1},Vb=function(t,n){var a=[],s={};return I0(t).forEach(function(i,o){if(tT(i))a.push(i);else if(i){var l=da(i.type),c=n[l]||{},d=c.handler,u=c.once;if(d&&(!u||!s[l])){var h=d(i,l,o);a.push(h),s[l]=!0}}}),a},nT=function(t){var n=t&&t.type;return n&&Fb[n]?Fb[n]:null},aT=function(t,n){return I0(n).indexOf(t)},sT=["children","width","height","viewBox","className","style","title","desc"];function rp(){return rp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},rp.apply(this,arguments)}function iT(e,t){if(e==null)return{};var n=oT(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function oT(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function np(e){var t=e.children,n=e.width,a=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,d=iT(e,sT),u=s||{width:n,height:a,x:0,y:0},h=Ve("recharts-surface",i);return R.createElement("svg",rp({},ke(d,!0,"svg"),{className:h,width:n,height:a,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),R.createElement("title",null,l),R.createElement("desc",null,c),t)}var lT=["children","className"];function ap(){return ap=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ap.apply(this,arguments)}function cT(e,t){if(e==null)return{};var n=dT(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function dT(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}var Ye=R.forwardRef(function(e,t){var n=e.children,a=e.className,s=cT(e,lT),i=Ve("recharts-layer",a);return R.createElement("g",ap({className:i},ke(s,!0),{ref:t}),n)}),Nn=function(t,n){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i]},Eh,Wb;function uT(){if(Wb)return Eh;Wb=1;function e(t,n,a){var s=-1,i=t.length;n<0&&(n=-n>i?0:i+n),a=a>i?i:a,a<0&&(a+=i),i=n>a?0:a-n>>>0,n>>>=0;for(var o=Array(i);++s<i;)o[s]=t[s+n];return o}return Eh=e,Eh}var Dh,Hb;function hT(){if(Hb)return Dh;Hb=1;var e=uT();function t(n,a,s){var i=n.length;return s=s===void 0?i:s,!a&&s>=i?n:e(n,a,s)}return Dh=t,Dh}var Mh,Gb;function Tk(){if(Gb)return Mh;Gb=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=t+n+a,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+s+i+"]");function c(d){return l.test(d)}return Mh=c,Mh}var Ih,Kb;function fT(){if(Kb)return Ih;Kb=1;function e(t){return t.split("")}return Ih=e,Ih}var Rh,Yb;function mT(){if(Yb)return Rh;Yb=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=t+n+a,i="\\ufe0e\\ufe0f",o="["+e+"]",l="["+s+"]",c="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+c+")",u="[^"+e+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",g=d+"?",p="["+i+"]?",x="(?:"+m+"(?:"+[u,h,f].join("|")+")"+p+g+")*",b=p+g+x,y="(?:"+[u+l+"?",l,h,f,o].join("|")+")",w=RegExp(c+"(?="+c+")|"+y+b,"g");function S(v){return v.match(w)||[]}return Rh=S,Rh}var $h,Xb;function xT(){if(Xb)return $h;Xb=1;var e=fT(),t=Tk(),n=mT();function a(s){return t(s)?n(s):e(s)}return $h=a,$h}var Lh,Qb;function pT(){if(Qb)return Lh;Qb=1;var e=hT(),t=Tk(),n=xT(),a=kk();function s(i){return function(o){o=a(o);var l=t(o)?n(o):void 0,c=l?l[0]:o.charAt(0),d=l?e(l,1).join(""):o.slice(1);return c[i]()+d}}return Lh=s,Lh}var Bh,Jb;function gT(){if(Jb)return Bh;Jb=1;var e=pT(),t=e("toUpperCase");return Bh=t,Bh}var yT=gT();const Ld=Pt(yT);function kt(e){return function(){return e}}const _k=Math.cos,Oc=Math.sin,Pn=Math.sqrt,Tc=Math.PI,Bd=2*Tc,sp=Math.PI,ip=2*sp,os=1e-6,bT=ip-os;function Ek(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function vT(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Ek;const n=10**t;return function(a){this._+=a[0];for(let s=1,i=a.length;s<i;++s)this._+=Math.round(arguments[s]*n)/n+a[s]}}class wT{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Ek:vT(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,a,s){this._append`Q${+t},${+n},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(t,n,a,s,i,o){this._append`C${+t},${+n},${+a},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,n,a,s,i){if(t=+t,n=+n,a=+a,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=a-t,d=s-n,u=o-t,h=l-n,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>os)if(!(Math.abs(h*c-d*u)>os)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let m=a-o,g=s-l,p=c*c+d*d,x=m*m+g*g,b=Math.sqrt(p),y=Math.sqrt(f),w=i*Math.tan((sp-Math.acos((p+f-x)/(2*b*y)))/2),S=w/y,v=w/b;Math.abs(S-1)>os&&this._append`L${t+S*u},${n+S*h}`,this._append`A${i},${i},0,0,${+(h*m>u*g)},${this._x1=t+v*c},${this._y1=n+v*d}`}}arc(t,n,a,s,i,o){if(t=+t,n=+n,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(s),c=a*Math.sin(s),d=t+l,u=n+c,h=1^o,f=o?s-i:i-s;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>os||Math.abs(this._y1-u)>os)&&this._append`L${d},${u}`,a&&(f<0&&(f=f%ip+ip),f>bT?this._append`A${a},${a},0,1,${h},${t-l},${n-c}A${a},${a},0,1,${h},${this._x1=d},${this._y1=u}`:f>os&&this._append`A${a},${a},0,${+(f>=sp)},${h},${this._x1=t+a*Math.cos(i)},${this._y1=n+a*Math.sin(i)}`)}rect(t,n,a,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}}function R0(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);t=a}return e},()=>new wT(t)}function $0(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Dk(e){this._context=e}Dk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Fd(e){return new Dk(e)}function Mk(e){return e[0]}function Ik(e){return e[1]}function Rk(e,t){var n=kt(!0),a=null,s=Fd,i=null,o=R0(l);e=typeof e=="function"?e:e===void 0?Mk:kt(e),t=typeof t=="function"?t:t===void 0?Ik:kt(t);function l(c){var d,u=(c=$0(c)).length,h,f=!1,m;for(a==null&&(i=s(m=o())),d=0;d<=u;++d)!(d<u&&n(h=c[d],d,c))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(h,d,c),+t(h,d,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:kt(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:kt(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:kt(!!c),l):n},l.curve=function(c){return arguments.length?(s=c,a!=null&&(i=s(a)),l):s},l.context=function(c){return arguments.length?(c==null?a=i=null:i=s(a=c),l):a},l}function nc(e,t,n){var a=null,s=kt(!0),i=null,o=Fd,l=null,c=R0(d);e=typeof e=="function"?e:e===void 0?Mk:kt(+e),t=typeof t=="function"?t:kt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Ik:kt(+n);function d(h){var f,m,g,p=(h=$0(h)).length,x,b=!1,y,w=new Array(p),S=new Array(p);for(i==null&&(l=o(y=c())),f=0;f<=p;++f){if(!(f<p&&s(x=h[f],f,h))===b)if(b=!b)m=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=f-1;g>=m;--g)l.point(w[g],S[g]);l.lineEnd(),l.areaEnd()}b&&(w[f]=+e(x,f,h),S[f]=+t(x,f,h),l.point(a?+a(x,f,h):w[f],n?+n(x,f,h):S[f]))}if(y)return l=null,y+""||null}function u(){return Rk().defined(s).curve(o).context(i)}return d.x=function(h){return arguments.length?(e=typeof h=="function"?h:kt(+h),a=null,d):e},d.x0=function(h){return arguments.length?(e=typeof h=="function"?h:kt(+h),d):e},d.x1=function(h){return arguments.length?(a=h==null?null:typeof h=="function"?h:kt(+h),d):a},d.y=function(h){return arguments.length?(t=typeof h=="function"?h:kt(+h),n=null,d):t},d.y0=function(h){return arguments.length?(t=typeof h=="function"?h:kt(+h),d):t},d.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:kt(+h),d):n},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(n)},d.lineX1=function(){return u().x(a).y(t)},d.defined=function(h){return arguments.length?(s=typeof h=="function"?h:kt(!!h),d):s},d.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),d):o},d.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),d):i},d}class $k{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function jT(e){return new $k(e,!0)}function NT(e){return new $k(e,!1)}const L0={draw(e,t){const n=Pn(t/Tc);e.moveTo(n,0),e.arc(0,0,n,0,Bd)}},ST={draw(e,t){const n=Pn(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Lk=Pn(1/3),kT=Lk*2,AT={draw(e,t){const n=Pn(t/kT),a=n*Lk;e.moveTo(0,-n),e.lineTo(a,0),e.lineTo(0,n),e.lineTo(-a,0),e.closePath()}},PT={draw(e,t){const n=Pn(t),a=-n/2;e.rect(a,a,n,n)}},CT=.8908130915292852,Bk=Oc(Tc/10)/Oc(7*Tc/10),OT=Oc(Bd/10)*Bk,TT=-_k(Bd/10)*Bk,_T={draw(e,t){const n=Pn(t*CT),a=OT*n,s=TT*n;e.moveTo(0,-n),e.lineTo(a,s);for(let i=1;i<5;++i){const o=Bd*i/5,l=_k(o),c=Oc(o);e.lineTo(c*n,-l*n),e.lineTo(l*a-c*s,c*a+l*s)}e.closePath()}},Fh=Pn(3),ET={draw(e,t){const n=-Pn(t/(Fh*3));e.moveTo(0,n*2),e.lineTo(-Fh*n,-n),e.lineTo(Fh*n,-n),e.closePath()}},rn=-.5,nn=Pn(3)/2,op=1/Pn(12),DT=(op/2+1)*3,MT={draw(e,t){const n=Pn(t/DT),a=n/2,s=n*op,i=a,o=n*op+n,l=-i,c=o;e.moveTo(a,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(rn*a-nn*s,nn*a+rn*s),e.lineTo(rn*i-nn*o,nn*i+rn*o),e.lineTo(rn*l-nn*c,nn*l+rn*c),e.lineTo(rn*a+nn*s,rn*s-nn*a),e.lineTo(rn*i+nn*o,rn*o-nn*i),e.lineTo(rn*l+nn*c,rn*c-nn*l),e.closePath()}};function IT(e,t){let n=null,a=R0(s);e=typeof e=="function"?e:kt(e||L0),t=typeof t=="function"?t:kt(t===void 0?64:+t);function s(){let i;if(n||(n=i=a()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:kt(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:kt(+i),s):t},s.context=function(i){return arguments.length?(n=i??null,s):n},s}function _c(){}function Ec(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Fk(e){this._context=e}Fk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ec(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ec(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function RT(e){return new Fk(e)}function qk(e){this._context=e}qk.prototype={areaStart:_c,areaEnd:_c,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ec(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $T(e){return new qk(e)}function Uk(e){this._context=e}Uk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:Ec(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function LT(e){return new Uk(e)}function zk(e){this._context=e}zk.prototype={areaStart:_c,areaEnd:_c,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function BT(e){return new zk(e)}function Zb(e){return e<0?-1:1}function ev(e,t,n){var a=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(a||s<0&&-0),o=(n-e._y1)/(s||a<0&&-0),l=(i*s+o*a)/(a+s);return(Zb(i)+Zb(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function tv(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function qh(e,t,n){var a=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-a)/3;e._context.bezierCurveTo(a+l,s+l*t,i-l,o-l*n,i,o)}function Dc(e){this._context=e}Dc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:qh(this,this._t0,tv(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,qh(this,tv(this,n=ev(this,e,t)),n);break;default:qh(this,this._t0,n=ev(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Vk(e){this._context=new Wk(e)}(Vk.prototype=Object.create(Dc.prototype)).point=function(e,t){Dc.prototype.point.call(this,t,e)};function Wk(e){this._context=e}Wk.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,a,s,i){this._context.bezierCurveTo(t,e,a,n,i,s)}};function FT(e){return new Dc(e)}function qT(e){return new Vk(e)}function Hk(e){this._context=e}Hk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var a=rv(e),s=rv(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(a[0][i],s[0][i],a[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function rv(e){var t,n=e.length-1,a,s=new Array(n),i=new Array(n),o=new Array(n);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[n-1]=2,i[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)a=s[t]/i[t-1],i[t]-=a,o[t]-=a*o[t-1];for(s[n-1]=o[n-1]/i[n-1],t=n-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[n-1]=(e[n]+s[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function UT(e){return new Hk(e)}function qd(e,t){this._context=e,this._t=t}qd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function zT(e){return new qd(e,.5)}function VT(e){return new qd(e,0)}function WT(e){return new qd(e,1)}function xi(e,t){if((o=e.length)>1)for(var n=1,a,s,i=e[t[0]],o,l=i.length;n<o;++n)for(s=i,i=e[t[n]],a=0;a<l;++a)i[a][1]+=i[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}function lp(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function HT(e,t){return e[t]}function GT(e){const t=[];return t.key=e,t}function KT(){var e=kt([]),t=lp,n=xi,a=HT;function s(i){var o=Array.from(e.apply(this,arguments),GT),l,c=o.length,d=-1,u;for(const h of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+a(h,o[l].key,d,i)]).data=h;for(l=0,u=$0(t(o));l<c;++l)o[u[l]].index=l;return n(o,u),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:kt(Array.from(i)),s):e},s.value=function(i){return arguments.length?(a=typeof i=="function"?i:kt(+i),s):a},s.order=function(i){return arguments.length?(t=i==null?lp:typeof i=="function"?i:kt(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(n=i??xi,s):n},s}function YT(e,t){if((a=e.length)>0){for(var n,a,s=0,i=e[0].length,o;s<i;++s){for(o=n=0;n<a;++n)o+=e[n][s][1]||0;if(o)for(n=0;n<a;++n)e[n][s][1]/=o}xi(e,t)}}function XT(e,t){if((s=e.length)>0){for(var n=0,a=e[t[0]],s,i=a.length;n<i;++n){for(var o=0,l=0;o<s;++o)l+=e[o][n][1]||0;a[n][1]+=a[n][0]=-l/2}xi(e,t)}}function QT(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var n=0,a=1,s,i,o;a<i;++a){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],h=u[a][1]||0,f=u[a-1][1]||0,m=(h-f)/2,g=0;g<l;++g){var p=e[t[g]],x=p[a][1]||0,b=p[a-1][1]||0;m+=x-b}c+=h,d+=m*h}s[a-1][1]+=s[a-1][0]=n,c&&(n-=d/c)}s[a-1][1]+=s[a-1][0]=n,xi(e,t)}}function qo(e){"@babel/helpers - typeof";return qo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qo(e)}var JT=["type","size","sizeType"];function cp(){return cp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},cp.apply(this,arguments)}function nv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function av(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nv(Object(n),!0).forEach(function(a){ZT(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nv(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function ZT(e,t,n){return t=e_(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e_(e){var t=t_(e,"string");return qo(t)=="symbol"?t:t+""}function t_(e,t){if(qo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(qo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function r_(e,t){if(e==null)return{};var n=n_(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function n_(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}var Gk={symbolCircle:L0,symbolCross:ST,symbolDiamond:AT,symbolSquare:PT,symbolStar:_T,symbolTriangle:ET,symbolWye:MT},a_=Math.PI/180,s_=function(t){var n="symbol".concat(Ld(t));return Gk[n]||L0},i_=function(t,n,a){if(n==="area")return t;switch(a){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*a_;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},o_=function(t,n){Gk["symbol".concat(Ld(t))]=n},B0=function(t){var n=t.type,a=n===void 0?"circle":n,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,c=r_(t,JT),d=av(av({},c),{},{type:a,size:i,sizeType:l}),u=function(){var x=s_(a),b=IT().type(x).size(i_(i,l,a));return b()},h=d.className,f=d.cx,m=d.cy,g=ke(d,!0);return f===+f&&m===+m&&i===+i?R.createElement("path",cp({},g,{className:Ve("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(m,")"),d:u()})):null};B0.registerSymbol=o_;function pi(e){"@babel/helpers - typeof";return pi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pi(e)}function dp(){return dp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},dp.apply(this,arguments)}function sv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function l_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sv(Object(n),!0).forEach(function(a){Uo(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sv(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function c_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d_(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Yk(a.key),a)}}function u_(e,t,n){return t&&d_(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function h_(e,t,n){return t=Mc(t),f_(e,Kk()?Reflect.construct(t,n||[],Mc(e).constructor):t.apply(e,n))}function f_(e,t){if(t&&(pi(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m_(e)}function m_(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Kk=function(){return!!e})()}function Mc(e){return Mc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mc(e)}function x_(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&up(e,t)}function up(e,t){return up=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},up(e,t)}function Uo(e,t,n){return t=Yk(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yk(e){var t=p_(e,"string");return pi(t)=="symbol"?t:t+""}function p_(e,t){if(pi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(pi(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var an=32,F0=(function(e){function t(){return c_(this,t),h_(this,t,arguments)}return x_(t,e),u_(t,[{key:"renderIcon",value:function(a){var s=this.props.inactiveColor,i=an/2,o=an/6,l=an/3,c=a.inactive?s:a.color;if(a.type==="plainline")return R.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:i,x2:an,y2:i,className:"recharts-legend-icon"});if(a.type==="line")return R.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(an,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(a.type==="rect")return R.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(an/8,"h").concat(an,"v").concat(an*3/4,"h").concat(-an,"z"),className:"recharts-legend-icon"});if(R.isValidElement(a.legendIcon)){var d=l_({},a);return delete d.legendIcon,R.cloneElement(a.legendIcon,d)}return R.createElement(B0,{fill:c,cx:i,cy:i,size:an,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,c=s.formatter,d=s.inactiveColor,u={x:0,y:0,width:an,height:an},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,g){var p=m.formatter||c,x=Ve(Uo(Uo({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",m.inactive));if(m.type==="none")return null;var b=De(m.value)?null:m.value;Nn(!De(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=m.inactive?d:m.color;return R.createElement("li",dp({className:x,style:h,key:"legend-item-".concat(g)},ks(a.props,m,g)),R.createElement(np,{width:o,height:o,viewBox:u,style:f},a.renderIcon(m)),R.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},p?p(b,m,g):b))})}},{key:"render",value:function(){var a=this.props,s=a.payload,i=a.layout,o=a.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return R.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(k.PureComponent);Uo(F0,"displayName","Legend");Uo(F0,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Uh,iv;function g_(){if(iv)return Uh;iv=1;var e=Id();function t(){this.__data__=new e,this.size=0}return Uh=t,Uh}var zh,ov;function y_(){if(ov)return zh;ov=1;function e(t){var n=this.__data__,a=n.delete(t);return this.size=n.size,a}return zh=e,zh}var Vh,lv;function b_(){if(lv)return Vh;lv=1;function e(t){return this.__data__.get(t)}return Vh=e,Vh}var Wh,cv;function v_(){if(cv)return Wh;cv=1;function e(t){return this.__data__.has(t)}return Wh=e,Wh}var Hh,dv;function w_(){if(dv)return Hh;dv=1;var e=Id(),t=T0(),n=_0(),a=200;function s(i,o){var l=this.__data__;if(l instanceof e){var c=l.__data__;if(!t||c.length<a-1)return c.push([i,o]),this.size=++l.size,this;l=this.__data__=new n(c)}return l.set(i,o),this.size=l.size,this}return Hh=s,Hh}var Gh,uv;function Xk(){if(uv)return Gh;uv=1;var e=Id(),t=g_(),n=y_(),a=b_(),s=v_(),i=w_();function o(l){var c=this.__data__=new e(l);this.size=c.size}return o.prototype.clear=t,o.prototype.delete=n,o.prototype.get=a,o.prototype.has=s,o.prototype.set=i,Gh=o,Gh}var Kh,hv;function j_(){if(hv)return Kh;hv=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return Kh=t,Kh}var Yh,fv;function N_(){if(fv)return Yh;fv=1;function e(t){return this.__data__.has(t)}return Yh=e,Yh}var Xh,mv;function Qk(){if(mv)return Xh;mv=1;var e=_0(),t=j_(),n=N_();function a(s){var i=-1,o=s==null?0:s.length;for(this.__data__=new e;++i<o;)this.add(s[i])}return a.prototype.add=a.prototype.push=t,a.prototype.has=n,Xh=a,Xh}var Qh,xv;function Jk(){if(xv)return Qh;xv=1;function e(t,n){for(var a=-1,s=t==null?0:t.length;++a<s;)if(n(t[a],a,t))return!0;return!1}return Qh=e,Qh}var Jh,pv;function Zk(){if(pv)return Jh;pv=1;function e(t,n){return t.has(n)}return Jh=e,Jh}var Zh,gv;function e2(){if(gv)return Zh;gv=1;var e=Qk(),t=Jk(),n=Zk(),a=1,s=2;function i(o,l,c,d,u,h){var f=c&a,m=o.length,g=l.length;if(m!=g&&!(f&&g>m))return!1;var p=h.get(o),x=h.get(l);if(p&&x)return p==l&&x==o;var b=-1,y=!0,w=c&s?new e:void 0;for(h.set(o,l),h.set(l,o);++b<m;){var S=o[b],v=l[b];if(d)var N=f?d(v,S,b,l,o,h):d(S,v,b,o,l,h);if(N!==void 0){if(N)continue;y=!1;break}if(w){if(!t(l,function(A,P){if(!n(w,P)&&(S===A||u(S,A,c,d,h)))return w.push(P)})){y=!1;break}}else if(!(S===v||u(S,v,c,d,h))){y=!1;break}}return h.delete(o),h.delete(l),y}return Zh=i,Zh}var ef,yv;function S_(){if(yv)return ef;yv=1;var e=pa(),t=e.Uint8Array;return ef=t,ef}var tf,bv;function k_(){if(bv)return tf;bv=1;function e(t){var n=-1,a=Array(t.size);return t.forEach(function(s,i){a[++n]=[i,s]}),a}return tf=e,tf}var rf,vv;function q0(){if(vv)return rf;vv=1;function e(t){var n=-1,a=Array(t.size);return t.forEach(function(s){a[++n]=s}),a}return rf=e,rf}var nf,wv;function A_(){if(wv)return nf;wv=1;var e=N0(),t=S_(),n=O0(),a=e2(),s=k_(),i=q0(),o=1,l=2,c="[object Boolean]",d="[object Date]",u="[object Error]",h="[object Map]",f="[object Number]",m="[object RegExp]",g="[object Set]",p="[object String]",x="[object Symbol]",b="[object ArrayBuffer]",y="[object DataView]",w=e?e.prototype:void 0,S=w?w.valueOf:void 0;function v(N,A,P,T,M,E,C){switch(P){case y:if(N.byteLength!=A.byteLength||N.byteOffset!=A.byteOffset)return!1;N=N.buffer,A=A.buffer;case b:return!(N.byteLength!=A.byteLength||!E(new t(N),new t(A)));case c:case d:case f:return n(+N,+A);case u:return N.name==A.name&&N.message==A.message;case m:case p:return N==A+"";case h:var O=s;case g:var _=T&o;if(O||(O=i),N.size!=A.size&&!_)return!1;var D=C.get(N);if(D)return D==A;T|=l,C.set(N,A);var L=a(O(N),O(A),T,M,E,C);return C.delete(N),L;case x:if(S)return S.call(N)==S.call(A)}return!1}return nf=v,nf}var af,jv;function t2(){if(jv)return af;jv=1;function e(t,n){for(var a=-1,s=n.length,i=t.length;++a<s;)t[i+a]=n[a];return t}return af=e,af}var sf,Nv;function P_(){if(Nv)return sf;Nv=1;var e=t2(),t=Qr();function n(a,s,i){var o=s(a);return t(a)?o:e(o,i(a))}return sf=n,sf}var of,Sv;function C_(){if(Sv)return of;Sv=1;function e(t,n){for(var a=-1,s=t==null?0:t.length,i=0,o=[];++a<s;){var l=t[a];n(l,a,t)&&(o[i++]=l)}return o}return of=e,of}var lf,kv;function O_(){if(kv)return lf;kv=1;function e(){return[]}return lf=e,lf}var cf,Av;function T_(){if(Av)return cf;Av=1;var e=C_(),t=O_(),n=Object.prototype,a=n.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(o){return o==null?[]:(o=Object(o),e(s(o),function(l){return a.call(o,l)}))}:t;return cf=i,cf}var df,Pv;function __(){if(Pv)return df;Pv=1;function e(t,n){for(var a=-1,s=Array(t);++a<t;)s[a]=n(a);return s}return df=e,df}var uf,Cv;function E_(){if(Cv)return uf;Cv=1;var e=_s(),t=Es(),n="[object Arguments]";function a(s){return t(s)&&e(s)==n}return uf=a,uf}var hf,Ov;function U0(){if(Ov)return hf;Ov=1;var e=E_(),t=Es(),n=Object.prototype,a=n.hasOwnProperty,s=n.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(o){return t(o)&&a.call(o,"callee")&&!s.call(o,"callee")};return hf=i,hf}var So={exports:{}},ff,Tv;function D_(){if(Tv)return ff;Tv=1;function e(){return!1}return ff=e,ff}So.exports;var _v;function r2(){return _v||(_v=1,(function(e,t){var n=pa(),a=D_(),s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||a;e.exports=d})(So,So.exports)),So.exports}var mf,Ev;function z0(){if(Ev)return mf;Ev=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(a,s){var i=typeof a;return s=s??e,!!s&&(i=="number"||i!="symbol"&&t.test(a))&&a>-1&&a%1==0&&a<s}return mf=n,mf}var xf,Dv;function V0(){if(Dv)return xf;Dv=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return xf=t,xf}var pf,Mv;function M_(){if(Mv)return pf;Mv=1;var e=_s(),t=V0(),n=Es(),a="[object Arguments]",s="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",d="[object Map]",u="[object Number]",h="[object Object]",f="[object RegExp]",m="[object Set]",g="[object String]",p="[object WeakMap]",x="[object ArrayBuffer]",b="[object DataView]",y="[object Float32Array]",w="[object Float64Array]",S="[object Int8Array]",v="[object Int16Array]",N="[object Int32Array]",A="[object Uint8Array]",P="[object Uint8ClampedArray]",T="[object Uint16Array]",M="[object Uint32Array]",E={};E[y]=E[w]=E[S]=E[v]=E[N]=E[A]=E[P]=E[T]=E[M]=!0,E[a]=E[s]=E[x]=E[i]=E[b]=E[o]=E[l]=E[c]=E[d]=E[u]=E[h]=E[f]=E[m]=E[g]=E[p]=!1;function C(O){return n(O)&&t(O.length)&&!!E[e(O)]}return pf=C,pf}var gf,Iv;function n2(){if(Iv)return gf;Iv=1;function e(t){return function(n){return t(n)}}return gf=e,gf}var ko={exports:{}};ko.exports;var Rv;function I_(){return Rv||(Rv=1,(function(e,t){var n=BP(),a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===a,o=i&&n.process,l=(function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(ko,ko.exports)),ko.exports}var yf,$v;function a2(){if($v)return yf;$v=1;var e=M_(),t=n2(),n=I_(),a=n&&n.isTypedArray,s=a?t(a):e;return yf=s,yf}var bf,Lv;function R_(){if(Lv)return bf;Lv=1;var e=__(),t=U0(),n=Qr(),a=r2(),s=z0(),i=a2(),o=Object.prototype,l=o.hasOwnProperty;function c(d,u){var h=n(d),f=!h&&t(d),m=!h&&!f&&a(d),g=!h&&!f&&!m&&i(d),p=h||f||m||g,x=p?e(d.length,String):[],b=x.length;for(var y in d)(u||l.call(d,y))&&!(p&&(y=="length"||m&&(y=="offset"||y=="parent")||g&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||s(y,b)))&&x.push(y);return x}return bf=c,bf}var vf,Bv;function $_(){if(Bv)return vf;Bv=1;var e=Object.prototype;function t(n){var a=n&&n.constructor,s=typeof a=="function"&&a.prototype||e;return n===s}return vf=t,vf}var wf,Fv;function L_(){if(Fv)return wf;Fv=1;var e=FP(),t=e(Object.keys,Object);return wf=t,wf}var jf,qv;function B_(){if(qv)return jf;qv=1;var e=$_(),t=L_(),n=Object.prototype,a=n.hasOwnProperty;function s(i){if(!e(i))return t(i);var o=[];for(var l in Object(i))a.call(i,l)&&l!="constructor"&&o.push(l);return o}return jf=s,jf}var Nf,Uv;function kl(){if(Uv)return Nf;Uv=1;var e=C0(),t=V0();function n(a){return a!=null&&t(a.length)&&!e(a)}return Nf=n,Nf}var Sf,zv;function Ud(){if(zv)return Sf;zv=1;var e=R_(),t=B_(),n=kl();function a(s){return n(s)?e(s):t(s)}return Sf=a,Sf}var kf,Vv;function F_(){if(Vv)return kf;Vv=1;var e=P_(),t=T_(),n=Ud();function a(s){return e(s,n,t)}return kf=a,kf}var Af,Wv;function q_(){if(Wv)return Af;Wv=1;var e=F_(),t=1,n=Object.prototype,a=n.hasOwnProperty;function s(i,o,l,c,d,u){var h=l&t,f=e(i),m=f.length,g=e(o),p=g.length;if(m!=p&&!h)return!1;for(var x=m;x--;){var b=f[x];if(!(h?b in o:a.call(o,b)))return!1}var y=u.get(i),w=u.get(o);if(y&&w)return y==o&&w==i;var S=!0;u.set(i,o),u.set(o,i);for(var v=h;++x<m;){b=f[x];var N=i[b],A=o[b];if(c)var P=h?c(A,N,b,o,i,u):c(N,A,b,i,o,u);if(!(P===void 0?N===A||d(N,A,l,c,u):P)){S=!1;break}v||(v=b=="constructor")}if(S&&!v){var T=i.constructor,M=o.constructor;T!=M&&"constructor"in i&&"constructor"in o&&!(typeof T=="function"&&T instanceof T&&typeof M=="function"&&M instanceof M)&&(S=!1)}return u.delete(i),u.delete(o),S}return Af=s,Af}var Pf,Hv;function U_(){if(Hv)return Pf;Hv=1;var e=Ds(),t=pa(),n=e(t,"DataView");return Pf=n,Pf}var Cf,Gv;function z_(){if(Gv)return Cf;Gv=1;var e=Ds(),t=pa(),n=e(t,"Promise");return Cf=n,Cf}var Of,Kv;function s2(){if(Kv)return Of;Kv=1;var e=Ds(),t=pa(),n=e(t,"Set");return Of=n,Of}var Tf,Yv;function V_(){if(Yv)return Tf;Yv=1;var e=Ds(),t=pa(),n=e(t,"WeakMap");return Tf=n,Tf}var _f,Xv;function W_(){if(Xv)return _f;Xv=1;var e=U_(),t=T0(),n=z_(),a=s2(),s=V_(),i=_s(),o=Nk(),l="[object Map]",c="[object Object]",d="[object Promise]",u="[object Set]",h="[object WeakMap]",f="[object DataView]",m=o(e),g=o(t),p=o(n),x=o(a),b=o(s),y=i;return(e&&y(new e(new ArrayBuffer(1)))!=f||t&&y(new t)!=l||n&&y(n.resolve())!=d||a&&y(new a)!=u||s&&y(new s)!=h)&&(y=function(w){var S=i(w),v=S==c?w.constructor:void 0,N=v?o(v):"";if(N)switch(N){case m:return f;case g:return l;case p:return d;case x:return u;case b:return h}return S}),_f=y,_f}var Ef,Qv;function H_(){if(Qv)return Ef;Qv=1;var e=Xk(),t=e2(),n=A_(),a=q_(),s=W_(),i=Qr(),o=r2(),l=a2(),c=1,d="[object Arguments]",u="[object Array]",h="[object Object]",f=Object.prototype,m=f.hasOwnProperty;function g(p,x,b,y,w,S){var v=i(p),N=i(x),A=v?u:s(p),P=N?u:s(x);A=A==d?h:A,P=P==d?h:P;var T=A==h,M=P==h,E=A==P;if(E&&o(p)){if(!o(x))return!1;v=!0,T=!1}if(E&&!T)return S||(S=new e),v||l(p)?t(p,x,b,y,w,S):n(p,x,A,b,y,w,S);if(!(b&c)){var C=T&&m.call(p,"__wrapped__"),O=M&&m.call(x,"__wrapped__");if(C||O){var _=C?p.value():p,D=O?x.value():x;return S||(S=new e),w(_,D,b,y,S)}}return E?(S||(S=new e),a(p,x,b,y,w,S)):!1}return Ef=g,Ef}var Df,Jv;function W0(){if(Jv)return Df;Jv=1;var e=H_(),t=Es();function n(a,s,i,o,l){return a===s?!0:a==null||s==null||!t(a)&&!t(s)?a!==a&&s!==s:e(a,s,i,o,n,l)}return Df=n,Df}var Mf,Zv;function G_(){if(Zv)return Mf;Zv=1;var e=Xk(),t=W0(),n=1,a=2;function s(i,o,l,c){var d=l.length,u=d,h=!c;if(i==null)return!u;for(i=Object(i);d--;){var f=l[d];if(h&&f[2]?f[1]!==i[f[0]]:!(f[0]in i))return!1}for(;++d<u;){f=l[d];var m=f[0],g=i[m],p=f[1];if(h&&f[2]){if(g===void 0&&!(m in i))return!1}else{var x=new e;if(c)var b=c(g,p,m,i,o,x);if(!(b===void 0?t(p,g,n|a,c,x):b))return!1}}return!0}return Mf=s,Mf}var If,ew;function i2(){if(ew)return If;ew=1;var e=qa();function t(n){return n===n&&!e(n)}return If=t,If}var Rf,tw;function K_(){if(tw)return Rf;tw=1;var e=i2(),t=Ud();function n(a){for(var s=t(a),i=s.length;i--;){var o=s[i],l=a[o];s[i]=[o,l,e(l)]}return s}return Rf=n,Rf}var $f,rw;function o2(){if(rw)return $f;rw=1;function e(t,n){return function(a){return a==null?!1:a[t]===n&&(n!==void 0||t in Object(a))}}return $f=e,$f}var Lf,nw;function Y_(){if(nw)return Lf;nw=1;var e=G_(),t=K_(),n=o2();function a(s){var i=t(s);return i.length==1&&i[0][2]?n(i[0][0],i[0][1]):function(o){return o===s||e(o,s,i)}}return Lf=a,Lf}var Bf,aw;function X_(){if(aw)return Bf;aw=1;function e(t,n){return t!=null&&n in Object(t)}return Bf=e,Bf}var Ff,sw;function Q_(){if(sw)return Ff;sw=1;var e=Ak(),t=U0(),n=Qr(),a=z0(),s=V0(),i=$d();function o(l,c,d){c=e(c,l);for(var u=-1,h=c.length,f=!1;++u<h;){var m=i(c[u]);if(!(f=l!=null&&d(l,m)))break;l=l[m]}return f||++u!=h?f:(h=l==null?0:l.length,!!h&&s(h)&&a(m,h)&&(n(l)||t(l)))}return Ff=o,Ff}var qf,iw;function J_(){if(iw)return qf;iw=1;var e=X_(),t=Q_();function n(a,s){return a!=null&&t(a,s,e)}return qf=n,qf}var Uf,ow;function Z_(){if(ow)return Uf;ow=1;var e=W0(),t=Pk(),n=J_(),a=P0(),s=i2(),i=o2(),o=$d(),l=1,c=2;function d(u,h){return a(u)&&s(h)?i(o(u),h):function(f){var m=t(f,u);return m===void 0&&m===h?n(f,u):e(h,m,l|c)}}return Uf=d,Uf}var zf,lw;function Hi(){if(lw)return zf;lw=1;function e(t){return t}return zf=e,zf}var Vf,cw;function eE(){if(cw)return Vf;cw=1;function e(t){return function(n){return n==null?void 0:n[t]}}return Vf=e,Vf}var Wf,dw;function tE(){if(dw)return Wf;dw=1;var e=D0();function t(n){return function(a){return e(a,n)}}return Wf=t,Wf}var Hf,uw;function rE(){if(uw)return Hf;uw=1;var e=eE(),t=tE(),n=P0(),a=$d();function s(i){return n(i)?e(a(i)):t(i)}return Hf=s,Hf}var Gf,hw;function Vn(){if(hw)return Gf;hw=1;var e=Y_(),t=Z_(),n=Hi(),a=Qr(),s=rE();function i(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?a(o)?t(o[0],o[1]):e(o):s(o)}return Gf=i,Gf}var Kf,fw;function l2(){if(fw)return Kf;fw=1;function e(t,n,a,s){for(var i=t.length,o=a+(s?1:-1);s?o--:++o<i;)if(n(t[o],o,t))return o;return-1}return Kf=e,Kf}var Yf,mw;function nE(){if(mw)return Yf;mw=1;function e(t){return t!==t}return Yf=e,Yf}var Xf,xw;function aE(){if(xw)return Xf;xw=1;function e(t,n,a){for(var s=a-1,i=t.length;++s<i;)if(t[s]===n)return s;return-1}return Xf=e,Xf}var Qf,pw;function sE(){if(pw)return Qf;pw=1;var e=l2(),t=nE(),n=aE();function a(s,i,o){return i===i?n(s,i,o):e(s,t,o)}return Qf=a,Qf}var Jf,gw;function iE(){if(gw)return Jf;gw=1;var e=sE();function t(n,a){var s=n==null?0:n.length;return!!s&&e(n,a,0)>-1}return Jf=t,Jf}var Zf,yw;function oE(){if(yw)return Zf;yw=1;function e(t,n,a){for(var s=-1,i=t==null?0:t.length;++s<i;)if(a(n,t[s]))return!0;return!1}return Zf=e,Zf}var em,bw;function lE(){if(bw)return em;bw=1;function e(){}return em=e,em}var tm,vw;function cE(){if(vw)return tm;vw=1;var e=s2(),t=lE(),n=q0(),a=1/0,s=e&&1/n(new e([,-0]))[1]==a?function(i){return new e(i)}:t;return tm=s,tm}var rm,ww;function dE(){if(ww)return rm;ww=1;var e=Qk(),t=iE(),n=oE(),a=Zk(),s=cE(),i=q0(),o=200;function l(c,d,u){var h=-1,f=t,m=c.length,g=!0,p=[],x=p;if(u)g=!1,f=n;else if(m>=o){var b=d?null:s(c);if(b)return i(b);g=!1,f=a,x=new e}else x=d?[]:p;e:for(;++h<m;){var y=c[h],w=d?d(y):y;if(y=u||y!==0?y:0,g&&w===w){for(var S=x.length;S--;)if(x[S]===w)continue e;d&&x.push(w),p.push(y)}else f(x,w,u)||(x!==p&&x.push(w),p.push(y))}return p}return rm=l,rm}var nm,jw;function uE(){if(jw)return nm;jw=1;var e=Vn(),t=dE();function n(a,s){return a&&a.length?t(a,e(s,2)):[]}return nm=n,nm}var hE=uE();const Nw=Pt(hE);function c2(e,t,n){return t===!0?Nw(e,n):De(t)?Nw(e,t):e}function gi(e){"@babel/helpers - typeof";return gi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gi(e)}var fE=["ref"];function Sw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Zn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sw(Object(n),!0).forEach(function(a){zd(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function mE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kw(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,u2(a.key),a)}}function xE(e,t,n){return t&&kw(e.prototype,t),n&&kw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function pE(e,t,n){return t=Ic(t),gE(e,d2()?Reflect.construct(t,n||[],Ic(e).constructor):t.apply(e,n))}function gE(e,t){if(t&&(gi(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yE(e)}function yE(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d2=function(){return!!e})()}function Ic(e){return Ic=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ic(e)}function bE(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hp(e,t)}function hp(e,t){return hp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},hp(e,t)}function zd(e,t,n){return t=u2(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u2(e){var t=vE(e,"string");return gi(t)=="symbol"?t:t+""}function vE(e,t){if(gi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(gi(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function wE(e,t){if(e==null)return{};var n=jE(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function jE(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function NE(e){return e.value}function SE(e,t){if(R.isValidElement(e))return R.cloneElement(e,t);if(typeof e=="function")return R.createElement(e,t);t.ref;var n=wE(t,fE);return R.createElement(F0,n)}var Aw=1,La=(function(e){function t(){var n;mE(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=pE(this,t,[].concat(s)),zd(n,"lastBoundingBox",{width:-1,height:-1}),n}return bE(t,e),xE(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>Aw||Math.abs(s.height-this.lastBoundingBox.height)>Aw)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,a&&a(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Zn({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,c=s.margin,d=s.chartWidth,u=s.chartHeight,h,f;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(o==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();h={left:((d||0)-m.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(l==="middle"){var g=this.getBBoxSnapshot();f={top:((u||0)-g.height)/2}}else f=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Zn(Zn({},h),f)}},{key:"render",value:function(){var a=this,s=this.props,i=s.content,o=s.width,l=s.height,c=s.wrapperStyle,d=s.payloadUniqBy,u=s.payload,h=Zn(Zn({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return R.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(m){a.wrapperNode=m}},SE(i,Zn(Zn({},this.props),{},{payload:c2(u,d,NE)})))}}],[{key:"getWithHeight",value:function(a,s){var i=Zn(Zn({},this.defaultProps),a.props),o=i.layout;return o==="vertical"&&he(a.props.height)?{height:a.props.height}:o==="horizontal"?{width:a.props.width||s}:null}}])})(k.PureComponent);zd(La,"displayName","Legend");zd(La,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var am,Pw;function kE(){if(Pw)return am;Pw=1;var e=N0(),t=U0(),n=Qr(),a=e?e.isConcatSpreadable:void 0;function s(i){return n(i)||t(i)||!!(a&&i&&i[a])}return am=s,am}var sm,Cw;function h2(){if(Cw)return sm;Cw=1;var e=t2(),t=kE();function n(a,s,i,o,l){var c=-1,d=a.length;for(i||(i=t),l||(l=[]);++c<d;){var u=a[c];s>0&&i(u)?s>1?n(u,s-1,i,o,l):e(l,u):o||(l[l.length]=u)}return l}return sm=n,sm}var im,Ow;function AE(){if(Ow)return im;Ow=1;function e(t){return function(n,a,s){for(var i=-1,o=Object(n),l=s(n),c=l.length;c--;){var d=l[t?c:++i];if(a(o[d],d,o)===!1)break}return n}}return im=e,im}var om,Tw;function PE(){if(Tw)return om;Tw=1;var e=AE(),t=e();return om=t,om}var lm,_w;function f2(){if(_w)return lm;_w=1;var e=PE(),t=Ud();function n(a,s){return a&&e(a,s,t)}return lm=n,lm}var cm,Ew;function CE(){if(Ew)return cm;Ew=1;var e=kl();function t(n,a){return function(s,i){if(s==null)return s;if(!e(s))return n(s,i);for(var o=s.length,l=a?o:-1,c=Object(s);(a?l--:++l<o)&&i(c[l],l,c)!==!1;);return s}}return cm=t,cm}var dm,Dw;function H0(){if(Dw)return dm;Dw=1;var e=f2(),t=CE(),n=t(e);return dm=n,dm}var um,Mw;function m2(){if(Mw)return um;Mw=1;var e=H0(),t=kl();function n(a,s){var i=-1,o=t(a)?Array(a.length):[];return e(a,function(l,c,d){o[++i]=s(l,c,d)}),o}return um=n,um}var hm,Iw;function OE(){if(Iw)return hm;Iw=1;function e(t,n){var a=t.length;for(t.sort(n);a--;)t[a]=t[a].value;return t}return hm=e,hm}var fm,Rw;function TE(){if(Rw)return fm;Rw=1;var e=zi();function t(n,a){if(n!==a){var s=n!==void 0,i=n===null,o=n===n,l=e(n),c=a!==void 0,d=a===null,u=a===a,h=e(a);if(!d&&!h&&!l&&n>a||l&&c&&u&&!d&&!h||i&&c&&u||!s&&u||!o)return 1;if(!i&&!l&&!h&&n<a||h&&s&&o&&!i&&!l||d&&s&&o||!c&&o||!u)return-1}return 0}return fm=t,fm}var mm,$w;function _E(){if($w)return mm;$w=1;var e=TE();function t(n,a,s){for(var i=-1,o=n.criteria,l=a.criteria,c=o.length,d=s.length;++i<c;){var u=e(o[i],l[i]);if(u){if(i>=d)return u;var h=s[i];return u*(h=="desc"?-1:1)}}return n.index-a.index}return mm=t,mm}var xm,Lw;function EE(){if(Lw)return xm;Lw=1;var e=E0(),t=D0(),n=Vn(),a=m2(),s=OE(),i=n2(),o=_E(),l=Hi(),c=Qr();function d(u,h,f){h.length?h=e(h,function(p){return c(p)?function(x){return t(x,p.length===1?p[0]:p)}:p}):h=[l];var m=-1;h=e(h,i(n));var g=a(u,function(p,x,b){var y=e(h,function(w){return w(p)});return{criteria:y,index:++m,value:p}});return s(g,function(p,x){return o(p,x,f)})}return xm=d,xm}var pm,Bw;function DE(){if(Bw)return pm;Bw=1;function e(t,n,a){switch(a.length){case 0:return t.call(n);case 1:return t.call(n,a[0]);case 2:return t.call(n,a[0],a[1]);case 3:return t.call(n,a[0],a[1],a[2])}return t.apply(n,a)}return pm=e,pm}var gm,Fw;function ME(){if(Fw)return gm;Fw=1;var e=DE(),t=Math.max;function n(a,s,i){return s=t(s===void 0?a.length-1:s,0),function(){for(var o=arguments,l=-1,c=t(o.length-s,0),d=Array(c);++l<c;)d[l]=o[s+l];l=-1;for(var u=Array(s+1);++l<s;)u[l]=o[l];return u[s]=i(d),e(a,this,u)}}return gm=n,gm}var ym,qw;function IE(){if(qw)return ym;qw=1;function e(t){return function(){return t}}return ym=e,ym}var bm,Uw;function x2(){if(Uw)return bm;Uw=1;var e=Ds(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return bm=t,bm}var vm,zw;function RE(){if(zw)return vm;zw=1;var e=IE(),t=x2(),n=Hi(),a=t?function(s,i){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:n;return vm=a,vm}var wm,Vw;function $E(){if(Vw)return wm;Vw=1;var e=800,t=16,n=Date.now;function a(s){var i=0,o=0;return function(){var l=n(),c=t-(l-o);if(o=l,c>0){if(++i>=e)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return wm=a,wm}var jm,Ww;function LE(){if(Ww)return jm;Ww=1;var e=RE(),t=$E(),n=t(e);return jm=n,jm}var Nm,Hw;function BE(){if(Hw)return Nm;Hw=1;var e=Hi(),t=ME(),n=LE();function a(s,i){return n(t(s,i,e),s+"")}return Nm=a,Nm}var Sm,Gw;function Vd(){if(Gw)return Sm;Gw=1;var e=O0(),t=kl(),n=z0(),a=qa();function s(i,o,l){if(!a(l))return!1;var c=typeof o;return(c=="number"?t(l)&&n(o,l.length):c=="string"&&o in l)?e(l[o],i):!1}return Sm=s,Sm}var km,Kw;function FE(){if(Kw)return km;Kw=1;var e=h2(),t=EE(),n=BE(),a=Vd(),s=n(function(i,o){if(i==null)return[];var l=o.length;return l>1&&a(i,o[0],o[1])?o=[]:l>2&&a(o[0],o[1],o[2])&&(o=[o[0]]),t(i,e(o,1),[])});return km=s,km}var qE=FE();const G0=Pt(qE);function zo(e){"@babel/helpers - typeof";return zo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zo(e)}function fp(){return fp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fp.apply(this,arguments)}function UE(e,t){return HE(e)||WE(e,t)||VE(e,t)||zE()}function zE(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VE(e,t){if(e){if(typeof e=="string")return Yw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yw(e,t)}}function Yw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function WE(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function HE(e){if(Array.isArray(e))return e}function Xw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Am(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Xw(Object(n),!0).forEach(function(a){GE(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function GE(e,t,n){return t=KE(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KE(e){var t=YE(e,"string");return zo(t)=="symbol"?t:t+""}function YE(e,t){if(zo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(zo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XE(e){return Array.isArray(e)&&nr(e[0])&&nr(e[1])?e.join(" ~ "):e}var QE=function(t){var n=t.separator,a=n===void 0?" : ":n,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,d=c===void 0?{}:c,u=t.payload,h=t.formatter,f=t.itemSorter,m=t.wrapperClassName,g=t.labelClassName,p=t.label,x=t.labelFormatter,b=t.accessibilityLayer,y=b===void 0?!1:b,w=function(){if(u&&u.length){var C={padding:0,margin:0},O=(f?G0(u,f):u).map(function(_,D){if(_.type==="none")return null;var L=Am({display:"block",paddingTop:4,paddingBottom:4,color:_.color||"#000"},l),V=_.formatter||h||XE,X=_.value,W=_.name,ce=X,de=W;if(V&&ce!=null&&de!=null){var fe=V(X,W,_,D,u);if(Array.isArray(fe)){var F=UE(fe,2);ce=F[0],de=F[1]}else ce=fe}return R.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(D),style:L},nr(de)?R.createElement("span",{className:"recharts-tooltip-item-name"},de):null,nr(de)?R.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,R.createElement("span",{className:"recharts-tooltip-item-value"},ce),R.createElement("span",{className:"recharts-tooltip-item-unit"},_.unit||""))});return R.createElement("ul",{className:"recharts-tooltip-item-list",style:C},O)}return null},S=Am({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),v=Am({margin:0},d),N=!Ue(p),A=N?p:"",P=Ve("recharts-default-tooltip",m),T=Ve("recharts-tooltip-label",g);N&&x&&u!==void 0&&u!==null&&(A=x(p,u));var M=y?{role:"status","aria-live":"assertive"}:{};return R.createElement("div",fp({className:P,style:S},M),R.createElement("p",{className:T,style:v},R.isValidElement(A)?A:"".concat(A)),w())};function Vo(e){"@babel/helpers - typeof";return Vo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vo(e)}function ac(e,t,n){return t=JE(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JE(e){var t=ZE(e,"string");return Vo(t)=="symbol"?t:t+""}function ZE(e,t){if(Vo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Vo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uo="recharts-tooltip-wrapper",eD={visibility:"hidden"};function tD(e){var t=e.coordinate,n=e.translateX,a=e.translateY;return Ve(uo,ac(ac(ac(ac({},"".concat(uo,"-right"),he(n)&&t&&he(t.x)&&n>=t.x),"".concat(uo,"-left"),he(n)&&t&&he(t.x)&&n<t.x),"".concat(uo,"-bottom"),he(a)&&t&&he(t.y)&&a>=t.y),"".concat(uo,"-top"),he(a)&&t&&he(t.y)&&a<t.y))}function Qw(e){var t=e.allowEscapeViewBox,n=e.coordinate,a=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(i&&he(i[a]))return i[a];var u=n[a]-l-s,h=n[a]+s;if(t[a])return o[a]?u:h;if(o[a]){var f=u,m=c[a];return f<m?Math.max(h,c[a]):Math.max(u,c[a])}var g=h+l,p=c[a]+d;return g>p?Math.max(u,c[a]):Math.max(h,c[a])}function rD(e){var t=e.translateX,n=e.translateY,a=e.useTranslate3d;return{transform:a?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function nD(e){var t=e.allowEscapeViewBox,n=e.coordinate,a=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,d,u,h;return o.height>0&&o.width>0&&n?(u=Qw({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=Qw({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=rD({translateX:u,translateY:h,useTranslate3d:l})):d=eD,{cssProperties:d,cssClasses:tD({translateX:u,translateY:h,coordinate:n})}}function yi(e){"@babel/helpers - typeof";return yi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yi(e)}function Jw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Zw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jw(Object(n),!0).forEach(function(a){xp(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function aD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sD(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,g2(a.key),a)}}function iD(e,t,n){return t&&sD(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function oD(e,t,n){return t=Rc(t),lD(e,p2()?Reflect.construct(t,n||[],Rc(e).constructor):t.apply(e,n))}function lD(e,t){if(t&&(yi(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cD(e)}function cD(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p2=function(){return!!e})()}function Rc(e){return Rc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rc(e)}function dD(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mp(e,t)}function mp(e,t){return mp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},mp(e,t)}function xp(e,t,n){return t=g2(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g2(e){var t=uD(e,"string");return yi(t)=="symbol"?t:t+""}function uD(e,t){if(yi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(yi(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ej=1,hD=(function(e){function t(){var n;aD(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=oD(this,t,[].concat(s)),xp(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),xp(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),n}return dD(t,e),iD(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>ej||Math.abs(a.height-this.state.lastBoundingBox.height)>ej)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,d=s.children,u=s.coordinate,h=s.hasPayload,f=s.isAnimationActive,m=s.offset,g=s.position,p=s.reverseDirection,x=s.useTranslate3d,b=s.viewBox,y=s.wrapperStyle,w=nD({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:m,position:g,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:b}),S=w.cssClasses,v=w.cssProperties,N=Zw(Zw({transition:f&&i?"transform ".concat(l,"ms ").concat(c):void 0},v),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&h?"visible":"hidden",position:"absolute",top:0,left:0},y);return R.createElement("div",{tabIndex:-1,className:S,style:N,ref:function(P){a.wrapperNode=P}},d)}}])})(k.PureComponent),fD=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ua={isSsr:fD()};function bi(e){"@babel/helpers - typeof";return bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bi(e)}function tj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function rj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tj(Object(n),!0).forEach(function(a){K0(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tj(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function mD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xD(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,b2(a.key),a)}}function pD(e,t,n){return t&&xD(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gD(e,t,n){return t=$c(t),yD(e,y2()?Reflect.construct(t,n||[],$c(e).constructor):t.apply(e,n))}function yD(e,t){if(t&&(bi(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bD(e)}function bD(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(y2=function(){return!!e})()}function $c(e){return $c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$c(e)}function vD(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pp(e,t)}function pp(e,t){return pp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},pp(e,t)}function K0(e,t,n){return t=b2(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b2(e){var t=wD(e,"string");return bi(t)=="symbol"?t:t+""}function wD(e,t){if(bi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(bi(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function jD(e){return e.dataKey}function ND(e,t){return R.isValidElement(e)?R.cloneElement(e,t):typeof e=="function"?R.createElement(e,t):R.createElement(QE,t)}var ut=(function(e){function t(){return mD(this,t),gD(this,t,arguments)}return vD(t,e),pD(t,[{key:"render",value:function(){var a=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,d=s.content,u=s.coordinate,h=s.filterNull,f=s.isAnimationActive,m=s.offset,g=s.payload,p=s.payloadUniqBy,x=s.position,b=s.reverseDirection,y=s.useTranslate3d,w=s.viewBox,S=s.wrapperStyle,v=g??[];h&&v.length&&(v=c2(g.filter(function(A){return A.value!=null&&(A.hide!==!0||a.props.includeHidden)}),p,jD));var N=v.length>0;return R.createElement(hD,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:f,active:i,coordinate:u,hasPayload:N,offset:m,position:x,reverseDirection:b,useTranslate3d:y,viewBox:w,wrapperStyle:S},ND(d,rj(rj({},this.props),{},{payload:v})))}}])})(k.PureComponent);K0(ut,"displayName","Tooltip");K0(ut,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ua.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Pm,nj;function SD(){if(nj)return Pm;nj=1;var e=pa(),t=function(){return e.Date.now()};return Pm=t,Pm}var Cm,aj;function kD(){if(aj)return Cm;aj=1;var e=/\s/;function t(n){for(var a=n.length;a--&&e.test(n.charAt(a)););return a}return Cm=t,Cm}var Om,sj;function AD(){if(sj)return Om;sj=1;var e=kD(),t=/^\s+/;function n(a){return a&&a.slice(0,e(a)+1).replace(t,"")}return Om=n,Om}var Tm,ij;function v2(){if(ij)return Tm;ij=1;var e=AD(),t=qa(),n=zi(),a=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(d){if(typeof d=="number")return d;if(n(d))return a;if(t(d)){var u=typeof d.valueOf=="function"?d.valueOf():d;d=t(u)?u+"":u}if(typeof d!="string")return d===0?d:+d;d=e(d);var h=i.test(d);return h||o.test(d)?l(d.slice(2),h?2:8):s.test(d)?a:+d}return Tm=c,Tm}var _m,oj;function PD(){if(oj)return _m;oj=1;var e=qa(),t=SD(),n=v2(),a="Expected a function",s=Math.max,i=Math.min;function o(l,c,d){var u,h,f,m,g,p,x=0,b=!1,y=!1,w=!0;if(typeof l!="function")throw new TypeError(a);c=n(c)||0,e(d)&&(b=!!d.leading,y="maxWait"in d,f=y?s(n(d.maxWait)||0,c):f,w="trailing"in d?!!d.trailing:w);function S(O){var _=u,D=h;return u=h=void 0,x=O,m=l.apply(D,_),m}function v(O){return x=O,g=setTimeout(P,c),b?S(O):m}function N(O){var _=O-p,D=O-x,L=c-_;return y?i(L,f-D):L}function A(O){var _=O-p,D=O-x;return p===void 0||_>=c||_<0||y&&D>=f}function P(){var O=t();if(A(O))return T(O);g=setTimeout(P,N(O))}function T(O){return g=void 0,w&&u?S(O):(u=h=void 0,m)}function M(){g!==void 0&&clearTimeout(g),x=0,u=p=h=g=void 0}function E(){return g===void 0?m:T(t())}function C(){var O=t(),_=A(O);if(u=arguments,h=this,p=O,_){if(g===void 0)return v(p);if(y)return clearTimeout(g),g=setTimeout(P,c),S(p)}return g===void 0&&(g=setTimeout(P,c)),m}return C.cancel=M,C.flush=E,C}return _m=o,_m}var Em,lj;function CD(){if(lj)return Em;lj=1;var e=PD(),t=qa(),n="Expected a function";function a(s,i,o){var l=!0,c=!0;if(typeof s!="function")throw new TypeError(n);return t(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),e(s,i,{leading:l,maxWait:i,trailing:c})}return Em=a,Em}var OD=CD();const w2=Pt(OD);function Wo(e){"@babel/helpers - typeof";return Wo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wo(e)}function cj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function sc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cj(Object(n),!0).forEach(function(a){TD(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cj(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function TD(e,t,n){return t=_D(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _D(e){var t=ED(e,"string");return Wo(t)=="symbol"?t:t+""}function ED(e,t){if(Wo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Wo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DD(e,t){return $D(e)||RD(e,t)||ID(e,t)||MD()}function MD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ID(e,t){if(e){if(typeof e=="string")return dj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dj(e,t)}}function dj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function RD(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function $D(e){if(Array.isArray(e))return e}var pr=k.forwardRef(function(e,t){var n=e.aspect,a=e.initialDimension,s=a===void 0?{width:-1,height:-1}:a,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,d=e.minWidth,u=d===void 0?0:d,h=e.minHeight,f=e.maxHeight,m=e.children,g=e.debounce,p=g===void 0?0:g,x=e.id,b=e.className,y=e.onResize,w=e.style,S=w===void 0?{}:w,v=k.useRef(null),N=k.useRef();N.current=y,k.useImperativeHandle(t,function(){return Object.defineProperty(v.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),v.current},configurable:!0})});var A=k.useState({containerWidth:s.width,containerHeight:s.height}),P=DD(A,2),T=P[0],M=P[1],E=k.useCallback(function(O,_){M(function(D){var L=Math.round(O),V=Math.round(_);return D.containerWidth===L&&D.containerHeight===V?D:{containerWidth:L,containerHeight:V}})},[]);k.useEffect(function(){var O=function(W){var ce,de=W[0].contentRect,fe=de.width,F=de.height;E(fe,F),(ce=N.current)===null||ce===void 0||ce.call(N,fe,F)};p>0&&(O=w2(O,p,{trailing:!0,leading:!1}));var _=new ResizeObserver(O),D=v.current.getBoundingClientRect(),L=D.width,V=D.height;return E(L,V),_.observe(v.current),function(){_.disconnect()}},[E,p]);var C=k.useMemo(function(){var O=T.containerWidth,_=T.containerHeight;if(O<0||_<0)return null;Nn(hs(o)||hs(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Nn(!n||n>0,"The aspect(%s) must be greater than zero.",n);var D=hs(o)?O:o,L=hs(c)?_:c;n&&n>0&&(D?L=D/n:L&&(D=L*n),f&&L>f&&(L=f)),Nn(D>0||L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,D,L,o,c,u,h,n);var V=!Array.isArray(m)&&da(m.type).endsWith("Chart");return R.Children.map(m,function(X){return R.isValidElement(X)?k.cloneElement(X,sc({width:D,height:L},V?{style:sc({height:"100%",width:"100%",maxHeight:L,maxWidth:D},X.props.style)}:{})):X})},[n,m,c,f,h,u,T,o]);return R.createElement("div",{id:x?"".concat(x):void 0,className:Ve("recharts-responsive-container",b),style:sc(sc({},S),{},{width:o,height:c,minWidth:u,minHeight:h,maxHeight:f}),ref:v},C)}),sa=function(t){return null};sa.displayName="Cell";function Ho(e){"@babel/helpers - typeof";return Ho=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ho(e)}function uj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function gp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uj(Object(n),!0).forEach(function(a){LD(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uj(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function LD(e,t,n){return t=BD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BD(e){var t=FD(e,"string");return Ho(t)=="symbol"?t:t+""}function FD(e,t){if(Ho(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Ho(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qs={widthCache:{},cacheCount:0},qD=2e3,UD={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},hj="recharts_measurement_span";function zD(e){var t=gp({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var To=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ua.isSsr)return{width:0,height:0};var a=zD(n),s=JSON.stringify({text:t,copyStyle:a});if(Qs.widthCache[s])return Qs.widthCache[s];try{var i=document.getElementById(hj);i||(i=document.createElement("span"),i.setAttribute("id",hj),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=gp(gp({},UD),a);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Qs.widthCache[s]=c,++Qs.cacheCount>qD&&(Qs.cacheCount=0,Qs.widthCache={}),c}catch{return{width:0,height:0}}},VD=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Go(e){"@babel/helpers - typeof";return Go=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Go(e)}function Lc(e,t){return KD(e)||GD(e,t)||HD(e,t)||WD()}function WD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HD(e,t){if(e){if(typeof e=="string")return fj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fj(e,t)}}function fj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function GD(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function KD(e){if(Array.isArray(e))return e}function YD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mj(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,QD(a.key),a)}}function XD(e,t,n){return t&&mj(e.prototype,t),n&&mj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function QD(e){var t=JD(e,"string");return Go(t)=="symbol"?t:t+""}function JD(e,t){if(Go(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Go(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var xj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,pj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ZD=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,e3=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,j2={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},t3=Object.keys(j2),si="NaN";function r3(e,t){return e*j2[t]}var ic=(function(){function e(t,n){YD(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!ZD.test(n)&&(this.num=NaN,this.unit=""),t3.includes(n)&&(this.num=r3(t,n),this.unit="px")}return XD(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var a,s=(a=e3.exec(n))!==null&&a!==void 0?a:[],i=Lc(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])})();function N2(e){if(e.includes(si))return si;for(var t=e;t.includes("*")||t.includes("/");){var n,a=(n=xj.exec(t))!==null&&n!==void 0?n:[],s=Lc(a,4),i=s[1],o=s[2],l=s[3],c=ic.parse(i??""),d=ic.parse(l??""),u=o==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return si;t=t.replace(xj,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,f=(h=pj.exec(t))!==null&&h!==void 0?h:[],m=Lc(f,4),g=m[1],p=m[2],x=m[3],b=ic.parse(g??""),y=ic.parse(x??""),w=p==="+"?b.add(y):b.subtract(y);if(w.isNaN())return si;t=t.replace(pj,w.toString())}return t}var gj=/\(([^()]*)\)/;function n3(e){for(var t=e;t.includes("(");){var n=gj.exec(t),a=Lc(n,2),s=a[1];t=t.replace(gj,N2(s))}return t}function a3(e){var t=e.replace(/\s+/g,"");return t=n3(t),t=N2(t),t}function s3(e){try{return a3(e)}catch{return si}}function Dm(e){var t=s3(e.slice(5,-1));return t===si?"":t}var i3=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],o3=["dx","dy","angle","className","breakAll"];function yp(){return yp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},yp.apply(this,arguments)}function yj(e,t){if(e==null)return{};var n=l3(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function l3(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function bj(e,t){return h3(e)||u3(e,t)||d3(e,t)||c3()}function c3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d3(e,t){if(e){if(typeof e=="string")return vj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vj(e,t)}}function vj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function u3(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function h3(e){if(Array.isArray(e))return e}var S2=/[ \f\n\r\t\v\u2028\u2029]+/,k2=function(t){var n=t.children,a=t.breakAll,s=t.style;try{var i=[];Ue(n)||(a?i=n.toString().split(""):i=n.toString().split(S2));var o=i.map(function(c){return{word:c,width:To(c,s).width}}),l=a?0:To(" ",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},f3=function(t,n,a,s,i){var o=t.maxLines,l=t.children,c=t.style,d=t.breakAll,u=he(o),h=l,f=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D.reduce(function(L,V){var X=V.word,W=V.width,ce=L[L.length-1];if(ce&&(s==null||i||ce.width+W+a<Number(s)))ce.words.push(X),ce.width+=W+a;else{var de={words:[X],width:W};L.push(de)}return L},[])},m=f(n),g=function(D){return D.reduce(function(L,V){return L.width>V.width?L:V})};if(!u)return m;for(var p="…",x=function(D){var L=h.slice(0,D),V=k2({breakAll:d,style:c,children:L+p}).wordsWithComputedWidth,X=f(V),W=X.length>o||g(X).width>Number(s);return[W,X]},b=0,y=h.length-1,w=0,S;b<=y&&w<=h.length-1;){var v=Math.floor((b+y)/2),N=v-1,A=x(N),P=bj(A,2),T=P[0],M=P[1],E=x(v),C=bj(E,1),O=C[0];if(!T&&!O&&(b=v+1),T&&O&&(y=v-1),!T&&O){S=M;break}w++}return S||m},wj=function(t){var n=Ue(t)?[]:t.toString().split(S2);return[{words:n}]},m3=function(t){var n=t.width,a=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((n||a)&&!Ua.isSsr){var c,d,u=k2({breakAll:o,children:s,style:i});if(u){var h=u.wordsWithComputedWidth,f=u.spaceWidth;c=h,d=f}else return wj(s);return f3({breakAll:o,children:s,maxLines:l,style:i},c,d,n,a)}return wj(s)},jj="#808080",As=function(t){var n=t.x,a=n===void 0?0:n,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,d=c===void 0?"0.71em":c,u=t.scaleToFit,h=u===void 0?!1:u,f=t.textAnchor,m=f===void 0?"start":f,g=t.verticalAnchor,p=g===void 0?"end":g,x=t.fill,b=x===void 0?jj:x,y=yj(t,i3),w=k.useMemo(function(){return m3({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:h,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,h,y.style,y.width]),S=y.dx,v=y.dy,N=y.angle,A=y.className,P=y.breakAll,T=yj(y,o3);if(!nr(a)||!nr(i))return null;var M=a+(he(S)?S:0),E=i+(he(v)?v:0),C;switch(p){case"start":C=Dm("calc(".concat(d,")"));break;case"middle":C=Dm("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:C=Dm("calc(".concat(w.length-1," * -").concat(l,")"));break}var O=[];if(h){var _=w[0].width,D=y.width;O.push("scale(".concat((he(D)?D/_:1)/_,")"))}return N&&O.push("rotate(".concat(N,", ").concat(M,", ").concat(E,")")),O.length&&(T.transform=O.join(" ")),R.createElement("text",yp({},ke(T,!0),{x:M,y:E,className:Ve("recharts-text",A),textAnchor:m,fill:b.includes("url")?jj:b}),w.map(function(L,V){var X=L.words.join(P?"":" ");return R.createElement("tspan",{x:M,dy:V===0?C:l,key:"".concat(X,"-").concat(V)},X)}))};function Ba(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function x3(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Y0(e){let t,n,a;e.length!==2?(t=Ba,n=(l,c)=>Ba(e(l),c),a=(l,c)=>e(l)-c):(t=e===Ba||e===x3?e:p3,n=e,a=e);function s(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;n(l[h],c)<0?d=h+1:u=h}while(d<u)}return d}function i(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;n(l[h],c)<=0?d=h+1:u=h}while(d<u)}return d}function o(l,c,d=0,u=l.length){const h=s(l,c,d,u-1);return h>d&&a(l[h-1],c)>-a(l[h],c)?h-1:h}return{left:s,center:o,right:i}}function p3(){return 0}function A2(e){return e===null?NaN:+e}function*g3(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const y3=Y0(Ba),Al=y3.right;Y0(A2).center;class Nj extends Map{constructor(t,n=w3){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[a,s]of t)this.set(a,s)}get(t){return super.get(Sj(this,t))}has(t){return super.has(Sj(this,t))}set(t,n){return super.set(b3(this,t),n)}delete(t){return super.delete(v3(this,t))}}function Sj({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):n}function b3({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):(e.set(a,n),n)}function v3({_intern:e,_key:t},n){const a=t(n);return e.has(a)&&(n=e.get(a),e.delete(a)),n}function w3(e){return e!==null&&typeof e=="object"?e.valueOf():e}function j3(e=Ba){if(e===Ba)return P2;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const a=e(t,n);return a||a===0?a:(e(n,n)===0)-(e(t,t)===0)}}function P2(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const N3=Math.sqrt(50),S3=Math.sqrt(10),k3=Math.sqrt(2);function Bc(e,t,n){const a=(t-e)/Math.max(0,n),s=Math.floor(Math.log10(a)),i=a/Math.pow(10,s),o=i>=N3?10:i>=S3?5:i>=k3?2:1;let l,c,d;return s<0?(d=Math.pow(10,-s)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,s)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=n&&n<2?Bc(e,t,n*2):[l,c,d]}function bp(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const a=t<e,[s,i,o]=a?Bc(t,e,n):Bc(e,t,n);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(a)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(s+d)/-o;else for(let d=0;d<l;++d)c[d]=(s+d)*o;return c}function vp(e,t,n){return t=+t,e=+e,n=+n,Bc(e,t,n)[2]}function wp(e,t,n){t=+t,e=+e,n=+n;const a=t<e,s=a?vp(t,e,n):vp(e,t,n);return(a?-1:1)*(s<0?1/-s:s)}function kj(e,t){let n;for(const a of e)a!=null&&(n<a||n===void 0&&a>=a)&&(n=a);return n}function Aj(e,t){let n;for(const a of e)a!=null&&(n>a||n===void 0&&a>=a)&&(n=a);return n}function C2(e,t,n=0,a=1/0,s){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(e.length-1,a)),!(n<=t&&t<=a))return e;for(s=s===void 0?P2:j3(s);a>n;){if(a-n>600){const c=a-n+1,d=t-n+1,u=Math.log(c),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(c-h)/c)*(d-c/2<0?-1:1),m=Math.max(n,Math.floor(t-d*h/c+f)),g=Math.min(a,Math.floor(t+(c-d)*h/c+f));C2(e,t,m,g,s)}const i=e[t];let o=n,l=a;for(ho(e,n,t),s(e[a],i)>0&&ho(e,n,a);o<l;){for(ho(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[n],i)===0?ho(e,n,l):(++l,ho(e,l,a)),l<=t&&(n=l+1),t<=l&&(a=l-1)}return e}function ho(e,t,n){const a=e[t];e[t]=e[n],e[n]=a}function A3(e,t,n){if(e=Float64Array.from(g3(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return Aj(e);if(t>=1)return kj(e);var a,s=(a-1)*t,i=Math.floor(s),o=kj(C2(e,i).subarray(0,i+1)),l=Aj(e.subarray(i+1));return o+(l-o)*(s-i)}}function P3(e,t,n=A2){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+n(e[0],0,e);if(t>=1)return+n(e[a-1],a-1,e);var a,s=(a-1)*t,i=Math.floor(s),o=+n(e[i],i,e),l=+n(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function C3(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var a=-1,s=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(s);++a<s;)i[a]=e+a*n;return i}function hn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ga(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const jp=Symbol("implicit");function X0(){var e=new Nj,t=[],n=[],a=jp;function s(i){let o=e.get(i);if(o===void 0){if(a!==jp)return a;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Nj;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(n=Array.from(i),s):n.slice()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return X0(t,n).unknown(a)},hn.apply(s,arguments),s}function Ko(){var e=X0().unknown(void 0),t=e.domain,n=e.range,a=0,s=1,i,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function h(){var f=t().length,m=s<a,g=m?s:a,p=m?a:s;i=(p-g)/Math.max(1,f-c+d*2),l&&(i=Math.floor(i)),g+=(p-g-i*(f-c))*u,o=i*(1-c),l&&(g=Math.round(g),o=Math.round(o));var x=C3(f).map(function(b){return g+i*b});return n(m?x.reverse():x)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([a,s]=f,a=+a,s=+s,h()):[a,s]},e.rangeRound=function(f){return[a,s]=f,a=+a,s=+s,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(l=!!f,h()):l},e.padding=function(f){return arguments.length?(c=Math.min(1,d=+f),h()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},e.paddingOuter=function(f){return arguments.length?(d=+f,h()):d},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},e.copy=function(){return Ko(t(),[a,s]).round(l).paddingInner(c).paddingOuter(d).align(u)},hn.apply(h(),arguments)}function O2(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return O2(t())},e}function _o(){return O2(Ko.apply(null,arguments).paddingInner(1))}function Q0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function T2(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function Pl(){}var Yo=.7,Fc=1/Yo,fi="\\s*([+-]?\\d+)\\s*",Xo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",O3=/^#([0-9a-f]{3,8})$/,T3=new RegExp(`^rgb\\(${fi},${fi},${fi}\\)$`),_3=new RegExp(`^rgb\\(${Fn},${Fn},${Fn}\\)$`),E3=new RegExp(`^rgba\\(${fi},${fi},${fi},${Xo}\\)$`),D3=new RegExp(`^rgba\\(${Fn},${Fn},${Fn},${Xo}\\)$`),M3=new RegExp(`^hsl\\(${Xo},${Fn},${Fn}\\)$`),I3=new RegExp(`^hsla\\(${Xo},${Fn},${Fn},${Xo}\\)$`),Pj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Q0(Pl,Qo,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Cj,formatHex:Cj,formatHex8:R3,formatHsl:$3,formatRgb:Oj,toString:Oj});function Cj(){return this.rgb().formatHex()}function R3(){return this.rgb().formatHex8()}function $3(){return _2(this).formatHsl()}function Oj(){return this.rgb().formatRgb()}function Qo(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=O3.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Tj(t):n===3?new qr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?oc(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?oc(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=T3.exec(e))?new qr(t[1],t[2],t[3],1):(t=_3.exec(e))?new qr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=E3.exec(e))?oc(t[1],t[2],t[3],t[4]):(t=D3.exec(e))?oc(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=M3.exec(e))?Dj(t[1],t[2]/100,t[3]/100,1):(t=I3.exec(e))?Dj(t[1],t[2]/100,t[3]/100,t[4]):Pj.hasOwnProperty(e)?Tj(Pj[e]):e==="transparent"?new qr(NaN,NaN,NaN,0):null}function Tj(e){return new qr(e>>16&255,e>>8&255,e&255,1)}function oc(e,t,n,a){return a<=0&&(e=t=n=NaN),new qr(e,t,n,a)}function L3(e){return e instanceof Pl||(e=Qo(e)),e?(e=e.rgb(),new qr(e.r,e.g,e.b,e.opacity)):new qr}function Np(e,t,n,a){return arguments.length===1?L3(e):new qr(e,t,n,a??1)}function qr(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}Q0(qr,Np,T2(Pl,{brighter(e){return e=e==null?Fc:Math.pow(Fc,e),new qr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Yo:Math.pow(Yo,e),new qr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new qr(ys(this.r),ys(this.g),ys(this.b),qc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_j,formatHex:_j,formatHex8:B3,formatRgb:Ej,toString:Ej}));function _j(){return`#${fs(this.r)}${fs(this.g)}${fs(this.b)}`}function B3(){return`#${fs(this.r)}${fs(this.g)}${fs(this.b)}${fs((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ej(){const e=qc(this.opacity);return`${e===1?"rgb(":"rgba("}${ys(this.r)}, ${ys(this.g)}, ${ys(this.b)}${e===1?")":`, ${e})`}`}function qc(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ys(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function fs(e){return e=ys(e),(e<16?"0":"")+e.toString(16)}function Dj(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new vn(e,t,n,a)}function _2(e){if(e instanceof vn)return new vn(e.h,e.s,e.l,e.opacity);if(e instanceof Pl||(e=Qo(e)),!e)return new vn;if(e instanceof vn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,s=Math.min(t,n,a),i=Math.max(t,n,a),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(n-a)/l+(n<a)*6:n===i?o=(a-t)/l+2:o=(t-n)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new vn(o,l,c,e.opacity)}function F3(e,t,n,a){return arguments.length===1?_2(e):new vn(e,t,n,a??1)}function vn(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}Q0(vn,F3,T2(Pl,{brighter(e){return e=e==null?Fc:Math.pow(Fc,e),new vn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Yo:Math.pow(Yo,e),new vn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,s=2*n-a;return new qr(Mm(e>=240?e-240:e+120,s,a),Mm(e,s,a),Mm(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new vn(Mj(this.h),lc(this.s),lc(this.l),qc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=qc(this.opacity);return`${e===1?"hsl(":"hsla("}${Mj(this.h)}, ${lc(this.s)*100}%, ${lc(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Mj(e){return e=(e||0)%360,e<0?e+360:e}function lc(e){return Math.max(0,Math.min(1,e||0))}function Mm(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const J0=e=>()=>e;function q3(e,t){return function(n){return e+n*t}}function U3(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(a){return Math.pow(e+a*t,n)}}function z3(e){return(e=+e)==1?E2:function(t,n){return n-t?U3(t,n,e):J0(isNaN(t)?n:t)}}function E2(e,t){var n=t-e;return n?q3(e,n):J0(isNaN(e)?t:e)}const Ij=(function e(t){var n=z3(t);function a(s,i){var o=n((s=Np(s)).r,(i=Np(i)).r),l=n(s.g,i.g),c=n(s.b,i.b),d=E2(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=l(u),s.b=c(u),s.opacity=d(u),s+""}}return a.gamma=e,a})(1);function V3(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,a=t.slice(),s;return function(i){for(s=0;s<n;++s)a[s]=e[s]*(1-i)+t[s]*i;return a}}function W3(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function H3(e,t){var n=t?t.length:0,a=e?Math.min(n,e.length):0,s=new Array(a),i=new Array(n),o;for(o=0;o<a;++o)s[o]=Gi(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(l){for(o=0;o<a;++o)i[o]=s[o](l);return i}}function G3(e,t){var n=new Date;return e=+e,t=+t,function(a){return n.setTime(e*(1-a)+t*a),n}}function Uc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function K3(e,t){var n={},a={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=Gi(e[s],t[s]):a[s]=t[s];return function(i){for(s in n)a[s]=n[s](i);return a}}var Sp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Im=new RegExp(Sp.source,"g");function Y3(e){return function(){return e}}function X3(e){return function(t){return e(t)+""}}function Q3(e,t){var n=Sp.lastIndex=Im.lastIndex=0,a,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(a=Sp.exec(e))&&(s=Im.exec(t));)(i=s.index)>n&&(i=t.slice(n,i),l[o]?l[o]+=i:l[++o]=i),(a=a[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:Uc(a,s)})),n=Im.lastIndex;return n<t.length&&(i=t.slice(n),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?X3(c[0].x):Y3(t):(t=c.length,function(d){for(var u=0,h;u<t;++u)l[(h=c[u]).i]=h.x(d);return l.join("")})}function Gi(e,t){var n=typeof t,a;return t==null||n==="boolean"?J0(t):(n==="number"?Uc:n==="string"?(a=Qo(t))?(t=a,Ij):Q3:t instanceof Qo?Ij:t instanceof Date?G3:W3(t)?V3:Array.isArray(t)?H3:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?K3:Uc)(e,t)}function Z0(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function J3(e,t){t===void 0&&(t=e,e=Gi);for(var n=0,a=t.length-1,s=t[0],i=new Array(a<0?0:a);n<a;)i[n]=e(s,s=t[++n]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return i[l](o-l)}}function Z3(e){return function(){return e}}function zc(e){return+e}var Rj=[0,1];function Mr(e){return e}function kp(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Z3(isNaN(t)?NaN:.5)}function eM(e,t){var n;return e>t&&(n=e,e=t,t=n),function(a){return Math.max(e,Math.min(t,a))}}function tM(e,t,n){var a=e[0],s=e[1],i=t[0],o=t[1];return s<a?(a=kp(s,a),i=n(o,i)):(a=kp(a,s),i=n(i,o)),function(l){return i(a(l))}}function rM(e,t,n){var a=Math.min(e.length,t.length)-1,s=new Array(a),i=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<a;)s[o]=kp(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(l){var c=Al(e,l,1,a)-1;return i[c](s[c](l))}}function Cl(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Wd(){var e=Rj,t=Rj,n=Gi,a,s,i,o=Mr,l,c,d;function u(){var f=Math.min(e.length,t.length);return o!==Mr&&(o=eM(e[0],e[f-1])),l=f>2?rM:tM,c=d=null,h}function h(f){return f==null||isNaN(f=+f)?i:(c||(c=l(e.map(a),t,n)))(a(o(f)))}return h.invert=function(f){return o(s((d||(d=l(t,e.map(a),Uc)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,zc),u()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),n=Z0,u()},h.clamp=function(f){return arguments.length?(o=f?!0:Mr,u()):o!==Mr},h.interpolate=function(f){return arguments.length?(n=f,u()):n},h.unknown=function(f){return arguments.length?(i=f,h):i},function(f,m){return a=f,s=m,u()}}function eg(){return Wd()(Mr,Mr)}function nM(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Vc(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,a=e.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+e.slice(n+1)]}function vi(e){return e=Vc(Math.abs(e)),e?e[1]:NaN}function aM(e,t){return function(n,a){for(var s=n.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>a&&(l=Math.max(1,a-c)),i.push(n.substring(s-=l,s+l)),!((c+=l+1)>a));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function sM(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var iM=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Jo(e){if(!(t=iM.exec(e)))throw new Error("invalid format: "+e);var t;return new tg({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Jo.prototype=tg.prototype;function tg(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}tg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function oM(e){e:for(var t=e.length,n=1,a=-1,s;n<t;++n)switch(e[n]){case".":a=s=n;break;case"0":a===0&&(a=n),s=n;break;default:if(!+e[n])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(s+1):e}var D2;function lM(e,t){var n=Vc(e,t);if(!n)return e+"";var a=n[0],s=n[1],i=s-(D2=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=a.length;return i===o?a:i>o?a+new Array(i-o+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+Vc(e,Math.max(0,t+i-1))[0]}function $j(e,t){var n=Vc(e,t);if(!n)return e+"";var a=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+a:a.length>s+1?a.slice(0,s+1)+"."+a.slice(s+1):a+new Array(s-a.length+2).join("0")}const Lj={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:nM,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>$j(e*100,t),r:$j,s:lM,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Bj(e){return e}var Fj=Array.prototype.map,qj=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function cM(e){var t=e.grouping===void 0||e.thousands===void 0?Bj:aM(Fj.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?Bj:sM(Fj.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(h){h=Jo(h);var f=h.fill,m=h.align,g=h.sign,p=h.symbol,x=h.zero,b=h.width,y=h.comma,w=h.precision,S=h.trim,v=h.type;v==="n"?(y=!0,v="g"):Lj[v]||(w===void 0&&(w=12),S=!0,v="g"),(x||f==="0"&&m==="=")&&(x=!0,f="0",m="=");var N=p==="$"?n:p==="#"&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",A=p==="$"?a:/[%p]/.test(v)?o:"",P=Lj[v],T=/[defgprs%]/.test(v);w=w===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function M(E){var C=N,O=A,_,D,L;if(v==="c")O=P(E)+O,E="";else{E=+E;var V=E<0||1/E<0;if(E=isNaN(E)?c:P(Math.abs(E),w),S&&(E=oM(E)),V&&+E==0&&g!=="+"&&(V=!1),C=(V?g==="("?g:l:g==="-"||g==="("?"":g)+C,O=(v==="s"?qj[8+D2/3]:"")+O+(V&&g==="("?")":""),T){for(_=-1,D=E.length;++_<D;)if(L=E.charCodeAt(_),48>L||L>57){O=(L===46?s+E.slice(_+1):E.slice(_))+O,E=E.slice(0,_);break}}}y&&!x&&(E=t(E,1/0));var X=C.length+E.length+O.length,W=X<b?new Array(b-X+1).join(f):"";switch(y&&x&&(E=t(W+E,W.length?b-O.length:1/0),W=""),m){case"<":E=C+E+O+W;break;case"=":E=C+W+E+O;break;case"^":E=W.slice(0,X=W.length>>1)+C+E+O+W.slice(X);break;default:E=W+C+E+O;break}return i(E)}return M.toString=function(){return h+""},M}function u(h,f){var m=d((h=Jo(h),h.type="f",h)),g=Math.max(-8,Math.min(8,Math.floor(vi(f)/3)))*3,p=Math.pow(10,-g),x=qj[8+g/3];return function(b){return m(p*b)+x}}return{format:d,formatPrefix:u}}var cc,rg,M2;dM({thousands:",",grouping:[3],currency:["$",""]});function dM(e){return cc=cM(e),rg=cc.format,M2=cc.formatPrefix,cc}function uM(e){return Math.max(0,-vi(Math.abs(e)))}function hM(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(vi(t)/3)))*3-vi(Math.abs(e)))}function fM(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,vi(t)-vi(e))+1}function I2(e,t,n,a){var s=wp(e,t,n),i;switch(a=Jo(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(i=hM(s,o))&&(a.precision=i),M2(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=fM(s,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=uM(s))&&(a.precision=i-(a.type==="%")*2);break}}return rg(a)}function za(e){var t=e.domain;return e.ticks=function(n){var a=t();return bp(a[0],a[a.length-1],n??10)},e.tickFormat=function(n,a){var s=t();return I2(s[0],s[s.length-1],n??10,a)},e.nice=function(n){n==null&&(n=10);var a=t(),s=0,i=a.length-1,o=a[s],l=a[i],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=s,s=i,i=d);u-- >0;){if(d=vp(o,l,n),d===c)return a[s]=o,a[i]=l,t(a);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function Wc(){var e=eg();return e.copy=function(){return Cl(e,Wc())},hn.apply(e,arguments),za(e)}function R2(e){var t;function n(a){return a==null||isNaN(a=+a)?t:a}return n.invert=n,n.domain=n.range=function(a){return arguments.length?(e=Array.from(a,zc),n):e.slice()},n.unknown=function(a){return arguments.length?(t=a,n):t},n.copy=function(){return R2(e).unknown(t)},e=arguments.length?Array.from(e,zc):[0,1],za(n)}function $2(e,t){e=e.slice();var n=0,a=e.length-1,s=e[n],i=e[a],o;return i<s&&(o=n,n=a,a=o,o=s,s=i,i=o),e[n]=t.floor(s),e[a]=t.ceil(i),e}function Uj(e){return Math.log(e)}function zj(e){return Math.exp(e)}function mM(e){return-Math.log(-e)}function xM(e){return-Math.exp(-e)}function pM(e){return isFinite(e)?+("1e"+e):e<0?0:e}function gM(e){return e===10?pM:e===Math.E?Math.exp:t=>Math.pow(e,t)}function yM(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Vj(e){return(t,n)=>-e(-t,n)}function ng(e){const t=e(Uj,zj),n=t.domain;let a=10,s,i;function o(){return s=yM(a),i=gM(a),n()[0]<0?(s=Vj(s),i=Vj(i),e(mM,xM)):e(Uj,zj),t}return t.base=function(l){return arguments.length?(a=+l,o()):a},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let d=c[0],u=c[c.length-1];const h=u<d;h&&([d,u]=[u,d]);let f=s(d),m=s(u),g,p;const x=l==null?10:+l;let b=[];if(!(a%1)&&m-f<x){if(f=Math.floor(f),m=Math.ceil(m),d>0){for(;f<=m;++f)for(g=1;g<a;++g)if(p=f<0?g/i(-f):g*i(f),!(p<d)){if(p>u)break;b.push(p)}}else for(;f<=m;++f)for(g=a-1;g>=1;--g)if(p=f>0?g/i(-f):g*i(f),!(p<d)){if(p>u)break;b.push(p)}b.length*2<x&&(b=bp(d,u,x))}else b=bp(f,m,Math.min(m-f,x)).map(i);return h?b.reverse():b},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(!(a%1)&&(c=Jo(c)).precision==null&&(c.trim=!0),c=rg(c)),l===1/0)return c;const d=Math.max(1,a*l/t.ticks().length);return u=>{let h=u/i(Math.round(s(u)));return h*a<a-.5&&(h*=a),h<=d?c(u):""}},t.nice=()=>n($2(n(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function L2(){const e=ng(Wd()).domain([1,10]);return e.copy=()=>Cl(e,L2()).base(e.base()),hn.apply(e,arguments),e}function Wj(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Hj(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function ag(e){var t=1,n=e(Wj(t),Hj(t));return n.constant=function(a){return arguments.length?e(Wj(t=+a),Hj(t)):t},za(n)}function B2(){var e=ag(Wd());return e.copy=function(){return Cl(e,B2()).constant(e.constant())},hn.apply(e,arguments)}function Gj(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function bM(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function vM(e){return e<0?-e*e:e*e}function sg(e){var t=e(Mr,Mr),n=1;function a(){return n===1?e(Mr,Mr):n===.5?e(bM,vM):e(Gj(n),Gj(1/n))}return t.exponent=function(s){return arguments.length?(n=+s,a()):n},za(t)}function ig(){var e=sg(Wd());return e.copy=function(){return Cl(e,ig()).exponent(e.exponent())},hn.apply(e,arguments),e}function wM(){return ig.apply(null,arguments).exponent(.5)}function Kj(e){return Math.sign(e)*e*e}function jM(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function F2(){var e=eg(),t=[0,1],n=!1,a;function s(i){var o=jM(e(i));return isNaN(o)?a:n?Math.round(o):o}return s.invert=function(i){return e.invert(Kj(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,zc)).map(Kj)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(n=!!i,s):n},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return F2(e.domain(),t).round(n).clamp(e.clamp()).unknown(a)},hn.apply(s,arguments),za(s)}function q2(){var e=[],t=[],n=[],a;function s(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=P3(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?a:t[Al(n,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Ba),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(a=o,i):a},i.quantiles=function(){return n.slice()},i.copy=function(){return q2().domain(e).range(t).unknown(a)},hn.apply(i,arguments)}function U2(){var e=0,t=1,n=1,a=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[Al(a,c,0,n)]:i}function l(){var c=-1;for(a=new Array(n);++c<n;)a[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var d=s.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,a[0]]:d>=n?[a[n-1],t]:[a[d-1],a[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return a.slice()},o.copy=function(){return U2().domain([e,t]).range(s).unknown(i)},hn.apply(za(o),arguments)}function z2(){var e=[.5],t=[0,1],n,a=1;function s(i){return i!=null&&i<=i?t[Al(e,i,0,a)]:n}return s.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),a=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return z2().domain(e).range(t).unknown(n)},hn.apply(s,arguments)}const Rm=new Date,$m=new Date;function ar(e,t,n,a){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},s.filter=i=>ar(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),n&&(s.count=(i,o)=>(Rm.setTime(+i),$m.setTime(+o),e(Rm),e($m),Math.floor(n(Rm,$m))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(a?o=>a(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const Hc=ar(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Hc.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ar(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Hc);Hc.range;const oa=1e3,cn=oa*60,la=cn*60,fa=la*24,og=fa*7,Yj=fa*30,Lm=fa*365,ms=ar(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*oa)},(e,t)=>(t-e)/oa,e=>e.getUTCSeconds());ms.range;const lg=ar(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*oa)},(e,t)=>{e.setTime(+e+t*cn)},(e,t)=>(t-e)/cn,e=>e.getMinutes());lg.range;const cg=ar(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*cn)},(e,t)=>(t-e)/cn,e=>e.getUTCMinutes());cg.range;const dg=ar(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*oa-e.getMinutes()*cn)},(e,t)=>{e.setTime(+e+t*la)},(e,t)=>(t-e)/la,e=>e.getHours());dg.range;const ug=ar(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*la)},(e,t)=>(t-e)/la,e=>e.getUTCHours());ug.range;const Ol=ar(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*cn)/fa,e=>e.getDate()-1);Ol.range;const Hd=ar(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/fa,e=>e.getUTCDate()-1);Hd.range;const V2=ar(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/fa,e=>Math.floor(e/fa));V2.range;function Is(e){return ar(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*cn)/og)}const Gd=Is(0),Gc=Is(1),NM=Is(2),SM=Is(3),wi=Is(4),kM=Is(5),AM=Is(6);Gd.range;Gc.range;NM.range;SM.range;wi.range;kM.range;AM.range;function Rs(e){return ar(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/og)}const Kd=Rs(0),Kc=Rs(1),PM=Rs(2),CM=Rs(3),ji=Rs(4),OM=Rs(5),TM=Rs(6);Kd.range;Kc.range;PM.range;CM.range;ji.range;OM.range;TM.range;const hg=ar(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());hg.range;const fg=ar(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());fg.range;const ma=ar(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ma.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ar(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ma.range;const xa=ar(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());xa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ar(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});xa.range;function W2(e,t,n,a,s,i){const o=[[ms,1,oa],[ms,5,5*oa],[ms,15,15*oa],[ms,30,30*oa],[i,1,cn],[i,5,5*cn],[i,15,15*cn],[i,30,30*cn],[s,1,la],[s,3,3*la],[s,6,6*la],[s,12,12*la],[a,1,fa],[a,2,2*fa],[n,1,og],[t,1,Yj],[t,3,3*Yj],[e,1,Lm]];function l(d,u,h){const f=u<d;f&&([d,u]=[u,d]);const m=h&&typeof h.range=="function"?h:c(d,u,h),g=m?m.range(d,+u+1):[];return f?g.reverse():g}function c(d,u,h){const f=Math.abs(u-d)/h,m=Y0(([,,x])=>x).right(o,f);if(m===o.length)return e.every(wp(d/Lm,u/Lm,h));if(m===0)return Hc.every(Math.max(wp(d,u,h),1));const[g,p]=o[f/o[m-1][2]<o[m][2]/f?m-1:m];return g.every(p)}return[l,c]}const[_M,EM]=W2(xa,fg,Kd,V2,ug,cg),[DM,MM]=W2(ma,hg,Gd,Ol,dg,lg);function Bm(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Fm(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function fo(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function IM(e){var t=e.dateTime,n=e.date,a=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=mo(s),u=xo(s),h=mo(i),f=xo(i),m=mo(o),g=xo(o),p=mo(l),x=xo(l),b=mo(c),y=xo(c),w={a:V,A:X,b:W,B:ce,c:null,d:tN,e:tN,f:aI,g:mI,G:pI,H:tI,I:rI,j:nI,L:H2,m:sI,M:iI,p:de,q:fe,Q:aN,s:sN,S:oI,u:lI,U:cI,V:dI,w:uI,W:hI,x:null,X:null,y:fI,Y:xI,Z:gI,"%":nN},S={a:F,A:Te,b:pe,B:re,c:null,d:rN,e:rN,f:wI,g:_I,G:DI,H:yI,I:bI,j:vI,L:K2,m:jI,M:NI,p:be,q:se,Q:aN,s:sN,S:SI,u:kI,U:AI,V:PI,w:CI,W:OI,x:null,X:null,y:TI,Y:EI,Z:MI,"%":nN},v={a:M,A:E,b:C,B:O,c:_,d:Zj,e:Zj,f:QM,g:Jj,G:Qj,H:eN,I:eN,j:GM,L:XM,m:HM,M:KM,p:T,q:WM,Q:ZM,s:eI,S:YM,u:FM,U:qM,V:UM,w:BM,W:zM,x:D,X:L,y:Jj,Y:Qj,Z:VM,"%":JM};w.x=N(n,w),w.X=N(a,w),w.c=N(t,w),S.x=N(n,S),S.X=N(a,S),S.c=N(t,S);function N(oe,me){return function(ve){var I=[],ge=-1,Ne=0,He=oe.length,bt,It,Ar;for(ve instanceof Date||(ve=new Date(+ve));++ge<He;)oe.charCodeAt(ge)===37&&(I.push(oe.slice(Ne,ge)),(It=Xj[bt=oe.charAt(++ge)])!=null?bt=oe.charAt(++ge):It=bt==="e"?" ":"0",(Ar=me[bt])&&(bt=Ar(ve,It)),I.push(bt),Ne=ge+1);return I.push(oe.slice(Ne,ge)),I.join("")}}function A(oe,me){return function(ve){var I=fo(1900,void 0,1),ge=P(I,oe,ve+="",0),Ne,He;if(ge!=ve.length)return null;if("Q"in I)return new Date(I.Q);if("s"in I)return new Date(I.s*1e3+("L"in I?I.L:0));if(me&&!("Z"in I)&&(I.Z=0),"p"in I&&(I.H=I.H%12+I.p*12),I.m===void 0&&(I.m="q"in I?I.q:0),"V"in I){if(I.V<1||I.V>53)return null;"w"in I||(I.w=1),"Z"in I?(Ne=Fm(fo(I.y,0,1)),He=Ne.getUTCDay(),Ne=He>4||He===0?Kc.ceil(Ne):Kc(Ne),Ne=Hd.offset(Ne,(I.V-1)*7),I.y=Ne.getUTCFullYear(),I.m=Ne.getUTCMonth(),I.d=Ne.getUTCDate()+(I.w+6)%7):(Ne=Bm(fo(I.y,0,1)),He=Ne.getDay(),Ne=He>4||He===0?Gc.ceil(Ne):Gc(Ne),Ne=Ol.offset(Ne,(I.V-1)*7),I.y=Ne.getFullYear(),I.m=Ne.getMonth(),I.d=Ne.getDate()+(I.w+6)%7)}else("W"in I||"U"in I)&&("w"in I||(I.w="u"in I?I.u%7:"W"in I?1:0),He="Z"in I?Fm(fo(I.y,0,1)).getUTCDay():Bm(fo(I.y,0,1)).getDay(),I.m=0,I.d="W"in I?(I.w+6)%7+I.W*7-(He+5)%7:I.w+I.U*7-(He+6)%7);return"Z"in I?(I.H+=I.Z/100|0,I.M+=I.Z%100,Fm(I)):Bm(I)}}function P(oe,me,ve,I){for(var ge=0,Ne=me.length,He=ve.length,bt,It;ge<Ne;){if(I>=He)return-1;if(bt=me.charCodeAt(ge++),bt===37){if(bt=me.charAt(ge++),It=v[bt in Xj?me.charAt(ge++):bt],!It||(I=It(oe,ve,I))<0)return-1}else if(bt!=ve.charCodeAt(I++))return-1}return I}function T(oe,me,ve){var I=d.exec(me.slice(ve));return I?(oe.p=u.get(I[0].toLowerCase()),ve+I[0].length):-1}function M(oe,me,ve){var I=m.exec(me.slice(ve));return I?(oe.w=g.get(I[0].toLowerCase()),ve+I[0].length):-1}function E(oe,me,ve){var I=h.exec(me.slice(ve));return I?(oe.w=f.get(I[0].toLowerCase()),ve+I[0].length):-1}function C(oe,me,ve){var I=b.exec(me.slice(ve));return I?(oe.m=y.get(I[0].toLowerCase()),ve+I[0].length):-1}function O(oe,me,ve){var I=p.exec(me.slice(ve));return I?(oe.m=x.get(I[0].toLowerCase()),ve+I[0].length):-1}function _(oe,me,ve){return P(oe,t,me,ve)}function D(oe,me,ve){return P(oe,n,me,ve)}function L(oe,me,ve){return P(oe,a,me,ve)}function V(oe){return o[oe.getDay()]}function X(oe){return i[oe.getDay()]}function W(oe){return c[oe.getMonth()]}function ce(oe){return l[oe.getMonth()]}function de(oe){return s[+(oe.getHours()>=12)]}function fe(oe){return 1+~~(oe.getMonth()/3)}function F(oe){return o[oe.getUTCDay()]}function Te(oe){return i[oe.getUTCDay()]}function pe(oe){return c[oe.getUTCMonth()]}function re(oe){return l[oe.getUTCMonth()]}function be(oe){return s[+(oe.getUTCHours()>=12)]}function se(oe){return 1+~~(oe.getUTCMonth()/3)}return{format:function(oe){var me=N(oe+="",w);return me.toString=function(){return oe},me},parse:function(oe){var me=A(oe+="",!1);return me.toString=function(){return oe},me},utcFormat:function(oe){var me=N(oe+="",S);return me.toString=function(){return oe},me},utcParse:function(oe){var me=A(oe+="",!0);return me.toString=function(){return oe},me}}}var Xj={"-":"",_:" ",0:"0"},mr=/^\s*\d+/,RM=/^%/,$M=/[\\^$*+?|[\]().{}]/g;function Ze(e,t,n){var a=e<0?"-":"",s=(a?-e:e)+"",i=s.length;return a+(i<n?new Array(n-i+1).join(t)+s:s)}function LM(e){return e.replace($M,"\\$&")}function mo(e){return new RegExp("^(?:"+e.map(LM).join("|")+")","i")}function xo(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function BM(e,t,n){var a=mr.exec(t.slice(n,n+1));return a?(e.w=+a[0],n+a[0].length):-1}function FM(e,t,n){var a=mr.exec(t.slice(n,n+1));return a?(e.u=+a[0],n+a[0].length):-1}function qM(e,t,n){var a=mr.exec(t.slice(n,n+2));return a?(e.U=+a[0],n+a[0].length):-1}function UM(e,t,n){var a=mr.exec(t.slice(n,n+2));return a?(e.V=+a[0],n+a[0].length):-1}function zM(e,t,n){var a=mr.exec(t.slice(n,n+2));return a?(e.W=+a[0],n+a[0].length):-1}function Qj(e,t,n){var a=mr.exec(t.slice(n,n+4));return a?(e.y=+a[0],n+a[0].length):-1}function Jj(e,t,n){var a=mr.exec(t.slice(n,n+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function VM(e,t,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function WM(e,t,n){var a=mr.exec(t.slice(n,n+1));return a?(e.q=a[0]*3-3,n+a[0].length):-1}function HM(e,t,n){var a=mr.exec(t.slice(n,n+2));return a?(e.m=a[0]-1,n+a[0].length):-1}function Zj(e,t,n){var a=mr.exec(t.slice(n,n+2));return a?(e.d=+a[0],n+a[0].length):-1}function GM(e,t,n){var a=mr.exec(t.slice(n,n+3));return a?(e.m=0,e.d=+a[0],n+a[0].length):-1}function eN(e,t,n){var a=mr.exec(t.slice(n,n+2));return a?(e.H=+a[0],n+a[0].length):-1}function KM(e,t,n){var a=mr.exec(t.slice(n,n+2));return a?(e.M=+a[0],n+a[0].length):-1}function YM(e,t,n){var a=mr.exec(t.slice(n,n+2));return a?(e.S=+a[0],n+a[0].length):-1}function XM(e,t,n){var a=mr.exec(t.slice(n,n+3));return a?(e.L=+a[0],n+a[0].length):-1}function QM(e,t,n){var a=mr.exec(t.slice(n,n+6));return a?(e.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function JM(e,t,n){var a=RM.exec(t.slice(n,n+1));return a?n+a[0].length:-1}function ZM(e,t,n){var a=mr.exec(t.slice(n));return a?(e.Q=+a[0],n+a[0].length):-1}function eI(e,t,n){var a=mr.exec(t.slice(n));return a?(e.s=+a[0],n+a[0].length):-1}function tN(e,t){return Ze(e.getDate(),t,2)}function tI(e,t){return Ze(e.getHours(),t,2)}function rI(e,t){return Ze(e.getHours()%12||12,t,2)}function nI(e,t){return Ze(1+Ol.count(ma(e),e),t,3)}function H2(e,t){return Ze(e.getMilliseconds(),t,3)}function aI(e,t){return H2(e,t)+"000"}function sI(e,t){return Ze(e.getMonth()+1,t,2)}function iI(e,t){return Ze(e.getMinutes(),t,2)}function oI(e,t){return Ze(e.getSeconds(),t,2)}function lI(e){var t=e.getDay();return t===0?7:t}function cI(e,t){return Ze(Gd.count(ma(e)-1,e),t,2)}function G2(e){var t=e.getDay();return t>=4||t===0?wi(e):wi.ceil(e)}function dI(e,t){return e=G2(e),Ze(wi.count(ma(e),e)+(ma(e).getDay()===4),t,2)}function uI(e){return e.getDay()}function hI(e,t){return Ze(Gc.count(ma(e)-1,e),t,2)}function fI(e,t){return Ze(e.getFullYear()%100,t,2)}function mI(e,t){return e=G2(e),Ze(e.getFullYear()%100,t,2)}function xI(e,t){return Ze(e.getFullYear()%1e4,t,4)}function pI(e,t){var n=e.getDay();return e=n>=4||n===0?wi(e):wi.ceil(e),Ze(e.getFullYear()%1e4,t,4)}function gI(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ze(t/60|0,"0",2)+Ze(t%60,"0",2)}function rN(e,t){return Ze(e.getUTCDate(),t,2)}function yI(e,t){return Ze(e.getUTCHours(),t,2)}function bI(e,t){return Ze(e.getUTCHours()%12||12,t,2)}function vI(e,t){return Ze(1+Hd.count(xa(e),e),t,3)}function K2(e,t){return Ze(e.getUTCMilliseconds(),t,3)}function wI(e,t){return K2(e,t)+"000"}function jI(e,t){return Ze(e.getUTCMonth()+1,t,2)}function NI(e,t){return Ze(e.getUTCMinutes(),t,2)}function SI(e,t){return Ze(e.getUTCSeconds(),t,2)}function kI(e){var t=e.getUTCDay();return t===0?7:t}function AI(e,t){return Ze(Kd.count(xa(e)-1,e),t,2)}function Y2(e){var t=e.getUTCDay();return t>=4||t===0?ji(e):ji.ceil(e)}function PI(e,t){return e=Y2(e),Ze(ji.count(xa(e),e)+(xa(e).getUTCDay()===4),t,2)}function CI(e){return e.getUTCDay()}function OI(e,t){return Ze(Kc.count(xa(e)-1,e),t,2)}function TI(e,t){return Ze(e.getUTCFullYear()%100,t,2)}function _I(e,t){return e=Y2(e),Ze(e.getUTCFullYear()%100,t,2)}function EI(e,t){return Ze(e.getUTCFullYear()%1e4,t,4)}function DI(e,t){var n=e.getUTCDay();return e=n>=4||n===0?ji(e):ji.ceil(e),Ze(e.getUTCFullYear()%1e4,t,4)}function MI(){return"+0000"}function nN(){return"%"}function aN(e){return+e}function sN(e){return Math.floor(+e/1e3)}var Js,X2,Q2;II({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function II(e){return Js=IM(e),X2=Js.format,Js.parse,Q2=Js.utcFormat,Js.utcParse,Js}function RI(e){return new Date(e)}function $I(e){return e instanceof Date?+e:+new Date(+e)}function mg(e,t,n,a,s,i,o,l,c,d){var u=eg(),h=u.invert,f=u.domain,m=d(".%L"),g=d(":%S"),p=d("%I:%M"),x=d("%I %p"),b=d("%a %d"),y=d("%b %d"),w=d("%B"),S=d("%Y");function v(N){return(c(N)<N?m:l(N)<N?g:o(N)<N?p:i(N)<N?x:a(N)<N?s(N)<N?b:y:n(N)<N?w:S)(N)}return u.invert=function(N){return new Date(h(N))},u.domain=function(N){return arguments.length?f(Array.from(N,$I)):f().map(RI)},u.ticks=function(N){var A=f();return e(A[0],A[A.length-1],N??10)},u.tickFormat=function(N,A){return A==null?v:d(A)},u.nice=function(N){var A=f();return(!N||typeof N.range!="function")&&(N=t(A[0],A[A.length-1],N??10)),N?f($2(A,N)):u},u.copy=function(){return Cl(u,mg(e,t,n,a,s,i,o,l,c,d))},u}function LI(){return hn.apply(mg(DM,MM,ma,hg,Gd,Ol,dg,lg,ms,X2).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function BI(){return hn.apply(mg(_M,EM,xa,fg,Kd,Hd,ug,cg,ms,Q2).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Yd(){var e=0,t=1,n,a,s,i,o=Mr,l=!1,c;function d(h){return h==null||isNaN(h=+h)?c:o(s===0?.5:(h=(i(h)-n)*s,l?Math.max(0,Math.min(1,h)):h))}d.domain=function(h){return arguments.length?([e,t]=h,n=i(e=+e),a=i(t=+t),s=n===a?0:1/(a-n),d):[e,t]},d.clamp=function(h){return arguments.length?(l=!!h,d):l},d.interpolator=function(h){return arguments.length?(o=h,d):o};function u(h){return function(f){var m,g;return arguments.length?([m,g]=f,o=h(m,g),d):[o(0),o(1)]}}return d.range=u(Gi),d.rangeRound=u(Z0),d.unknown=function(h){return arguments.length?(c=h,d):c},function(h){return i=h,n=h(e),a=h(t),s=n===a?0:1/(a-n),d}}function Va(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function J2(){var e=za(Yd()(Mr));return e.copy=function(){return Va(e,J2())},ga.apply(e,arguments)}function Z2(){var e=ng(Yd()).domain([1,10]);return e.copy=function(){return Va(e,Z2()).base(e.base())},ga.apply(e,arguments)}function eA(){var e=ag(Yd());return e.copy=function(){return Va(e,eA()).constant(e.constant())},ga.apply(e,arguments)}function xg(){var e=sg(Yd());return e.copy=function(){return Va(e,xg()).exponent(e.exponent())},ga.apply(e,arguments)}function FI(){return xg.apply(null,arguments).exponent(.5)}function tA(){var e=[],t=Mr;function n(a){if(a!=null&&!isNaN(a=+a))return t((Al(e,a,1)-1)/(e.length-1))}return n.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Ba),n},n.interpolator=function(a){return arguments.length?(t=a,n):t},n.range=function(){return e.map((a,s)=>t(s/(e.length-1)))},n.quantiles=function(a){return Array.from({length:a+1},(s,i)=>A3(e,i/a))},n.copy=function(){return tA(t).domain(e)},ga.apply(n,arguments)}function Xd(){var e=0,t=.5,n=1,a=1,s,i,o,l,c,d=Mr,u,h=!1,f;function m(p){return isNaN(p=+p)?f:(p=.5+((p=+u(p))-i)*(a*p<a*i?l:c),d(h?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t,n]=p,s=u(e=+e),i=u(t=+t),o=u(n=+n),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),a=i<s?-1:1,m):[e,t,n]},m.clamp=function(p){return arguments.length?(h=!!p,m):h},m.interpolator=function(p){return arguments.length?(d=p,m):d};function g(p){return function(x){var b,y,w;return arguments.length?([b,y,w]=x,d=J3(p,[b,y,w]),m):[d(0),d(.5),d(1)]}}return m.range=g(Gi),m.rangeRound=g(Z0),m.unknown=function(p){return arguments.length?(f=p,m):f},function(p){return u=p,s=p(e),i=p(t),o=p(n),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),a=i<s?-1:1,m}}function rA(){var e=za(Xd()(Mr));return e.copy=function(){return Va(e,rA())},ga.apply(e,arguments)}function nA(){var e=ng(Xd()).domain([.1,1,10]);return e.copy=function(){return Va(e,nA()).base(e.base())},ga.apply(e,arguments)}function aA(){var e=ag(Xd());return e.copy=function(){return Va(e,aA()).constant(e.constant())},ga.apply(e,arguments)}function pg(){var e=sg(Xd());return e.copy=function(){return Va(e,pg()).exponent(e.exponent())},ga.apply(e,arguments)}function qI(){return pg.apply(null,arguments).exponent(.5)}const iN=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ko,scaleDiverging:rA,scaleDivergingLog:nA,scaleDivergingPow:pg,scaleDivergingSqrt:qI,scaleDivergingSymlog:aA,scaleIdentity:R2,scaleImplicit:jp,scaleLinear:Wc,scaleLog:L2,scaleOrdinal:X0,scalePoint:_o,scalePow:ig,scaleQuantile:q2,scaleQuantize:U2,scaleRadial:F2,scaleSequential:J2,scaleSequentialLog:Z2,scaleSequentialPow:xg,scaleSequentialQuantile:tA,scaleSequentialSqrt:FI,scaleSequentialSymlog:eA,scaleSqrt:wM,scaleSymlog:B2,scaleThreshold:z2,scaleTime:LI,scaleUtc:BI,tickFormat:I2},Symbol.toStringTag,{value:"Module"}));var qm,oN;function Qd(){if(oN)return qm;oN=1;var e=zi();function t(n,a,s){for(var i=-1,o=n.length;++i<o;){var l=n[i],c=a(l);if(c!=null&&(d===void 0?c===c&&!e(c):s(c,d)))var d=c,u=l}return u}return qm=t,qm}var Um,lN;function sA(){if(lN)return Um;lN=1;function e(t,n){return t>n}return Um=e,Um}var zm,cN;function UI(){if(cN)return zm;cN=1;var e=Qd(),t=sA(),n=Hi();function a(s){return s&&s.length?e(s,n,t):void 0}return zm=a,zm}var zI=UI();const Ma=Pt(zI);var Vm,dN;function iA(){if(dN)return Vm;dN=1;function e(t,n){return t<n}return Vm=e,Vm}var Wm,uN;function VI(){if(uN)return Wm;uN=1;var e=Qd(),t=iA(),n=Hi();function a(s){return s&&s.length?e(s,n,t):void 0}return Wm=a,Wm}var WI=VI();const Jd=Pt(WI);var Hm,hN;function HI(){if(hN)return Hm;hN=1;var e=E0(),t=Vn(),n=m2(),a=Qr();function s(i,o){var l=a(i)?e:n;return l(i,t(o,3))}return Hm=s,Hm}var Gm,fN;function GI(){if(fN)return Gm;fN=1;var e=h2(),t=HI();function n(a,s){return e(t(a,s),1)}return Gm=n,Gm}var KI=GI();const YI=Pt(KI);var Km,mN;function XI(){if(mN)return Km;mN=1;var e=W0();function t(n,a){return e(n,a)}return Km=t,Km}var QI=XI();const Ps=Pt(QI);var Ki=1e9,JI={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},yg,Mt=!0,un="[DecimalError] ",bs=un+"Invalid argument: ",gg=un+"Exponent out of range: ",Yi=Math.floor,ls=Math.pow,ZI=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Gr,lr=1e7,Ct=7,oA=9007199254740991,Yc=Yi(oA/Ct),ye={};ye.absoluteValue=ye.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ye.comparedTo=ye.cmp=function(e){var t,n,a,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,s=e.d.length,t=0,n=a<s?a:s;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return a===s?0:a>s^i.s<0?1:-1};ye.decimalPlaces=ye.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Ct;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};ye.dividedBy=ye.div=function(e){return ua(this,new this.constructor(e))};ye.dividedToIntegerBy=ye.idiv=function(e){var t=this,n=t.constructor;return yt(ua(t,new n(e),0,1),n.precision)};ye.equals=ye.eq=function(e){return!this.cmp(e)};ye.exponent=function(){return Qt(this)};ye.greaterThan=ye.gt=function(e){return this.cmp(e)>0};ye.greaterThanOrEqualTo=ye.gte=function(e){return this.cmp(e)>=0};ye.isInteger=ye.isint=function(){return this.e>this.d.length-2};ye.isNegative=ye.isneg=function(){return this.s<0};ye.isPositive=ye.ispos=function(){return this.s>0};ye.isZero=function(){return this.s===0};ye.lessThan=ye.lt=function(e){return this.cmp(e)<0};ye.lessThanOrEqualTo=ye.lte=function(e){return this.cmp(e)<1};ye.logarithm=ye.log=function(e){var t,n=this,a=n.constructor,s=a.precision,i=s+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(Gr))throw Error(un+"NaN");if(n.s<1)throw Error(un+(n.s?"NaN":"-Infinity"));return n.eq(Gr)?new a(0):(Mt=!1,t=ua(Zo(n,i),Zo(e,i),i),Mt=!0,yt(t,s))};ye.minus=ye.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?dA(t,e):lA(t,(e.s=-e.s,e))};ye.modulo=ye.mod=function(e){var t,n=this,a=n.constructor,s=a.precision;if(e=new a(e),!e.s)throw Error(un+"NaN");return n.s?(Mt=!1,t=ua(n,e,0,1).times(e),Mt=!0,n.minus(t)):yt(new a(n),s)};ye.naturalExponential=ye.exp=function(){return cA(this)};ye.naturalLogarithm=ye.ln=function(){return Zo(this)};ye.negated=ye.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ye.plus=ye.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?lA(t,e):dA(t,(e.s=-e.s,e))};ye.precision=ye.sd=function(e){var t,n,a,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(bs+e);if(t=Qt(s)+1,a=s.d.length-1,n=a*Ct+1,a=s.d[a],a){for(;a%10==0;a/=10)n--;for(a=s.d[0];a>=10;a/=10)n++}return e&&t>n?t:n};ye.squareRoot=ye.sqrt=function(){var e,t,n,a,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(un+"NaN")}for(e=Qt(l),Mt=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Ln(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Yi((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new c(t)):a=new c(s.toString()),n=c.precision,s=o=n+3;;)if(i=a,a=i.plus(ua(l,i,o+2)).times(.5),Ln(i.d).slice(0,o)===(t=Ln(a.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(yt(i,n+1,0),i.times(i).eq(l)){a=i;break}}else if(t!="9999")break;o+=4}return Mt=!0,yt(a,n)};ye.times=ye.mul=function(e){var t,n,a,s,i,o,l,c,d,u=this,h=u.constructor,f=u.d,m=(e=new h(e)).d;if(!u.s||!e.s)return new h(0);for(e.s*=u.s,n=u.e+e.e,c=f.length,d=m.length,c<d&&(i=f,f=m,m=i,o=c,c=d,d=o),i=[],o=c+d,a=o;a--;)i.push(0);for(a=d;--a>=0;){for(t=0,s=c+a;s>a;)l=i[s]+m[a]*f[s-a-1]+t,i[s--]=l%lr|0,t=l/lr|0;i[s]=(i[s]+t)%lr|0}for(;!i[--o];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,Mt?yt(e,h.precision):e};ye.toDecimalPlaces=ye.todp=function(e,t){var n=this,a=n.constructor;return n=new a(n),e===void 0?n:(zn(e,0,Ki),t===void 0?t=a.rounding:zn(t,0,8),yt(n,e+Qt(n)+1,t))};ye.toExponential=function(e,t){var n,a=this,s=a.constructor;return e===void 0?n=Cs(a,!0):(zn(e,0,Ki),t===void 0?t=s.rounding:zn(t,0,8),a=yt(new s(a),e+1,t),n=Cs(a,!0,e+1)),n};ye.toFixed=function(e,t){var n,a,s=this,i=s.constructor;return e===void 0?Cs(s):(zn(e,0,Ki),t===void 0?t=i.rounding:zn(t,0,8),a=yt(new i(s),e+Qt(s)+1,t),n=Cs(a.abs(),!1,e+Qt(a)+1),s.isneg()&&!s.isZero()?"-"+n:n)};ye.toInteger=ye.toint=function(){var e=this,t=e.constructor;return yt(new t(e),Qt(e)+1,t.rounding)};ye.toNumber=function(){return+this};ye.toPower=ye.pow=function(e){var t,n,a,s,i,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(Gr);if(l=new c(l),!l.s){if(e.s<1)throw Error(un+"Infinity");return l}if(l.eq(Gr))return l;if(a=c.precision,e.eq(Gr))return yt(l,a);if(t=e.e,n=e.d.length-1,o=t>=n,i=l.s,o){if((n=u<0?-u:u)<=oA){for(s=new c(Gr),t=Math.ceil(a/Ct+4),Mt=!1;n%2&&(s=s.times(l),pN(s.d,t)),n=Yi(n/2),n!==0;)l=l.times(l),pN(l.d,t);return Mt=!0,e.s<0?new c(Gr).div(s):yt(s,a)}}else if(i<0)throw Error(un+"NaN");return i=i<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,Mt=!1,s=e.times(Zo(l,a+d)),Mt=!0,s=cA(s),s.s=i,s};ye.toPrecision=function(e,t){var n,a,s=this,i=s.constructor;return e===void 0?(n=Qt(s),a=Cs(s,n<=i.toExpNeg||n>=i.toExpPos)):(zn(e,1,Ki),t===void 0?t=i.rounding:zn(t,0,8),s=yt(new i(s),e,t),n=Qt(s),a=Cs(s,e<=n||n<=i.toExpNeg,e)),a};ye.toSignificantDigits=ye.tosd=function(e,t){var n=this,a=n.constructor;return e===void 0?(e=a.precision,t=a.rounding):(zn(e,1,Ki),t===void 0?t=a.rounding:zn(t,0,8)),yt(new a(n),e,t)};ye.toString=ye.valueOf=ye.val=ye.toJSON=ye[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Qt(e),n=e.constructor;return Cs(e,t<=n.toExpNeg||t>=n.toExpPos)};function lA(e,t){var n,a,s,i,o,l,c,d,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),Mt?yt(t,h):t;if(c=e.d,d=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(a=c,i=-i,l=d.length):(a=d,s=o,l=c.length),o=Math.ceil(h/Ct),l=o>l?o+1:l+1,i>l&&(i=l,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,a=d,d=c,c=a),n=0;i;)n=(c[--i]=c[i]+d[i]+n)/lr|0,c[i]%=lr;for(n&&(c.unshift(n),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,Mt?yt(t,h):t}function zn(e,t,n){if(e!==~~e||e<t||e>n)throw Error(bs+e)}function Ln(e){var t,n,a,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)a=e[t]+"",n=Ct-a.length,n&&(i+=Aa(n)),i+=a;o=e[t],a=o+"",n=Ct-a.length,n&&(i+=Aa(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var ua=(function(){function e(a,s){var i,o=0,l=a.length;for(a=a.slice();l--;)i=a[l]*s+o,a[l]=i%lr|0,o=i/lr|0;return o&&a.unshift(o),a}function t(a,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(a[l]!=s[l]){c=a[l]>s[l]?1:-1;break}return c}function n(a,s,i){for(var o=0;i--;)a[i]-=o,o=a[i]<s[i]?1:0,a[i]=o*lr+a[i]-s[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,i,o){var l,c,d,u,h,f,m,g,p,x,b,y,w,S,v,N,A,P,T=a.constructor,M=a.s==s.s?1:-1,E=a.d,C=s.d;if(!a.s)return new T(a);if(!s.s)throw Error(un+"Division by zero");for(c=a.e-s.e,A=C.length,v=E.length,m=new T(M),g=m.d=[],d=0;C[d]==(E[d]||0);)++d;if(C[d]>(E[d]||0)&&--c,i==null?y=i=T.precision:o?y=i+(Qt(a)-Qt(s))+1:y=i,y<0)return new T(0);if(y=y/Ct+2|0,d=0,A==1)for(u=0,C=C[0],y++;(d<v||u)&&y--;d++)w=u*lr+(E[d]||0),g[d]=w/C|0,u=w%C|0;else{for(u=lr/(C[0]+1)|0,u>1&&(C=e(C,u),E=e(E,u),A=C.length,v=E.length),S=A,p=E.slice(0,A),x=p.length;x<A;)p[x++]=0;P=C.slice(),P.unshift(0),N=C[0],C[1]>=lr/2&&++N;do u=0,l=t(C,p,A,x),l<0?(b=p[0],A!=x&&(b=b*lr+(p[1]||0)),u=b/N|0,u>1?(u>=lr&&(u=lr-1),h=e(C,u),f=h.length,x=p.length,l=t(h,p,f,x),l==1&&(u--,n(h,A<f?P:C,f))):(u==0&&(l=u=1),h=C.slice()),f=h.length,f<x&&h.unshift(0),n(p,h,x),l==-1&&(x=p.length,l=t(C,p,A,x),l<1&&(u++,n(p,A<x?P:C,x))),x=p.length):l===0&&(u++,p=[0]),g[d++]=u,l&&p[0]?p[x++]=E[S]||0:(p=[E[S]],x=1);while((S++<v||p[0]!==void 0)&&y--)}return g[0]||g.shift(),m.e=c,yt(m,o?i+Qt(m)+1:i)}})();function cA(e,t){var n,a,s,i,o,l,c=0,d=0,u=e.constructor,h=u.precision;if(Qt(e)>16)throw Error(gg+Qt(e));if(!e.s)return new u(Gr);for(Mt=!1,l=h,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(a=Math.log(ls(2,d))/Math.LN10*2+5|0,l+=a,n=s=i=new u(Gr),u.precision=l;;){if(s=yt(s.times(e),l),n=n.times(++c),o=i.plus(ua(s,n,l)),Ln(o.d).slice(0,l)===Ln(i.d).slice(0,l)){for(;d--;)i=yt(i.times(i),l);return u.precision=h,t==null?(Mt=!0,yt(i,h)):i}i=o}}function Qt(e){for(var t=e.e*Ct,n=e.d[0];n>=10;n/=10)t++;return t}function Ym(e,t,n){if(t>e.LN10.sd())throw Mt=!0,n&&(e.precision=n),Error(un+"LN10 precision limit exceeded");return yt(new e(e.LN10),t)}function Aa(e){for(var t="";e--;)t+="0";return t}function Zo(e,t){var n,a,s,i,o,l,c,d,u,h=1,f=10,m=e,g=m.d,p=m.constructor,x=p.precision;if(m.s<1)throw Error(un+(m.s?"NaN":"-Infinity"));if(m.eq(Gr))return new p(0);if(t==null?(Mt=!1,d=x):d=t,m.eq(10))return t==null&&(Mt=!0),Ym(p,d);if(d+=f,p.precision=d,n=Ln(g),a=n.charAt(0),i=Qt(m),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)m=m.times(e),n=Ln(m.d),a=n.charAt(0),h++;i=Qt(m),a>1?(m=new p("0."+n),i++):m=new p(a+"."+n.slice(1))}else return c=Ym(p,d+2,x).times(i+""),m=Zo(new p(a+"."+n.slice(1)),d-f).plus(c),p.precision=x,t==null?(Mt=!0,yt(m,x)):m;for(l=o=m=ua(m.minus(Gr),m.plus(Gr),d),u=yt(m.times(m),d),s=3;;){if(o=yt(o.times(u),d),c=l.plus(ua(o,new p(s),d)),Ln(c.d).slice(0,d)===Ln(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(Ym(p,d+2,x).times(i+""))),l=ua(l,new p(h),d),p.precision=x,t==null?(Mt=!0,yt(l,x)):l;l=c,s+=2}}function xN(e,t){var n,a,s;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(n<0&&(n=a),n+=+t.slice(a+1),t=t.substring(0,a)):n<0&&(n=t.length),a=0;t.charCodeAt(a)===48;)++a;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(a,s),t){if(s-=a,n=n-a-1,e.e=Yi(n/Ct),e.d=[],a=(n+1)%Ct,n<0&&(a+=Ct),a<s){for(a&&e.d.push(+t.slice(0,a)),s-=Ct;a<s;)e.d.push(+t.slice(a,a+=Ct));t=t.slice(a),a=Ct-t.length}else a-=s;for(;a--;)t+="0";if(e.d.push(+t),Mt&&(e.e>Yc||e.e<-Yc))throw Error(gg+n)}else e.s=0,e.e=0,e.d=[0];return e}function yt(e,t,n){var a,s,i,o,l,c,d,u,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(a=t-o,a<0)a+=Ct,s=t,d=h[u=0];else{if(u=Math.ceil((a+1)/Ct),i=h.length,u>=i)return e;for(d=i=h[u],o=1;i>=10;i/=10)o++;a%=Ct,s=a-Ct+o}if(n!==void 0&&(i=ls(10,o-s-1),l=d/i%10|0,c=t<0||h[u+1]!==void 0||d%i,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(a>0?s>0?d/ls(10,o-s):0:h[u-1])%10&1||n==(e.s<0?8:7))),t<1||!h[0])return c?(i=Qt(e),h.length=1,t=t-i-1,h[0]=ls(10,(Ct-t%Ct)%Ct),e.e=Yi(-t/Ct)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(a==0?(h.length=u,i=1,u--):(h.length=u+1,i=ls(10,Ct-a),h[u]=s>0?(d/ls(10,o-s)%ls(10,s)|0)*i:0),c)for(;;)if(u==0){(h[0]+=i)==lr&&(h[0]=1,++e.e);break}else{if(h[u]+=i,h[u]!=lr)break;h[u--]=0,i=1}for(a=h.length;h[--a]===0;)h.pop();if(Mt&&(e.e>Yc||e.e<-Yc))throw Error(gg+Qt(e));return e}function dA(e,t){var n,a,s,i,o,l,c,d,u,h,f=e.constructor,m=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),Mt?yt(t,m):t;if(c=e.d,h=t.d,a=t.e,d=e.e,c=c.slice(),o=d-a,o){for(u=o<0,u?(n=c,o=-o,l=h.length):(n=h,a=d,l=c.length),s=Math.max(Math.ceil(m/Ct),l)+2,o>s&&(o=s,n.length=1),n.reverse(),s=o;s--;)n.push(0);n.reverse()}else{for(s=c.length,l=h.length,u=s<l,u&&(l=s),s=0;s<l;s++)if(c[s]!=h[s]){u=c[s]<h[s];break}o=0}for(u&&(n=c,c=h,h=n,t.s=-t.s),l=c.length,s=h.length-l;s>0;--s)c[l++]=0;for(s=h.length;s>o;){if(c[--s]<h[s]){for(i=s;i&&c[--i]===0;)c[i]=lr-1;--c[i],c[s]+=lr}c[s]-=h[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(t.d=c,t.e=a,Mt?yt(t,m):t):new f(0)}function Cs(e,t,n){var a,s=Qt(e),i=Ln(e.d),o=i.length;return t?(n&&(a=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+Aa(a):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Aa(-s-1)+i,n&&(a=n-o)>0&&(i+=Aa(a))):s>=o?(i+=Aa(s+1-o),n&&(a=n-s-1)>0&&(i=i+"."+Aa(a))):((a=s+1)<o&&(i=i.slice(0,a)+"."+i.slice(a)),n&&(a=n-o)>0&&(s+1===o&&(i+="."),i+=Aa(a))),e.s<0?"-"+i:i}function pN(e,t){if(e.length>t)return e.length=t,!0}function uA(e){var t,n,a;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(bs+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return xN(o,i.toString())}else if(typeof i!="string")throw Error(bs+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,ZI.test(i))xN(o,i);else throw Error(bs+i)}if(s.prototype=ye,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=uA,s.config=s.set=eR,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(n=a[t++])||(e[n]=this[n]);return s.config(e),s}function eR(e){if(!e||typeof e!="object")throw Error(un+"Object expected");var t,n,a,s=["precision",1,Ki,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((a=e[n=s[t]])!==void 0)if(Yi(a)===a&&a>=s[t+1]&&a<=s[t+2])this[n]=a;else throw Error(bs+n+": "+a);if((a=e[n="LN10"])!==void 0)if(a==Math.LN10)this[n]=new this(a);else throw Error(bs+n+": "+a);return this}var yg=uA(JI);Gr=new yg(1);const ft=yg;function tR(e){return sR(e)||aR(e)||nR(e)||rR()}function rR(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nR(e,t){if(e){if(typeof e=="string")return Ap(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ap(e,t)}}function aR(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function sR(e){if(Array.isArray(e))return Ap(e)}function Ap(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var iR=function(t){return t},hA={},fA=function(t){return t===hA},gN=function(t){return function n(){return arguments.length===0||arguments.length===1&&fA(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},oR=function e(t,n){return t===1?n:gN(function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==hA}).length;return o>=t?n.apply(void 0,s):e(t-o,gN(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var u=s.map(function(h){return fA(h)?c.shift():h});return n.apply(void 0,tR(u).concat(c))}))})},Zd=function(t){return oR(t.length,t)},Pp=function(t,n){for(var a=[],s=t;s<n;++s)a[s-t]=s;return a},lR=Zd(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),cR=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(!n.length)return iR;var s=n.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},Cp=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},mA=function(t){var n=null,a=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return n&&i.every(function(l,c){return l===n[c]})||(n=i,a=t.apply(void 0,i)),a}};function dR(e){var t;return e===0?t=1:t=Math.floor(new ft(e).abs().log(10).toNumber())+1,t}function uR(e,t,n){for(var a=new ft(e),s=0,i=[];a.lt(t)&&s<1e5;)i.push(a.toNumber()),a=a.add(n),s++;return i}var hR=Zd(function(e,t,n){var a=+e,s=+t;return a+n*(s-a)}),fR=Zd(function(e,t,n){var a=t-+e;return a=a||1/0,(n-e)/a}),mR=Zd(function(e,t,n){var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(n-e)/a))});const eu={rangeStep:uR,getDigitCount:dR,interpolateNumber:hR,uninterpolateNumber:fR,uninterpolateTruncation:mR};function Op(e){return gR(e)||pR(e)||xA(e)||xR()}function xR(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pR(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function gR(e){if(Array.isArray(e))return Tp(e)}function el(e,t){return vR(e)||bR(e,t)||xA(e,t)||yR()}function yR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xA(e,t){if(e){if(typeof e=="string")return Tp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tp(e,t)}}function Tp(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function bR(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],a=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));a=!0);}catch(c){s=!0,i=c}finally{try{!a&&o.return!=null&&o.return()}finally{if(s)throw i}}return n}}function vR(e){if(Array.isArray(e))return e}function pA(e){var t=el(e,2),n=t[0],a=t[1],s=n,i=a;return n>a&&(s=a,i=n),[s,i]}function gA(e,t,n){if(e.lte(0))return new ft(0);var a=eu.getDigitCount(e.toNumber()),s=new ft(10).pow(a),i=e.div(s),o=a!==1?.05:.1,l=new ft(Math.ceil(i.div(o).toNumber())).add(n).mul(o),c=l.mul(s);return t?c:new ft(Math.ceil(c))}function wR(e,t,n){var a=1,s=new ft(e);if(!s.isint()&&n){var i=Math.abs(e);i<1?(a=new ft(10).pow(eu.getDigitCount(e)-1),s=new ft(Math.floor(s.div(a).toNumber())).mul(a)):i>1&&(s=new ft(Math.floor(e)))}else e===0?s=new ft(Math.floor((t-1)/2)):n||(s=new ft(Math.floor(e)));var o=Math.floor((t-1)/2),l=cR(lR(function(c){return s.add(new ft(c-o).mul(a)).toNumber()}),Pp);return l(0,t)}function yA(e,t,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new ft(0),tickMin:new ft(0),tickMax:new ft(0)};var i=gA(new ft(t).sub(e).div(n-1),a,s),o;e<=0&&t>=0?o=new ft(0):(o=new ft(e).add(t).div(2),o=o.sub(new ft(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new ft(t).sub(o).div(i).toNumber()),d=l+c+1;return d>n?yA(e,t,n,a,s+1):(d<n&&(c=t>0?c+(n-d):c,l=t>0?l:l+(n-d)),{step:i,tickMin:o.sub(new ft(l).mul(i)),tickMax:o.add(new ft(c).mul(i))})}function jR(e){var t=el(e,2),n=t[0],a=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=pA([n,a]),c=el(l,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var h=u===1/0?[d].concat(Op(Pp(0,s-1).map(function(){return 1/0}))):[].concat(Op(Pp(0,s-1).map(function(){return-1/0})),[u]);return n>a?Cp(h):h}if(d===u)return wR(d,s,i);var f=yA(d,u,o,i),m=f.step,g=f.tickMin,p=f.tickMax,x=eu.rangeStep(g,p.add(new ft(.1).mul(m)),m);return n>a?Cp(x):x}function NR(e,t){var n=el(e,2),a=n[0],s=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=pA([a,s]),l=el(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[a,s];if(c===d)return[c];var u=Math.max(t,2),h=gA(new ft(d).sub(c).div(u-1),i,0),f=[].concat(Op(eu.rangeStep(new ft(c),new ft(d).sub(new ft(.99).mul(h)),h)),[d]);return a>s?Cp(f):f}var SR=mA(jR),kR=mA(NR),AR="Invariant failed";function Os(e,t){throw new Error(AR)}var PR=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Ni(e){"@babel/helpers - typeof";return Ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ni(e)}function Xc(){return Xc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xc.apply(this,arguments)}function CR(e,t){return ER(e)||_R(e,t)||TR(e,t)||OR()}function OR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TR(e,t){if(e){if(typeof e=="string")return yN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yN(e,t)}}function yN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _R(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function ER(e){if(Array.isArray(e))return e}function DR(e,t){if(e==null)return{};var n=MR(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function MR(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function IR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RR(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,wA(a.key),a)}}function $R(e,t,n){return t&&RR(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function LR(e,t,n){return t=Qc(t),BR(e,bA()?Reflect.construct(t,n||[],Qc(e).constructor):t.apply(e,n))}function BR(e,t){if(t&&(Ni(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FR(e)}function FR(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bA=function(){return!!e})()}function Qc(e){return Qc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qc(e)}function qR(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_p(e,t)}function _p(e,t){return _p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},_p(e,t)}function vA(e,t,n){return t=wA(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wA(e){var t=UR(e,"string");return Ni(t)=="symbol"?t:t+""}function UR(e,t){if(Ni(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Ni(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Tl=(function(e){function t(){return IR(this,t),LR(this,t,arguments)}return qR(t,e),$R(t,[{key:"render",value:function(){var a=this.props,s=a.offset,i=a.layout,o=a.width,l=a.dataKey,c=a.data,d=a.dataPointFormatter,u=a.xAxis,h=a.yAxis,f=DR(a,PR),m=ke(f,!1);this.props.direction==="x"&&u.type!=="number"&&Os();var g=c.map(function(p){var x=d(p,l),b=x.x,y=x.y,w=x.value,S=x.errorVal;if(!S)return null;var v=[],N,A;if(Array.isArray(S)){var P=CR(S,2);N=P[0],A=P[1]}else N=A=S;if(i==="vertical"){var T=u.scale,M=y+s,E=M+o,C=M-o,O=T(w-N),_=T(w+A);v.push({x1:_,y1:E,x2:_,y2:C}),v.push({x1:O,y1:M,x2:_,y2:M}),v.push({x1:O,y1:E,x2:O,y2:C})}else if(i==="horizontal"){var D=h.scale,L=b+s,V=L-o,X=L+o,W=D(w-N),ce=D(w+A);v.push({x1:V,y1:ce,x2:X,y2:ce}),v.push({x1:L,y1:W,x2:L,y2:ce}),v.push({x1:V,y1:W,x2:X,y2:W})}return R.createElement(Ye,Xc({className:"recharts-errorBar",key:"bar-".concat(v.map(function(de){return"".concat(de.x1,"-").concat(de.x2,"-").concat(de.y1,"-").concat(de.y2)}))},m),v.map(function(de){return R.createElement("line",Xc({},de,{key:"line-".concat(de.x1,"-").concat(de.x2,"-").concat(de.y1,"-").concat(de.y2)}))}))});return R.createElement(Ye,{className:"recharts-errorBars"},g)}}])})(R.Component);vA(Tl,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});vA(Tl,"displayName","ErrorBar");function tl(e){"@babel/helpers - typeof";return tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tl(e)}function bN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function ts(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bN(Object(n),!0).forEach(function(a){zR(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bN(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function zR(e,t,n){return t=VR(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VR(e){var t=WR(e,"string");return tl(t)=="symbol"?t:t+""}function WR(e,t){if(tl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(tl(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jA=function(t){var n=t.children,a=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=Hr(n,La);if(!o)return null;var l=La.defaultProps,c=l!==void 0?ts(ts({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:i==="children"?d=(a||[]).reduce(function(u,h){var f=h.item,m=h.props,g=m.sectors||m.data||[];return u.concat(g.map(function(p){return{type:o.props.iconType||f.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):d=(a||[]).map(function(u){var h=u.item,f=h.type.defaultProps,m=f!==void 0?ts(ts({},f),h.props):{},g=m.dataKey,p=m.name,x=m.legendType,b=m.hide;return{inactive:b,dataKey:g,type:c.iconType||x||"square",color:bg(h),value:p||g,payload:m}}),ts(ts(ts({},c),La.getWithHeight(o,s)),{},{payload:d,item:o})};function rl(e){"@babel/helpers - typeof";return rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rl(e)}function vN(e){return YR(e)||KR(e)||GR(e)||HR()}function HR(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GR(e,t){if(e){if(typeof e=="string")return Ep(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ep(e,t)}}function KR(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function YR(e){if(Array.isArray(e))return Ep(e)}function Ep(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function wN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wN(Object(n),!0).forEach(function(a){mi(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wN(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function mi(e,t,n){return t=XR(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XR(e){var t=QR(e,"string");return rl(t)=="symbol"?t:t+""}function QR(e,t){if(rl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(rl(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gt(e,t,n){return Ue(e)||Ue(t)?n:nr(t)?Yr(e,t,n):De(t)?t(e):n}function Eo(e,t,n,a){var s=YI(e,function(l){return Gt(l,t)});if(n==="number"){var i=s.filter(function(l){return he(l)||parseFloat(l)});return i.length?[Jd(i),Ma(i)]:[1/0,-1/0]}var o=a?s.filter(function(l){return!Ue(l)}):s;return o.map(function(l){return nr(l)||l instanceof Date?l:""})}var JR=function(t){var n,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=a==null?void 0:a.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<l;d++){var u=d>0?s[d-1].coordinate:s[l-1].coordinate,h=s[d].coordinate,f=d>=l-1?s[0].coordinate:s[d+1].coordinate,m=void 0;if(Er(h-u)!==Er(f-h)){var g=[];if(Er(f-h)===Er(c[1]-c[0])){m=f;var p=h+c[1]-c[0];g[0]=Math.min(p,(p+u)/2),g[1]=Math.max(p,(p+u)/2)}else{m=u;var x=f+c[1]-c[0];g[0]=Math.min(h,(x+h)/2),g[1]=Math.max(h,(x+h)/2)}var b=[Math.min(h,(m+h)/2),Math.max(h,(m+h)/2)];if(t>b[0]&&t<=b[1]||t>=g[0]&&t<=g[1]){o=s[d].index;break}}else{var y=Math.min(u,f),w=Math.max(u,f);if(t>(y+h)/2&&t<=(w+h)/2){o=s[d].index;break}}}else for(var S=0;S<l;S++)if(S===0&&t<=(a[S].coordinate+a[S+1].coordinate)/2||S>0&&S<l-1&&t>(a[S].coordinate+a[S-1].coordinate)/2&&t<=(a[S].coordinate+a[S+1].coordinate)/2||S===l-1&&t>(a[S].coordinate+a[S-1].coordinate)/2){o=a[S].index;break}return o},bg=function(t){var n,a=t,s=a.type.displayName,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Ut(Ut({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(s){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},ZR=function(t){var n=t.barSize,a=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),c=0,d=l.length;c<d;c++)for(var u=i[l[c]].stackGroups,h=Object.keys(u),f=0,m=h.length;f<m;f++){var g=u[h[f]],p=g.items,x=g.cateAxisId,b=p.filter(function(A){return da(A.type).indexOf("Bar")>=0});if(b&&b.length){var y=b[0].type.defaultProps,w=y!==void 0?Ut(Ut({},y),b[0].props):b[0].props,S=w.barSize,v=w[x];o[v]||(o[v]=[]);var N=Ue(S)?n:S;o[v].push({item:b[0],stackList:b.slice(1),barSize:Ue(N)?void 0:Dr(N,a,0)})}}return o},e$=function(t){var n=t.barGap,a=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var d=Dr(n,s,0,!0),u,h=[];if(o[0].barSize===+o[0].barSize){var f=!1,m=s/c,g=o.reduce(function(S,v){return S+v.barSize||0},0);g+=(c-1)*d,g>=s&&(g-=(c-1)*d,d=0),g>=s&&m>0&&(f=!0,m*=.9,g=c*m);var p=(s-g)/2>>0,x={offset:p-d,size:0};u=o.reduce(function(S,v){var N={item:v.item,position:{offset:x.offset+x.size+d,size:f?m:v.barSize}},A=[].concat(vN(S),[N]);return x=A[A.length-1].position,v.stackList&&v.stackList.length&&v.stackList.forEach(function(P){A.push({item:P,position:x})}),A},h)}else{var b=Dr(a,s,0,!0);s-2*b-(c-1)*d<=0&&(d=0);var y=(s-2*b-(c-1)*d)/c;y>1&&(y>>=0);var w=l===+l?Math.min(y,l):y;u=o.reduce(function(S,v,N){var A=[].concat(vN(S),[{item:v.item,position:{offset:b+(y+d)*N+(y-w)/2,size:w}}]);return v.stackList&&v.stackList.length&&v.stackList.forEach(function(P){A.push({item:P,position:A[A.length-1].position})}),A},h)}return u},t$=function(t,n,a,s){var i=a.children,o=a.width,l=a.margin,c=o-(l.left||0)-(l.right||0),d=jA({children:i,legendWidth:c});if(d){var u=s||{},h=u.width,f=u.height,m=d.align,g=d.verticalAlign,p=d.layout;if((p==="vertical"||p==="horizontal"&&g==="middle")&&m!=="center"&&he(t[m]))return Ut(Ut({},t),{},mi({},m,t[m]+(h||0)));if((p==="horizontal"||p==="vertical"&&m==="center")&&g!=="middle"&&he(t[g]))return Ut(Ut({},t),{},mi({},g,t[g]+(f||0)))}return t},r$=function(t,n,a){return Ue(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||a==="x"?n==="xAxis":a==="y"?n==="yAxis":!0},NA=function(t,n,a,s,i){var o=n.props.children,l=Xr(o,Tl).filter(function(d){return r$(s,i,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,u){var h=Gt(u,a);if(Ue(h))return d;var f=Array.isArray(h)?[Jd(h),Ma(h)]:[h,h],m=c.reduce(function(g,p){var x=Gt(u,p,0),b=f[0]-Math.abs(Array.isArray(x)?x[0]:x),y=f[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(b,g[0]),Math.max(y,g[1])]},[1/0,-1/0]);return[Math.min(m[0],d[0]),Math.max(m[1],d[1])]},[1/0,-1/0])}return null},n$=function(t,n,a,s,i){var o=n.map(function(l){return NA(t,l,a,i,s)}).filter(function(l){return!Ue(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},SA=function(t,n,a,s,i){var o=n.map(function(c){var d=c.props.dataKey;return a==="number"&&d&&NA(t,c,d,s)||Eo(t,d,a,i)});if(a==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var u=0,h=d.length;u<h;u++)l[d[u]]||(l[d[u]]=!0,c.push(d[u]));return c},[])},kA=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},AA=function(t,n,a,s){if(s)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===n&&(i=!0),c.coordinate===a&&(o=!0),c.coordinate});return i||l.push(n),o||l.push(a),l},ca=function(t,n,a){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,d=(n||a)&&o==="category"&&s.bandwidth?s.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Er(l[0]-l[1])*2*d:d,n&&(t.ticks||t.niceTicks)){var u=(t.ticks||t.niceTicks).map(function(h){var f=i?i.indexOf(h):h;return{coordinate:s(f)+d,value:h,offset:d}});return u.filter(function(h){return!Wi(h.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(h,f){return{coordinate:s(h)+d,value:h,index:f,offset:d}}):s.ticks&&!a?s.ticks(t.tickCount).map(function(h){return{coordinate:s(h)+d,value:h,offset:d}}):s.domain().map(function(h,f){return{coordinate:s(h)+d,value:i?i[h]:h,index:f,offset:d}})},Xm=new WeakMap,dc=function(t,n){if(typeof n!="function")return t;Xm.has(t)||Xm.set(t,new WeakMap);var a=Xm.get(t);if(a.has(n))return a.get(n);var s=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return a.set(n,s),s},PA=function(t,n,a){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Ko(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Wc(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!a)?{scale:_o(),realScaleType:"point"}:i==="category"?{scale:Ko(),realScaleType:"band"}:{scale:Wc(),realScaleType:"linear"};if(Ns(s)){var c="scale".concat(Ld(s));return{scale:(iN[c]||_o)(),realScaleType:iN[c]?c:"point"}}return De(s)?{scale:s}:{scale:_o(),realScaleType:"point"}},jN=1e-4,CA=function(t){var n=t.domain();if(!(!n||n.length<=2)){var a=n.length,s=t.range(),i=Math.min(s[0],s[1])-jN,o=Math.max(s[0],s[1])+jN,l=t(n[0]),c=t(n[a-1]);(l<i||l>o||c<i||c>o)&&t.domain([n[0],n[a-1]])}},a$=function(t,n){if(!t)return null;for(var a=0,s=t.length;a<s;a++)if(t[a].item===n)return t[a].position;return null},s$=function(t,n){if(!n||n.length!==2||!he(n[0])||!he(n[1]))return t;var a=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]),i=[t[0],t[1]];return(!he(t[0])||t[0]<a)&&(i[0]=a),(!he(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<a&&(i[1]=a),i},i$=function(t){var n=t.length;if(!(n<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,o=0,l=0;l<n;++l){var c=Wi(t[l][a][1])?t[l][a][0]:t[l][a][1];c>=0?(t[l][a][0]=i,t[l][a][1]=i+c,i=t[l][a][1]):(t[l][a][0]=o,t[l][a][1]=o+c,o=t[l][a][1])}},o$=function(t){var n=t.length;if(!(n<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,o=0;o<n;++o){var l=Wi(t[o][a][1])?t[o][a][0]:t[o][a][1];l>=0?(t[o][a][0]=i,t[o][a][1]=i+l,i=t[o][a][1]):(t[o][a][0]=0,t[o][a][1]=0)}},l$={sign:i$,expand:YT,none:xi,silhouette:XT,wiggle:QT,positive:o$},c$=function(t,n,a){var s=n.map(function(l){return l.props.dataKey}),i=l$[a],o=KT().keys(s).value(function(l,c){return+Gt(l,c,0)}).order(lp).offset(i);return o(t)},d$=function(t,n,a,s,i,o){if(!t)return null;var l=o?n.reverse():n,c={},d=l.reduce(function(h,f){var m,g=(m=f.type)!==null&&m!==void 0&&m.defaultProps?Ut(Ut({},f.type.defaultProps),f.props):f.props,p=g.stackId,x=g.hide;if(x)return h;var b=g[a],y=h[b]||{hasStack:!1,stackGroups:{}};if(nr(p)){var w=y.stackGroups[p]||{numericAxisId:a,cateAxisId:s,items:[]};w.items.push(f),y.hasStack=!0,y.stackGroups[p]=w}else y.stackGroups[Ms("_stackId_")]={numericAxisId:a,cateAxisId:s,items:[f]};return Ut(Ut({},h),{},mi({},b,y))},c),u={};return Object.keys(d).reduce(function(h,f){var m=d[f];if(m.hasStack){var g={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(p,x){var b=m.stackGroups[x];return Ut(Ut({},p),{},mi({},x,{numericAxisId:a,cateAxisId:s,items:b.items,stackedData:c$(t,b.items,i)}))},g)}return Ut(Ut({},h),{},mi({},f,m))},u)},OA=function(t,n){var a=n.realScaleType,s=n.type,i=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=a||n.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=t.domain();if(!d.length)return null;var u=SR(d,i,l);return t.domain([Jd(u),Ma(u)]),{niceTicks:u}}if(i&&s==="number"){var h=t.domain(),f=kR(h,i,l);return{niceTicks:f}}return null};function Jc(e){var t=e.axis,n=e.ticks,a=e.bandSize,s=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Ue(s[t.dataKey])){var l=Pc(n,"value",s[t.dataKey]);if(l)return l.coordinate+a/2}return n[i]?n[i].coordinate+a/2:null}var c=Gt(s,Ue(o)?t.dataKey:o);return Ue(c)?null:t.scale(c)}var NN=function(t){var n=t.axis,a=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return a[l]?a[l].coordinate+s:null;var c=Gt(o,n.dataKey,n.domain[l]);return Ue(c)?null:n.scale(c)-i/2+s},u$=function(t){var n=t.numericAxis,a=n.scale.domain();if(n.type==="number"){var s=Math.min(a[0],a[1]),i=Math.max(a[0],a[1]);return s<=0&&i>=0?0:i<0?i:s}return a[0]},h$=function(t,n){var a,s=(a=t.type)!==null&&a!==void 0&&a.defaultProps?Ut(Ut({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(nr(i)){var o=n[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},f$=function(t){return t.reduce(function(n,a){return[Jd(a.concat([n[0]]).filter(he)),Ma(a.concat([n[1]]).filter(he))]},[1/0,-1/0])},TA=function(t,n,a){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,c=l.reduce(function(d,u){var h=f$(u.slice(n,a+1));return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},SN=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,kN=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Dp=function(t,n,a){if(De(t))return t(n,a);if(!Array.isArray(t))return n;var s=[];if(he(t[0]))s[0]=a?t[0]:Math.min(t[0],n[0]);else if(SN.test(t[0])){var i=+SN.exec(t[0])[1];s[0]=n[0]-i}else De(t[0])?s[0]=t[0](n[0]):s[0]=n[0];if(he(t[1]))s[1]=a?t[1]:Math.max(t[1],n[1]);else if(kN.test(t[1])){var o=+kN.exec(t[1])[1];s[1]=n[1]+o}else De(t[1])?s[1]=t[1](n[1]):s[1]=n[1];return s},Zc=function(t,n,a){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!a||s>0)return s}if(t&&n&&n.length>=2){for(var i=G0(n,function(h){return h.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var d=i[l],u=i[l-1];o=Math.min((d.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return a?void 0:0},AN=function(t,n,a){return!t||!t.length||Ps(t,Yr(a,"type.defaultProps.domain"))?n:t},_A=function(t,n){var a=t.type.defaultProps?Ut(Ut({},t.type.defaultProps),t.props):t.props,s=a.dataKey,i=a.name,o=a.unit,l=a.formatter,c=a.tooltipType,d=a.chartType,u=a.hide;return Ut(Ut({},ke(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:bg(t),value:Gt(n,s),type:c,payload:n,chartType:d,hide:u})};function nl(e){"@babel/helpers - typeof";return nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nl(e)}function PN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function ra(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PN(Object(n),!0).forEach(function(a){EA(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PN(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function EA(e,t,n){return t=m$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m$(e){var t=x$(e,"string");return nl(t)=="symbol"?t:t+""}function x$(e,t){if(nl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(nl(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p$(e,t){return v$(e)||b$(e,t)||y$(e,t)||g$()}function g$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y$(e,t){if(e){if(typeof e=="string")return CN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CN(e,t)}}function CN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function b$(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function v$(e){if(Array.isArray(e))return e}var ed=Math.PI/180,w$=function(t){return t*180/Math.PI},At=function(t,n,a,s){return{x:t+Math.cos(-ed*s)*a,y:n+Math.sin(-ed*s)*a}},DA=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(n-(a.top||0)-(a.bottom||0)))/2},j$=function(t,n,a,s,i){var o=t.width,l=t.height,c=t.startAngle,d=t.endAngle,u=Dr(t.cx,o,o/2),h=Dr(t.cy,l,l/2),f=DA(o,l,a),m=Dr(t.innerRadius,f,0),g=Dr(t.outerRadius,f,f*.8),p=Object.keys(n);return p.reduce(function(x,b){var y=n[b],w=y.domain,S=y.reversed,v;if(Ue(y.range))s==="angleAxis"?v=[c,d]:s==="radiusAxis"&&(v=[m,g]),S&&(v=[v[1],v[0]]);else{v=y.range;var N=v,A=p$(N,2);c=A[0],d=A[1]}var P=PA(y,i),T=P.realScaleType,M=P.scale;M.domain(w).range(v),CA(M);var E=OA(M,ra(ra({},y),{},{realScaleType:T})),C=ra(ra(ra({},y),E),{},{range:v,radius:g,realScaleType:T,scale:M,cx:u,cy:h,innerRadius:m,outerRadius:g,startAngle:c,endAngle:d});return ra(ra({},x),{},EA({},b,C))},{})},N$=function(t,n){var a=t.x,s=t.y,i=n.x,o=n.y;return Math.sqrt(Math.pow(a-i,2)+Math.pow(s-o,2))},S$=function(t,n){var a=t.x,s=t.y,i=n.cx,o=n.cy,l=N$({x:a,y:s},{x:i,y:o});if(l<=0)return{radius:l};var c=(a-i)/l,d=Math.acos(c);return s>o&&(d=2*Math.PI-d),{radius:l,angle:w$(d),angleInRadian:d}},k$=function(t){var n=t.startAngle,a=t.endAngle,s=Math.floor(n/360),i=Math.floor(a/360),o=Math.min(s,i);return{startAngle:n-o*360,endAngle:a-o*360}},A$=function(t,n){var a=n.startAngle,s=n.endAngle,i=Math.floor(a/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},ON=function(t,n){var a=t.x,s=t.y,i=S$({x:a,y:s},n),o=i.radius,l=i.angle,c=n.innerRadius,d=n.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var u=k$(n),h=u.startAngle,f=u.endAngle,m=l,g;if(h<=f){for(;m>f;)m-=360;for(;m<h;)m+=360;g=m>=h&&m<=f}else{for(;m>h;)m-=360;for(;m<f;)m+=360;g=m>=f&&m<=h}return g?ra(ra({},n),{},{radius:o,angle:A$(m,n)}):null},MA=function(t){return!k.isValidElement(t)&&!De(t)&&typeof t!="boolean"?t.className:""};function al(e){"@babel/helpers - typeof";return al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},al(e)}var P$=["offset"];function C$(e){return E$(e)||_$(e)||T$(e)||O$()}function O$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T$(e,t){if(e){if(typeof e=="string")return Mp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mp(e,t)}}function _$(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function E$(e){if(Array.isArray(e))return Mp(e)}function Mp(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function D$(e,t){if(e==null)return{};var n=M$(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function M$(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function TN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function tr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TN(Object(n),!0).forEach(function(a){I$(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TN(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function I$(e,t,n){return t=R$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R$(e){var t=$$(e,"string");return al(t)=="symbol"?t:t+""}function $$(e,t){if(al(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(al(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sl(){return sl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},sl.apply(this,arguments)}var L$=function(t){var n=t.value,a=t.formatter,s=Ue(t.children)?n:t.children;return De(a)?a(s):s},B$=function(t,n){var a=Er(n-t),s=Math.min(Math.abs(n-t),360);return a*s},F$=function(t,n,a){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,d=c.cx,u=c.cy,h=c.innerRadius,f=c.outerRadius,m=c.startAngle,g=c.endAngle,p=c.clockWise,x=(h+f)/2,b=B$(m,g),y=b>=0?1:-1,w,S;s==="insideStart"?(w=m+y*o,S=p):s==="insideEnd"?(w=g-y*o,S=!p):s==="end"&&(w=g+y*o,S=p),S=b<=0?S:!S;var v=At(d,u,x,w),N=At(d,u,x,w+(S?1:-1)*359),A="M".concat(v.x,",").concat(v.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(S?0:1,`,
    `).concat(N.x,",").concat(N.y),P=Ue(t.id)?Ms("recharts-radial-line-"):t.id;return R.createElement("text",sl({},a,{dominantBaseline:"central",className:Ve("recharts-radial-bar-label",l)}),R.createElement("defs",null,R.createElement("path",{id:P,d:A})),R.createElement("textPath",{xlinkHref:"#".concat(P)},n))},q$=function(t){var n=t.viewBox,a=t.offset,s=t.position,i=n,o=i.cx,l=i.cy,c=i.innerRadius,d=i.outerRadius,u=i.startAngle,h=i.endAngle,f=(u+h)/2;if(s==="outside"){var m=At(o,l,d+a,f),g=m.x,p=m.y;return{x:g,y:p,textAnchor:g>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var x=(c+d)/2,b=At(o,l,x,f),y=b.x,w=b.y;return{x:y,y:w,textAnchor:"middle",verticalAnchor:"middle"}},U$=function(t){var n=t.viewBox,a=t.parentViewBox,s=t.offset,i=t.position,o=n,l=o.x,c=o.y,d=o.width,u=o.height,h=u>=0?1:-1,f=h*s,m=h>0?"end":"start",g=h>0?"start":"end",p=d>=0?1:-1,x=p*s,b=p>0?"end":"start",y=p>0?"start":"end";if(i==="top"){var w={x:l+d/2,y:c-h*s,textAnchor:"middle",verticalAnchor:m};return tr(tr({},w),a?{height:Math.max(c-a.y,0),width:d}:{})}if(i==="bottom"){var S={x:l+d/2,y:c+u+f,textAnchor:"middle",verticalAnchor:g};return tr(tr({},S),a?{height:Math.max(a.y+a.height-(c+u),0),width:d}:{})}if(i==="left"){var v={x:l-x,y:c+u/2,textAnchor:b,verticalAnchor:"middle"};return tr(tr({},v),a?{width:Math.max(v.x-a.x,0),height:u}:{})}if(i==="right"){var N={x:l+d+x,y:c+u/2,textAnchor:y,verticalAnchor:"middle"};return tr(tr({},N),a?{width:Math.max(a.x+a.width-N.x,0),height:u}:{})}var A=a?{width:d,height:u}:{};return i==="insideLeft"?tr({x:l+x,y:c+u/2,textAnchor:y,verticalAnchor:"middle"},A):i==="insideRight"?tr({x:l+d-x,y:c+u/2,textAnchor:b,verticalAnchor:"middle"},A):i==="insideTop"?tr({x:l+d/2,y:c+f,textAnchor:"middle",verticalAnchor:g},A):i==="insideBottom"?tr({x:l+d/2,y:c+u-f,textAnchor:"middle",verticalAnchor:m},A):i==="insideTopLeft"?tr({x:l+x,y:c+f,textAnchor:y,verticalAnchor:g},A):i==="insideTopRight"?tr({x:l+d-x,y:c+f,textAnchor:b,verticalAnchor:g},A):i==="insideBottomLeft"?tr({x:l+x,y:c+u-f,textAnchor:y,verticalAnchor:m},A):i==="insideBottomRight"?tr({x:l+d-x,y:c+u-f,textAnchor:b,verticalAnchor:m},A):Vi(i)&&(he(i.x)||hs(i.x))&&(he(i.y)||hs(i.y))?tr({x:l+Dr(i.x,d),y:c+Dr(i.y,u),textAnchor:"end",verticalAnchor:"end"},A):tr({x:l+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},A)},z$=function(t){return"cx"in t&&he(t.cx)};function cr(e){var t=e.offset,n=t===void 0?5:t,a=D$(e,P$),s=tr({offset:n},a),i=s.viewBox,o=s.position,l=s.value,c=s.children,d=s.content,u=s.className,h=u===void 0?"":u,f=s.textBreakAll;if(!i||Ue(l)&&Ue(c)&&!k.isValidElement(d)&&!De(d))return null;if(k.isValidElement(d))return k.cloneElement(d,s);var m;if(De(d)){if(m=k.createElement(d,s),k.isValidElement(m))return m}else m=L$(s);var g=z$(i),p=ke(s,!0);if(g&&(o==="insideStart"||o==="insideEnd"||o==="end"))return F$(s,m,p);var x=g?q$(s):U$(s);return R.createElement(As,sl({className:Ve("recharts-label",h)},p,x,{breakAll:f}),m)}cr.displayName="Label";var IA=function(t){var n=t.cx,a=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,d=t.innerRadius,u=t.outerRadius,h=t.x,f=t.y,m=t.top,g=t.left,p=t.width,x=t.height,b=t.clockWise,y=t.labelViewBox;if(y)return y;if(he(p)&&he(x)){if(he(h)&&he(f))return{x:h,y:f,width:p,height:x};if(he(m)&&he(g))return{x:m,y:g,width:p,height:x}}return he(h)&&he(f)?{x:h,y:f,width:0,height:0}:he(n)&&he(a)?{cx:n,cy:a,startAngle:i||s||0,endAngle:o||s||0,innerRadius:d||0,outerRadius:u||c||l||0,clockWise:b}:t.viewBox?t.viewBox:{}},V$=function(t,n){return t?t===!0?R.createElement(cr,{key:"label-implicit",viewBox:n}):nr(t)?R.createElement(cr,{key:"label-implicit",viewBox:n,value:t}):k.isValidElement(t)?t.type===cr?k.cloneElement(t,{key:"label-implicit",viewBox:n}):R.createElement(cr,{key:"label-implicit",content:t,viewBox:n}):De(t)?R.createElement(cr,{key:"label-implicit",content:t,viewBox:n}):Vi(t)?R.createElement(cr,sl({viewBox:n},t,{key:"label-implicit"})):null:null},W$=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var s=t.children,i=IA(t),o=Xr(s,cr).map(function(c,d){return k.cloneElement(c,{viewBox:n||i,key:"label-".concat(d)})});if(!a)return o;var l=V$(t.label,n||i);return[l].concat(C$(o))};cr.parseViewBox=IA;cr.renderCallByParent=W$;var Qm,_N;function H$(){if(_N)return Qm;_N=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return Qm=e,Qm}var G$=H$();const K$=Pt(G$);function il(e){"@babel/helpers - typeof";return il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},il(e)}var Y$=["valueAccessor"],X$=["data","dataKey","clockWise","id","textBreakAll"];function Q$(e){return tL(e)||eL(e)||Z$(e)||J$()}function J$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z$(e,t){if(e){if(typeof e=="string")return Ip(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ip(e,t)}}function eL(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tL(e){if(Array.isArray(e))return Ip(e)}function Ip(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function td(){return td=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},td.apply(this,arguments)}function EN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function DN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EN(Object(n),!0).forEach(function(a){rL(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EN(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function rL(e,t,n){return t=nL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nL(e){var t=aL(e,"string");return il(t)=="symbol"?t:t+""}function aL(e,t){if(il(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(il(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MN(e,t){if(e==null)return{};var n=sL(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function sL(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}var iL=function(t){return Array.isArray(t.value)?K$(t.value):t.value};function Sn(e){var t=e.valueAccessor,n=t===void 0?iL:t,a=MN(e,Y$),s=a.data,i=a.dataKey,o=a.clockWise,l=a.id,c=a.textBreakAll,d=MN(a,X$);return!s||!s.length?null:R.createElement(Ye,{className:"recharts-label-list"},s.map(function(u,h){var f=Ue(i)?n(u,h):Gt(u&&u.payload,i),m=Ue(l)?{}:{id:"".concat(l,"-").concat(h)};return R.createElement(cr,td({},ke(u,!0),d,m,{parentViewBox:u.parentViewBox,value:f,textBreakAll:c,viewBox:cr.parseViewBox(Ue(o)?u:DN(DN({},u),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}Sn.displayName="LabelList";function oL(e,t){return e?e===!0?R.createElement(Sn,{key:"labelList-implicit",data:t}):R.isValidElement(e)||De(e)?R.createElement(Sn,{key:"labelList-implicit",data:t,content:e}):Vi(e)?R.createElement(Sn,td({data:t},e,{key:"labelList-implicit"})):null:null}function lL(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var a=e.children,s=Xr(a,Sn).map(function(o,l){return k.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return s;var i=oL(e.label,t);return[i].concat(Q$(s))}Sn.renderCallByParent=lL;function ol(e){"@babel/helpers - typeof";return ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ol(e)}function Rp(){return Rp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Rp.apply(this,arguments)}function IN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function RN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IN(Object(n),!0).forEach(function(a){cL(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IN(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function cL(e,t,n){return t=dL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dL(e){var t=uL(e,"string");return ol(t)=="symbol"?t:t+""}function uL(e,t){if(ol(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(ol(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hL=function(t,n){var a=Er(n-t),s=Math.min(Math.abs(n-t),359.999);return a*s},uc=function(t){var n=t.cx,a=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,u=c*(l?1:-1)+s,h=Math.asin(c/u)/ed,f=d?i:i+o*h,m=At(n,a,u,f),g=At(n,a,s,f),p=d?i-o*h:i,x=At(n,a,u*Math.cos(h*ed),p);return{center:m,circleTangency:g,lineTangency:x,theta:h}},RA=function(t){var n=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=hL(o,l),d=o+c,u=At(n,a,i,o),h=At(n,a,i,d),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(s>0){var m=At(n,a,s,o),g=At(n,a,s,d);f+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(n,",").concat(a," Z");return f},fL=function(t){var n=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,u=t.endAngle,h=Er(u-d),f=uc({cx:n,cy:a,radius:i,angle:d,sign:h,cornerRadius:o,cornerIsExternal:c}),m=f.circleTangency,g=f.lineTangency,p=f.theta,x=uc({cx:n,cy:a,radius:i,angle:u,sign:-h,cornerRadius:o,cornerIsExternal:c}),b=x.circleTangency,y=x.lineTangency,w=x.theta,S=c?Math.abs(d-u):Math.abs(d-u)-p-w;if(S<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):RA({cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:d,endAngle:u});var v="M ".concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(S>180),",").concat(+(h<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(y.x,",").concat(y.y,`
  `);if(s>0){var N=uc({cx:n,cy:a,radius:s,angle:d,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),A=N.circleTangency,P=N.lineTangency,T=N.theta,M=uc({cx:n,cy:a,radius:s,angle:u,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),E=M.circleTangency,C=M.lineTangency,O=M.theta,_=c?Math.abs(d-u):Math.abs(d-u)-T-O;if(_<0&&o===0)return"".concat(v,"L").concat(n,",").concat(a,"Z");v+="L".concat(C.x,",").concat(C.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(E.x,",").concat(E.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(_>180),",").concat(+(h>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(P.x,",").concat(P.y,"Z")}else v+="L".concat(n,",").concat(a,"Z");return v},mL={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},$A=function(t){var n=RN(RN({},mL),t),a=n.cx,s=n.cy,i=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,d=n.cornerIsExternal,u=n.startAngle,h=n.endAngle,f=n.className;if(o<i||u===h)return null;var m=Ve("recharts-sector",f),g=o-i,p=Dr(l,g,0,!0),x;return p>0&&Math.abs(u-h)<360?x=fL({cx:a,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(p,g/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:h}):x=RA({cx:a,cy:s,innerRadius:i,outerRadius:o,startAngle:u,endAngle:h}),R.createElement("path",Rp({},ke(n,!0),{className:m,d:x,role:"img"}))};function ll(e){"@babel/helpers - typeof";return ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ll(e)}function $p(){return $p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},$p.apply(this,arguments)}function $N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function LN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$N(Object(n),!0).forEach(function(a){xL(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$N(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function xL(e,t,n){return t=pL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pL(e){var t=gL(e,"string");return ll(t)=="symbol"?t:t+""}function gL(e,t){if(ll(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(ll(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BN={curveBasisClosed:$T,curveBasisOpen:LT,curveBasis:RT,curveBumpX:jT,curveBumpY:NT,curveLinearClosed:BT,curveLinear:Fd,curveMonotoneX:FT,curveMonotoneY:qT,curveNatural:UT,curveStep:zT,curveStepAfter:WT,curveStepBefore:VT},hc=function(t){return t.x===+t.x&&t.y===+t.y},po=function(t){return t.x},go=function(t){return t.y},yL=function(t,n){if(De(t))return t;var a="curve".concat(Ld(t));return(a==="curveMonotone"||a==="curveBump")&&n?BN["".concat(a).concat(n==="vertical"?"Y":"X")]:BN[a]||Fd},bL=function(t){var n=t.type,a=n===void 0?"linear":n,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,c=t.connectNulls,d=c===void 0?!1:c,u=yL(a,l),h=d?i.filter(function(p){return hc(p)}):i,f;if(Array.isArray(o)){var m=d?o.filter(function(p){return hc(p)}):o,g=h.map(function(p,x){return LN(LN({},p),{},{base:m[x]})});return l==="vertical"?f=nc().y(go).x1(po).x0(function(p){return p.base.x}):f=nc().x(po).y1(go).y0(function(p){return p.base.y}),f.defined(hc).curve(u),f(g)}return l==="vertical"&&he(o)?f=nc().y(go).x1(po).x0(o):he(o)?f=nc().x(po).y1(go).y0(o):f=Rk().x(po).y(go),f.defined(hc).curve(u),f(h)},vs=function(t){var n=t.className,a=t.points,s=t.path,i=t.pathRef;if((!a||!a.length)&&!s)return null;var o=a&&a.length?bL(t):s;return k.createElement("path",$p({},ke(t,!1),Cc(t),{className:Ve("recharts-curve",n),d:o,ref:i}))},vL=Object.getOwnPropertyNames,wL=Object.getOwnPropertySymbols,jL=Object.prototype.hasOwnProperty;function FN(e,t){return function(a,s,i){return e(a,s,i)&&t(a,s,i)}}function fc(e){return function(n,a,s){if(!n||!a||typeof n!="object"||typeof a!="object")return e(n,a,s);var i=s.cache,o=i.get(n),l=i.get(a);if(o&&l)return o===a&&l===n;i.set(n,a),i.set(a,n);var c=e(n,a,s);return i.delete(n),i.delete(a),c}}function NL(e){return e!=null?e[Symbol.toStringTag]:void 0}function qN(e){return vL(e).concat(wL(e))}var SL=Object.hasOwn||(function(e,t){return jL.call(e,t)});function $s(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var kL="__v",AL="__o",PL="_owner",UN=Object.getOwnPropertyDescriptor,zN=Object.keys;function CL(e,t,n){var a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!n.equals(e[a],t[a],a,a,e,t,n))return!1;return!0}function OL(e,t){return $s(e.getTime(),t.getTime())}function TL(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function _L(e,t){return e===t}function VN(e,t,n){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var s=new Array(a),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var d=t.entries(),u=!1,h=0;(l=d.next())&&!l.done;){if(s[h]){h++;continue}var f=o.value,m=l.value;if(n.equals(f[0],m[0],c,h,e,t,n)&&n.equals(f[1],m[1],f[0],m[0],e,t,n)){u=s[h]=!0;break}h++}if(!u)return!1;c++}return!0}var EL=$s;function DL(e,t,n){var a=zN(e),s=a.length;if(zN(t).length!==s)return!1;for(;s-- >0;)if(!LA(e,t,n,a[s]))return!1;return!0}function yo(e,t,n){var a=qN(e),s=a.length;if(qN(t).length!==s)return!1;for(var i,o,l;s-- >0;)if(i=a[s],!LA(e,t,n,i)||(o=UN(e,i),l=UN(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function ML(e,t){return $s(e.valueOf(),t.valueOf())}function IL(e,t){return e.source===t.source&&e.flags===t.flags}function WN(e,t,n){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var s=new Array(a),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),d=!1,u=0;(l=c.next())&&!l.done;){if(!s[u]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){d=s[u]=!0;break}u++}if(!d)return!1}return!0}function RL(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function $L(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function LA(e,t,n,a){return(a===PL||a===AL||a===kL)&&(e.$$typeof||t.$$typeof)?!0:SL(t,a)&&n.equals(e[a],t[a],a,a,e,t,n)}var LL="[object Arguments]",BL="[object Boolean]",FL="[object Date]",qL="[object Error]",UL="[object Map]",zL="[object Number]",VL="[object Object]",WL="[object RegExp]",HL="[object Set]",GL="[object String]",KL="[object URL]",YL=Array.isArray,HN=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,GN=Object.assign,XL=Object.prototype.toString.call.bind(Object.prototype.toString);function QL(e){var t=e.areArraysEqual,n=e.areDatesEqual,a=e.areErrorsEqual,s=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,d=e.areRegExpsEqual,u=e.areSetsEqual,h=e.areTypedArraysEqual,f=e.areUrlsEqual,m=e.unknownTagComparators;return function(p,x,b){if(p===x)return!0;if(p==null||x==null)return!1;var y=typeof p;if(y!==typeof x)return!1;if(y!=="object")return y==="number"?o(p,x,b):y==="function"?s(p,x,b):!1;var w=p.constructor;if(w!==x.constructor)return!1;if(w===Object)return l(p,x,b);if(YL(p))return t(p,x,b);if(HN!=null&&HN(p))return h(p,x,b);if(w===Date)return n(p,x,b);if(w===RegExp)return d(p,x,b);if(w===Map)return i(p,x,b);if(w===Set)return u(p,x,b);var S=XL(p);if(S===FL)return n(p,x,b);if(S===WL)return d(p,x,b);if(S===UL)return i(p,x,b);if(S===HL)return u(p,x,b);if(S===VL)return typeof p.then!="function"&&typeof x.then!="function"&&l(p,x,b);if(S===KL)return f(p,x,b);if(S===qL)return a(p,x,b);if(S===LL)return l(p,x,b);if(S===BL||S===zL||S===GL)return c(p,x,b);if(m){var v=m[S];if(!v){var N=NL(p);N&&(v=m[N])}if(v)return v(p,x,b)}return!1}}function JL(e){var t=e.circular,n=e.createCustomConfig,a=e.strict,s={areArraysEqual:a?yo:CL,areDatesEqual:OL,areErrorsEqual:TL,areFunctionsEqual:_L,areMapsEqual:a?FN(VN,yo):VN,areNumbersEqual:EL,areObjectsEqual:a?yo:DL,arePrimitiveWrappersEqual:ML,areRegExpsEqual:IL,areSetsEqual:a?FN(WN,yo):WN,areTypedArraysEqual:a?yo:RL,areUrlsEqual:$L,unknownTagComparators:void 0};if(n&&(s=GN({},s,n(s))),t){var i=fc(s.areArraysEqual),o=fc(s.areMapsEqual),l=fc(s.areObjectsEqual),c=fc(s.areSetsEqual);s=GN({},s,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return s}function ZL(e){return function(t,n,a,s,i,o,l){return e(t,n,l)}}function e6(e){var t=e.circular,n=e.comparator,a=e.createState,s=e.equals,i=e.strict;if(a)return function(c,d){var u=a(),h=u.cache,f=h===void 0?t?new WeakMap:void 0:h,m=u.meta;return n(c,d,{cache:f,equals:s,meta:m,strict:i})};if(t)return function(c,d){return n(c,d,{cache:new WeakMap,equals:s,meta:void 0,strict:i})};var o={cache:void 0,equals:s,meta:void 0,strict:i};return function(c,d){return n(c,d,o)}}var t6=Wa();Wa({strict:!0});Wa({circular:!0});Wa({circular:!0,strict:!0});Wa({createInternalComparator:function(){return $s}});Wa({strict:!0,createInternalComparator:function(){return $s}});Wa({circular:!0,createInternalComparator:function(){return $s}});Wa({circular:!0,createInternalComparator:function(){return $s},strict:!0});function Wa(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,a=e.createInternalComparator,s=e.createState,i=e.strict,o=i===void 0?!1:i,l=JL(e),c=QL(l),d=a?a(c):ZL(c);return e6({circular:n,comparator:c,createState:s,equals:d,strict:o})}function r6(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function KN(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,a=function s(i){n<0&&(n=i),i-n>t?(e(i),n=-1):r6(s)};requestAnimationFrame(a)}function Lp(e){"@babel/helpers - typeof";return Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lp(e)}function n6(e){return o6(e)||i6(e)||s6(e)||a6()}function a6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s6(e,t){if(e){if(typeof e=="string")return YN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YN(e,t)}}function YN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function i6(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function o6(e){if(Array.isArray(e))return e}function l6(){var e={},t=function(){return null},n=!1,a=function s(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,l=n6(o),c=l[0],d=l.slice(1);if(typeof c=="number"){KN(s.bind(null,d),c);return}s(c),KN(s.bind(null,d));return}Lp(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,a(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function cl(e){"@babel/helpers - typeof";return cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cl(e)}function XN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function QN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XN(Object(n),!0).forEach(function(a){BA(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XN(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function BA(e,t,n){return t=c6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c6(e){var t=d6(e,"string");return cl(t)==="symbol"?t:String(t)}function d6(e,t){if(cl(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(cl(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var u6=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(a,s){return a.filter(function(i){return s.includes(i)})})},h6=function(t){return t},f6=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Do=function(t,n){return Object.keys(n).reduce(function(a,s){return QN(QN({},a),{},BA({},s,t(s,n[s])))},{})},JN=function(t,n,a){return t.map(function(s){return"".concat(f6(s)," ").concat(n,"ms ").concat(a)}).join(",")};function m6(e,t){return g6(e)||p6(e,t)||FA(e,t)||x6()}function x6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p6(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function g6(e){if(Array.isArray(e))return e}function y6(e){return w6(e)||v6(e)||FA(e)||b6()}function b6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FA(e,t){if(e){if(typeof e=="string")return Bp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bp(e,t)}}function v6(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function w6(e){if(Array.isArray(e))return Bp(e)}function Bp(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var rd=1e-4,qA=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},UA=function(t,n){return t.map(function(a,s){return a*Math.pow(n,s)}).reduce(function(a,s){return a+s})},ZN=function(t,n){return function(a){var s=qA(t,n);return UA(s,a)}},j6=function(t,n){return function(a){var s=qA(t,n),i=[].concat(y6(s.map(function(o,l){return o*l}).slice(1)),[0]);return UA(i,a)}},e1=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var s=n[0],i=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),u=m6(d,4);s=u[0],i=u[1],o=u[2],l=u[3]}}}var h=ZN(s,o),f=ZN(i,l),m=j6(s,o),g=function(b){return b>1?1:b<0?0:b},p=function(b){for(var y=b>1?1:b,w=y,S=0;S<8;++S){var v=h(w)-y,N=m(w);if(Math.abs(v-y)<rd||N<rd)return f(w);w=g(w-v/N)}return f(w)};return p.isStepper=!1,p},N6=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,a=n===void 0?100:n,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,c=function(u,h,f){var m=-(u-h)*a,g=f*i,p=f+(m-g)*l/1e3,x=f*l/1e3+u;return Math.abs(x-h)<rd&&Math.abs(p)<rd?[h,0]:[x,p]};return c.isStepper=!0,c.dt=l,c},S6=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var s=n[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return e1(s);case"spring":return N6();default:if(s.split("(")[0]==="cubic-bezier")return e1(s)}return typeof s=="function"?s:null};function dl(e){"@babel/helpers - typeof";return dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dl(e)}function t1(e){return P6(e)||A6(e)||zA(e)||k6()}function k6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A6(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function P6(e){if(Array.isArray(e))return qp(e)}function r1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function gr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?r1(Object(n),!0).forEach(function(a){Fp(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r1(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Fp(e,t,n){return t=C6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C6(e){var t=O6(e,"string");return dl(t)==="symbol"?t:String(t)}function O6(e,t){if(dl(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(dl(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function T6(e,t){return D6(e)||E6(e,t)||zA(e,t)||_6()}function _6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zA(e,t){if(e){if(typeof e=="string")return qp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qp(e,t)}}function qp(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function E6(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function D6(e){if(Array.isArray(e))return e}var nd=function(t,n,a){return t+(n-t)*a},Up=function(t){var n=t.from,a=t.to;return n!==a},M6=function e(t,n,a){var s=Do(function(i,o){if(Up(o)){var l=t(o.from,o.to,o.velocity),c=T6(l,2),d=c[0],u=c[1];return gr(gr({},o),{},{from:d,velocity:u})}return o},n);return a<1?Do(function(i,o){return Up(o)?gr(gr({},o),{},{velocity:nd(o.velocity,s[i].velocity,a),from:nd(o.from,s[i].from,a)}):o},n):e(t,s,a-1)};const I6=(function(e,t,n,a,s){var i=u6(e,t),o=i.reduce(function(x,b){return gr(gr({},x),{},Fp({},b,[e[b],t[b]]))},{}),l=i.reduce(function(x,b){return gr(gr({},x),{},Fp({},b,{from:e[b],velocity:0,to:t[b]}))},{}),c=-1,d,u,h=function(){return null},f=function(){return Do(function(b,y){return y.from},l)},m=function(){return!Object.values(l).filter(Up).length},g=function(b){d||(d=b);var y=b-d,w=y/n.dt;l=M6(n,l,w),s(gr(gr(gr({},e),t),f())),d=b,m()||(c=requestAnimationFrame(h))},p=function(b){u||(u=b);var y=(b-u)/a,w=Do(function(v,N){return nd.apply(void 0,t1(N).concat([n(y)]))},o);if(s(gr(gr(gr({},e),t),w)),y<1)c=requestAnimationFrame(h);else{var S=Do(function(v,N){return nd.apply(void 0,t1(N).concat([n(1)]))},o);s(gr(gr(gr({},e),t),S))}};return h=n.isStepper?g:p,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}});function Si(e){"@babel/helpers - typeof";return Si=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Si(e)}var R6=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function $6(e,t){if(e==null)return{};var n=L6(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function L6(e,t){if(e==null)return{};var n={},a=Object.keys(e),s,i;for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Jm(e){return U6(e)||q6(e)||F6(e)||B6()}function B6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F6(e,t){if(e){if(typeof e=="string")return zp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zp(e,t)}}function q6(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function U6(e){if(Array.isArray(e))return zp(e)}function zp(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function n1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?n1(Object(n),!0).forEach(function(a){Ao(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n1(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Ao(e,t,n){return t=VA(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V6(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,VA(a.key),a)}}function W6(e,t,n){return t&&V6(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function VA(e){var t=H6(e,"string");return Si(t)==="symbol"?t:String(t)}function H6(e,t){if(Si(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Si(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function G6(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vp(e,t)}function Vp(e,t){return Vp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Vp(e,t)}function K6(e){var t=Y6();return function(){var a=ad(e),s;if(t){var i=ad(this).constructor;s=Reflect.construct(a,arguments,i)}else s=a.apply(this,arguments);return Wp(this,s)}}function Wp(e,t){if(t&&(Si(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hp(e)}function Hp(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y6(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ad(e){return ad=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ad(e)}var kn=(function(e){G6(n,e);var t=K6(n);function n(a,s){var i;z6(this,n),i=t.call(this,a,s);var o=i.props,l=o.isActive,c=o.attributeName,d=o.from,u=o.to,h=o.steps,f=o.children,m=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(Hp(i)),i.changeStyle=i.changeStyle.bind(Hp(i)),!l||m<=0)return i.state={style:{}},typeof f=="function"&&(i.state={style:u}),Wp(i);if(h&&h.length)i.state={style:h[0].style};else if(d){if(typeof f=="function")return i.state={style:d},Wp(i);i.state={style:c?Ao({},c,d):d}}else i.state={style:{}};return i}return W6(n,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,u=i.to,h=i.from,f=this.state.style;if(l){if(!o){var m={style:c?Ao({},c,u):u};this.state&&f&&(c&&f[c]!==u||!c&&f!==u)&&this.setState(m);return}if(!(t6(s.to,u)&&s.canBegin&&s.isActive)){var g=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=g||d?h:s.to;if(this.state&&f){var x={style:c?Ao({},c,p):p};(c&&f[c]!==p||!c&&f!==p)&&this.setState(x)}this.runAnimation(gn(gn({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,c=s.duration,d=s.easing,u=s.begin,h=s.onAnimationEnd,f=s.onAnimationStart,m=I6(o,l,S6(d),c,this.changeStyle),g=function(){i.stopJSAnimation=m()};this.manager.start([f,u,g,c,h])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,c=s.onAnimationStart,d=o[0],u=d.style,h=d.duration,f=h===void 0?0:h,m=function(p,x,b){if(b===0)return p;var y=x.duration,w=x.easing,S=w===void 0?"ease":w,v=x.style,N=x.properties,A=x.onAnimationEnd,P=b>0?o[b-1]:x,T=N||Object.keys(v);if(typeof S=="function"||S==="spring")return[].concat(Jm(p),[i.runJSAnimation.bind(i,{from:P.style,to:v,duration:y,easing:S}),y]);var M=JN(T,y,S),E=gn(gn(gn({},P.style),v),{},{transition:M});return[].concat(Jm(p),[E,y,A]).filter(h6)};return this.manager.start([c].concat(Jm(o.reduce(m,[u,Math.max(f,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=l6());var i=s.begin,o=s.duration,l=s.attributeName,c=s.to,d=s.easing,u=s.onAnimationStart,h=s.onAnimationEnd,f=s.steps,m=s.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof d=="function"||typeof m=="function"||d==="spring"){this.runJSAnimation(s);return}if(f.length>1){this.runStepAnimation(s);return}var p=l?Ao({},l,c):c,x=JN(Object.keys(p),o,d);g.start([u,i,gn(gn({},p),{},{transition:x}),o,h])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=$6(s,R6),d=k.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!l||d===0||o<=0)return i;var h=function(m){var g=m.props,p=g.style,x=p===void 0?{}:p,b=g.className,y=k.cloneElement(m,gn(gn({},c),{},{style:gn(gn({},x),u),className:b}));return y};return d===1?h(k.Children.only(i)):R.createElement("div",null,k.Children.map(i,function(f){return h(f)}))}}]),n})(k.PureComponent);kn.displayName="Animate";kn.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};kn.propTypes={from:nt.oneOfType([nt.object,nt.string]),to:nt.oneOfType([nt.object,nt.string]),attributeName:nt.string,duration:nt.number,begin:nt.number,easing:nt.oneOfType([nt.string,nt.func]),steps:nt.arrayOf(nt.shape({duration:nt.number.isRequired,style:nt.object.isRequired,easing:nt.oneOfType([nt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),nt.func]),properties:nt.arrayOf("string"),onAnimationEnd:nt.func})),children:nt.oneOfType([nt.node,nt.func]),isActive:nt.bool,canBegin:nt.bool,onAnimationEnd:nt.func,shouldReAnimate:nt.bool,onAnimationStart:nt.func,onAnimationReStart:nt.func};function ul(e){"@babel/helpers - typeof";return ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ul(e)}function sd(){return sd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},sd.apply(this,arguments)}function X6(e,t){return eB(e)||Z6(e,t)||J6(e,t)||Q6()}function Q6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J6(e,t){if(e){if(typeof e=="string")return a1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a1(e,t)}}function a1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Z6(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function eB(e){if(Array.isArray(e))return e}function s1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function i1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?s1(Object(n),!0).forEach(function(a){tB(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s1(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function tB(e,t,n){return t=rB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rB(e){var t=nB(e,"string");return ul(t)=="symbol"?t:t+""}function nB(e,t){if(ul(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(ul(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var o1=function(t,n,a,s,i){var o=Math.min(Math.abs(a)/2,Math.abs(s)/2),l=s>=0?1:-1,c=a>=0?1:-1,d=s>=0&&a>=0||s<0&&a<0?1:0,u;if(o>0&&i instanceof Array){for(var h=[0,0,0,0],f=0,m=4;f<m;f++)h[f]=i[f]>o?o:i[f];u="M".concat(t,",").concat(n+l*h[0]),h[0]>0&&(u+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(d,",").concat(t+c*h[0],",").concat(n)),u+="L ".concat(t+a-c*h[1],",").concat(n),h[1]>0&&(u+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(d,`,
        `).concat(t+a,",").concat(n+l*h[1])),u+="L ".concat(t+a,",").concat(n+s-l*h[2]),h[2]>0&&(u+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(d,`,
        `).concat(t+a-c*h[2],",").concat(n+s)),u+="L ".concat(t+c*h[3],",").concat(n+s),h[3]>0&&(u+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(n+s-l*h[3])),u+="Z"}else if(o>0&&i===+i&&i>0){var g=Math.min(o,i);u="M ".concat(t,",").concat(n+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(d,",").concat(t+c*g,",").concat(n,`
            L `).concat(t+a-c*g,",").concat(n,`
            A `).concat(g,",").concat(g,",0,0,").concat(d,",").concat(t+a,",").concat(n+l*g,`
            L `).concat(t+a,",").concat(n+s-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(d,",").concat(t+a-c*g,",").concat(n+s,`
            L `).concat(t+c*g,",").concat(n+s,`
            A `).concat(g,",").concat(g,",0,0,").concat(d,",").concat(t,",").concat(n+s-l*g," Z")}else u="M ".concat(t,",").concat(n," h ").concat(a," v ").concat(s," h ").concat(-a," Z");return u},aB=function(t,n){if(!t||!n)return!1;var a=t.x,s=t.y,i=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(i,i+l),u=Math.max(i,i+l),h=Math.min(o,o+c),f=Math.max(o,o+c);return a>=d&&a<=u&&s>=h&&s<=f}return!1},sB={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},vg=function(t){var n=i1(i1({},sB),t),a=k.useRef(),s=k.useState(-1),i=X6(s,2),o=i[0],l=i[1];k.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var S=a.current.getTotalLength();S&&l(S)}catch{}},[]);var c=n.x,d=n.y,u=n.width,h=n.height,f=n.radius,m=n.className,g=n.animationEasing,p=n.animationDuration,x=n.animationBegin,b=n.isAnimationActive,y=n.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||h!==+h||u===0||h===0)return null;var w=Ve("recharts-rectangle",m);return y?R.createElement(kn,{canBegin:o>0,from:{width:u,height:h,x:c,y:d},to:{width:u,height:h,x:c,y:d},duration:p,animationEasing:g,isActive:y},function(S){var v=S.width,N=S.height,A=S.x,P=S.y;return R.createElement(kn,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:p,isActive:b,easing:g},R.createElement("path",sd({},ke(n,!0),{className:w,d:o1(A,P,v,N,f),ref:a})))}):R.createElement("path",sd({},ke(n,!0),{className:w,d:o1(c,d,u,h,f)}))},iB=["points","className","baseLinePoints","connectNulls"];function ii(){return ii=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ii.apply(this,arguments)}function oB(e,t){if(e==null)return{};var n=lB(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function lB(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function l1(e){return hB(e)||uB(e)||dB(e)||cB()}function cB(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dB(e,t){if(e){if(typeof e=="string")return Gp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gp(e,t)}}function uB(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hB(e){if(Array.isArray(e))return Gp(e)}function Gp(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var c1=function(t){return t&&t.x===+t.x&&t.y===+t.y},fB=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(a){c1(a)?n[n.length-1].push(a):n[n.length-1].length>0&&n.push([])}),c1(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Mo=function(t,n){var a=fB(t);n&&(a=[a.reduce(function(i,o){return[].concat(l1(i),l1(o))},[])]);var s=a.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return a.length===1?"".concat(s,"Z"):s},mB=function(t,n,a){var s=Mo(t,a);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(Mo(n.reverse(),a).slice(1))},xB=function(t){var n=t.points,a=t.className,s=t.baseLinePoints,i=t.connectNulls,o=oB(t,iB);if(!n||!n.length)return null;var l=Ve("recharts-polygon",a);if(s&&s.length){var c=o.stroke&&o.stroke!=="none",d=mB(n,s,i);return R.createElement("g",{className:l},R.createElement("path",ii({},ke(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),c?R.createElement("path",ii({},ke(o,!0),{fill:"none",d:Mo(n,i)})):null,c?R.createElement("path",ii({},ke(o,!0),{fill:"none",d:Mo(s,i)})):null)}var u=Mo(n,i);return R.createElement("path",ii({},ke(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",className:l,d:u}))};function Kp(){return Kp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Kp.apply(this,arguments)}var _l=function(t){var n=t.cx,a=t.cy,s=t.r,i=t.className,o=Ve("recharts-dot",i);return n===+n&&a===+a&&s===+s?k.createElement("circle",Kp({},ke(t,!1),Cc(t),{className:o,cx:n,cy:a,r:s})):null};function hl(e){"@babel/helpers - typeof";return hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hl(e)}var pB=["x","y","top","left","width","height","className"];function Yp(){return Yp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Yp.apply(this,arguments)}function d1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function gB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?d1(Object(n),!0).forEach(function(a){yB(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d1(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function yB(e,t,n){return t=bB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bB(e){var t=vB(e,"string");return hl(t)=="symbol"?t:t+""}function vB(e,t){if(hl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(hl(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wB(e,t){if(e==null)return{};var n=jB(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function jB(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}var NB=function(t,n,a,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(n,"h").concat(a)},SB=function(t){var n=t.x,a=n===void 0?0:n,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,c=t.left,d=c===void 0?0:c,u=t.width,h=u===void 0?0:u,f=t.height,m=f===void 0?0:f,g=t.className,p=wB(t,pB),x=gB({x:a,y:i,top:l,left:d,width:h,height:m},p);return!he(a)||!he(i)||!he(h)||!he(m)||!he(l)||!he(d)?null:R.createElement("path",Yp({},ke(x,!0),{className:Ve("recharts-cross",g),d:NB(a,i,h,m,l,d)}))},Zm,u1;function kB(){if(u1)return Zm;u1=1;var e=Qd(),t=sA(),n=Vn();function a(s,i){return s&&s.length?e(s,n(i,2),t):void 0}return Zm=a,Zm}var AB=kB();const PB=Pt(AB);var ex,h1;function CB(){if(h1)return ex;h1=1;var e=Qd(),t=Vn(),n=iA();function a(s,i){return s&&s.length?e(s,t(i,2),n):void 0}return ex=a,ex}var OB=CB();const TB=Pt(OB);var _B=["cx","cy","angle","ticks","axisLine"],EB=["ticks","tick","angle","tickFormatter","stroke"];function ki(e){"@babel/helpers - typeof";return ki=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ki(e)}function Io(){return Io=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Io.apply(this,arguments)}function f1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function rs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?f1(Object(n),!0).forEach(function(a){tu(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f1(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function m1(e,t){if(e==null)return{};var n=DB(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function DB(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function MB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x1(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,HA(a.key),a)}}function IB(e,t,n){return t&&x1(e.prototype,t),n&&x1(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function RB(e,t,n){return t=id(t),$B(e,WA()?Reflect.construct(t,n||[],id(e).constructor):t.apply(e,n))}function $B(e,t){if(t&&(ki(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LB(e)}function LB(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WA=function(){return!!e})()}function id(e){return id=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},id(e)}function BB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xp(e,t)}function Xp(e,t){return Xp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Xp(e,t)}function tu(e,t,n){return t=HA(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HA(e){var t=FB(e,"string");return ki(t)=="symbol"?t:t+""}function FB(e,t){if(ki(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(ki(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ru=(function(e){function t(){return MB(this,t),RB(this,t,arguments)}return BB(t,e),IB(t,[{key:"getTickValueCoord",value:function(a){var s=a.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return At(l,c,s,o)}},{key:"getTickTextAnchor",value:function(){var a=this.props.orientation,s;switch(a){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var a=this.props,s=a.cx,i=a.cy,o=a.angle,l=a.ticks,c=PB(l,function(u){return u.coordinate||0}),d=TB(l,function(u){return u.coordinate||0});return{cx:s,cy:i,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.cx,i=a.cy,o=a.angle,l=a.ticks,c=a.axisLine,d=m1(a,_B),u=l.reduce(function(g,p){return[Math.min(g[0],p.coordinate),Math.max(g[1],p.coordinate)]},[1/0,-1/0]),h=At(s,i,u[0],o),f=At(s,i,u[1],o),m=rs(rs(rs({},ke(d,!1)),{},{fill:"none"},ke(c,!1)),{},{x1:h.x,y1:h.y,x2:f.x,y2:f.y});return R.createElement("line",Io({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var a=this,s=this.props,i=s.ticks,o=s.tick,l=s.angle,c=s.tickFormatter,d=s.stroke,u=m1(s,EB),h=this.getTickTextAnchor(),f=ke(u,!1),m=ke(o,!1),g=i.map(function(p,x){var b=a.getTickValueCoord(p),y=rs(rs(rs(rs({textAnchor:h,transform:"rotate(".concat(90-l,", ").concat(b.x,", ").concat(b.y,")")},f),{},{stroke:"none",fill:d},m),{},{index:x},b),{},{payload:p});return R.createElement(Ye,Io({className:Ve("recharts-polar-radius-axis-tick",MA(o)),key:"tick-".concat(p.coordinate)},ks(a.props,p,x)),t.renderTickItem(o,y,c?c(p.value,x):p.value))});return R.createElement(Ye,{className:"recharts-polar-radius-axis-ticks"},g)}},{key:"render",value:function(){var a=this.props,s=a.ticks,i=a.axisLine,o=a.tick;return!s||!s.length?null:R.createElement(Ye,{className:Ve("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),cr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(a,s,i){var o;return R.isValidElement(a)?o=R.cloneElement(a,s):De(a)?o=a(s):o=R.createElement(As,Io({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])})(k.PureComponent);tu(ru,"displayName","PolarRadiusAxis");tu(ru,"axisType","radiusAxis");tu(ru,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Ai(e){"@babel/helpers - typeof";return Ai=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ai(e)}function ds(){return ds=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ds.apply(this,arguments)}function p1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function ns(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?p1(Object(n),!0).forEach(function(a){nu(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p1(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function qB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g1(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,KA(a.key),a)}}function UB(e,t,n){return t&&g1(e.prototype,t),n&&g1(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function zB(e,t,n){return t=od(t),VB(e,GA()?Reflect.construct(t,n||[],od(e).constructor):t.apply(e,n))}function VB(e,t){if(t&&(Ai(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WB(e)}function WB(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GA=function(){return!!e})()}function od(e){return od=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},od(e)}function HB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qp(e,t)}function Qp(e,t){return Qp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Qp(e,t)}function nu(e,t,n){return t=KA(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KA(e){var t=GB(e,"string");return Ai(t)=="symbol"?t:t+""}function GB(e,t){if(Ai(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Ai(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var KB=Math.PI/180,y1=1e-5,au=(function(e){function t(){return qB(this,t),zB(this,t,arguments)}return HB(t,e),UB(t,[{key:"getTickLineCoord",value:function(a){var s=this.props,i=s.cx,o=s.cy,l=s.radius,c=s.orientation,d=s.tickSize,u=d||8,h=At(i,o,l,a.coordinate),f=At(i,o,l+(c==="inner"?-1:1)*u,a.coordinate);return{x1:h.x,y1:h.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(a){var s=this.props.orientation,i=Math.cos(-a.coordinate*KB),o;return i>y1?o=s==="outer"?"start":"end":i<-y1?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.cx,i=a.cy,o=a.radius,l=a.axisLine,c=a.axisLineType,d=ns(ns({},ke(this.props,!1)),{},{fill:"none"},ke(l,!1));if(c==="circle")return R.createElement(_l,ds({className:"recharts-polar-angle-axis-line"},d,{cx:s,cy:i,r:o}));var u=this.props.ticks,h=u.map(function(f){return At(s,i,o,f.coordinate)});return R.createElement(xB,ds({className:"recharts-polar-angle-axis-line"},d,{points:h}))}},{key:"renderTicks",value:function(){var a=this,s=this.props,i=s.ticks,o=s.tick,l=s.tickLine,c=s.tickFormatter,d=s.stroke,u=ke(this.props,!1),h=ke(o,!1),f=ns(ns({},u),{},{fill:"none"},ke(l,!1)),m=i.map(function(g,p){var x=a.getTickLineCoord(g),b=a.getTickTextAnchor(g),y=ns(ns(ns({textAnchor:b},u),{},{stroke:"none",fill:d},h),{},{index:p,payload:g,x:x.x2,y:x.y2});return R.createElement(Ye,ds({className:Ve("recharts-polar-angle-axis-tick",MA(o)),key:"tick-".concat(g.coordinate)},ks(a.props,g,p)),l&&R.createElement("line",ds({className:"recharts-polar-angle-axis-tick-line"},f,x)),o&&t.renderTickItem(o,y,c?c(g.value,p):g.value))});return R.createElement(Ye,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var a=this.props,s=a.ticks,i=a.radius,o=a.axisLine;return i<=0||!s||!s.length?null:R.createElement(Ye,{className:Ve("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(a,s,i){var o;return R.isValidElement(a)?o=R.cloneElement(a,s):De(a)?o=a(s):o=R.createElement(As,ds({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])})(k.PureComponent);nu(au,"displayName","PolarAngleAxis");nu(au,"axisType","angleAxis");nu(au,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var tx,b1;function YB(){if(b1)return tx;b1=1;var e=_s(),t=Es(),n="[object Boolean]";function a(s){return s===!0||s===!1||t(s)&&e(s)==n}return tx=a,tx}var XB=YB();const QB=Pt(XB);function fl(e){"@babel/helpers - typeof";return fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fl(e)}function ld(){return ld=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ld.apply(this,arguments)}function JB(e,t){return rF(e)||tF(e,t)||eF(e,t)||ZB()}function ZB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eF(e,t){if(e){if(typeof e=="string")return v1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v1(e,t)}}function v1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function tF(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function rF(e){if(Array.isArray(e))return e}function w1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function j1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?w1(Object(n),!0).forEach(function(a){nF(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w1(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function nF(e,t,n){return t=aF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aF(e){var t=sF(e,"string");return fl(t)=="symbol"?t:t+""}function sF(e,t){if(fl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(fl(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var N1=function(t,n,a,s,i){var o=a-s,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+a,",").concat(n),l+="L ".concat(t+a-o/2,",").concat(n+i),l+="L ".concat(t+a-o/2-s,",").concat(n+i),l+="L ".concat(t,",").concat(n," Z"),l},iF={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},oF=function(t){var n=j1(j1({},iF),t),a=k.useRef(),s=k.useState(-1),i=JB(s,2),o=i[0],l=i[1];k.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var w=a.current.getTotalLength();w&&l(w)}catch{}},[]);var c=n.x,d=n.y,u=n.upperWidth,h=n.lowerWidth,f=n.height,m=n.className,g=n.animationEasing,p=n.animationDuration,x=n.animationBegin,b=n.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||h!==+h||f!==+f||u===0&&h===0||f===0)return null;var y=Ve("recharts-trapezoid",m);return b?R.createElement(kn,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:d},to:{upperWidth:u,lowerWidth:h,height:f,x:c,y:d},duration:p,animationEasing:g,isActive:b},function(w){var S=w.upperWidth,v=w.lowerWidth,N=w.height,A=w.x,P=w.y;return R.createElement(kn,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:p,easing:g},R.createElement("path",ld({},ke(n,!0),{className:y,d:N1(A,P,S,v,N),ref:a})))}):R.createElement("g",null,R.createElement("path",ld({},ke(n,!0),{className:y,d:N1(c,d,u,h,f)})))},lF=["option","shapeType","propTransformer","activeClassName","isActive"];function ml(e){"@babel/helpers - typeof";return ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ml(e)}function cF(e,t){if(e==null)return{};var n=dF(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function dF(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function S1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function cd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S1(Object(n),!0).forEach(function(a){uF(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S1(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function uF(e,t,n){return t=hF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hF(e){var t=fF(e,"string");return ml(t)=="symbol"?t:t+""}function fF(e,t){if(ml(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(ml(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mF(e,t){return cd(cd({},t),e)}function xF(e,t){return e==="symbols"}function k1(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return R.createElement(vg,n);case"trapezoid":return R.createElement(oF,n);case"sector":return R.createElement($A,n);case"symbols":if(xF(t))return R.createElement(B0,n);break;default:return null}}function pF(e){return k.isValidElement(e)?e.props:e}function YA(e){var t=e.option,n=e.shapeType,a=e.propTransformer,s=a===void 0?mF:a,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=cF(e,lF),d;if(k.isValidElement(t))d=k.cloneElement(t,cd(cd({},c),pF(t)));else if(De(t))d=t(c);else if(qP(t)&&!QB(t)){var u=s(t,c);d=R.createElement(k1,{shapeType:n,elementProps:u})}else{var h=c;d=R.createElement(k1,{shapeType:n,elementProps:h})}return l?R.createElement(Ye,{className:o},d):d}function su(e,t){return t!=null&&"trapezoids"in e.props}function iu(e,t){return t!=null&&"sectors"in e.props}function xl(e,t){return t!=null&&"points"in e.props}function gF(e,t){var n,a,s=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,i=e.y===(t==null||(a=t.labelViewBox)===null||a===void 0?void 0:a.y)||e.y===t.y;return s&&i}function yF(e,t){var n=e.endAngle===t.endAngle,a=e.startAngle===t.startAngle;return n&&a}function bF(e,t){var n=e.x===t.x,a=e.y===t.y,s=e.z===t.z;return n&&a&&s}function vF(e,t){var n;return su(e,t)?n=gF:iu(e,t)?n=yF:xl(e,t)&&(n=bF),n}function wF(e,t){var n;return su(e,t)?n="trapezoids":iu(e,t)?n="sectors":xl(e,t)&&(n="points"),n}function jF(e,t){if(su(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(iu(e,t)){var a;return(a=t.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return xl(e,t)?t.payload:{}}function NF(e){var t=e.activeTooltipItem,n=e.graphicalItem,a=e.itemData,s=wF(n,t),i=jF(n,t),o=a.filter(function(c,d){var u=Ps(i,c),h=n.props[s].filter(function(g){var p=vF(n,t);return p(g,t)}),f=n.props[s].indexOf(h[h.length-1]),m=d===f;return u&&m}),l=a.indexOf(o[o.length-1]);return l}var wc;function Pi(e){"@babel/helpers - typeof";return Pi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pi(e)}function oi(){return oi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},oi.apply(this,arguments)}function A1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?A1(Object(n),!0).forEach(function(a){ln(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A1(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function SF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P1(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,QA(a.key),a)}}function kF(e,t,n){return t&&P1(e.prototype,t),n&&P1(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function AF(e,t,n){return t=dd(t),PF(e,XA()?Reflect.construct(t,n||[],dd(e).constructor):t.apply(e,n))}function PF(e,t){if(t&&(Pi(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CF(e)}function CF(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XA=function(){return!!e})()}function dd(e){return dd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dd(e)}function OF(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jp(e,t)}function Jp(e,t){return Jp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Jp(e,t)}function ln(e,t,n){return t=QA(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QA(e){var t=TF(e,"string");return Pi(t)=="symbol"?t:t+""}function TF(e,t){if(Pi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Pi(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Fr=(function(e){function t(n){var a;return SF(this,t),a=AF(this,t,[n]),ln(a,"pieRef",null),ln(a,"sectorRefs",[]),ln(a,"id",Ms("recharts-pie-")),ln(a,"handleAnimationEnd",function(){var s=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),De(s)&&s()}),ln(a,"handleAnimationStart",function(){var s=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),De(s)&&s()}),a.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},a}return OF(t,e),kF(t,[{key:"isActiveIndex",value:function(a){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(a)!==-1:a===s}},{key:"hasActiveIndex",value:function(){var a=this.props.activeIndex;return Array.isArray(a)?a.length!==0:a||a===0}},{key:"renderLabels",value:function(a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,d=i.valueKey,u=ke(this.props,!1),h=ke(o,!1),f=ke(l,!1),m=o&&o.offsetRadius||20,g=a.map(function(p,x){var b=(p.startAngle+p.endAngle)/2,y=At(p.cx,p.cy,p.outerRadius+m,b),w=St(St(St(St({},u),p),{},{stroke:"none"},h),{},{index:x,textAnchor:t.getTextAnchor(y.x,p.cx)},y),S=St(St(St(St({},u),p),{},{fill:"none",stroke:p.fill},f),{},{index:x,points:[At(p.cx,p.cy,p.outerRadius,b),y]}),v=c;return Ue(c)&&Ue(d)?v="value":Ue(c)&&(v=d),R.createElement(Ye,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(x)},l&&t.renderLabelLineItem(l,S,"line"),t.renderLabelItem(o,w,Gt(p,v)))});return R.createElement(Ye,{className:"recharts-pie-labels"},g)}},{key:"renderSectorsStatically",value:function(a){var s=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return a.map(function(d,u){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&a.length!==1)return null;var h=s.isActiveIndex(u),f=c&&s.hasActiveIndex()?c:null,m=h?o:f,g=St(St({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return R.createElement(Ye,oi({ref:function(x){x&&!s.sectorRefs.includes(x)&&s.sectorRefs.push(x)},tabIndex:-1,className:"recharts-pie-sector"},ks(s.props,d,u),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(u)}),R.createElement(YA,oi({option:m,isActive:h,shapeType:"sector"},g)))})}},{key:"renderSectorsWithAnimation",value:function(){var a=this,s=this.props,i=s.sectors,o=s.isAnimationActive,l=s.animationBegin,c=s.animationDuration,d=s.animationEasing,u=s.animationId,h=this.state,f=h.prevSectors,m=h.prevIsAnimationActive;return R.createElement(kn,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(g){var p=g.t,x=[],b=i&&i[0],y=b.startAngle;return i.forEach(function(w,S){var v=f&&f[S],N=S>0?Yr(w,"paddingAngle",0):0;if(v){var A=rr(v.endAngle-v.startAngle,w.endAngle-w.startAngle),P=St(St({},w),{},{startAngle:y+N,endAngle:y+A(p)+N});x.push(P),y=P.endAngle}else{var T=w.endAngle,M=w.startAngle,E=rr(0,T-M),C=E(p),O=St(St({},w),{},{startAngle:y+N,endAngle:y+C+N});x.push(O),y=O.endAngle}}),R.createElement(Ye,null,a.renderSectorsStatically(x))})}},{key:"attachKeyboardHandlers",value:function(a){var s=this;a.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var a=this.props,s=a.sectors,i=a.isAnimationActive,o=this.state.prevSectors;return i&&s&&s.length&&(!o||!Ps(o,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var a=this,s=this.props,i=s.hide,o=s.sectors,l=s.className,c=s.label,d=s.cx,u=s.cy,h=s.innerRadius,f=s.outerRadius,m=s.isAnimationActive,g=this.state.isAnimationFinished;if(i||!o||!o.length||!he(d)||!he(u)||!he(h)||!he(f))return null;var p=Ve("recharts-pie",l);return R.createElement(Ye,{tabIndex:this.props.rootTabIndex,className:p,ref:function(b){a.pieRef=b}},this.renderSectors(),c&&this.renderLabels(o),cr.renderCallByParent(this.props,null,!1),(!m||g)&&Sn.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return s.prevIsAnimationActive!==a.isAnimationActive?{prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:[],isAnimationFinished:!0}:a.isAnimationActive&&a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curSectors:a.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:a.sectors!==s.curSectors?{curSectors:a.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(a,s){return a>s?"start":a<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(a,s,i){if(R.isValidElement(a))return R.cloneElement(a,s);if(De(a))return a(s);var o=Ve("recharts-pie-label-line",typeof a!="boolean"?a.className:"");return R.createElement(vs,oi({},s,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(a,s,i){if(R.isValidElement(a))return R.cloneElement(a,s);var o=i;if(De(a)&&(o=a(s),R.isValidElement(o)))return o;var l=Ve("recharts-pie-label-text",typeof a!="boolean"&&!De(a)?a.className:"");return R.createElement(As,oi({},s,{alignmentBaseline:"middle",className:l}),o)}}])})(k.PureComponent);wc=Fr;ln(Fr,"displayName","Pie");ln(Fr,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Ua.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ln(Fr,"parseDeltaAngle",function(e,t){var n=Er(t-e),a=Math.min(Math.abs(t-e),360);return n*a});ln(Fr,"getRealPieData",function(e){var t=e.data,n=e.children,a=ke(e,!1),s=Xr(n,sa);return t&&t.length?t.map(function(i,o){return St(St(St({payload:i},a),i),s&&s[o]&&s[o].props)}):s&&s.length?s.map(function(i){return St(St({},a),i.props)}):[]});ln(Fr,"parseCoordinateOfPie",function(e,t){var n=t.top,a=t.left,s=t.width,i=t.height,o=DA(s,i),l=a+Dr(e.cx,s,s/2),c=n+Dr(e.cy,i,i/2),d=Dr(e.innerRadius,o,0),u=Dr(e.outerRadius,o,o*.8),h=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:u,maxRadius:h}});ln(Fr,"getComposedData",function(e){var t=e.item,n=e.offset,a=t.type.defaultProps!==void 0?St(St({},t.type.defaultProps),t.props):t.props,s=wc.getRealPieData(a);if(!s||!s.length)return null;var i=a.cornerRadius,o=a.startAngle,l=a.endAngle,c=a.paddingAngle,d=a.dataKey,u=a.nameKey,h=a.valueKey,f=a.tooltipType,m=Math.abs(a.minAngle),g=wc.parseCoordinateOfPie(a,n),p=wc.parseDeltaAngle(o,l),x=Math.abs(p),b=d;Ue(d)&&Ue(h)?(Nn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b="value"):Ue(d)&&(Nn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b=h);var y=s.filter(function(P){return Gt(P,b,0)!==0}).length,w=(x>=360?y:y-1)*c,S=x-y*m-w,v=s.reduce(function(P,T){var M=Gt(T,b,0);return P+(he(M)?M:0)},0),N;if(v>0){var A;N=s.map(function(P,T){var M=Gt(P,b,0),E=Gt(P,u,T),C=(he(M)?M:0)/v,O;T?O=A.endAngle+Er(p)*c*(M!==0?1:0):O=o;var _=O+Er(p)*((M!==0?m:0)+C*S),D=(O+_)/2,L=(g.innerRadius+g.outerRadius)/2,V=[{name:E,value:M,payload:P,dataKey:b,type:f}],X=At(g.cx,g.cy,L,D);return A=St(St(St({percent:C,cornerRadius:i,name:E,tooltipPayload:V,midAngle:D,middleRadius:L,tooltipPosition:X},P),g),{},{value:Gt(P,b),startAngle:O,endAngle:_,payload:P,paddingAngle:Er(p)*c}),A})}return St(St({},g),{},{sectors:N,data:s})});var rx,C1;function _F(){if(C1)return rx;C1=1;var e=Math.ceil,t=Math.max;function n(a,s,i,o){for(var l=-1,c=t(e((s-a)/(i||1)),0),d=Array(c);c--;)d[o?c:++l]=a,a+=i;return d}return rx=n,rx}var nx,O1;function JA(){if(O1)return nx;O1=1;var e=v2(),t=1/0,n=17976931348623157e292;function a(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var i=s<0?-1:1;return i*n}return s===s?s:0}return nx=a,nx}var ax,T1;function EF(){if(T1)return ax;T1=1;var e=_F(),t=Vd(),n=JA();function a(s){return function(i,o,l){return l&&typeof l!="number"&&t(i,o,l)&&(o=l=void 0),i=n(i),o===void 0?(o=i,i=0):o=n(o),l=l===void 0?i<o?1:-1:n(l),e(i,o,l,s)}}return ax=a,ax}var sx,_1;function DF(){if(_1)return sx;_1=1;var e=EF(),t=e();return sx=t,sx}var MF=DF();const ud=Pt(MF);function pl(e){"@babel/helpers - typeof";return pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pl(e)}function E1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function D1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?E1(Object(n),!0).forEach(function(a){ZA(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E1(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function ZA(e,t,n){return t=IF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IF(e){var t=RF(e,"string");return pl(t)=="symbol"?t:t+""}function RF(e,t){if(pl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(pl(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $F=["Webkit","Moz","O","ms"],LF=function(t,n){var a=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=$F.reduce(function(i,o){return D1(D1({},i),{},ZA({},o+a,n))},{});return s[t]=n,s};function Ci(e){"@babel/helpers - typeof";return Ci=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ci(e)}function hd(){return hd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},hd.apply(this,arguments)}function M1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function ix(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?M1(Object(n),!0).forEach(function(a){Wr(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M1(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function BF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I1(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,t4(a.key),a)}}function FF(e,t,n){return t&&I1(e.prototype,t),n&&I1(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function qF(e,t,n){return t=fd(t),UF(e,e4()?Reflect.construct(t,n||[],fd(e).constructor):t.apply(e,n))}function UF(e,t){if(t&&(Ci(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zF(e)}function zF(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e4=function(){return!!e})()}function fd(e){return fd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fd(e)}function VF(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zp(e,t)}function Zp(e,t){return Zp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Zp(e,t)}function Wr(e,t,n){return t=t4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t4(e){var t=WF(e,"string");return Ci(t)=="symbol"?t:t+""}function WF(e,t){if(Ci(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Ci(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var HF=function(t){var n=t.data,a=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,d=_o().domain(ud(0,c)).range([i,i+o-l]),u=d.domain().map(function(h){return d(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(a),endX:d(s),scale:d,scaleValues:u}},R1=function(t){return t.changedTouches&&!!t.changedTouches.length},Oi=(function(e){function t(n){var a;return BF(this,t),a=qF(this,t,[n]),Wr(a,"handleDrag",function(s){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(s):a.state.isSlideMoving&&a.handleSlideDrag(s)}),Wr(a,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&a.handleDrag(s.changedTouches[0])}),Wr(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=a.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o==null||o({endIndex:i,startIndex:l})}),a.detachDragEndListener()}),Wr(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),Wr(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),Wr(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),Wr(a,"handleSlideDragStart",function(s){var i=R1(s)?s.changedTouches[0]:s;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return VF(t,e),FF(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var s=a.startX,i=a.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,u=d.length-1,h=Math.min(s,i),f=Math.max(s,i),m=t.getIndexInRange(o,h),g=t.getIndexInRange(o,f);return{startIndex:m-m%c,endIndex:g===u?u:g-g%c}}},{key:"getTextOfTick",value:function(a){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,c=Gt(i[a],l,a);return De(o)?o(c,a):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,c=this.props,d=c.x,u=c.width,h=c.travellerWidth,f=c.startIndex,m=c.endIndex,g=c.onChange,p=a.pageX-i;p>0?p=Math.min(p,d+u-h-l,d+u-h-o):p<0&&(p=Math.max(p,d-o,d-l));var x=this.getIndex({startX:o+p,endX:l+p});(x.startIndex!==f||x.endIndex!==m)&&g&&g(x),this.setState({startX:o+p,endX:l+p,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,s){var i=R1(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,c=s.startX,d=this.state[o],u=this.props,h=u.x,f=u.width,m=u.travellerWidth,g=u.onChange,p=u.gap,x=u.data,b={startX:this.state.startX,endX:this.state.endX},y=a.pageX-i;y>0?y=Math.min(y,h+f-m-d):y<0&&(y=Math.max(y,h-d)),b[o]=d+y;var w=this.getIndex(b),S=w.startIndex,v=w.endIndex,N=function(){var P=x.length-1;return o==="startX"&&(l>c?S%p===0:v%p===0)||l<c&&v===P||o==="endX"&&(l>c?v%p===0:S%p===0)||l>c&&v===P};this.setState(Wr(Wr({},o,d+y),"brushMoveStartX",a.pageX),function(){g&&N()&&g(w)})}},{key:"handleTravellerMoveKeyboard",value:function(a,s){var i=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,u=this.state[s],h=l.indexOf(u);if(h!==-1){var f=h+a;if(!(f===-1||f>=l.length)){var m=l[f];s==="startX"&&m>=d||s==="endX"&&m<=c||this.setState(Wr({},s,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,c=a.fill,d=a.stroke;return R.createElement("rect",{stroke:d,fill:c,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,c=a.data,d=a.children,u=a.padding,h=k.Children.only(d);return h?R.cloneElement(h,{x:s,y:i,width:o,height:l,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(a,s){var i,o,l=this,c=this.props,d=c.y,u=c.travellerWidth,h=c.height,f=c.traveller,m=c.ariaLabel,g=c.data,p=c.startIndex,x=c.endIndex,b=Math.max(a,this.props.x),y=ix(ix({},ke(this.props,!1)),{},{x:b,y:d,width:u,height:h}),w=m||"Min value: ".concat((i=g[p])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=g[x])===null||o===void 0?void 0:o.name);return R.createElement(Ye,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(v){["ArrowLeft","ArrowRight"].includes(v.key)&&(v.preventDefault(),v.stopPropagation(),l.handleTravellerMoveKeyboard(v.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(f,y))}},{key:"renderSlide",value:function(a,s){var i=this.props,o=i.y,l=i.height,c=i.stroke,d=i.travellerWidth,u=Math.min(a,s)+d,h=Math.max(Math.abs(s-a)-d,0);return R.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:o,width:h,height:l})}},{key:"renderText",value:function(){var a=this.props,s=a.startIndex,i=a.endIndex,o=a.y,l=a.height,c=a.travellerWidth,d=a.stroke,u=this.state,h=u.startX,f=u.endX,m=5,g={pointerEvents:"none",fill:d};return R.createElement(Ye,{className:"recharts-brush-texts"},R.createElement(As,hd({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,f)-m,y:o+l/2},g),this.getTextOfTick(s)),R.createElement(As,hd({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,f)+c+m,y:o+l/2},g),this.getTextOfTick(i)))}},{key:"render",value:function(){var a=this.props,s=a.data,i=a.className,o=a.children,l=a.x,c=a.y,d=a.width,u=a.height,h=a.alwaysShowText,f=this.state,m=f.startX,g=f.endX,p=f.isTextActive,x=f.isSlideMoving,b=f.isTravellerMoving,y=f.isTravellerFocused;if(!s||!s.length||!he(l)||!he(c)||!he(d)||!he(u)||d<=0||u<=0)return null;var w=Ve("recharts-brush",i),S=R.Children.count(o)===1,v=LF("userSelect","none");return R.createElement(Ye,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:v},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(m,g),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(g,"endX"),(p||x||b||y||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var s=a.x,i=a.y,o=a.width,l=a.height,c=a.stroke,d=Math.floor(i+l/2)-1;return R.createElement(R.Fragment,null,R.createElement("rect",{x:s,y:i,width:o,height:l,fill:c,stroke:"none"}),R.createElement("line",{x1:s+1,y1:d,x2:s+o-1,y2:d,fill:"none",stroke:"#fff"}),R.createElement("line",{x1:s+1,y1:d+2,x2:s+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,s){var i;return R.isValidElement(a)?i=R.cloneElement(a,s):De(a)?i=a(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(a,s){var i=a.data,o=a.width,l=a.x,c=a.travellerWidth,d=a.updateId,u=a.startIndex,h=a.endIndex;if(i!==s.prevData||d!==s.prevUpdateId)return ix({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},i&&i.length?HF({data:i,width:o,x:l,travellerWidth:c,startIndex:u,endIndex:h}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+o-c]);var f=s.scale.domain().map(function(m){return s.scale(m)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:s.scale(a.startIndex),endX:s.scale(a.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(a,s){for(var i=a.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);a[c]>s?l=c:o=c}return s>=a[l]?l:o}}])})(k.PureComponent);Wr(Oi,"displayName","Brush");Wr(Oi,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var ox,$1;function GF(){if($1)return ox;$1=1;var e=H0();function t(n,a){var s;return e(n,function(i,o,l){return s=a(i,o,l),!s}),!!s}return ox=t,ox}var lx,L1;function KF(){if(L1)return lx;L1=1;var e=Jk(),t=Vn(),n=GF(),a=Qr(),s=Vd();function i(o,l,c){var d=a(o)?e:n;return c&&s(o,l,c)&&(l=void 0),d(o,t(l,3))}return lx=i,lx}var YF=KF();const XF=Pt(YF);var qn=function(t,n){var a=t.alwaysShow,s=t.ifOverflow;return a&&(s="extendDomain"),s===n},cx,B1;function QF(){if(B1)return cx;B1=1;var e=x2();function t(n,a,s){a=="__proto__"&&e?e(n,a,{configurable:!0,enumerable:!0,value:s,writable:!0}):n[a]=s}return cx=t,cx}var dx,F1;function JF(){if(F1)return dx;F1=1;var e=QF(),t=f2(),n=Vn();function a(s,i){var o={};return i=n(i,3),t(s,function(l,c,d){e(o,c,i(l,c,d))}),o}return dx=a,dx}var ZF=JF();const eq=Pt(ZF);var ux,q1;function tq(){if(q1)return ux;q1=1;function e(t,n){for(var a=-1,s=t==null?0:t.length;++a<s;)if(!n(t[a],a,t))return!1;return!0}return ux=e,ux}var hx,U1;function rq(){if(U1)return hx;U1=1;var e=H0();function t(n,a){var s=!0;return e(n,function(i,o,l){return s=!!a(i,o,l),s}),s}return hx=t,hx}var fx,z1;function nq(){if(z1)return fx;z1=1;var e=tq(),t=rq(),n=Vn(),a=Qr(),s=Vd();function i(o,l,c){var d=a(o)?e:t;return c&&s(o,l,c)&&(l=void 0),d(o,n(l,3))}return fx=i,fx}var aq=nq();const r4=Pt(aq);var sq=["x","y"];function gl(e){"@babel/helpers - typeof";return gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gl(e)}function e0(){return e0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},e0.apply(this,arguments)}function V1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function bo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?V1(Object(n),!0).forEach(function(a){iq(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V1(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function iq(e,t,n){return t=oq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oq(e){var t=lq(e,"string");return gl(t)=="symbol"?t:t+""}function lq(e,t){if(gl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(gl(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cq(e,t){if(e==null)return{};var n=dq(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function dq(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function uq(e,t){var n=e.x,a=e.y,s=cq(e,sq),i="".concat(n),o=parseInt(i,10),l="".concat(a),c=parseInt(l,10),d="".concat(t.height||s.height),u=parseInt(d,10),h="".concat(t.width||s.width),f=parseInt(h,10);return bo(bo(bo(bo(bo({},t),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:u,width:f,name:t.name,radius:t.radius})}function W1(e){return R.createElement(YA,e0({shapeType:"rectangle",propTransformer:uq,activeClassName:"recharts-active-bar"},e))}var hq=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,s){if(typeof t=="number")return t;var i=he(a)||V5(a);return i?t(a,s):(i||Os(),n)}},fq=["value","background"],n4;function Ti(e){"@babel/helpers - typeof";return Ti=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ti(e)}function mq(e,t){if(e==null)return{};var n=xq(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function xq(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function md(){return md=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},md.apply(this,arguments)}function H1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?H1(Object(n),!0).forEach(function(a){Ia(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H1(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function pq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G1(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,s4(a.key),a)}}function gq(e,t,n){return t&&G1(e.prototype,t),n&&G1(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function yq(e,t,n){return t=xd(t),bq(e,a4()?Reflect.construct(t,n||[],xd(e).constructor):t.apply(e,n))}function bq(e,t){if(t&&(Ti(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vq(e)}function vq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a4=function(){return!!e})()}function xd(e){return xd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xd(e)}function wq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&t0(e,t)}function t0(e,t){return t0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},t0(e,t)}function Ia(e,t,n){return t=s4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s4(e){var t=jq(e,"string");return Ti(t)=="symbol"?t:t+""}function jq(e,t){if(Ti(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Ti(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var _r=(function(e){function t(){var n;pq(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=yq(this,t,[].concat(s)),Ia(n,"state",{isAnimationFinished:!1}),Ia(n,"id",Ms("recharts-bar-")),Ia(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),Ia(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return wq(t,e),gq(t,[{key:"renderRectanglesStatically",value:function(a){var s=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,d=i.activeBar,u=ke(this.props,!1);return a&&a.map(function(h,f){var m=f===c,g=m?d:o,p=Xt(Xt(Xt({},u),h),{},{isActive:m,option:g,index:f,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return R.createElement(Ye,md({className:"recharts-bar-rectangle"},ks(s.props,h,f),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(f)}),R.createElement(W1,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,c=s.animationBegin,d=s.animationDuration,u=s.animationEasing,h=s.animationId,f=this.state.prevData;return R.createElement(kn,{begin:c,duration:d,isActive:l,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var g=m.t,p=i.map(function(x,b){var y=f&&f[b];if(y){var w=rr(y.x,x.x),S=rr(y.y,x.y),v=rr(y.width,x.width),N=rr(y.height,x.height);return Xt(Xt({},x),{},{x:w(g),y:S(g),width:v(g),height:N(g)})}if(o==="horizontal"){var A=rr(0,x.height),P=A(g);return Xt(Xt({},x),{},{y:x.y+x.height-P,height:P})}var T=rr(0,x.width),M=T(g);return Xt(Xt({},x),{},{width:M})});return R.createElement(Ye,null,a.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var a=this.props,s=a.data,i=a.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!Ps(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var a=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,c=ke(this.props.background,!1);return i.map(function(d,u){d.value;var h=d.background,f=mq(d,fq);if(!h)return null;var m=Xt(Xt(Xt(Xt(Xt({},f),{},{fill:"#eee"},h),c),ks(a.props,d,u)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return R.createElement(W1,md({key:"background-bar-".concat(u),option:a.props.background,isActive:u===l},m))})}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,h=Xr(u,Tl);if(!h)return null;var f=d==="vertical"?o[0].height/2:o[0].width/2,m=function(x,b){var y=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:y,errorVal:Gt(x,b)}},g={clipPath:a?"url(#clipPath-".concat(s,")"):null};return R.createElement(Ye,g,h.map(function(p){return R.cloneElement(p,{key:"error-bar-".concat(s,"-").concat(p.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:f,dataPointFormatter:m})}))}},{key:"render",value:function(){var a=this.props,s=a.hide,i=a.data,o=a.className,l=a.xAxis,c=a.yAxis,d=a.left,u=a.top,h=a.width,f=a.height,m=a.isAnimationActive,g=a.background,p=a.id;if(s||!i||!i.length)return null;var x=this.state.isAnimationFinished,b=Ve("recharts-bar",o),y=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,S=y||w,v=Ue(p)?this.id:p;return R.createElement(Ye,{className:b},y||w?R.createElement("defs",null,R.createElement("clipPath",{id:"clipPath-".concat(v)},R.createElement("rect",{x:y?d:d-h/2,y:w?u:u-f/2,width:y?h:h*2,height:w?f:f*2}))):null,R.createElement(Ye,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(v,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,v),(!m||x)&&Sn.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:s.curData}:a.data!==s.curData?{curData:a.data}:null}}])})(k.PureComponent);n4=_r;Ia(_r,"displayName","Bar");Ia(_r,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ua.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Ia(_r,"getComposedData",function(e){var t=e.props,n=e.item,a=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,u=e.dataStartIndex,h=e.displayedData,f=e.offset,m=a$(a,n);if(!m)return null;var g=t.layout,p=n.type.defaultProps,x=p!==void 0?Xt(Xt({},p),n.props):n.props,b=x.dataKey,y=x.children,w=x.minPointSize,S=g==="horizontal"?o:i,v=d?S.scale.domain():null,N=u$({numericAxis:S}),A=Xr(y,sa),P=h.map(function(T,M){var E,C,O,_,D,L;d?E=s$(d[u+M],v):(E=Gt(T,b),Array.isArray(E)||(E=[N,E]));var V=hq(w,n4.defaultProps.minPointSize)(E[1],M);if(g==="horizontal"){var X,W=[o.scale(E[0]),o.scale(E[1])],ce=W[0],de=W[1];C=NN({axis:i,ticks:l,bandSize:s,offset:m.offset,entry:T,index:M}),O=(X=de??ce)!==null&&X!==void 0?X:void 0,_=m.size;var fe=ce-de;if(D=Number.isNaN(fe)?0:fe,L={x:C,y:o.y,width:_,height:o.height},Math.abs(V)>0&&Math.abs(D)<Math.abs(V)){var F=Er(D||V)*(Math.abs(V)-Math.abs(D));O-=F,D+=F}}else{var Te=[i.scale(E[0]),i.scale(E[1])],pe=Te[0],re=Te[1];if(C=pe,O=NN({axis:o,ticks:c,bandSize:s,offset:m.offset,entry:T,index:M}),_=re-pe,D=m.size,L={x:i.x,y:O,width:i.width,height:D},Math.abs(V)>0&&Math.abs(_)<Math.abs(V)){var be=Er(_||V)*(Math.abs(V)-Math.abs(_));_+=be}}return Xt(Xt(Xt({},T),{},{x:C,y:O,width:_,height:D,value:d?E:E[1],payload:T,background:L},A&&A[M]&&A[M].props),{},{tooltipPayload:[_A(n,T)],tooltipPosition:{x:C+_/2,y:O+D/2}})});return Xt({data:P,layout:g},f)});function yl(e){"@babel/helpers - typeof";return yl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yl(e)}function Nq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K1(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,i4(a.key),a)}}function Sq(e,t,n){return t&&K1(e.prototype,t),n&&K1(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Y1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Y1(Object(n),!0).forEach(function(a){ou(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y1(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function ou(e,t,n){return t=i4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i4(e){var t=kq(e,"string");return yl(t)=="symbol"?t:t+""}function kq(e,t){if(yl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(yl(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wg=function(t,n,a,s,i){var o=t.width,l=t.height,c=t.layout,d=t.children,u=Object.keys(n),h={left:a.left,leftMirror:a.left,right:o-a.right,rightMirror:o-a.right,top:a.top,topMirror:a.top,bottom:l-a.bottom,bottomMirror:l-a.bottom},f=!!Hr(d,_r);return u.reduce(function(m,g){var p=n[g],x=p.orientation,b=p.domain,y=p.padding,w=y===void 0?{}:y,S=p.mirror,v=p.reversed,N="".concat(x).concat(S?"Mirror":""),A,P,T,M,E;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var C=b[1]-b[0],O=1/0,_=p.categoricalDomain.sort(G5);if(_.forEach(function(Te,pe){pe>0&&(O=Math.min((Te||0)-(_[pe-1]||0),O))}),Number.isFinite(O)){var D=O/C,L=p.layout==="vertical"?a.height:a.width;if(p.padding==="gap"&&(A=D*L/2),p.padding==="no-gap"){var V=Dr(t.barCategoryGap,D*L),X=D*L/2;A=X-V-(X-V)/L*V}}}s==="xAxis"?P=[a.left+(w.left||0)+(A||0),a.left+a.width-(w.right||0)-(A||0)]:s==="yAxis"?P=c==="horizontal"?[a.top+a.height-(w.bottom||0),a.top+(w.top||0)]:[a.top+(w.top||0)+(A||0),a.top+a.height-(w.bottom||0)-(A||0)]:P=p.range,v&&(P=[P[1],P[0]]);var W=PA(p,i,f),ce=W.scale,de=W.realScaleType;ce.domain(b).range(P),CA(ce);var fe=OA(ce,yn(yn({},p),{},{realScaleType:de}));s==="xAxis"?(E=x==="top"&&!S||x==="bottom"&&S,T=a.left,M=h[N]-E*p.height):s==="yAxis"&&(E=x==="left"&&!S||x==="right"&&S,T=h[N]-E*p.width,M=a.top);var F=yn(yn(yn({},p),fe),{},{realScaleType:de,x:T,y:M,scale:ce,width:s==="xAxis"?a.width:p.width,height:s==="yAxis"?a.height:p.height});return F.bandSize=Zc(F,fe),!p.hide&&s==="xAxis"?h[N]+=(E?-1:1)*F.height:p.hide||(h[N]+=(E?-1:1)*F.width),yn(yn({},m),{},ou({},g,F))},{})},o4=function(t,n){var a=t.x,s=t.y,i=n.x,o=n.y;return{x:Math.min(a,i),y:Math.min(s,o),width:Math.abs(i-a),height:Math.abs(o-s)}},Aq=function(t){var n=t.x1,a=t.y1,s=t.x2,i=t.y2;return o4({x:n,y:a},{x:s,y:i})},l4=(function(){function e(t){Nq(this,e),this.scale=t}return Sq(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,i=a.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var a=this.range(),s=a[0],i=a[a.length-1];return s<=i?n>=s&&n<=i:n>=i&&n<=s}}],[{key:"create",value:function(n){return new e(n)}}])})();ou(l4,"EPS",1e-4);var jg=function(t){var n=Object.keys(t).reduce(function(a,s){return yn(yn({},a),{},ou({},s,l4.create(t[s])))},{});return yn(yn({},n),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return eq(s,function(c,d){return n[d].apply(c,{bandAware:o,position:l})})},isInRange:function(s){return r4(s,function(i,o){return n[o].isInRange(i)})}})};function Pq(e){return(e%180+180)%180}var Cq=function(t){var n=t.width,a=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Pq(s),o=i*Math.PI/180,l=Math.atan(a/n),c=o>l&&o<Math.PI-l?a/Math.sin(o):n/Math.cos(o);return Math.abs(c)},mx,X1;function Oq(){if(X1)return mx;X1=1;var e=Vn(),t=kl(),n=Ud();function a(s){return function(i,o,l){var c=Object(i);if(!t(i)){var d=e(o,3);i=n(i),o=function(h){return d(c[h],h,c)}}var u=s(i,o,l);return u>-1?c[d?i[u]:u]:void 0}}return mx=a,mx}var xx,Q1;function Tq(){if(Q1)return xx;Q1=1;var e=JA();function t(n){var a=e(n),s=a%1;return a===a?s?a-s:a:0}return xx=t,xx}var px,J1;function _q(){if(J1)return px;J1=1;var e=l2(),t=Vn(),n=Tq(),a=Math.max;function s(i,o,l){var c=i==null?0:i.length;if(!c)return-1;var d=l==null?0:n(l);return d<0&&(d=a(c+d,0)),e(i,t(o,3),d)}return px=s,px}var gx,Z1;function Eq(){if(Z1)return gx;Z1=1;var e=Oq(),t=_q(),n=e(t);return gx=n,gx}var Dq=Eq();const Mq=Pt(Dq);var Iq=Sk();const Rq=Pt(Iq);var $q=Rq(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),Ng=k.createContext(void 0),Sg=k.createContext(void 0),c4=k.createContext(void 0),d4=k.createContext({}),u4=k.createContext(void 0),h4=k.createContext(0),f4=k.createContext(0),eS=function(t){var n=t.state,a=n.xAxisMap,s=n.yAxisMap,i=n.offset,o=t.clipPathId,l=t.children,c=t.width,d=t.height,u=$q(i);return R.createElement(Ng.Provider,{value:a},R.createElement(Sg.Provider,{value:s},R.createElement(d4.Provider,{value:i},R.createElement(c4.Provider,{value:u},R.createElement(u4.Provider,{value:o},R.createElement(h4.Provider,{value:d},R.createElement(f4.Provider,{value:c},l)))))))},Lq=function(){return k.useContext(u4)},m4=function(t){var n=k.useContext(Ng);n==null&&Os();var a=n[t];return a==null&&Os(),a},Bq=function(){var t=k.useContext(Ng);return Ta(t)},Fq=function(){var t=k.useContext(Sg),n=Mq(t,function(a){return r4(a.domain,Number.isFinite)});return n||Ta(t)},x4=function(t){var n=k.useContext(Sg);n==null&&Os();var a=n[t];return a==null&&Os(),a},qq=function(){var t=k.useContext(c4);return t},Uq=function(){return k.useContext(d4)},kg=function(){return k.useContext(f4)},Ag=function(){return k.useContext(h4)};function _i(e){"@babel/helpers - typeof";return _i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_i(e)}function zq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vq(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,g4(a.key),a)}}function Wq(e,t,n){return t&&Vq(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hq(e,t,n){return t=pd(t),Gq(e,p4()?Reflect.construct(t,n||[],pd(e).constructor):t.apply(e,n))}function Gq(e,t){if(t&&(_i(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kq(e)}function Kq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p4=function(){return!!e})()}function pd(e){return pd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pd(e)}function Yq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r0(e,t)}function r0(e,t){return r0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},r0(e,t)}function tS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function rS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tS(Object(n),!0).forEach(function(a){Pg(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Pg(e,t,n){return t=g4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g4(e){var t=Xq(e,"string");return _i(t)=="symbol"?t:t+""}function Xq(e,t){if(_i(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(_i(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Qq(e,t){return t8(e)||e8(e,t)||Zq(e,t)||Jq()}function Jq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zq(e,t){if(e){if(typeof e=="string")return nS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nS(e,t)}}function nS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function e8(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function t8(e){if(Array.isArray(e))return e}function n0(){return n0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},n0.apply(this,arguments)}var r8=function(t,n){var a;return R.isValidElement(t)?a=R.cloneElement(t,n):De(t)?a=t(n):a=R.createElement("line",n0({},n,{className:"recharts-reference-line-line"})),a},n8=function(t,n,a,s,i,o,l,c,d){var u=i.x,h=i.y,f=i.width,m=i.height;if(a){var g=d.y,p=t.y.apply(g,{position:o});if(qn(d,"discard")&&!t.y.isInRange(p))return null;var x=[{x:u+f,y:p},{x:u,y:p}];return c==="left"?x.reverse():x}if(n){var b=d.x,y=t.x.apply(b,{position:o});if(qn(d,"discard")&&!t.x.isInRange(y))return null;var w=[{x:y,y:h+m},{x:y,y:h}];return l==="top"?w.reverse():w}if(s){var S=d.segment,v=S.map(function(N){return t.apply(N,{position:o})});return qn(d,"discard")&&XF(v,function(N){return!t.isInRange(N)})?null:v}return null};function a8(e){var t=e.x,n=e.y,a=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,d=Lq(),u=m4(s),h=x4(i),f=qq();if(!d||!f)return null;Nn(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=jg({x:u.scale,y:h.scale}),g=nr(t),p=nr(n),x=a&&a.length===2,b=n8(m,g,p,x,f,e.position,u.orientation,h.orientation,e);if(!b)return null;var y=Qq(b,2),w=y[0],S=w.x,v=w.y,N=y[1],A=N.x,P=N.y,T=qn(e,"hidden")?"url(#".concat(d,")"):void 0,M=rS(rS({clipPath:T},ke(e,!0)),{},{x1:S,y1:v,x2:A,y2:P});return R.createElement(Ye,{className:Ve("recharts-reference-line",l)},r8(o,M),cr.renderCallByParent(e,Aq({x1:S,y1:v,x2:A,y2:P})))}var Cg=(function(e){function t(){return zq(this,t),Hq(this,t,arguments)}return Yq(t,e),Wq(t,[{key:"render",value:function(){return R.createElement(a8,this.props)}}])})(R.Component);Pg(Cg,"displayName","ReferenceLine");Pg(Cg,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function a0(){return a0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},a0.apply(this,arguments)}function Ei(e){"@babel/helpers - typeof";return Ei=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ei(e)}function aS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function sS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aS(Object(n),!0).forEach(function(a){lu(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function s8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i8(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,b4(a.key),a)}}function o8(e,t,n){return t&&i8(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function l8(e,t,n){return t=gd(t),c8(e,y4()?Reflect.construct(t,n||[],gd(e).constructor):t.apply(e,n))}function c8(e,t){if(t&&(Ei(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d8(e)}function d8(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(y4=function(){return!!e})()}function gd(e){return gd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gd(e)}function u8(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s0(e,t)}function s0(e,t){return s0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},s0(e,t)}function lu(e,t,n){return t=b4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b4(e){var t=h8(e,"string");return Ei(t)=="symbol"?t:t+""}function h8(e,t){if(Ei(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Ei(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var f8=function(t){var n=t.x,a=t.y,s=t.xAxis,i=t.yAxis,o=jg({x:s.scale,y:i.scale}),l=o.apply({x:n,y:a},{bandAware:!0});return qn(t,"discard")&&!o.isInRange(l)?null:l},cu=(function(e){function t(){return s8(this,t),l8(this,t,arguments)}return u8(t,e),o8(t,[{key:"render",value:function(){var a=this.props,s=a.x,i=a.y,o=a.r,l=a.alwaysShow,c=a.clipPathId,d=nr(s),u=nr(i);if(Nn(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var h=f8(this.props);if(!h)return null;var f=h.x,m=h.y,g=this.props,p=g.shape,x=g.className,b=qn(this.props,"hidden")?"url(#".concat(c,")"):void 0,y=sS(sS({clipPath:b},ke(this.props,!0)),{},{cx:f,cy:m});return R.createElement(Ye,{className:Ve("recharts-reference-dot",x)},t.renderDot(p,y),cr.renderCallByParent(this.props,{x:f-o,y:m-o,width:2*o,height:2*o}))}}])})(R.Component);lu(cu,"displayName","ReferenceDot");lu(cu,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});lu(cu,"renderDot",function(e,t){var n;return R.isValidElement(e)?n=R.cloneElement(e,t):De(e)?n=e(t):n=R.createElement(_l,a0({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function i0(){return i0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i0.apply(this,arguments)}function Di(e){"@babel/helpers - typeof";return Di=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Di(e)}function iS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function oS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iS(Object(n),!0).forEach(function(a){du(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function m8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x8(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,w4(a.key),a)}}function p8(e,t,n){return t&&x8(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function g8(e,t,n){return t=yd(t),y8(e,v4()?Reflect.construct(t,n||[],yd(e).constructor):t.apply(e,n))}function y8(e,t){if(t&&(Di(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b8(e)}function b8(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v4=function(){return!!e})()}function yd(e){return yd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yd(e)}function v8(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o0(e,t)}function o0(e,t){return o0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},o0(e,t)}function du(e,t,n){return t=w4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w4(e){var t=w8(e,"string");return Di(t)=="symbol"?t:t+""}function w8(e,t){if(Di(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Di(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var j8=function(t,n,a,s,i){var o=i.x1,l=i.x2,c=i.y1,d=i.y2,u=i.xAxis,h=i.yAxis;if(!u||!h)return null;var f=jg({x:u.scale,y:h.scale}),m={x:t?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:a?f.y.apply(c,{position:"start"}):f.y.rangeMin},g={x:n?f.x.apply(l,{position:"end"}):f.x.rangeMax,y:s?f.y.apply(d,{position:"end"}):f.y.rangeMax};return qn(i,"discard")&&(!f.isInRange(m)||!f.isInRange(g))?null:o4(m,g)},uu=(function(e){function t(){return m8(this,t),g8(this,t,arguments)}return v8(t,e),p8(t,[{key:"render",value:function(){var a=this.props,s=a.x1,i=a.x2,o=a.y1,l=a.y2,c=a.className,d=a.alwaysShow,u=a.clipPathId;Nn(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=nr(s),f=nr(i),m=nr(o),g=nr(l),p=this.props.shape;if(!h&&!f&&!m&&!g&&!p)return null;var x=j8(h,f,m,g,this.props);if(!x&&!p)return null;var b=qn(this.props,"hidden")?"url(#".concat(u,")"):void 0;return R.createElement(Ye,{className:Ve("recharts-reference-area",c)},t.renderRect(p,oS(oS({clipPath:b},ke(this.props,!0)),x)),cr.renderCallByParent(this.props,x))}}])})(R.Component);du(uu,"displayName","ReferenceArea");du(uu,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});du(uu,"renderRect",function(e,t){var n;return R.isValidElement(e)?n=R.cloneElement(e,t):De(e)?n=e(t):n=R.createElement(vg,i0({},t,{className:"recharts-reference-area-rect"})),n});function j4(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var a=[],s=0;s<e.length;s+=t)a.push(e[s]);return a}function N8(e,t,n){var a={width:e.width+t.width,height:e.height+t.height};return Cq(a,n)}function S8(e,t,n){var a=n==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:a?s:i,end:a?s+o:i+l}:{start:a?s+o:i+l,end:a?s:i}}function bd(e,t,n,a,s){if(e*t<e*a||e*t>e*s)return!1;var i=n();return e*(t-e*i/2-a)>=0&&e*(t+e*i/2-s)<=0}function k8(e,t){return j4(e,t+1)}function A8(e,t,n,a,s){for(var i=(a||[]).slice(),o=t.start,l=t.end,c=0,d=1,u=o,h=function(){var g=a==null?void 0:a[c];if(g===void 0)return{v:j4(a,d)};var p=c,x,b=function(){return x===void 0&&(x=n(g,p)),x},y=g.coordinate,w=c===0||bd(e,y,b,u,l);w||(c=0,u=o,d+=1),w&&(u=y+e*(b()/2+s),c+=d)},f;d<=i.length;)if(f=h(),f)return f.v;return[]}function bl(e){"@babel/helpers - typeof";return bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bl(e)}function lS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Nr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lS(Object(n),!0).forEach(function(a){P8(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function P8(e,t,n){return t=C8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C8(e){var t=O8(e,"string");return bl(t)=="symbol"?t:t+""}function O8(e,t){if(bl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(bl(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function T8(e,t,n,a,s){for(var i=(a||[]).slice(),o=i.length,l=t.start,c=t.end,d=function(f){var m=i[f],g,p=function(){return g===void 0&&(g=n(m,f)),g};if(f===o-1){var x=e*(m.coordinate+e*p()/2-c);i[f]=m=Nr(Nr({},m),{},{tickCoord:x>0?m.coordinate-x*e:m.coordinate})}else i[f]=m=Nr(Nr({},m),{},{tickCoord:m.coordinate});var b=bd(e,m.tickCoord,p,l,c);b&&(c=m.tickCoord-e*(p()/2+s),i[f]=Nr(Nr({},m),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return i}function _8(e,t,n,a,s,i){var o=(a||[]).slice(),l=o.length,c=t.start,d=t.end;if(i){var u=a[l-1],h=n(u,l-1),f=e*(u.coordinate+e*h/2-d);o[l-1]=u=Nr(Nr({},u),{},{tickCoord:f>0?u.coordinate-f*e:u.coordinate});var m=bd(e,u.tickCoord,function(){return h},c,d);m&&(d=u.tickCoord-e*(h/2+s),o[l-1]=Nr(Nr({},u),{},{isShow:!0}))}for(var g=i?l-1:l,p=function(y){var w=o[y],S,v=function(){return S===void 0&&(S=n(w,y)),S};if(y===0){var N=e*(w.coordinate-e*v()/2-c);o[y]=w=Nr(Nr({},w),{},{tickCoord:N<0?w.coordinate-N*e:w.coordinate})}else o[y]=w=Nr(Nr({},w),{},{tickCoord:w.coordinate});var A=bd(e,w.tickCoord,v,c,d);A&&(c=w.tickCoord+e*(v()/2+s),o[y]=Nr(Nr({},w),{},{isShow:!0}))},x=0;x<g;x++)p(x);return o}function Og(e,t,n){var a=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,d=e.tickFormatter,u=e.unit,h=e.angle;if(!s||!s.length||!a)return[];if(he(c)||Ua.isSsr)return k8(s,typeof c=="number"&&he(c)?c:0);var f=[],m=l==="top"||l==="bottom"?"width":"height",g=u&&m==="width"?To(u,{fontSize:t,letterSpacing:n}):{width:0,height:0},p=function(w,S){var v=De(d)?d(w.value,S):w.value;return m==="width"?N8(To(v,{fontSize:t,letterSpacing:n}),g,h):To(v,{fontSize:t,letterSpacing:n})[m]},x=s.length>=2?Er(s[1].coordinate-s[0].coordinate):1,b=S8(i,x,m);return c==="equidistantPreserveStart"?A8(x,b,p,s,o):(c==="preserveStart"||c==="preserveStartEnd"?f=_8(x,b,p,s,o,c==="preserveStartEnd"):f=T8(x,b,p,s,o),f.filter(function(y){return y.isShow}))}var E8=["viewBox"],D8=["viewBox"],M8=["ticks"];function Mi(e){"@babel/helpers - typeof";return Mi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mi(e)}function li(){return li=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},li.apply(this,arguments)}function cS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function er(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cS(Object(n),!0).forEach(function(a){Tg(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function yx(e,t){if(e==null)return{};var n=I8(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function I8(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function R8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dS(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,S4(a.key),a)}}function $8(e,t,n){return t&&dS(e.prototype,t),n&&dS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function L8(e,t,n){return t=vd(t),B8(e,N4()?Reflect.construct(t,n||[],vd(e).constructor):t.apply(e,n))}function B8(e,t){if(t&&(Mi(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F8(e)}function F8(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(N4=function(){return!!e})()}function vd(e){return vd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vd(e)}function q8(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l0(e,t)}function l0(e,t){return l0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},l0(e,t)}function Tg(e,t,n){return t=S4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S4(e){var t=U8(e,"string");return Mi(t)=="symbol"?t:t+""}function U8(e,t){if(Mi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Mi(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Xi=(function(e){function t(n){var a;return R8(this,t),a=L8(this,t,[n]),a.state={fontSize:"",letterSpacing:""},a}return q8(t,e),$8(t,[{key:"shouldComponentUpdate",value:function(a,s){var i=a.viewBox,o=yx(a,E8),l=this.props,c=l.viewBox,d=yx(l,D8);return!hi(i,c)||!hi(o,d)||!hi(s,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var s=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var s=this.props,i=s.x,o=s.y,l=s.width,c=s.height,d=s.orientation,u=s.tickSize,h=s.mirror,f=s.tickMargin,m,g,p,x,b,y,w=h?-1:1,S=a.tickSize||u,v=he(a.tickCoord)?a.tickCoord:a.coordinate;switch(d){case"top":m=g=a.coordinate,x=o+ +!h*c,p=x-w*S,y=p-w*f,b=v;break;case"left":p=x=a.coordinate,g=i+ +!h*l,m=g-w*S,b=m-w*f,y=v;break;case"right":p=x=a.coordinate,g=i+ +h*l,m=g+w*S,b=m+w*f,y=v;break;default:m=g=a.coordinate,x=o+ +h*c,p=x+w*S,y=p+w*f,b=v;break}return{line:{x1:m,y1:p,x2:g,y2:x},tick:{x:b,y}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,c=a.orientation,d=a.mirror,u=a.axisLine,h=er(er(er({},ke(this.props,!1)),ke(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!d||c==="bottom"&&d);h=er(er({},h),{},{x1:s,y1:i+f*l,x2:s+o,y2:i+f*l})}else{var m=+(c==="left"&&!d||c==="right"&&d);h=er(er({},h),{},{x1:s+m*o,y1:i,x2:s+m*o,y2:i+l})}return R.createElement("line",li({},h,{className:Ve("recharts-cartesian-axis-line",Yr(u,"className"))}))}},{key:"renderTicks",value:function(a,s,i){var o=this,l=this.props,c=l.tickLine,d=l.stroke,u=l.tick,h=l.tickFormatter,f=l.unit,m=Og(er(er({},this.props),{},{ticks:a}),s,i),g=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),x=ke(this.props,!1),b=ke(u,!1),y=er(er({},x),{},{fill:"none"},ke(c,!1)),w=m.map(function(S,v){var N=o.getTickLineCoord(S),A=N.line,P=N.tick,T=er(er(er(er({textAnchor:g,verticalAnchor:p},x),{},{stroke:"none",fill:d},b),P),{},{index:v,payload:S,visibleTicksCount:m.length,tickFormatter:h});return R.createElement(Ye,li({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},ks(o.props,S,v)),c&&R.createElement("line",li({},y,A,{className:Ve("recharts-cartesian-axis-tick-line",Yr(c,"className"))})),u&&t.renderTickItem(u,T,"".concat(De(h)?h(S.value,v):S.value).concat(f||"")))});return R.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var a=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,c=s.ticksGenerator,d=s.className,u=s.hide;if(u)return null;var h=this.props,f=h.ticks,m=yx(h,M8),g=f;return De(c)&&(g=f&&f.length>0?c(this.props):c(m)),o<=0||l<=0||!g||!g.length?null:R.createElement(Ye,{className:Ve("recharts-cartesian-axis",d),ref:function(x){a.layerReference=x}},i&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),cr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,s,i){var o,l=Ve(s.className,"recharts-cartesian-axis-tick-value");return R.isValidElement(a)?o=R.cloneElement(a,er(er({},s),{},{className:l})):De(a)?o=a(er(er({},s),{},{className:l})):o=R.createElement(As,li({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(k.Component);Tg(Xi,"displayName","CartesianAxis");Tg(Xi,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var z8=["x1","y1","x2","y2","key"],V8=["offset"];function Ts(e){"@babel/helpers - typeof";return Ts=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ts(e)}function uS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Sr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uS(Object(n),!0).forEach(function(a){W8(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function W8(e,t,n){return t=H8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H8(e){var t=G8(e,"string");return Ts(t)=="symbol"?t:t+""}function G8(e,t){if(Ts(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Ts(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xs(){return xs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},xs.apply(this,arguments)}function hS(e,t){if(e==null)return{};var n=K8(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function K8(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}var Y8=function(t){var n=t.fill;if(!n||n==="none")return null;var a=t.fillOpacity,s=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return R.createElement("rect",{x:s,y:i,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function k4(e,t){var n;if(R.isValidElement(e))n=R.cloneElement(e,t);else if(De(e))n=e(t);else{var a=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,c=hS(t,z8),d=ke(c,!1);d.offset;var u=hS(d,V8);n=R.createElement("line",xs({},u,{x1:a,y1:s,x2:i,y2:o,fill:"none",key:l}))}return n}function X8(e){var t=e.x,n=e.width,a=e.horizontal,s=a===void 0?!0:a,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var d=Sr(Sr({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return k4(s,d)});return R.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function Q8(e){var t=e.y,n=e.height,a=e.vertical,s=a===void 0?!0:a,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var d=Sr(Sr({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return k4(s,d)});return R.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function J8(e){var t=e.horizontalFill,n=e.fillOpacity,a=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var u=l.map(function(f){return Math.round(f+s-s)}).sort(function(f,m){return f-m});s!==u[0]&&u.unshift(0);var h=u.map(function(f,m){var g=!u[m+1],p=g?s+o-f:u[m+1]-f;if(p<=0)return null;var x=m%t.length;return R.createElement("rect",{key:"react-".concat(m),y:f,x:a,height:p,width:i,stroke:"none",fill:t[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return R.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function Z8(e){var t=e.vertical,n=t===void 0?!0:t,a=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,d=e.verticalPoints;if(!n||!a||!a.length)return null;var u=d.map(function(f){return Math.round(f+i-i)}).sort(function(f,m){return f-m});i!==u[0]&&u.unshift(0);var h=u.map(function(f,m){var g=!u[m+1],p=g?i+l-f:u[m+1]-f;if(p<=0)return null;var x=m%a.length;return R.createElement("rect",{key:"react-".concat(m),x:f,y:o,width:p,height:c,stroke:"none",fill:a[x],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return R.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var eU=function(t,n){var a=t.xAxis,s=t.width,i=t.height,o=t.offset;return AA(Og(Sr(Sr(Sr({},Xi.defaultProps),a),{},{ticks:ca(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,n)},tU=function(t,n){var a=t.yAxis,s=t.width,i=t.height,o=t.offset;return AA(Og(Sr(Sr(Sr({},Xi.defaultProps),a),{},{ticks:ca(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,n)},Zs={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Br(e){var t,n,a,s,i,o,l=kg(),c=Ag(),d=Uq(),u=Sr(Sr({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Zs.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Zs.fill,horizontal:(a=e.horizontal)!==null&&a!==void 0?a:Zs.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:Zs.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Zs.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Zs.verticalFill,x:he(e.x)?e.x:d.left,y:he(e.y)?e.y:d.top,width:he(e.width)?e.width:d.width,height:he(e.height)?e.height:d.height}),h=u.x,f=u.y,m=u.width,g=u.height,p=u.syncWithTicks,x=u.horizontalValues,b=u.verticalValues,y=Bq(),w=Fq();if(!he(m)||m<=0||!he(g)||g<=0||!he(h)||h!==+h||!he(f)||f!==+f)return null;var S=u.verticalCoordinatesGenerator||eU,v=u.horizontalCoordinatesGenerator||tU,N=u.horizontalPoints,A=u.verticalPoints;if((!N||!N.length)&&De(v)){var P=x&&x.length,T=v({yAxis:w?Sr(Sr({},w),{},{ticks:P?x:w.ticks}):void 0,width:l,height:c,offset:d},P?!0:p);Nn(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Ts(T),"]")),Array.isArray(T)&&(N=T)}if((!A||!A.length)&&De(S)){var M=b&&b.length,E=S({xAxis:y?Sr(Sr({},y),{},{ticks:M?b:y.ticks}):void 0,width:l,height:c,offset:d},M?!0:p);Nn(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Ts(E),"]")),Array.isArray(E)&&(A=E)}return R.createElement("g",{className:"recharts-cartesian-grid"},R.createElement(Y8,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),R.createElement(X8,xs({},u,{offset:d,horizontalPoints:N,xAxis:y,yAxis:w})),R.createElement(Q8,xs({},u,{offset:d,verticalPoints:A,xAxis:y,yAxis:w})),R.createElement(J8,xs({},u,{horizontalPoints:N})),R.createElement(Z8,xs({},u,{verticalPoints:A})))}Br.displayName="CartesianGrid";var rU=["type","layout","connectNulls","ref"],nU=["key"];function Ii(e){"@babel/helpers - typeof";return Ii=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ii(e)}function fS(e,t){if(e==null)return{};var n=aU(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function aU(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function Ro(){return Ro=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ro.apply(this,arguments)}function mS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Vr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mS(Object(n),!0).forEach(function(a){bn(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function ei(e){return lU(e)||oU(e)||iU(e)||sU()}function sU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iU(e,t){if(e){if(typeof e=="string")return c0(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c0(e,t)}}function oU(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lU(e){if(Array.isArray(e))return c0(e)}function c0(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function cU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xS(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,P4(a.key),a)}}function dU(e,t,n){return t&&xS(e.prototype,t),n&&xS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function uU(e,t,n){return t=wd(t),hU(e,A4()?Reflect.construct(t,n||[],wd(e).constructor):t.apply(e,n))}function hU(e,t){if(t&&(Ii(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fU(e)}function fU(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A4=function(){return!!e})()}function wd(e){return wd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wd(e)}function mU(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d0(e,t)}function d0(e,t){return d0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},d0(e,t)}function bn(e,t,n){return t=P4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P4(e){var t=xU(e,"string");return Ii(t)=="symbol"?t:t+""}function xU(e,t){if(Ii(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Ii(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ws=(function(e){function t(){var n;cU(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=uU(this,t,[].concat(s)),bn(n,"state",{isAnimationFinished:!0,totalLength:0}),bn(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),bn(n,"getStrokeDasharray",function(o,l,c){var d=c.reduce(function(b,y){return b+y});if(!d)return n.generateSimpleStrokeDasharray(l,o);for(var u=Math.floor(o/d),h=o%d,f=l-o,m=[],g=0,p=0;g<c.length;p+=c[g],++g)if(p+c[g]>h){m=[].concat(ei(c.slice(0,g)),[h-p]);break}var x=m.length%2===0?[0,f]:[f];return[].concat(ei(t.repeat(c,u)),ei(m),x).map(function(b){return"".concat(b,"px")}).join(", ")}),bn(n,"id",Ms("recharts-line-")),bn(n,"pathRef",function(o){n.mainCurve=o}),bn(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),bn(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return mU(t,e),dU(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();a!==this.state.totalLength&&this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,h=Xr(u,Tl);if(!h)return null;var f=function(p,x){return{x:p.x,y:p.y,value:p.value,errorVal:Gt(p.payload,x)}},m={clipPath:a?"url(#clipPath-".concat(s,")"):null};return R.createElement(Ye,m,h.map(function(g){return R.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,dataPointFormatter:f})}))}},{key:"renderDots",value:function(a,s,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,u=l.dataKey,h=ke(this.props,!1),f=ke(c,!0),m=d.map(function(p,x){var b=Vr(Vr(Vr({key:"dot-".concat(x),r:3},h),f),{},{index:x,cx:p.x,cy:p.y,value:p.value,dataKey:u,payload:p.payload,points:d});return t.renderDotItem(c,b)}),g={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return R.createElement(Ye,Ro({className:"recharts-line-dots",key:"dots"},g),m)}},{key:"renderCurveStatically",value:function(a,s,i,o){var l=this.props,c=l.type,d=l.layout,u=l.connectNulls;l.ref;var h=fS(l,rU),f=Vr(Vr(Vr({},ke(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(i,")"):null,points:a},o),{},{type:c,layout:d,connectNulls:u});return R.createElement(vs,Ro({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,s){var i=this,o=this.props,l=o.points,c=o.strokeDasharray,d=o.isAnimationActive,u=o.animationBegin,h=o.animationDuration,f=o.animationEasing,m=o.animationId,g=o.animateNewValues,p=o.width,x=o.height,b=this.state,y=b.prevPoints,w=b.totalLength;return R.createElement(kn,{begin:u,duration:h,isActive:d,easing:f,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var v=S.t;if(y){var N=y.length/l.length,A=l.map(function(C,O){var _=Math.floor(O*N);if(y[_]){var D=y[_],L=rr(D.x,C.x),V=rr(D.y,C.y);return Vr(Vr({},C),{},{x:L(v),y:V(v)})}if(g){var X=rr(p*2,C.x),W=rr(x/2,C.y);return Vr(Vr({},C),{},{x:X(v),y:W(v)})}return Vr(Vr({},C),{},{x:C.x,y:C.y})});return i.renderCurveStatically(A,a,s)}var P=rr(0,w),T=P(v),M;if(c){var E="".concat(c).split(/[,\s]+/gim).map(function(C){return parseFloat(C)});M=i.getStrokeDasharray(T,w,E)}else M=i.generateSimpleStrokeDasharray(w,T);return i.renderCurveStatically(l,a,s,{strokeDasharray:M})})}},{key:"renderCurve",value:function(a,s){var i=this.props,o=i.points,l=i.isAnimationActive,c=this.state,d=c.prevPoints,u=c.totalLength;return l&&o&&o.length&&(!d&&u>0||!Ps(d,o))?this.renderCurveWithAnimation(a,s):this.renderCurveStatically(o,a,s)}},{key:"render",value:function(){var a,s=this.props,i=s.hide,o=s.dot,l=s.points,c=s.className,d=s.xAxis,u=s.yAxis,h=s.top,f=s.left,m=s.width,g=s.height,p=s.isAnimationActive,x=s.id;if(i||!l||!l.length)return null;var b=this.state.isAnimationFinished,y=l.length===1,w=Ve("recharts-line",c),S=d&&d.allowDataOverflow,v=u&&u.allowDataOverflow,N=S||v,A=Ue(x)?this.id:x,P=(a=ke(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},T=P.r,M=T===void 0?3:T,E=P.strokeWidth,C=E===void 0?2:E,O=Ok(o)?o:{},_=O.clipDot,D=_===void 0?!0:_,L=M*2+C;return R.createElement(Ye,{className:w},S||v?R.createElement("defs",null,R.createElement("clipPath",{id:"clipPath-".concat(A)},R.createElement("rect",{x:S?f:f-m/2,y:v?h:h-g/2,width:S?m:m*2,height:v?g:g*2})),!D&&R.createElement("clipPath",{id:"clipPath-dots-".concat(A)},R.createElement("rect",{x:f-L/2,y:h-L/2,width:m+L,height:g+L}))):null,!y&&this.renderCurve(N,A),this.renderErrorBar(N,A),(y||o)&&this.renderDots(N,D,A),(!p||b)&&Sn.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:s.curPoints}:a.points!==s.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,s){for(var i=a.length%2!==0?[].concat(ei(a),[0]):a,o=[],l=0;l<s;++l)o=[].concat(ei(o),ei(i));return o}},{key:"renderDotItem",value:function(a,s){var i;if(R.isValidElement(a))i=R.cloneElement(a,s);else if(De(a))i=a(s);else{var o=s.key,l=fS(s,nU),c=Ve("recharts-line-dot",typeof a!="boolean"?a.className:"");i=R.createElement(_l,Ro({key:o},l,{className:c}))}return i}}])})(k.PureComponent);bn(ws,"displayName","Line");bn(ws,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Ua.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});bn(ws,"getComposedData",function(e){var t=e.props,n=e.xAxis,a=e.yAxis,s=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,d=e.offset,u=t.layout,h=c.map(function(f,m){var g=Gt(f,o);return u==="horizontal"?{x:Jc({axis:n,ticks:s,bandSize:l,entry:f,index:m}),y:Ue(g)?null:a.scale(g),value:g,payload:f}:{x:Ue(g)?null:n.scale(g),y:Jc({axis:a,ticks:i,bandSize:l,entry:f,index:m}),value:g,payload:f}});return Vr({points:h,layout:u},d)});var pU=["layout","type","stroke","connectNulls","isRange","ref"],gU=["key"],C4;function Ri(e){"@babel/helpers - typeof";return Ri=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ri(e)}function O4(e,t){if(e==null)return{};var n=yU(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function yU(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function ps(){return ps=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ps.apply(this,arguments)}function pS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function ka(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pS(Object(n),!0).forEach(function(a){Bn(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function bU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gS(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,_4(a.key),a)}}function vU(e,t,n){return t&&gS(e.prototype,t),n&&gS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function wU(e,t,n){return t=jd(t),jU(e,T4()?Reflect.construct(t,n||[],jd(e).constructor):t.apply(e,n))}function jU(e,t){if(t&&(Ri(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NU(e)}function NU(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T4=function(){return!!e})()}function jd(e){return jd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jd(e)}function SU(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u0(e,t)}function u0(e,t){return u0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},u0(e,t)}function Bn(e,t,n){return t=_4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _4(e){var t=kU(e,"string");return Ri(t)=="symbol"?t:t+""}function kU(e,t){if(Ri(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Ri(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Un=(function(e){function t(){var n;bU(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=wU(this,t,[].concat(s)),Bn(n,"state",{isAnimationFinished:!0}),Bn(n,"id",Ms("recharts-area-")),Bn(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),De(o)&&o()}),Bn(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),De(o)&&o()}),n}return SU(t,e),vU(t,[{key:"renderDots",value:function(a,s,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,d=c.dot,u=c.points,h=c.dataKey,f=ke(this.props,!1),m=ke(d,!0),g=u.map(function(x,b){var y=ka(ka(ka({key:"dot-".concat(b),r:3},f),m),{},{index:b,cx:x.x,cy:x.y,dataKey:h,value:x.value,payload:x.payload,points:u});return t.renderDotItem(d,y)}),p={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return R.createElement(Ye,ps({className:"recharts-area-dots"},p),g)}},{key:"renderHorizontalRect",value:function(a){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].x,d=o[o.length-1].x,u=a*Math.abs(c-d),h=Ma(o.map(function(f){return f.y||0}));return he(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(Ma(i.map(function(f){return f.y||0})),h)),he(h)?R.createElement("rect",{x:c<d?c:c-u,y:0,width:u,height:Math.floor(h+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(a){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].y,d=o[o.length-1].y,u=a*Math.abs(c-d),h=Ma(o.map(function(f){return f.x||0}));return he(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(Ma(i.map(function(f){return f.x||0})),h)),he(h)?R.createElement("rect",{x:0,y:c<d?c:c-u,width:h+(l?parseInt("".concat(l),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(a){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(a):this.renderHorizontalRect(a)}},{key:"renderAreaStatically",value:function(a,s,i,o){var l=this.props,c=l.layout,d=l.type,u=l.stroke,h=l.connectNulls,f=l.isRange;l.ref;var m=O4(l,pU);return R.createElement(Ye,{clipPath:i?"url(#clipPath-".concat(o,")"):null},R.createElement(vs,ps({},ke(m,!0),{points:a,connectNulls:h,type:d,baseLine:s,layout:c,stroke:"none",className:"recharts-area-area"})),u!=="none"&&R.createElement(vs,ps({},ke(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:h,fill:"none",points:a})),u!=="none"&&f&&R.createElement(vs,ps({},ke(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:h,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(a,s){var i=this,o=this.props,l=o.points,c=o.baseLine,d=o.isAnimationActive,u=o.animationBegin,h=o.animationDuration,f=o.animationEasing,m=o.animationId,g=this.state,p=g.prevPoints,x=g.prevBaseLine;return R.createElement(kn,{begin:u,duration:h,isActive:d,easing:f,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var y=b.t;if(p){var w=p.length/l.length,S=l.map(function(P,T){var M=Math.floor(T*w);if(p[M]){var E=p[M],C=rr(E.x,P.x),O=rr(E.y,P.y);return ka(ka({},P),{},{x:C(y),y:O(y)})}return P}),v;if(he(c)&&typeof c=="number"){var N=rr(x,c);v=N(y)}else if(Ue(c)||Wi(c)){var A=rr(x,0);v=A(y)}else v=c.map(function(P,T){var M=Math.floor(T*w);if(x[M]){var E=x[M],C=rr(E.x,P.x),O=rr(E.y,P.y);return ka(ka({},P),{},{x:C(y),y:O(y)})}return P});return i.renderAreaStatically(S,v,a,s)}return R.createElement(Ye,null,R.createElement("defs",null,R.createElement("clipPath",{id:"animationClipPath-".concat(s)},i.renderClipRect(y))),R.createElement(Ye,{clipPath:"url(#animationClipPath-".concat(s,")")},i.renderAreaStatically(l,c,a,s)))})}},{key:"renderArea",value:function(a,s){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,d=this.state,u=d.prevPoints,h=d.prevBaseLine,f=d.totalLength;return c&&o&&o.length&&(!u&&f>0||!Ps(u,o)||!Ps(h,l))?this.renderAreaWithAnimation(a,s):this.renderAreaStatically(o,l,a,s)}},{key:"render",value:function(){var a,s=this.props,i=s.hide,o=s.dot,l=s.points,c=s.className,d=s.top,u=s.left,h=s.xAxis,f=s.yAxis,m=s.width,g=s.height,p=s.isAnimationActive,x=s.id;if(i||!l||!l.length)return null;var b=this.state.isAnimationFinished,y=l.length===1,w=Ve("recharts-area",c),S=h&&h.allowDataOverflow,v=f&&f.allowDataOverflow,N=S||v,A=Ue(x)?this.id:x,P=(a=ke(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},T=P.r,M=T===void 0?3:T,E=P.strokeWidth,C=E===void 0?2:E,O=Ok(o)?o:{},_=O.clipDot,D=_===void 0?!0:_,L=M*2+C;return R.createElement(Ye,{className:w},S||v?R.createElement("defs",null,R.createElement("clipPath",{id:"clipPath-".concat(A)},R.createElement("rect",{x:S?u:u-m/2,y:v?d:d-g/2,width:S?m:m*2,height:v?g:g*2})),!D&&R.createElement("clipPath",{id:"clipPath-dots-".concat(A)},R.createElement("rect",{x:u-L/2,y:d-L/2,width:m+L,height:g+L}))):null,y?null:this.renderArea(N,A),(o||y)&&this.renderDots(N,D,A),(!p||b)&&Sn.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,curBaseLine:a.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:a.points!==s.curPoints||a.baseLine!==s.curBaseLine?{curPoints:a.points,curBaseLine:a.baseLine}:null}}])})(k.PureComponent);C4=Un;Bn(Un,"displayName","Area");Bn(Un,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ua.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Bn(Un,"getBaseValue",function(e,t,n,a){var s=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(he(l)&&typeof l=="number")return l;var c=s==="horizontal"?a:n,d=c.scale.domain();if(c.type==="number"){var u=Math.max(d[0],d[1]),h=Math.min(d[0],d[1]);return l==="dataMin"?h:l==="dataMax"||u<0?u:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});Bn(Un,"getComposedData",function(e){var t=e.props,n=e.item,a=e.xAxis,s=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,d=e.stackedData,u=e.dataStartIndex,h=e.displayedData,f=e.offset,m=t.layout,g=d&&d.length,p=C4.getBaseValue(t,n,a,s),x=m==="horizontal",b=!1,y=h.map(function(S,v){var N;g?N=d[u+v]:(N=Gt(S,c),Array.isArray(N)?b=!0:N=[p,N]);var A=N[1]==null||g&&Gt(S,c)==null;return x?{x:Jc({axis:a,ticks:i,bandSize:l,entry:S,index:v}),y:A?null:s.scale(N[1]),value:N,payload:S}:{x:A?null:a.scale(N[1]),y:Jc({axis:s,ticks:o,bandSize:l,entry:S,index:v}),value:N,payload:S}}),w;return g||b?w=y.map(function(S){var v=Array.isArray(S.value)?S.value[0]:null;return x?{x:S.x,y:v!=null&&S.y!=null?s.scale(v):null}:{x:v!=null?a.scale(v):null,y:S.y}}):w=x?s.scale(p):a.scale(p),ka({points:y,baseLine:w,layout:m,isRange:b},f)});Bn(Un,"renderDotItem",function(e,t){var n;if(R.isValidElement(e))n=R.cloneElement(e,t);else if(De(e))n=e(t);else{var a=Ve("recharts-area-dot",typeof e!="boolean"?e.className:""),s=t.key,i=O4(t,gU);n=R.createElement(_l,ps({},i,{key:s,className:a}))}return n});function $i(e){"@babel/helpers - typeof";return $i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$i(e)}function AU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PU(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,M4(a.key),a)}}function CU(e,t,n){return t&&PU(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function OU(e,t,n){return t=Nd(t),TU(e,E4()?Reflect.construct(t,n||[],Nd(e).constructor):t.apply(e,n))}function TU(e,t){if(t&&($i(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _U(e)}function _U(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E4=function(){return!!e})()}function Nd(e){return Nd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Nd(e)}function EU(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h0(e,t)}function h0(e,t){return h0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},h0(e,t)}function D4(e,t,n){return t=M4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M4(e){var t=DU(e,"string");return $i(t)=="symbol"?t:t+""}function DU(e,t){if($i(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if($i(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function f0(){return f0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},f0.apply(this,arguments)}function MU(e){var t=e.xAxisId,n=kg(),a=Ag(),s=m4(t);return s==null?null:k.createElement(Xi,f0({},s,{className:Ve("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(o){return ca(o,!0)}}))}var ir=(function(e){function t(){return AU(this,t),OU(this,t,arguments)}return EU(t,e),CU(t,[{key:"render",value:function(){return k.createElement(MU,this.props)}}])})(k.Component);D4(ir,"displayName","XAxis");D4(ir,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Li(e){"@babel/helpers - typeof";return Li=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Li(e)}function IU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RU(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,$4(a.key),a)}}function $U(e,t,n){return t&&RU(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function LU(e,t,n){return t=Sd(t),BU(e,I4()?Reflect.construct(t,n||[],Sd(e).constructor):t.apply(e,n))}function BU(e,t){if(t&&(Li(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FU(e)}function FU(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I4=function(){return!!e})()}function Sd(e){return Sd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sd(e)}function qU(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m0(e,t)}function m0(e,t){return m0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},m0(e,t)}function R4(e,t,n){return t=$4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $4(e){var t=UU(e,"string");return Li(t)=="symbol"?t:t+""}function UU(e,t){if(Li(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Li(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function x0(){return x0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},x0.apply(this,arguments)}var zU=function(t){var n=t.yAxisId,a=kg(),s=Ag(),i=x4(n);return i==null?null:k.createElement(Xi,x0({},i,{className:Ve("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:a,height:s},ticksGenerator:function(l){return ca(l,!0)}}))},or=(function(e){function t(){return IU(this,t),LU(this,t,arguments)}return qU(t,e),$U(t,[{key:"render",value:function(){return k.createElement(zU,this.props)}}])})(k.Component);R4(or,"displayName","YAxis");R4(or,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function yS(e){return GU(e)||HU(e)||WU(e)||VU()}function VU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WU(e,t){if(e){if(typeof e=="string")return p0(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p0(e,t)}}function HU(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function GU(e){if(Array.isArray(e))return p0(e)}function p0(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var g0=function(t,n,a,s,i){var o=Xr(t,Cg),l=Xr(t,cu),c=[].concat(yS(o),yS(l)),d=Xr(t,uu),u="".concat(s,"Id"),h=s[0],f=n;if(c.length&&(f=c.reduce(function(p,x){if(x.props[u]===a&&qn(x.props,"extendDomain")&&he(x.props[h])){var b=x.props[h];return[Math.min(p[0],b),Math.max(p[1],b)]}return p},f)),d.length){var m="".concat(h,"1"),g="".concat(h,"2");f=d.reduce(function(p,x){if(x.props[u]===a&&qn(x.props,"extendDomain")&&he(x.props[m])&&he(x.props[g])){var b=x.props[m],y=x.props[g];return[Math.min(p[0],b,y),Math.max(p[1],b,y)]}return p},f)}return i&&i.length&&(f=i.reduce(function(p,x){return he(x)?[Math.min(p[0],x),Math.max(p[1],x)]:p},f)),f},bx={exports:{}},bS;function KU(){return bS||(bS=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function s(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new s(u,h||c,f),g=n?n+d:d;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new a:delete c._events[d]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)t.call(u,h)&&d.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=n?n+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,g=new Array(m);f<m;f++)g[f]=h[f].fn;return g},l.prototype.listenerCount=function(d){var u=n?n+d:d,h=this._events[u];return h?h.fn?1:h.length:0},l.prototype.emit=function(d,u,h,f,m,g){var p=n?n+d:d;if(!this._events[p])return!1;var x=this._events[p],b=arguments.length,y,w;if(x.fn){switch(x.once&&this.removeListener(d,x.fn,void 0,!0),b){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,u),!0;case 3:return x.fn.call(x.context,u,h),!0;case 4:return x.fn.call(x.context,u,h,f),!0;case 5:return x.fn.call(x.context,u,h,f,m),!0;case 6:return x.fn.call(x.context,u,h,f,m,g),!0}for(w=1,y=new Array(b-1);w<b;w++)y[w-1]=arguments[w];x.fn.apply(x.context,y)}else{var S=x.length,v;for(w=0;w<S;w++)switch(x[w].once&&this.removeListener(d,x[w].fn,void 0,!0),b){case 1:x[w].fn.call(x[w].context);break;case 2:x[w].fn.call(x[w].context,u);break;case 3:x[w].fn.call(x[w].context,u,h);break;case 4:x[w].fn.call(x[w].context,u,h,f);break;default:if(!y)for(v=1,y=new Array(b-1);v<b;v++)y[v-1]=arguments[v];x[w].fn.apply(x[w].context,y)}}return!0},l.prototype.on=function(d,u,h){return i(this,d,u,h,!1)},l.prototype.once=function(d,u,h){return i(this,d,u,h,!0)},l.prototype.removeListener=function(d,u,h,f){var m=n?n+d:d;if(!this._events[m])return this;if(!u)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===u&&(!f||g.once)&&(!h||g.context===h)&&o(this,m);else{for(var p=0,x=[],b=g.length;p<b;p++)(g[p].fn!==u||f&&!g[p].once||h&&g[p].context!==h)&&x.push(g[p]);x.length?this._events[m]=x.length===1?x[0]:x:o(this,m)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=n?n+d:d,this._events[u]&&o(this,u)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(bx)),bx.exports}var YU=KU();const XU=Pt(YU);var vx=new XU,wx="recharts.syncMouseEvents";function vl(e){"@babel/helpers - typeof";return vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vl(e)}function QU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JU(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,L4(a.key),a)}}function ZU(e,t,n){return t&&JU(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jx(e,t,n){return t=L4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L4(e){var t=ez(e,"string");return vl(t)=="symbol"?t:t+""}function ez(e,t){if(vl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(vl(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var tz=(function(){function e(){QU(this,e),jx(this,"activeIndex",0),jx(this,"coordinateList",[]),jx(this,"layout","horizontal")}return ZU(e,[{key:"setDetails",value:function(n){var a,s=n.coordinateList,i=s===void 0?null:s,o=n.container,l=o===void 0?null:o,c=n.layout,d=c===void 0?null:c,u=n.offset,h=u===void 0?null:u,f=n.mouseHandlerCallback,m=f===void 0?null:f;this.coordinateList=(a=i??this.coordinateList)!==null&&a!==void 0?a:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,d=((n=window)===null||n===void 0?void 0:n.scrollX)||0,u=((a=window)===null||a===void 0?void 0:a.scrollY)||0,h=i+c+d,f=o+this.offset.top+l/2+u;this.mouseHandlerCallback({pageX:h,pageY:f})}}}])})();function rz(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var a=e==null?void 0:e[0],s=e==null?void 0:e[1];if(a&&s&&he(a)&&he(s))return!0}return!1}function nz(e,t,n,a){var s=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-s,width:e==="horizontal"?a:n.width-1,height:e==="horizontal"?n.height-1:a}}function B4(e){var t=e.cx,n=e.cy,a=e.radius,s=e.startAngle,i=e.endAngle,o=At(t,n,a,s),l=At(t,n,a,i);return{points:[o,l],cx:t,cy:n,radius:a,startAngle:s,endAngle:i}}function az(e,t,n){var a,s,i,o;if(e==="horizontal")a=t.x,i=a,s=n.top,o=n.top+n.height;else if(e==="vertical")s=t.y,o=s,a=n.left,i=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,d=t.innerRadius,u=t.outerRadius,h=t.angle,f=At(l,c,d,h),m=At(l,c,u,h);a=f.x,s=f.y,i=m.x,o=m.y}else return B4(t);return[{x:a,y:s},{x:i,y:o}]}function wl(e){"@babel/helpers - typeof";return wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wl(e)}function vS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function mc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vS(Object(n),!0).forEach(function(a){sz(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function sz(e,t,n){return t=iz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iz(e){var t=oz(e,"string");return wl(t)=="symbol"?t:t+""}function oz(e,t){if(wl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(wl(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lz(e){var t,n,a=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,h=e.layout,f=e.chartName,m=(t=a.props.cursor)!==null&&t!==void 0?t:(n=a.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!a||!m||!i||!o||f!=="ScatterChart"&&s!=="axis")return null;var g,p=vs;if(f==="ScatterChart")g=o,p=SB;else if(f==="BarChart")g=nz(h,o,c,u),p=vg;else if(h==="radial"){var x=B4(o),b=x.cx,y=x.cy,w=x.radius,S=x.startAngle,v=x.endAngle;g={cx:b,cy:y,startAngle:S,endAngle:v,innerRadius:w,outerRadius:w},p=$A}else g={points:az(h,o,c)},p=vs;var N=mc(mc(mc(mc({stroke:"#ccc",pointerEvents:"none"},c),g),ke(m,!1)),{},{payload:l,payloadIndex:d,className:Ve("recharts-tooltip-cursor",m.className)});return k.isValidElement(m)?k.cloneElement(m,N):k.createElement(p,N)}var cz=["item"],dz=["children","className","width","height","style","compact","title","desc"];function Bi(e){"@babel/helpers - typeof";return Bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bi(e)}function ci(){return ci=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ci.apply(this,arguments)}function wS(e,t){return fz(e)||hz(e,t)||q4(e,t)||uz()}function uz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hz(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function fz(e){if(Array.isArray(e))return e}function jS(e,t){if(e==null)return{};var n=mz(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function mz(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function xz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pz(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,U4(a.key),a)}}function gz(e,t,n){return t&&pz(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yz(e,t,n){return t=kd(t),bz(e,F4()?Reflect.construct(t,n||[],kd(e).constructor):t.apply(e,n))}function bz(e,t){if(t&&(Bi(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vz(e)}function vz(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F4=function(){return!!e})()}function kd(e){return kd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kd(e)}function wz(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y0(e,t)}function y0(e,t){return y0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},y0(e,t)}function Fi(e){return Sz(e)||Nz(e)||q4(e)||jz()}function jz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q4(e,t){if(e){if(typeof e=="string")return b0(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b0(e,t)}}function Nz(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Sz(e){if(Array.isArray(e))return b0(e)}function b0(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function NS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NS(Object(n),!0).forEach(function(a){Ee(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Ee(e,t,n){return t=U4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U4(e){var t=kz(e,"string");return Bi(t)=="symbol"?t:t+""}function kz(e,t){if(Bi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(Bi(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Az={xAxis:["bottom","top"],yAxis:["left","right"]},Pz={width:"100%",height:"100%"},z4={x:0,y:0};function xc(e){return e}var Cz=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},Oz=function(t,n,a,s){var i=n.find(function(u){return u&&u.index===a});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return Z(Z(Z({},s),At(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,d=s.angle;return Z(Z(Z({},s),At(s.cx,s.cy,c,d)),{},{angle:d,radius:c})}return z4},hu=function(t,n){var a=n.graphicalItems,s=n.dataStartIndex,i=n.dataEndIndex,o=(a??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(Fi(l),Fi(d)):l},[]);return o.length>0?o:t&&t.length&&he(s)&&he(i)?t.slice(s,i+1):[]};function V4(e){return e==="number"?[0,"auto"]:void 0}var v0=function(t,n,a,s){var i=t.graphicalItems,o=t.tooltipAxis,l=hu(n,t);return a<0||!i||!i.length||a>=l.length?null:i.reduce(function(c,d){var u,h=(u=d.props.data)!==null&&u!==void 0?u:n;h&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=a&&(h=h.slice(t.dataStartIndex,t.dataEndIndex+1));var f;if(o.dataKey&&!o.allowDuplicatedCategory){var m=h===void 0?l:h;f=Pc(m,o.dataKey,s)}else f=h&&h[a]||l[a];return f?[].concat(Fi(c),[_A(d,f)]):c},[])},SS=function(t,n,a,s){var i=s||{x:t.chartX,y:t.chartY},o=Cz(i,a),l=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,u=JR(o,l,d,c);if(u>=0&&d){var h=d[u]&&d[u].value,f=v0(t,n,u,h),m=Oz(a,l,u,i);return{activeTooltipIndex:u,activeLabel:h,activePayload:f,activeCoordinate:m}}return null},Tz=function(t,n){var a=n.axes,s=n.graphicalItems,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=t.layout,h=t.children,f=t.stackOffset,m=kA(u,i);return a.reduce(function(g,p){var x,b=p.type.defaultProps!==void 0?Z(Z({},p.type.defaultProps),p.props):p.props,y=b.type,w=b.dataKey,S=b.allowDataOverflow,v=b.allowDuplicatedCategory,N=b.scale,A=b.ticks,P=b.includeHidden,T=b[o];if(g[T])return g;var M=hu(t.data,{graphicalItems:s.filter(function(fe){var F,Te=o in fe.props?fe.props[o]:(F=fe.type.defaultProps)===null||F===void 0?void 0:F[o];return Te===T}),dataStartIndex:c,dataEndIndex:d}),E=M.length,C,O,_;rz(b.domain,S,y)&&(C=Dp(b.domain,null,S),m&&(y==="number"||N!=="auto")&&(_=Eo(M,w,"category")));var D=V4(y);if(!C||C.length===0){var L,V=(L=b.domain)!==null&&L!==void 0?L:D;if(w){if(C=Eo(M,w,y),y==="category"&&m){var X=H5(C);v&&X?(O=C,C=ud(0,E)):v||(C=AN(V,C,p).reduce(function(fe,F){return fe.indexOf(F)>=0?fe:[].concat(Fi(fe),[F])},[]))}else if(y==="category")v?C=C.filter(function(fe){return fe!==""&&!Ue(fe)}):C=AN(V,C,p).reduce(function(fe,F){return fe.indexOf(F)>=0||F===""||Ue(F)?fe:[].concat(Fi(fe),[F])},[]);else if(y==="number"){var W=n$(M,s.filter(function(fe){var F,Te,pe=o in fe.props?fe.props[o]:(F=fe.type.defaultProps)===null||F===void 0?void 0:F[o],re="hide"in fe.props?fe.props.hide:(Te=fe.type.defaultProps)===null||Te===void 0?void 0:Te.hide;return pe===T&&(P||!re)}),w,i,u);W&&(C=W)}m&&(y==="number"||N!=="auto")&&(_=Eo(M,w,"category"))}else m?C=ud(0,E):l&&l[T]&&l[T].hasStack&&y==="number"?C=f==="expand"?[0,1]:TA(l[T].stackGroups,c,d):C=SA(M,s.filter(function(fe){var F=o in fe.props?fe.props[o]:fe.type.defaultProps[o],Te="hide"in fe.props?fe.props.hide:fe.type.defaultProps.hide;return F===T&&(P||!Te)}),y,u,!0);if(y==="number")C=g0(h,C,T,i,A),V&&(C=Dp(V,C,S));else if(y==="category"&&V){var ce=V,de=C.every(function(fe){return ce.indexOf(fe)>=0});de&&(C=ce)}}return Z(Z({},g),{},Ee({},T,Z(Z({},b),{},{axisType:i,domain:C,categoricalDomain:_,duplicateDomain:O,originalDomain:(x=b.domain)!==null&&x!==void 0?x:D,isCategorical:m,layout:u})))},{})},_z=function(t,n){var a=n.graphicalItems,s=n.Axis,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=t.layout,h=t.children,f=hu(t.data,{graphicalItems:a,dataStartIndex:c,dataEndIndex:d}),m=f.length,g=kA(u,i),p=-1;return a.reduce(function(x,b){var y=b.type.defaultProps!==void 0?Z(Z({},b.type.defaultProps),b.props):b.props,w=y[o],S=V4("number");if(!x[w]){p++;var v;return g?v=ud(0,m):l&&l[w]&&l[w].hasStack?(v=TA(l[w].stackGroups,c,d),v=g0(h,v,w,i)):(v=Dp(S,SA(f,a.filter(function(N){var A,P,T=o in N.props?N.props[o]:(A=N.type.defaultProps)===null||A===void 0?void 0:A[o],M="hide"in N.props?N.props.hide:(P=N.type.defaultProps)===null||P===void 0?void 0:P.hide;return T===w&&!M}),"number",u),s.defaultProps.allowDataOverflow),v=g0(h,v,w,i)),Z(Z({},x),{},Ee({},w,Z(Z({axisType:i},s.defaultProps),{},{hide:!0,orientation:Yr(Az,"".concat(i,".").concat(p%2),null),domain:v,originalDomain:S,isCategorical:g,layout:u})))}return x},{})},Ez=function(t,n){var a=n.axisType,s=a===void 0?"xAxis":a,i=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=t.children,h="".concat(s,"Id"),f=Xr(u,i),m={};return f&&f.length?m=Tz(t,{axes:f,graphicalItems:o,axisType:s,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(m=_z(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),m},Dz=function(t){var n=Ta(t),a=ca(n,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:G0(a,function(s){return s.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Zc(n,a)}},kS=function(t){var n=t.children,a=t.defaultShowTooltip,s=Hr(n,Oi),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!a}},Mz=function(t){return!t||!t.length?!1:t.some(function(n){var a=da(n&&n.type);return a&&a.indexOf("Bar")>=0})},AS=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Iz=function(t,n){var a=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,d=a.width,u=a.height,h=a.children,f=a.margin||{},m=Hr(h,Oi),g=Hr(h,La),p=Object.keys(c).reduce(function(v,N){var A=c[N],P=A.orientation;return!A.mirror&&!A.hide?Z(Z({},v),{},Ee({},P,v[P]+A.width)):v},{left:f.left||0,right:f.right||0}),x=Object.keys(o).reduce(function(v,N){var A=o[N],P=A.orientation;return!A.mirror&&!A.hide?Z(Z({},v),{},Ee({},P,Yr(v,"".concat(P))+A.height)):v},{top:f.top||0,bottom:f.bottom||0}),b=Z(Z({},x),p),y=b.bottom;m&&(b.bottom+=m.props.height||Oi.defaultProps.height),g&&n&&(b=t$(b,s,a,n));var w=d-b.left-b.right,S=u-b.top-b.bottom;return Z(Z({brushBottom:y},b),{},{width:Math.max(w,0),height:Math.max(S,0)})},Rz=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},fu=function(t){var n=t.chartName,a=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,d=t.legendContent,u=t.formatAxisMap,h=t.defaultProps,f=function(b,y){var w=y.graphicalItems,S=y.stackGroups,v=y.offset,N=y.updateId,A=y.dataStartIndex,P=y.dataEndIndex,T=b.barSize,M=b.layout,E=b.barGap,C=b.barCategoryGap,O=b.maxBarSize,_=AS(M),D=_.numericAxisName,L=_.cateAxisName,V=Mz(w),X=[];return w.forEach(function(W,ce){var de=hu(b.data,{graphicalItems:[W],dataStartIndex:A,dataEndIndex:P}),fe=W.type.defaultProps!==void 0?Z(Z({},W.type.defaultProps),W.props):W.props,F=fe.dataKey,Te=fe.maxBarSize,pe=fe["".concat(D,"Id")],re=fe["".concat(L,"Id")],be={},se=c.reduce(function(Cr,zr){var Hn=y["".concat(zr.axisType,"Map")],Jr=fe["".concat(zr.axisType,"Id")];Hn&&Hn[Jr]||zr.axisType==="zAxis"||Os();var Cn=Hn[Jr];return Z(Z({},Cr),{},Ee(Ee({},zr.axisType,Cn),"".concat(zr.axisType,"Ticks"),ca(Cn)))},be),oe=se[L],me=se["".concat(L,"Ticks")],ve=S&&S[pe]&&S[pe].hasStack&&h$(W,S[pe].stackGroups),I=da(W.type).indexOf("Bar")>=0,ge=Zc(oe,me),Ne=[],He=V&&ZR({barSize:T,stackGroups:S,totalSize:Rz(se,L)});if(I){var bt,It,Ar=Ue(Te)?O:Te,Ur=(bt=(It=Zc(oe,me,!0))!==null&&It!==void 0?It:Ar)!==null&&bt!==void 0?bt:0;Ne=e$({barGap:E,barCategoryGap:C,bandSize:Ur!==ge?Ur:ge,sizeList:He[re],maxBarSize:Ar}),Ur!==ge&&(Ne=Ne.map(function(Cr){return Z(Z({},Cr),{},{position:Z(Z({},Cr.position),{},{offset:Cr.position.offset-Ur/2})})}))}var Pr=W&&W.type&&W.type.getComposedData;Pr&&X.push({props:Z(Z({},Pr(Z(Z({},se),{},{displayedData:de,props:b,dataKey:F,item:W,bandSize:ge,barPosition:Ne,offset:v,stackedData:ve,layout:M,dataStartIndex:A,dataEndIndex:P}))),{},Ee(Ee(Ee({key:W.key||"item-".concat(ce)},D,se[D]),L,se[L]),"animationId",N)),childIndex:aT(W,b.children),item:W})}),X},m=function(b,y){var w=b.props,S=b.dataStartIndex,v=b.dataEndIndex,N=b.updateId;if(!Ub({props:w}))return null;var A=w.children,P=w.layout,T=w.stackOffset,M=w.data,E=w.reverseStackOrder,C=AS(P),O=C.numericAxisName,_=C.cateAxisName,D=Xr(A,a),L=d$(M,D,"".concat(O,"Id"),"".concat(_,"Id"),T,E),V=c.reduce(function(fe,F){var Te="".concat(F.axisType,"Map");return Z(Z({},fe),{},Ee({},Te,Ez(w,Z(Z({},F),{},{graphicalItems:D,stackGroups:F.axisType===O&&L,dataStartIndex:S,dataEndIndex:v}))))},{}),X=Iz(Z(Z({},V),{},{props:w,graphicalItems:D}),y==null?void 0:y.legendBBox);Object.keys(V).forEach(function(fe){V[fe]=u(w,V[fe],X,fe.replace("Map",""),n)});var W=V["".concat(_,"Map")],ce=Dz(W),de=f(w,Z(Z({},V),{},{dataStartIndex:S,dataEndIndex:v,updateId:N,graphicalItems:D,stackGroups:L,offset:X}));return Z(Z({formattedGraphicalItems:de,graphicalItems:D,offset:X,stackGroups:L},ce),V)},g=(function(x){function b(y){var w,S,v;return xz(this,b),v=yz(this,b,[y]),Ee(v,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ee(v,"accessibilityManager",new tz),Ee(v,"handleLegendBBoxUpdate",function(N){if(N){var A=v.state,P=A.dataStartIndex,T=A.dataEndIndex,M=A.updateId;v.setState(Z({legendBBox:N},m({props:v.props,dataStartIndex:P,dataEndIndex:T,updateId:M},Z(Z({},v.state),{},{legendBBox:N}))))}}),Ee(v,"handleReceiveSyncEvent",function(N,A,P){if(v.props.syncId===N){if(P===v.eventEmitterSymbol&&typeof v.props.syncMethod!="function")return;v.applySyncEvent(A)}}),Ee(v,"handleBrushChange",function(N){var A=N.startIndex,P=N.endIndex;if(A!==v.state.dataStartIndex||P!==v.state.dataEndIndex){var T=v.state.updateId;v.setState(function(){return Z({dataStartIndex:A,dataEndIndex:P},m({props:v.props,dataStartIndex:A,dataEndIndex:P,updateId:T},v.state))}),v.triggerSyncEvent({dataStartIndex:A,dataEndIndex:P})}}),Ee(v,"handleMouseEnter",function(N){var A=v.getMouseInfo(N);if(A){var P=Z(Z({},A),{},{isTooltipActive:!0});v.setState(P),v.triggerSyncEvent(P);var T=v.props.onMouseEnter;De(T)&&T(P,N)}}),Ee(v,"triggeredAfterMouseMove",function(N){var A=v.getMouseInfo(N),P=A?Z(Z({},A),{},{isTooltipActive:!0}):{isTooltipActive:!1};v.setState(P),v.triggerSyncEvent(P);var T=v.props.onMouseMove;De(T)&&T(P,N)}),Ee(v,"handleItemMouseEnter",function(N){v.setState(function(){return{isTooltipActive:!0,activeItem:N,activePayload:N.tooltipPayload,activeCoordinate:N.tooltipPosition||{x:N.cx,y:N.cy}}})}),Ee(v,"handleItemMouseLeave",function(){v.setState(function(){return{isTooltipActive:!1}})}),Ee(v,"handleMouseMove",function(N){N.persist(),v.throttleTriggeredAfterMouseMove(N)}),Ee(v,"handleMouseLeave",function(N){v.throttleTriggeredAfterMouseMove.cancel();var A={isTooltipActive:!1};v.setState(A),v.triggerSyncEvent(A);var P=v.props.onMouseLeave;De(P)&&P(A,N)}),Ee(v,"handleOuterEvent",function(N){var A=nT(N),P=Yr(v.props,"".concat(A));if(A&&De(P)){var T,M;/.*touch.*/i.test(A)?M=v.getMouseInfo(N.changedTouches[0]):M=v.getMouseInfo(N),P((T=M)!==null&&T!==void 0?T:{},N)}}),Ee(v,"handleClick",function(N){var A=v.getMouseInfo(N);if(A){var P=Z(Z({},A),{},{isTooltipActive:!0});v.setState(P),v.triggerSyncEvent(P);var T=v.props.onClick;De(T)&&T(P,N)}}),Ee(v,"handleMouseDown",function(N){var A=v.props.onMouseDown;if(De(A)){var P=v.getMouseInfo(N);A(P,N)}}),Ee(v,"handleMouseUp",function(N){var A=v.props.onMouseUp;if(De(A)){var P=v.getMouseInfo(N);A(P,N)}}),Ee(v,"handleTouchMove",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&v.throttleTriggeredAfterMouseMove(N.changedTouches[0])}),Ee(v,"handleTouchStart",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&v.handleMouseDown(N.changedTouches[0])}),Ee(v,"handleTouchEnd",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&v.handleMouseUp(N.changedTouches[0])}),Ee(v,"handleDoubleClick",function(N){var A=v.props.onDoubleClick;if(De(A)){var P=v.getMouseInfo(N);A(P,N)}}),Ee(v,"handleContextMenu",function(N){var A=v.props.onContextMenu;if(De(A)){var P=v.getMouseInfo(N);A(P,N)}}),Ee(v,"triggerSyncEvent",function(N){v.props.syncId!==void 0&&vx.emit(wx,v.props.syncId,N,v.eventEmitterSymbol)}),Ee(v,"applySyncEvent",function(N){var A=v.props,P=A.layout,T=A.syncMethod,M=v.state.updateId,E=N.dataStartIndex,C=N.dataEndIndex;if(N.dataStartIndex!==void 0||N.dataEndIndex!==void 0)v.setState(Z({dataStartIndex:E,dataEndIndex:C},m({props:v.props,dataStartIndex:E,dataEndIndex:C,updateId:M},v.state)));else if(N.activeTooltipIndex!==void 0){var O=N.chartX,_=N.chartY,D=N.activeTooltipIndex,L=v.state,V=L.offset,X=L.tooltipTicks;if(!V)return;if(typeof T=="function")D=T(X,N);else if(T==="value"){D=-1;for(var W=0;W<X.length;W++)if(X[W].value===N.activeLabel){D=W;break}}var ce=Z(Z({},V),{},{x:V.left,y:V.top}),de=Math.min(O,ce.x+ce.width),fe=Math.min(_,ce.y+ce.height),F=X[D]&&X[D].value,Te=v0(v.state,v.props.data,D),pe=X[D]?{x:P==="horizontal"?X[D].coordinate:de,y:P==="horizontal"?fe:X[D].coordinate}:z4;v.setState(Z(Z({},N),{},{activeLabel:F,activeCoordinate:pe,activePayload:Te,activeTooltipIndex:D}))}else v.setState(N)}),Ee(v,"renderCursor",function(N){var A,P=v.state,T=P.isTooltipActive,M=P.activeCoordinate,E=P.activePayload,C=P.offset,O=P.activeTooltipIndex,_=P.tooltipAxisBandSize,D=v.getTooltipEventType(),L=(A=N.props.active)!==null&&A!==void 0?A:T,V=v.props.layout,X=N.key||"_recharts-cursor";return R.createElement(lz,{key:X,activeCoordinate:M,activePayload:E,activeTooltipIndex:O,chartName:n,element:N,isActive:L,layout:V,offset:C,tooltipAxisBandSize:_,tooltipEventType:D})}),Ee(v,"renderPolarAxis",function(N,A,P){var T=Yr(N,"type.axisType"),M=Yr(v.state,"".concat(T,"Map")),E=N.type.defaultProps,C=E!==void 0?Z(Z({},E),N.props):N.props,O=M&&M[C["".concat(T,"Id")]];return k.cloneElement(N,Z(Z({},O),{},{className:Ve(T,O.className),key:N.key||"".concat(A,"-").concat(P),ticks:ca(O,!0)}))}),Ee(v,"renderPolarGrid",function(N){var A=N.props,P=A.radialLines,T=A.polarAngles,M=A.polarRadius,E=v.state,C=E.radiusAxisMap,O=E.angleAxisMap,_=Ta(C),D=Ta(O),L=D.cx,V=D.cy,X=D.innerRadius,W=D.outerRadius;return k.cloneElement(N,{polarAngles:Array.isArray(T)?T:ca(D,!0).map(function(ce){return ce.coordinate}),polarRadius:Array.isArray(M)?M:ca(_,!0).map(function(ce){return ce.coordinate}),cx:L,cy:V,innerRadius:X,outerRadius:W,key:N.key||"polar-grid",radialLines:P})}),Ee(v,"renderLegend",function(){var N=v.state.formattedGraphicalItems,A=v.props,P=A.children,T=A.width,M=A.height,E=v.props.margin||{},C=T-(E.left||0)-(E.right||0),O=jA({children:P,formattedGraphicalItems:N,legendWidth:C,legendContent:d});if(!O)return null;var _=O.item,D=jS(O,cz);return k.cloneElement(_,Z(Z({},D),{},{chartWidth:T,chartHeight:M,margin:E,onBBoxUpdate:v.handleLegendBBoxUpdate}))}),Ee(v,"renderTooltip",function(){var N,A=v.props,P=A.children,T=A.accessibilityLayer,M=Hr(P,ut);if(!M)return null;var E=v.state,C=E.isTooltipActive,O=E.activeCoordinate,_=E.activePayload,D=E.activeLabel,L=E.offset,V=(N=M.props.active)!==null&&N!==void 0?N:C;return k.cloneElement(M,{viewBox:Z(Z({},L),{},{x:L.left,y:L.top}),active:V,label:D,payload:V?_:[],coordinate:O,accessibilityLayer:T})}),Ee(v,"renderBrush",function(N){var A=v.props,P=A.margin,T=A.data,M=v.state,E=M.offset,C=M.dataStartIndex,O=M.dataEndIndex,_=M.updateId;return k.cloneElement(N,{key:N.key||"_recharts-brush",onChange:dc(v.handleBrushChange,N.props.onChange),data:T,x:he(N.props.x)?N.props.x:E.left,y:he(N.props.y)?N.props.y:E.top+E.height+E.brushBottom-(P.bottom||0),width:he(N.props.width)?N.props.width:E.width,startIndex:C,endIndex:O,updateId:"brush-".concat(_)})}),Ee(v,"renderReferenceElement",function(N,A,P){if(!N)return null;var T=v,M=T.clipPathId,E=v.state,C=E.xAxisMap,O=E.yAxisMap,_=E.offset,D=N.type.defaultProps||{},L=N.props,V=L.xAxisId,X=V===void 0?D.xAxisId:V,W=L.yAxisId,ce=W===void 0?D.yAxisId:W;return k.cloneElement(N,{key:N.key||"".concat(A,"-").concat(P),xAxis:C[X],yAxis:O[ce],viewBox:{x:_.left,y:_.top,width:_.width,height:_.height},clipPathId:M})}),Ee(v,"renderActivePoints",function(N){var A=N.item,P=N.activePoint,T=N.basePoint,M=N.childIndex,E=N.isRange,C=[],O=A.props.key,_=A.item.type.defaultProps!==void 0?Z(Z({},A.item.type.defaultProps),A.item.props):A.item.props,D=_.activeDot,L=_.dataKey,V=Z(Z({index:M,dataKey:L,cx:P.x,cy:P.y,r:4,fill:bg(A.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},ke(D,!1)),Cc(D));return C.push(b.renderActiveDot(D,V,"".concat(O,"-activePoint-").concat(M))),T?C.push(b.renderActiveDot(D,Z(Z({},V),{},{cx:T.x,cy:T.y}),"".concat(O,"-basePoint-").concat(M))):E&&C.push(null),C}),Ee(v,"renderGraphicChild",function(N,A,P){var T=v.filterFormatItem(N,A,P);if(!T)return null;var M=v.getTooltipEventType(),E=v.state,C=E.isTooltipActive,O=E.tooltipAxis,_=E.activeTooltipIndex,D=E.activeLabel,L=v.props.children,V=Hr(L,ut),X=T.props,W=X.points,ce=X.isRange,de=X.baseLine,fe=T.item.type.defaultProps!==void 0?Z(Z({},T.item.type.defaultProps),T.item.props):T.item.props,F=fe.activeDot,Te=fe.hide,pe=fe.activeBar,re=fe.activeShape,be=!!(!Te&&C&&V&&(F||pe||re)),se={};M!=="axis"&&V&&V.props.trigger==="click"?se={onClick:dc(v.handleItemMouseEnter,N.props.onClick)}:M!=="axis"&&(se={onMouseLeave:dc(v.handleItemMouseLeave,N.props.onMouseLeave),onMouseEnter:dc(v.handleItemMouseEnter,N.props.onMouseEnter)});var oe=k.cloneElement(N,Z(Z({},T.props),se));function me(zr){return typeof O.dataKey=="function"?O.dataKey(zr.payload):null}if(be)if(_>=0){var ve,I;if(O.dataKey&&!O.allowDuplicatedCategory){var ge=typeof O.dataKey=="function"?me:"payload.".concat(O.dataKey.toString());ve=Pc(W,ge,D),I=ce&&de&&Pc(de,ge,D)}else ve=W==null?void 0:W[_],I=ce&&de&&de[_];if(re||pe){var Ne=N.props.activeIndex!==void 0?N.props.activeIndex:_;return[k.cloneElement(N,Z(Z(Z({},T.props),se),{},{activeIndex:Ne})),null,null]}if(!Ue(ve))return[oe].concat(Fi(v.renderActivePoints({item:T,activePoint:ve,basePoint:I,childIndex:_,isRange:ce})))}else{var He,bt=(He=v.getItemByXY(v.state.activeCoordinate))!==null&&He!==void 0?He:{graphicalItem:oe},It=bt.graphicalItem,Ar=It.item,Ur=Ar===void 0?N:Ar,Pr=It.childIndex,Cr=Z(Z(Z({},T.props),se),{},{activeIndex:Pr});return[k.cloneElement(Ur,Cr),null,null]}return ce?[oe,null,null]:[oe,null]}),Ee(v,"renderCustomized",function(N,A,P){return k.cloneElement(N,Z(Z({key:"recharts-customized-".concat(P)},v.props),v.state))}),Ee(v,"renderMap",{CartesianGrid:{handler:xc,once:!0},ReferenceArea:{handler:v.renderReferenceElement},ReferenceLine:{handler:xc},ReferenceDot:{handler:v.renderReferenceElement},XAxis:{handler:xc},YAxis:{handler:xc},Brush:{handler:v.renderBrush,once:!0},Bar:{handler:v.renderGraphicChild},Line:{handler:v.renderGraphicChild},Area:{handler:v.renderGraphicChild},Radar:{handler:v.renderGraphicChild},RadialBar:{handler:v.renderGraphicChild},Scatter:{handler:v.renderGraphicChild},Pie:{handler:v.renderGraphicChild},Funnel:{handler:v.renderGraphicChild},Tooltip:{handler:v.renderCursor,once:!0},PolarGrid:{handler:v.renderPolarGrid,once:!0},PolarAngleAxis:{handler:v.renderPolarAxis},PolarRadiusAxis:{handler:v.renderPolarAxis},Customized:{handler:v.renderCustomized}}),v.clipPathId="".concat((w=y.id)!==null&&w!==void 0?w:Ms("recharts"),"-clip"),v.throttleTriggeredAfterMouseMove=w2(v.triggeredAfterMouseMove,(S=y.throttleDelay)!==null&&S!==void 0?S:1e3/60),v.state={},v}return wz(b,x),gz(b,[{key:"componentDidMount",value:function(){var w,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,S=w.children,v=w.data,N=w.height,A=w.layout,P=Hr(S,ut);if(P){var T=P.props.defaultIndex;if(!(typeof T!="number"||T<0||T>this.state.tooltipTicks.length-1)){var M=this.state.tooltipTicks[T]&&this.state.tooltipTicks[T].value,E=v0(this.state,v,T,M),C=this.state.tooltipTicks[T].coordinate,O=(this.state.offset.top+N)/2,_=A==="horizontal",D=_?{x:C,y:O}:{y:C,x:O},L=this.state.formattedGraphicalItems.find(function(X){var W=X.item;return W.type.name==="Scatter"});L&&(D=Z(Z({},D),L.props.points[T].tooltipPosition),E=L.props.points[T].tooltipPayload);var V={activeTooltipIndex:T,isTooltipActive:!0,activeLabel:M,activePayload:E,activeCoordinate:D};this.setState(V),this.renderCursor(P),this.accessibilityManager.setIndex(T)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var v,N;this.accessibilityManager.setDetails({offset:{left:(v=this.props.margin.left)!==null&&v!==void 0?v:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0}})}return null}},{key:"componentDidUpdate",value:function(w){tp([Hr(w.children,ut)],[Hr(this.props.children,ut)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=Hr(this.props.children,ut);if(w&&typeof w.props.shared=="boolean"){var S=w.props.shared?"axis":"item";return l.indexOf(S)>=0?S:i}return i}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var S=this.container,v=S.getBoundingClientRect(),N=VD(v),A={chartX:Math.round(w.pageX-N.left),chartY:Math.round(w.pageY-N.top)},P=v.width/S.offsetWidth||1,T=this.inRange(A.chartX,A.chartY,P);if(!T)return null;var M=this.state,E=M.xAxisMap,C=M.yAxisMap,O=this.getTooltipEventType(),_=SS(this.state,this.props.data,this.props.layout,T);if(O!=="axis"&&E&&C){var D=Ta(E).scale,L=Ta(C).scale,V=D&&D.invert?D.invert(A.chartX):null,X=L&&L.invert?L.invert(A.chartY):null;return Z(Z({},A),{},{xValue:V,yValue:X},_)}return _?Z(Z({},A),_):null}},{key:"inRange",value:function(w,S){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,N=this.props.layout,A=w/v,P=S/v;if(N==="horizontal"||N==="vertical"){var T=this.state.offset,M=A>=T.left&&A<=T.left+T.width&&P>=T.top&&P<=T.top+T.height;return M?{x:A,y:P}:null}var E=this.state,C=E.angleAxisMap,O=E.radiusAxisMap;if(C&&O){var _=Ta(C);return ON({x:A,y:P},_)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,S=this.getTooltipEventType(),v=Hr(w,ut),N={};v&&S==="axis"&&(v.props.trigger==="click"?N={onClick:this.handleClick}:N={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var A=Cc(this.props,this.handleOuterEvent);return Z(Z({},A),N)}},{key:"addListener",value:function(){vx.on(wx,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){vx.removeListener(wx,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,S,v){for(var N=this.state.formattedGraphicalItems,A=0,P=N.length;A<P;A++){var T=N[A];if(T.item===w||T.props.key===w.key||S===da(T.item.type)&&v===T.childIndex)return T}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,S=this.state.offset,v=S.left,N=S.top,A=S.height,P=S.width;return R.createElement("defs",null,R.createElement("clipPath",{id:w},R.createElement("rect",{x:v,y:N,height:A,width:P})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(S,v){var N=wS(v,2),A=N[0],P=N[1];return Z(Z({},S),{},Ee({},A,P.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(S,v){var N=wS(v,2),A=N[0],P=N[1];return Z(Z({},S),{},Ee({},A,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[w])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(w){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[w])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(w){var S=this.state,v=S.formattedGraphicalItems,N=S.activeItem;if(v&&v.length)for(var A=0,P=v.length;A<P;A++){var T=v[A],M=T.props,E=T.item,C=E.type.defaultProps!==void 0?Z(Z({},E.type.defaultProps),E.props):E.props,O=da(E.type);if(O==="Bar"){var _=(M.data||[]).find(function(X){return aB(w,X)});if(_)return{graphicalItem:T,payload:_}}else if(O==="RadialBar"){var D=(M.data||[]).find(function(X){return ON(w,X)});if(D)return{graphicalItem:T,payload:D}}else if(su(T,N)||iu(T,N)||xl(T,N)){var L=NF({graphicalItem:T,activeTooltipItem:N,itemData:C.data}),V=C.activeIndex===void 0?L:C.activeIndex;return{graphicalItem:Z(Z({},T),{},{childIndex:V}),payload:xl(T,N)?C.data[L]:T.props.data[L]}}}return null}},{key:"render",value:function(){var w=this;if(!Ub(this))return null;var S=this.props,v=S.children,N=S.className,A=S.width,P=S.height,T=S.style,M=S.compact,E=S.title,C=S.desc,O=jS(S,dz),_=ke(O,!1);if(M)return R.createElement(eS,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},R.createElement(np,ci({},_,{width:A,height:P,title:E,desc:C}),this.renderClipPath(),Vb(v,this.renderMap)));if(this.props.accessibilityLayer){var D,L;_.tabIndex=(D=this.props.tabIndex)!==null&&D!==void 0?D:0,_.role=(L=this.props.role)!==null&&L!==void 0?L:"application",_.onKeyDown=function(X){w.accessibilityManager.keyboardEvent(X)},_.onFocus=function(){w.accessibilityManager.focus()}}var V=this.parseEventsOfWrapper();return R.createElement(eS,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},R.createElement("div",ci({className:Ve("recharts-wrapper",N),style:Z({position:"relative",cursor:"default",width:A,height:P},T)},V,{ref:function(W){w.container=W}}),R.createElement(np,ci({},_,{width:A,height:P,title:E,desc:C,style:Pz}),this.renderClipPath(),Vb(v,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(k.Component);Ee(g,"displayName",n),Ee(g,"defaultProps",Z({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),Ee(g,"getDerivedStateFromProps",function(x,b){var y=x.dataKey,w=x.data,S=x.children,v=x.width,N=x.height,A=x.layout,P=x.stackOffset,T=x.margin,M=b.dataStartIndex,E=b.dataEndIndex;if(b.updateId===void 0){var C=kS(x);return Z(Z(Z({},C),{},{updateId:0},m(Z(Z({props:x},C),{},{updateId:0}),b)),{},{prevDataKey:y,prevData:w,prevWidth:v,prevHeight:N,prevLayout:A,prevStackOffset:P,prevMargin:T,prevChildren:S})}if(y!==b.prevDataKey||w!==b.prevData||v!==b.prevWidth||N!==b.prevHeight||A!==b.prevLayout||P!==b.prevStackOffset||!hi(T,b.prevMargin)){var O=kS(x),_={chartX:b.chartX,chartY:b.chartY,isTooltipActive:b.isTooltipActive},D=Z(Z({},SS(b,w,A)),{},{updateId:b.updateId+1}),L=Z(Z(Z({},O),_),D);return Z(Z(Z({},L),m(Z({props:x},L),b)),{},{prevDataKey:y,prevData:w,prevWidth:v,prevHeight:N,prevLayout:A,prevStackOffset:P,prevMargin:T,prevChildren:S})}if(!tp(S,b.prevChildren)){var V,X,W,ce,de=Hr(S,Oi),fe=de&&(V=(X=de.props)===null||X===void 0?void 0:X.startIndex)!==null&&V!==void 0?V:M,F=de&&(W=(ce=de.props)===null||ce===void 0?void 0:ce.endIndex)!==null&&W!==void 0?W:E,Te=fe!==M||F!==E,pe=!Ue(w),re=pe&&!Te?b.updateId:b.updateId+1;return Z(Z({updateId:re},m(Z(Z({props:x},b),{},{updateId:re,dataStartIndex:fe,dataEndIndex:F}),b)),{},{prevChildren:S,dataStartIndex:fe,dataEndIndex:F})}return null}),Ee(g,"renderActiveDot",function(x,b,y){var w;return k.isValidElement(x)?w=k.cloneElement(x,b):De(x)?w=x(b):w=R.createElement(_l,b),R.createElement(Ye,{className:"recharts-active-dot",key:y},w)});var p=k.forwardRef(function(b,y){return R.createElement(g,ci({},b,{ref:y}))});return p.displayName=g.displayName,p},PS=fu({chartName:"LineChart",GraphicalChild:ws,axisComponents:[{axisType:"xAxis",AxisComp:ir},{axisType:"yAxis",AxisComp:or}],formatAxisMap:wg}),ea=fu({chartName:"BarChart",GraphicalChild:_r,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:ir},{axisType:"yAxis",AxisComp:or}],formatAxisMap:wg}),ti=fu({chartName:"PieChart",GraphicalChild:Fr,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:au},{axisType:"radiusAxis",AxisComp:ru}],formatAxisMap:j$,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),CS=fu({chartName:"AreaChart",GraphicalChild:Un,axisComponents:[{axisType:"xAxis",AxisComp:ir},{axisType:"yAxis",AxisComp:or}],formatAxisMap:wg});function $z(e){const t=new Map;e.forEach(a=>{t.has(a.sessionId)||t.set(a.sessionId,[]),t.get(a.sessionId).push(a)});const n=[];return t.forEach((a,s)=>{a.sort((f,m)=>new Date(f.timestamp).getTime()-new Date(m.timestamp).getTime());const i=new Date(a[0].timestamp),o=new Date(a[a.length-1].timestamp),l=o.getTime()-i.getTime(),c=a.some(f=>f.checkoutCompleted),d=a.some(f=>f.addedToCart),u=a.map(f=>f.originalQuery).slice(0,5).join(" → "),h=new Set(a.map(f=>f.query.toLowerCase())).size;n.push({sessionId:s,searches:a,startTime:i,endTime:o,duration:l,totalSearches:a.length,uniqueQueries:h,converted:c,addedToCart:d,pattern:u,userId:a[0].userId})}),n}function Lz(e){if(e.length===0)return{totalSessions:0,avgSearchesPerSession:0,conversionRate:0,addToCartRate:0,abandonmentRate:100,avgSessionDuration:0,commonPatterns:[],topConversionPaths:[]};const t=e.length,n=e.reduce((f,m)=>f+m.totalSearches,0),a=e.filter(f=>f.converted).length,s=e.filter(f=>f.addedToCart).length,i=e.filter(f=>!f.converted&&!f.addedToCart).length,o=e.reduce((f,m)=>f+m.duration,0),l=new Map;e.forEach(f=>{const m=f.pattern;l.has(m)||l.set(m,{count:0,conversions:0});const g=l.get(m);g.count++,f.converted&&g.conversions++});const c=Array.from(l.entries()).map(([f,m])=>({pattern:f,count:m.count,conversionRate:m.conversions/m.count*100})).sort((f,m)=>m.count-f.count).slice(0,10),d=e.filter(f=>f.converted).map(f=>f.pattern),u=new Map;d.forEach(f=>{u.set(f,(u.get(f)||0)+1)});const h=Array.from(u.entries()).map(([f,m])=>({path:f,conversions:m})).sort((f,m)=>m.conversions-f.conversions).slice(0,10);return{totalSessions:t,avgSearchesPerSession:n/t,conversionRate:a/t*100,addToCartRate:s/t*100,abandonmentRate:i/t*100,avgSessionDuration:o/t/6e4,commonPatterns:c,topConversionPaths:h}}function Bz(e){if(e.length<2)return!1;let t=0;for(let n=1;n<e.length;n++){const a=e[n-1].query.toLowerCase(),s=e[n].query.toLowerCase();(s.includes(a)||s.length>a.length)&&t++,e[n].resultsCount<e[n-1].resultsCount&&t++}return t>=e.length}function Fz(e){if(e.length<2)return!1;let t=0;for(let n=1;n<e.length;n++){const a=e[n-1].query.toLowerCase();e[n].query.toLowerCase().length<a.length&&t++,e[n].resultsCount>e[n-1].resultsCount*1.5&&t++}return t>=e.length}function qz(e){if(e.converted)return"Converted";if(e.addedToCart)return"Added to Cart";const t=Bz(e.searches),n=Fz(e.searches);return t?"Narrowing Search":n?"Broadening Search":e.totalSearches===1?"Single Search":e.uniqueQueries===e.totalSearches?"Exploring Options":"Repeated Searches"}function Uz(e,t){const n=e.length,a=e.filter(y=>y.query!=="").length,s=e.filter(y=>y.addedToCart).length,i=e.filter(y=>y.checkoutCompleted).length,o=a>0?a/n*100:0,l=a>0?s/a*100:0,c=s>0?i/s*100:0,d=n>0?i/n*100:0,h=t.filter(y=>y.conversionType==="checkout").reduce((y,w)=>y+(w.orderTotal||0),0),f=n>0?h/n:0,m=i>0?h/i:0,g=e.filter(y=>y.addedToCart&&y.convertedAt),p=g.length>0?g.reduce((y,w)=>{const S=w.convertedAt.getTime()-w.timestamp.getTime();return y+S/6e4},0)/g.length:0,x=e.filter(y=>y.checkoutCompleted&&y.convertedAt),b=x.length>0?x.reduce((y,w)=>{const S=w.convertedAt.getTime()-w.timestamp.getTime();return y+S/6e4},0)/x.length:0;return{totalSearches:n,searchesWithResults:a,addedToCart:s,completedCheckout:i,searchToView:o,viewToCart:l,cartToCheckout:c,searchToCheckout:d,totalRevenue:h,avgRevenuePerSearch:f,avgRevenuePerConversion:m,avgTimeToCart:p,avgTimeToCheckout:b}}function zz(e,t){const n=new Map;return e.forEach(s=>{const i=s.query.toLowerCase();n.has(i)||n.set(i,{searchCount:0,conversions:0,revenue:0});const o=n.get(i);o.searchCount++,s.checkoutCompleted&&s.orderTotal&&(o.conversions++,o.revenue+=s.orderTotal)}),Array.from(n.entries()).map(([s,i])=>({query:s,searchCount:i.searchCount,conversions:i.conversions,conversionRate:i.conversions/i.searchCount*100,totalRevenue:i.revenue,avgRevenue:i.conversions>0?i.revenue/i.conversions:0,revenuePerSearch:i.revenue/i.searchCount})).filter(s=>s.totalRevenue>0).sort((s,i)=>i.totalRevenue-s.totalRevenue)}function Vz(e){return[{stage:"Searches",count:e.totalSearches,percentage:100,dropoff:0},{stage:"Views",count:e.searchesWithResults,percentage:e.searchToView,dropoff:e.totalSearches-e.searchesWithResults},{stage:"Add to Cart",count:e.addedToCart,percentage:e.addedToCart/e.totalSearches*100,dropoff:e.searchesWithResults-e.addedToCart},{stage:"Checkout",count:e.completedCheckout,percentage:e.searchToCheckout,dropoff:e.addedToCart-e.completedCheckout}]}function Wz(e,t=7){const n=new Date,a=new Date(n.getTime()-t*24*60*60*1e3),s=new Map;return e.forEach(i=>{if(i.timestamp>=a){const o=i.timestamp.toISOString().split("T")[0];s.has(o)||s.set(o,{searches:0,conversions:0});const l=s.get(o);l.searches++,i.checkoutCompleted&&l.conversions++}}),Array.from(s.entries()).map(([i,o])=>({date:i,searchCount:o.searches,conversionRate:o.conversions/o.searches*100})).sort((i,o)=>i.date.localeCompare(o.date))}function pc(e){return new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(e)}function OS(e){if(e<1)return"<1 min";if(e<60)return`${Math.round(e)} min${Math.round(e)!==1?"s":""}`;{const t=Math.floor(e/60),n=Math.round(e%60);return`${t}h ${n}m`}}function Hz(e){var a;const t={},n={};for(const s of e){const i=t[a=s.sessionId]||(t[a]={sessionId:s.sessionId,totalRefinements:0,stuckIndicators:{excessiveRefinements:!1,loopsDetected:!1,repeatedZeroResults:!1},path:[]});i.totalRefinements+=1,i.path.push({query:s.previousQuery,filters:s.removedFilters,resultsCount:s.previousResultsCount,timestamp:s.timestamp-1}),i.path.push({query:s.newQuery,filters:s.addedFilters,resultsCount:s.newResultsCount,timestamp:s.timestamp});const o=`${s.previousQuery} -> ${s.newQuery}`.toLowerCase();n[o]=(n[o]||0)+1}for(const s of Object.values(t)){s.totalRefinements>5&&(s.stuckIndicators.excessiveRefinements=!0);const i={};for(const d of s.path){const u=d.query.toLowerCase();i[u]=(i[u]||0)+1}s.stuckIndicators.loopsDetected=Object.values(i).some(d=>d>=3);let o=0;for(const d of s.path)if((d.resultsCount||0)===0?o++:o=0,o>=2){s.stuckIndicators.repeatedZeroResults=!0;break}let l,c=0;for(const[d,u]of Object.entries(n))u>c&&(c=u,l=d);s.mostCommonTransition=l}return Object.values(t)}function Gz(){const[e,t]=k.useState([]),[n,a]=k.useState([]),[s,i]=k.useState([]),[o,l]=k.useState(!0),[c,d]=k.useState(!1),[u,h]=k.useState(!1),[f,m]=k.useState("7"),[g,p]=k.useState(""),[x,b]=k.useState("area"),[y,w]=k.useState("daily"),[S,v]=k.useState([]),[N,A]=k.useState([]),[P,T]=k.useState(null),[M,E]=k.useState([]),[C,O]=k.useState([]),[_,D]=k.useState(null),L=k.useCallback(async()=>{if(!br){te.error("Firebase not configured");return}l(!0);try{const U=parseInt(f),Q=new Date;Q.setDate(Q.getDate()-U);let ae=[];try{const Me=Da(Rn(br,"searchQueries"),Oo("timestamp",">=",ia.fromDate(Q)),ni("timestamp","desc"),No(100));ae=(await ai(Me)).docs.map(rt=>({id:rt.id,...rt.data()}))}catch(Me){J.warn("SearchAnalytics: failed to load recent searches",{error:Me})}t(ae);const Se=new Map;ae.forEach(Me=>{const Ft=Me.query.toLowerCase();Se.has(Ft)||Se.set(Ft,{query:Me.originalQuery||Me.query,count:0,avgResults:0,zeroResults:0,categories:{},intents:{}});const rt=Se.get(Ft);rt.count++,rt.avgResults+=Me.resultsCount,Me.resultsCount===0&&rt.zeroResults++,rt.categories[Me.category]=(rt.categories[Me.category]||0)+1,Me.intent&&(rt.intents[Me.intent]=(rt.intents[Me.intent]||0)+1)});const qe=Array.from(Se.values()).map(Me=>({...Me,avgResults:Math.round(Me.avgResults/Me.count)})).sort((Me,Ft)=>Ft.count-Me.count).slice(0,20);a(qe);try{const Me=Da(Rn(br,"zeroResultSearches"),Oo("timestamp",">=",ia.fromDate(Q)),ni("timestamp","desc"),No(50)),rt=(await ai(Me)).docs.map(mn=>({id:mn.id,...mn.data()}));i(rt)}catch(Me){J.warn("SearchAnalytics: failed to load zero-result searches",{error:Me}),i([])}const _e=ae.filter(Me=>Me.sessionId).map(Me=>({...Me,sessionId:Me.sessionId,timestamp:Me.timestamp.toDate()})),ze=$z(_e);v(ze);const vt=Lz(ze);D(vt);let Ir=[];try{const Me=Da(Rn(br,"searchConversions"),Oo("timestamp",">=",ia.fromDate(Q)),ni("timestamp","desc"),No(500));Ir=(await ai(Me)).docs.map(rt=>{var mn;return{id:rt.id,...rt.data(),timestamp:(mn=rt.data().timestamp)==null?void 0:mn.toDate()}}),A(Ir)}catch(Me){J.warn("SearchAnalytics: failed to load conversions",{error:Me}),Ir=[],A([])}const Tn=ae.map(Me=>{var Ft,rt;return{id:Me.id,query:Me.query,originalQuery:Me.originalQuery,timestamp:Me.timestamp.toDate(),addedToCart:Me.addedToCart,checkoutCompleted:Me.checkoutCompleted,orderTotal:Me.orderTotal,convertedAt:(rt=(Ft=Me.convertedAt)==null?void 0:Ft.toDate)==null?void 0:rt.call(Ft)}}),_n=Uz(Tn,Ir);T(_n);const Fs=zz(Tn,Ir);E(Fs);const Ya=Wz(Tn,parseInt(f));O(Ya)}catch(U){J.error("Error loading search analytics",U);let Q="Failed to load search analytics";U instanceof Error&&(Q=U.message,U.message.includes("index")?Q="Database index required. Check Firebase Console for index creation link.":U.message.includes("permission")?Q="Permission denied. Check Firestore security rules.":U.message.includes("network")&&(Q="Network error. Check your connection.")),te.error(Q)}finally{l(!1)}},[f]);k.useEffect(()=>{L()},[L]);const V=async()=>{d(!0);try{await L(),te.success("Search analytics refreshed")}catch{te.error("Failed to refresh data")}finally{d(!1)}},X=async()=>{try{const{auth:U}=await Ie(async()=>{const{auth:qe}=await import("./index-C09NoPC0.js").then(_e=>_e.cq);return{auth:qe}},__vite__mapDeps([0,1,2,3,4])),{getIdToken:Q}=await Ie(async()=>{const{getIdToken:qe}=await import("./firebase-D5dyMTPx.js").then(_e=>_e.A);return{getIdToken:qe}},[]);let ae="";U&&U.currentUser&&(ae=await Q(U.currentUser));const Se=await fetch("/api/admin/analytics/reset",{method:"DELETE",headers:{"Content-Type":"application/json",...ae?{Authorization:`Bearer ${ae}`}:{}},body:JSON.stringify({type:"custom",collections:["searchQueries","zeroResultSearches"],confirm:!0})});if(!Se.ok){const qe=await Se.json().catch(()=>({}));throw new Error(qe.error||"Failed to clear search data")}await L(),te.success("Search analytics data cleared successfully"),h(!1)}catch(U){J.error("Error clearing search data",U),te.error(U instanceof Error?U.message:"Failed to clear search data")}},W=()=>{const U=["Query","Category","Results","Timestamp","User ID","Session ID"],Q=e.map(ze=>{var vt,Ir;return[ze.originalQuery||ze.query,ze.category,ze.resultsCount,((Ir=(vt=ze.timestamp)==null?void 0:vt.toDate)==null?void 0:Ir.call(vt).toISOString())||"",ze.userId||"",ze.sessionId||""]}),ae=[U.join(","),...Q.map(ze=>ze.map(vt=>`"${String(vt).replace(/"/g,'""')}"`).join(","))].join(`
`),Se=new Blob([ae],{type:"text/csv"}),qe=URL.createObjectURL(Se),_e=document.createElement("a");_e.href=qe,_e.download=`search-analytics-${new Date().toISOString().split("T")[0]}.csv`,_e.click(),URL.revokeObjectURL(qe),te.success("Search data exported")},ce=e.filter(U=>U.originalQuery.toLowerCase().includes(g.toLowerCase())),de=e.length,fe=de>0?Math.round(e.reduce((U,Q)=>U+Q.resultsCount,0)/de):0,F=de>0?Math.round(s.length/de*100):0,Te=()=>{if(e.length===0)return[];const U=new Map;return e.forEach(Q=>{var _e,ze;const ae=(ze=(_e=Q.timestamp)==null?void 0:_e.toDate)==null?void 0:ze.call(_e);if(!ae)return;let Se;y==="hourly"?Se=`${ae.toLocaleDateString("en-GB",{month:"short",day:"numeric"})} ${ae.getHours()}:00`:Se=ae.toLocaleDateString("en-GB",{month:"short",day:"numeric"}),U.has(Se)||U.set(Se,{searches:0,zeroResults:0});const qe=U.get(Se);qe.searches++,Q.resultsCount===0&&qe.zeroResults++}),Array.from(U.entries()).map(([Q,ae])=>({time:Q,searches:ae.searches,zeroResults:ae.zeroResults})).slice(-24)},pe=()=>{const U=new Map;return e.forEach(Q=>{const ae=Q.category||"Unknown";U.set(ae,(U.get(ae)||0)+1)}),Array.from(U.entries()).map(([Q,ae])=>({name:Q,value:ae})).sort((Q,ae)=>ae.value-Q.value)},re=()=>{const U=new Map;for(let Q=0;Q<24;Q++)U.set(Q,0);return e.forEach(Q=>{var qe,_e;const ae=(_e=(qe=Q.timestamp)==null?void 0:qe.toDate)==null?void 0:_e.call(qe);if(!ae)return;const Se=ae.getHours();U.set(Se,(U.get(Se)||0)+1)}),Array.from(U.entries()).map(([Q,ae])=>({hour:`${Q}:00`,searches:ae}))},be=()=>{const U=new Map;return e.forEach(Q=>{Q.intent&&U.set(Q.intent,(U.get(Q.intent)||0)+1)}),Array.from(U.entries()).map(([Q,ae])=>({name:Tu(Q),value:ae,intent:Q})).sort((Q,ae)=>ae.value-Q.value)},se=["#0ea5e9","#3b82f6","#06b6d4","#8b5cf6","#ec4899","#f59e0b","#10b981","#ef4444"],oe=Te(),me=pe(),ve=re(),I=be(),ge=(U,Q)=>{if(!U)return;const ae=U[Q];return typeof ae=="string"?ae:void 0},Ne=(U,Q)=>{if(!U)return;const ae=U[Q];return typeof ae=="boolean"?ae:void 0},He=U=>{const Q=Ne(U.filters,"isMobile"),ae=(ge(U.filters,"deviceType")||ge(U.filters,"device")||"").toLowerCase();return Q===!0||ae.includes("mobile")?"Mobile":ae.includes("tablet")?"Tablet":ae.includes("desktop")||ae.includes("pc")?"Desktop":"Unknown"},bt=()=>{const U=new Map;let Q=0;e.forEach(ze=>{ze.userId?U.set(ze.userId,(U.get(ze.userId)||0)+1):Q++});let ae=0,Se=0,qe=0,_e=0;return U.forEach(ze=>{ze<=1?(qe++,ae+=ze):(_e++,Se+=ze)}),{chart:[{name:"New",value:ae},{name:"Returning",value:Se},{name:"Guest",value:Q}],users:{total:U.size,newUsers:qe,returningUsers:_e,guestSearches:Q}}},It=()=>{const U=new Map;return["Mobile","Desktop","Tablet","Unknown"].forEach(Q=>U.set(Q,0)),e.forEach(Q=>{const ae=He(Q);U.set(ae,(U.get(ae)||0)+1)}),Array.from(U.entries()).map(([Q,ae])=>({name:Q,value:ae})).sort((Q,ae)=>ae.value-Q.value)},Ar=()=>{const U=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Q=new Map;for(let ae=0;ae<7;ae++)Q.set(ae,0);return e.forEach(ae=>{var _e,ze;const Se=(ze=(_e=ae.timestamp)==null?void 0:_e.toDate)==null?void 0:ze.call(_e);if(!Se)return;const qe=Se.getDay();Q.set(qe,(Q.get(qe)||0)+1)}),Array.from(Q.entries()).map(([ae,Se])=>({day:U[ae],searches:Se}))},Ur=()=>{const U=new Map;for(let Q=0;Q<24;Q++)U.set(Q,0);return e.forEach(Q=>{var qe,_e;const ae=(_e=(qe=Q.timestamp)==null?void 0:qe.toDate)==null?void 0:_e.call(qe);if(!ae)return;const Se=ae.getHours();U.set(Se,(U.get(Se)||0)+1)}),Array.from(U.entries()).map(([Q,ae])=>({hour:`${Q}:00`,searches:ae}))},Pr=bt(),Cr=It(),zr=Ar(),Hn=Ur(),Jr=U=>{const Q=new Map;return e.forEach(ae=>{var qe,_e;const Se=(_e=(qe=ae.filters)==null?void 0:qe[U])==null?void 0:_e.trim();Se&&Q.set(Se,(Q.get(Se)||0)+1)}),Array.from(Q.entries()).map(([ae,Se])=>({name:ae,value:Se})).sort((ae,Se)=>Se.value-ae.value)},Cn=(U,Q=8)=>{if(U.length<=Q)return U;const ae=U.slice(0,Q),Se=U.slice(Q).reduce((qe,_e)=>qe+_e.value,0);return[...ae,{name:"Others",value:Se}]},Ha=Cn(Jr("country"),8),Ga=Jr("region").slice(0,10),sr=Jr("city").slice(0,10),Gn=Cn(Jr("language"),8),Ka=Jr("timezone").slice(0,10),[ya,xr]=k.useState([]),On=(()=>{const U={};return ya.map(Q=>Q.mostCommonTransition).filter(Q=>!!Q).forEach(Q=>{U[Q]=(U[Q]||0)+1}),Object.entries(U).map(([Q,ae])=>({name:Q,value:ae})).sort((Q,ae)=>ae.value-Q.value).slice(0,10)})();return k.useEffect(()=>{(async()=>{try{const Q=(await ai(Da(Rn(br,"searchRefinements"),ni("timestamp","desc"),No(500)))).docs.map(ae=>ae.data());xr(Hz(Q.map(ae=>({sessionId:String(ae.sessionId||""),previousQuery:String(ae.previousQuery||""),newQuery:String(ae.newQuery||""),addedFilters:ae.addedFilters||{},removedFilters:ae.removedFilters||{},previousResultsCount:ae.previousResultsCount||void 0,newResultsCount:ae.newResultsCount||void 0,timestamp:Number(ae.timestamp||Date.now())}))))}catch(U){J.error("Refinement analysis load error",U)}})()},[f]),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Search Analytics"}),r.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Track what users are searching for in PC Builder"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{value:f,onChange:U=>m(U.target.value),className:"px-4 py-2 rounded-lg bg-white/5 border border-white/10 text-white",children:[r.jsx("option",{value:"1",children:"Last 24 hours"}),r.jsx("option",{value:"7",children:"Last 7 days"}),r.jsx("option",{value:"30",children:"Last 30 days"}),r.jsx("option",{value:"90",children:"Last 90 days"})]}),r.jsxs($,{onClick:V,variant:"outline",className:"border-white/10 text-white hover:bg-white/5",disabled:c||o,children:[r.jsx(Bt,{className:`w-4 h-4 mr-2 ${c?"animate-spin":""}`}),"Refresh"]}),r.jsxs($,{onClick:()=>h(!0),variant:"outline",className:"border-red-500/30 text-red-400 hover:bg-red-500/10 hover:border-red-500/50",disabled:e.length===0,children:[r.jsx(Kr,{className:"w-4 h-4 mr-2"}),"Clear Data"]}),r.jsxs($,{onClick:W,variant:"outline",className:"border-white/10 text-white hover:bg-white/5",disabled:e.length===0,children:[r.jsx(jn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ce,{className:"text-sm font-medium text-gray-300",children:"Total Searches"}),r.jsx(js,{className:"h-4 w-4 text-sky-400"})]}),r.jsxs(je,{children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:de}),r.jsxs("p",{className:"text-xs text-gray-400",children:["In last ",f," days"]})]})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ce,{className:"text-sm font-medium text-gray-300",children:"Avg Results"}),r.jsx(sn,{className:"h-4 w-4 text-blue-400"})]}),r.jsxs(je,{children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:fe}),r.jsx("p",{className:"text-xs text-gray-400",children:"Components per search"})]})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ce,{className:"text-sm font-medium text-gray-300",children:"Zero Results"}),r.jsx(mt,{className:"h-4 w-4 text-yellow-400"})]}),r.jsxs(je,{children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:s.length}),r.jsxs("p",{className:"text-xs text-gray-400",children:[F,"% of searches"]})]})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ce,{className:"text-sm font-medium text-gray-300",children:"Popular Terms"}),r.jsx(zt,{className:"h-4 w-4 text-green-400"})]}),r.jsxs(je,{children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:n.length}),r.jsx("p",{className:"text-xs text-gray-400",children:"Unique queries"})]})]})]}),r.jsxs(Nc,{defaultValue:"charts",className:"space-y-4",children:[r.jsxs(Sc,{className:"bg-white/5 border border-white/10",children:[r.jsx(ht,{value:"charts",children:"Charts Overview"}),r.jsx(ht,{value:"conversions",children:"Conversions"}),r.jsx(ht,{value:"cohorts",children:"Cohorts"}),r.jsx(ht,{value:"sessions",children:"Session Flow"}),r.jsx(ht,{value:"popular",children:"Popular Searches"}),r.jsx(ht,{value:"recent",children:"Recent Searches"}),r.jsx(ht,{value:"zero",children:"Zero Results"})]}),r.jsx(lt,{value:"charts",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:r.jsx(Pe,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(Ce,{className:"text-white flex items-center gap-2",children:[r.jsx(Ey,{className:"w-5 h-5 text-sky-400"}),"Visual Analytics"]}),r.jsx(st,{className:"text-gray-400",children:"Interactive charts showing search trends and patterns"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{value:y,onChange:U=>w(U.target.value),className:"px-3 py-1.5 rounded-lg bg-white/5 border border-white/10 text-white text-sm",children:[r.jsx("option",{value:"hourly",children:"Hourly"}),r.jsx("option",{value:"daily",children:"Daily"})]}),r.jsxs("select",{value:x,onChange:U=>b(U.target.value),className:"px-3 py-1.5 rounded-lg bg-white/5 border border-white/10 text-white text-sm",children:[r.jsx("option",{value:"area",children:"Area Chart"}),r.jsx("option",{value:"line",children:"Line Chart"})]})]})]})})}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsx(Ce,{className:"text-white",children:"Search Volume Trend"}),r.jsx(st,{className:"text-gray-400",children:"Total searches over time with zero-result tracking"})]}),r.jsx(je,{children:o?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"Loading..."}):oe.length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"No data available"}):r.jsx(pr,{width:"100%",height:300,children:x==="area"?r.jsxs(CS,{data:oe,children:[r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:"colorSearches",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"#0ea5e9",stopOpacity:.8}),r.jsx("stop",{offset:"95%",stopColor:"#0ea5e9",stopOpacity:.1})]}),r.jsxs("linearGradient",{id:"colorZeroResults",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"#f59e0b",stopOpacity:.8}),r.jsx("stop",{offset:"95%",stopColor:"#f59e0b",stopOpacity:.1})]})]}),r.jsx(Br,{strokeDasharray:"3 3",stroke:"#ffffff10"}),r.jsx(ir,{dataKey:"time",stroke:"#9ca3af",tick:{fill:"#9ca3af"}}),r.jsx(or,{stroke:"#9ca3af",tick:{fill:"#9ca3af"}}),r.jsx(ut,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#fff"}}),r.jsx(La,{wrapperStyle:{color:"#9ca3af"}}),r.jsx(Un,{type:"monotone",dataKey:"searches",stroke:"#0ea5e9",fillOpacity:1,fill:"url(#colorSearches)",name:"Total Searches"}),r.jsx(Un,{type:"monotone",dataKey:"zeroResults",stroke:"#f59e0b",fillOpacity:1,fill:"url(#colorZeroResults)",name:"Zero Results"})]}):r.jsxs(PS,{data:oe,children:[r.jsx(Br,{strokeDasharray:"3 3",stroke:"#ffffff10"}),r.jsx(ir,{dataKey:"time",stroke:"#9ca3af",tick:{fill:"#9ca3af"}}),r.jsx(or,{stroke:"#9ca3af",tick:{fill:"#9ca3af"}}),r.jsx(ut,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#fff"}}),r.jsx(La,{wrapperStyle:{color:"#9ca3af"}}),r.jsx(ws,{type:"monotone",dataKey:"searches",stroke:"#0ea5e9",strokeWidth:2,name:"Total Searches",dot:{fill:"#0ea5e9"}}),r.jsx(ws,{type:"monotone",dataKey:"zeroResults",stroke:"#f59e0b",strokeWidth:2,name:"Zero Results",dot:{fill:"#f59e0b"}})]})})})]}),r.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsx(Ce,{className:"text-white",children:"Category Distribution"}),r.jsx(st,{className:"text-gray-400",children:"Which components users search for most"})]}),r.jsx(je,{children:o?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"Loading..."}):me.length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"No data available"}):r.jsx(pr,{width:"100%",height:300,children:r.jsxs(ti,{children:[r.jsx(Fr,{data:me,cx:"50%",cy:"50%",labelLine:!1,label:U=>`${U.name} (${U.value})`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:me.map((U,Q)=>r.jsx(sa,{fill:se[Q%se.length]},`cell-${Q}`))}),r.jsx(ut,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#fff"}})]})})})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsx(Ce,{className:"text-white",children:"Hourly Search Activity"}),r.jsx(st,{className:"text-gray-400",children:"Peak search times throughout the day"})]}),r.jsx(je,{children:o?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"Loading..."}):ve.length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"No data available"}):r.jsx(pr,{width:"100%",height:300,children:r.jsxs(ea,{data:ve,children:[r.jsx(Br,{strokeDasharray:"3 3",stroke:"#ffffff10"}),r.jsx(ir,{dataKey:"hour",stroke:"#9ca3af",tick:{fill:"#9ca3af",fontSize:10},interval:2}),r.jsx(or,{stroke:"#9ca3af",tick:{fill:"#9ca3af"}}),r.jsx(ut,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#fff"}}),r.jsx(_r,{dataKey:"searches",fill:"#0ea5e9",radius:[4,4,0,0],name:"Searches"})]})})})]})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsx(Ce,{className:"text-white",children:"Search Intent Distribution"}),r.jsx(st,{className:"text-gray-400",children:"Understand customer behavior: Research, Comparison, Price Checking, or Specific Product"})]}),r.jsx(je,{children:o?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"Loading..."}):I.length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"No intent data available yet"}):r.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[r.jsx(pr,{width:"100%",height:300,children:r.jsxs(ti,{children:[r.jsx(Fr,{data:I,cx:"50%",cy:"50%",labelLine:!1,label:U=>`${U.name}: ${U.value}`,outerRadius:90,fill:"#8884d8",dataKey:"value",children:I.map((U,Q)=>r.jsx(sa,{fill:Q===0?"#3b82f6":Q===1?"#8b5cf6":Q===2?"#f59e0b":"#10b981"},`cell-${Q}`))}),r.jsx(ut,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#fff"}})]})}),r.jsx("div",{className:"space-y-4",children:I.map(U=>{const Q=Ou(U.intent),ae=(U.value/de*100).toFixed(1);return r.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-white/5 border border-white/10",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:U.intent==="research"?"#3b82f6":U.intent==="comparison"?"#8b5cf6":U.intent==="price_checking"?"#f59e0b":"#10b981"}}),r.jsx("div",{children:r.jsx(H,{className:`${Q.bg} ${Q.border} ${Q.text}`,children:U.name})})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:U.value}),r.jsxs("div",{className:"text-sm text-gray-400",children:[ae,"%"]})]})]},U.intent)})})]})})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsx(Ce,{className:"text-white",children:"Top Search Terms"}),r.jsx(st,{className:"text-gray-400",children:"Most popular search queries"})]}),r.jsx(je,{children:o?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"Loading..."}):n.length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"No data available"}):r.jsx(pr,{width:"100%",height:400,children:r.jsxs(ea,{data:n.slice(0,10),layout:"vertical",margin:{left:100},children:[r.jsx(Br,{strokeDasharray:"3 3",stroke:"#ffffff10"}),r.jsx(ir,{type:"number",stroke:"#9ca3af",tick:{fill:"#9ca3af"}}),r.jsx(or,{type:"category",dataKey:"query",stroke:"#9ca3af",tick:{fill:"#9ca3af"},width:90}),r.jsx(ut,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#fff"}}),r.jsx(_r,{dataKey:"count",fill:"#3b82f6",radius:[0,4,4,0],name:"Search Count"})]})})})]})]})}),r.jsx(lt,{value:"conversions",children:r.jsxs("div",{className:"space-y-6",children:[P&&r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ce,{className:"text-sm font-medium text-gray-300",children:"Search → View"}),r.jsx(zt,{className:"h-4 w-4 text-sky-400"})]}),r.jsxs(je,{children:[r.jsxs("div",{className:"text-2xl font-bold text-white",children:[P.searchToView.toFixed(1),"%"]}),r.jsxs("p",{className:"text-xs text-gray-400",children:[P.searchesWithResults," with results"]})]})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ce,{className:"text-sm font-medium text-gray-300",children:"View → Cart"}),r.jsx(sn,{className:"h-4 w-4 text-amber-400"})]}),r.jsxs(je,{children:[r.jsxs("div",{className:"text-2xl font-bold text-white",children:[P.viewToCart.toFixed(1),"%"]}),r.jsxs("p",{className:"text-xs text-gray-400",children:[P.addedToCart," added to cart"]})]})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ce,{className:"text-sm font-medium text-gray-300",children:"Cart → Checkout"}),r.jsx(zt,{className:"h-4 w-4 text-green-400"})]}),r.jsxs(je,{children:[r.jsxs("div",{className:"text-2xl font-bold text-white",children:[P.cartToCheckout.toFixed(1),"%"]}),r.jsxs("p",{className:"text-xs text-gray-400",children:[P.completedCheckout," purchases"]})]})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ce,{className:"text-sm font-medium text-gray-300",children:"Revenue (Search)"}),r.jsx(zt,{className:"h-4 w-4 text-cyan-400"})]}),r.jsxs(je,{children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:pc(P.totalRevenue)}),r.jsxs("p",{className:"text-xs text-gray-400",children:[pc(P.avgRevenuePerSearch)," / search"]})]})]})]}),r.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[P&&r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsxs(Ce,{className:"text-white flex items-center gap-2",children:[r.jsx(Ey,{className:"w-5 h-5 text-sky-400"}),"Conversion Funnel"]}),r.jsx(st,{className:"text-gray-400",children:"Visual drop-off from search to checkout"})]}),r.jsx(je,{children:r.jsx(pr,{width:"100%",height:300,children:r.jsxs(ea,{data:Vz(P),layout:"vertical",margin:{left:100},children:[r.jsx(Br,{strokeDasharray:"3 3",stroke:"#ffffff10"}),r.jsx(ir,{type:"number",stroke:"#9ca3af",tick:{fill:"#9ca3af"}}),r.jsx(or,{type:"category",dataKey:"stage",stroke:"#9ca3af",tick:{fill:"#9ca3af"},width:90}),r.jsx(ut,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#fff"}}),r.jsx(_r,{dataKey:"count",fill:"#0ea5e9",radius:[0,6,6,0],name:"Stage Count",children:r.jsx(Sn,{dataKey:"count",position:"right",fill:"#e5e7eb"})})]})})})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsx(Ce,{className:"text-white",children:"Conversion Rate Trend"}),r.jsx(st,{className:"text-gray-400",children:"Daily % of searches resulting in checkout"})]}),r.jsx(je,{children:C.length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"No trend data available"}):r.jsx(pr,{width:"100%",height:300,children:x==="area"?r.jsxs(CS,{data:C,children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"colorConversion",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"#22c55e",stopOpacity:.8}),r.jsx("stop",{offset:"95%",stopColor:"#22c55e",stopOpacity:.1})]})}),r.jsx(Br,{strokeDasharray:"3 3",stroke:"#ffffff10"}),r.jsx(ir,{dataKey:"date",stroke:"#9ca3af",tick:{fill:"#9ca3af"}}),r.jsx(or,{stroke:"#9ca3af",tick:{fill:"#9ca3af"},domain:[0,100]}),r.jsx(ut,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#fff"}}),r.jsx(Un,{type:"monotone",dataKey:"conversionRate",stroke:"#22c55e",fillOpacity:1,fill:"url(#colorConversion)",name:"Conversion Rate"})]}):r.jsxs(PS,{data:C,children:[r.jsx(Br,{strokeDasharray:"3 3",stroke:"#ffffff10"}),r.jsx(ir,{dataKey:"date",stroke:"#9ca3af",tick:{fill:"#9ca3af"}}),r.jsx(or,{stroke:"#9ca3af",tick:{fill:"#9ca3af"},domain:[0,100]}),r.jsx(ut,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#fff"}}),r.jsx(ws,{type:"monotone",dataKey:"conversionRate",stroke:"#22c55e",strokeWidth:2,dot:{fill:"#22c55e"},name:"Conversion Rate"})]})})})]})]}),M.length>0&&r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsx(Ce,{className:"text-white",children:"Revenue by Search Term"}),r.jsx(st,{className:"text-gray-400",children:"Which search terms drive the most revenue"})]}),r.jsx(je,{children:r.jsxs(Pa,{children:[r.jsx(Ca,{children:r.jsxs(yr,{className:"border-white/10",children:[r.jsx(Le,{className:"text-gray-300",children:"Search Term"}),r.jsx(Le,{className:"text-gray-300",children:"Searches"}),r.jsx(Le,{className:"text-gray-300",children:"Conversions"}),r.jsx(Le,{className:"text-gray-300",children:"Conv. Rate"}),r.jsx(Le,{className:"text-gray-300",children:"Revenue"}),r.jsx(Le,{className:"text-gray-300",children:"Rev/Search"})]})}),r.jsx(Oa,{children:M.slice(0,15).map(U=>r.jsxs(yr,{className:"border-white/10",children:[r.jsx(Re,{className:"text-white font-medium",children:U.query}),r.jsx(Re,{className:"text-gray-300",children:U.searchCount}),r.jsx(Re,{className:"text-gray-300",children:U.conversions}),r.jsx(Re,{children:r.jsxs(H,{className:U.conversionRate>5?"bg-green-500/20 border-green-500/40 text-green-400":U.conversionRate>2?"bg-amber-500/20 border-amber-500/40 text-amber-400":"bg-gray-500/20 border-gray-500/40 text-gray-400",children:[U.conversionRate.toFixed(1),"%"]})}),r.jsx(Re,{className:"text-white",children:pc(U.totalRevenue)}),r.jsx(Re,{className:"text-gray-300",children:pc(U.revenuePerSearch)})]},U.query))})]})})]}),P&&r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsx(Ce,{className:"text-white",children:"Time to Conversion"}),r.jsx(st,{className:"text-gray-400",children:"Average time from search to cart/checkout"})]}),r.jsx(je,{children:r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"p-4 rounded-lg bg-white/5 border border-white/10",children:[r.jsx("p",{className:"text-gray-300 text-sm",children:"Search → Cart"}),r.jsx("p",{className:"text-white text-2xl font-bold",children:OS(P.avgTimeToCart)})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-white/5 border border-white/10",children:[r.jsx("p",{className:"text-gray-300 text-sm",children:"Search → Checkout"}),r.jsx("p",{className:"text-white text-2xl font-bold",children:OS(P.avgTimeToCheckout)})]})]})})]}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Loaded ",N.length," conversion events in this period."]})]})}),r.jsx(lt,{value:"cohorts",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ce,{className:"text-sm font-medium text-gray-300",children:"Unique Users"}),r.jsx(js,{className:"h-4 w-4 text-sky-400"})]}),r.jsxs(je,{children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:Pr.users.total}),r.jsx("p",{className:"text-xs text-gray-400",children:"This period"})]})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ce,{className:"text-sm font-medium text-gray-300",children:"New Users"}),r.jsx(zt,{className:"h-4 w-4 text-green-400"})]}),r.jsxs(je,{children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:Pr.users.newUsers}),r.jsx("p",{className:"text-xs text-gray-400",children:"First-time this period"})]})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ce,{className:"text-sm font-medium text-gray-300",children:"Returning Users"}),r.jsx(sn,{className:"h-4 w-4 text-amber-400"})]}),r.jsxs(je,{children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:Pr.users.returningUsers}),r.jsx("p",{className:"text-xs text-gray-400",children:"Repeat searches"})]})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ce,{className:"text-sm font-medium text-gray-300",children:"Guest Searches"}),r.jsx(mt,{className:"h-4 w-4 text-yellow-400"})]}),r.jsxs(je,{children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:Pr.users.guestSearches}),r.jsx("p",{className:"text-xs text-gray-400",children:"No user ID"})]})]})]}),r.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsx(Ce,{className:"text-white",children:"New vs Returning"}),r.jsx(st,{className:"text-gray-400",children:"Share of searches by cohort"})]}),r.jsx(je,{children:r.jsx(pr,{width:"100%",height:300,children:r.jsxs(ti,{children:[r.jsx(Fr,{data:Pr.chart,cx:"50%",cy:"50%",labelLine:!1,label:U=>`${U.name}: ${U.value}`,outerRadius:90,fill:"#8884d8",dataKey:"value",children:Pr.chart.map((U,Q)=>r.jsx(sa,{fill:se[Q%se.length]},`cell-nr-${Q}`))}),r.jsx(ut,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#fff"}})]})})})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsx(Ce,{className:"text-white",children:"Device Type"}),r.jsx(st,{className:"text-gray-400",children:"Mobile vs Desktop usage"})]}),r.jsx(je,{children:r.jsx(pr,{width:"100%",height:300,children:r.jsxs(ti,{children:[r.jsx(Fr,{data:Cr,cx:"50%",cy:"50%",labelLine:!1,label:U=>`${U.name}: ${U.value}`,outerRadius:90,fill:"#8884d8",dataKey:"value",children:Cr.map((U,Q)=>r.jsx(sa,{fill:se[Q%se.length]},`cell-dev-${Q}`))}),r.jsx(ut,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#fff"}})]})})})]})]}),r.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsx(Ce,{className:"text-white",children:"Time of Day"}),r.jsx(st,{className:"text-gray-400",children:"Hourly search distribution"})]}),r.jsx(je,{children:r.jsx(pr,{width:"100%",height:300,children:r.jsxs(ea,{data:Hn,children:[r.jsx(Br,{strokeDasharray:"3 3",stroke:"#ffffff10"}),r.jsx(ir,{dataKey:"hour",stroke:"#9ca3af",tick:{fill:"#9ca3af",fontSize:10},interval:2}),r.jsx(or,{stroke:"#9ca3af",tick:{fill:"#9ca3af"}}),r.jsx(ut,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#fff"}}),r.jsx(_r,{dataKey:"searches",fill:"#06b6d4",radius:[4,4,0,0],name:"Searches"})]})})})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsx(Ce,{className:"text-white",children:"Day of Week"}),r.jsx(st,{className:"text-gray-400",children:"Weekly usage pattern"})]}),r.jsx(je,{children:r.jsx(pr,{width:"100%",height:300,children:r.jsxs(ea,{data:zr,children:[r.jsx(Br,{strokeDasharray:"3 3",stroke:"#ffffff10"}),r.jsx(ir,{dataKey:"day",stroke:"#9ca3af",tick:{fill:"#9ca3af"}}),r.jsx(or,{stroke:"#9ca3af",tick:{fill:"#9ca3af"}}),r.jsx(ut,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#fff"}}),r.jsx(_r,{dataKey:"searches",fill:"#3b82f6",radius:[4,4,0,0],name:"Searches"})]})})})]})]}),r.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsx(Ce,{className:"text-white",children:"Refinement Activity"}),r.jsx(st,{className:"text-gray-400",children:"Sessions with refinements (last 500 events)"})]}),r.jsxs(je,{children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:ya.length}),r.jsx("p",{className:"text-xs text-gray-400",children:"Distinct sessions"}),r.jsx("div",{className:"mt-4 space-y-2",children:ya.slice(0,5).map(U=>r.jsxs("div",{className:"text-sm text-gray-300",children:[r.jsxs("span",{className:"text-white",children:[U.totalRefinements," refinements"]})," ",U.stuckIndicators.excessiveRefinements&&r.jsx(H,{className:"bg-amber-500/20 border-amber-500/40 text-amber-300 ml-2",children:"Stuck"}),U.stuckIndicators.repeatedZeroResults&&r.jsx(H,{className:"bg-pink-500/20 border-pink-500/40 text-pink-300 ml-2",children:"Zero results"}),U.stuckIndicators.loopsDetected&&r.jsx(H,{className:"bg-cyan-500/20 border-cyan-500/40 text-cyan-300 ml-2",children:"Looping"})]},U.sessionId))})]})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsx(Ce,{className:"text-white",children:"Common Transitions"}),r.jsx(st,{className:"text-gray-400",children:"Top query → query changes"})]}),r.jsx(je,{children:r.jsx(pr,{width:"100%",height:300,children:r.jsxs(ea,{data:On,layout:"vertical",margin:{left:120},children:[r.jsx(Br,{strokeDasharray:"3 3",stroke:"#ffffff10"}),r.jsx(ir,{type:"number",stroke:"#9ca3af",tick:{fill:"#9ca3af"}}),r.jsx(or,{type:"category",dataKey:"name",stroke:"#9ca3af",tick:{fill:"#9ca3af"},width:160}),r.jsx(ut,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#fff"}}),r.jsx(_r,{dataKey:"value",fill:"#06b6d4",radius:[0,4,4,0],name:"Occurrences"})]})})})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Geography & Locale"}),r.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsx(Ce,{className:"text-white",children:"Countries"}),r.jsx(st,{className:"text-gray-400",children:"Top countries by searches"})]}),r.jsx(je,{children:Ha.length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"No data available"}):r.jsx(pr,{width:"100%",height:300,children:r.jsxs(ti,{children:[r.jsx(Fr,{data:Ha,cx:"50%",cy:"50%",labelLine:!1,label:U=>`${U.name}: ${U.value}`,outerRadius:90,fill:"#8884d8",dataKey:"value",children:Ha.map((U,Q)=>r.jsx(sa,{fill:se[Q%se.length]},`cell-country-${Q}`))}),r.jsx(ut,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#fff"}})]})})})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsx(Ce,{className:"text-white",children:"Languages"}),r.jsx(st,{className:"text-gray-400",children:"Browser language distribution"})]}),r.jsx(je,{children:Gn.length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"No data available"}):r.jsx(pr,{width:"100%",height:300,children:r.jsxs(ti,{children:[r.jsx(Fr,{data:Gn,cx:"50%",cy:"50%",labelLine:!1,label:U=>`${U.name}: ${U.value}`,outerRadius:90,fill:"#8884d8",dataKey:"value",children:Gn.map((U,Q)=>r.jsx(sa,{fill:se[Q%se.length]},`cell-lang-${Q}`))}),r.jsx(ut,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#fff"}})]})})})]})]}),r.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsx(Ce,{className:"text-white",children:"Regions"}),r.jsx(st,{className:"text-gray-400",children:"Top regions"})]}),r.jsx(je,{children:Ga.length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"No data available"}):r.jsx(pr,{width:"100%",height:300,children:r.jsxs(ea,{data:Ga,layout:"vertical",margin:{left:100},children:[r.jsx(Br,{strokeDasharray:"3 3",stroke:"#ffffff10"}),r.jsx(ir,{type:"number",stroke:"#9ca3af",tick:{fill:"#9ca3af"}}),r.jsx(or,{type:"category",dataKey:"name",stroke:"#9ca3af",tick:{fill:"#9ca3af"},width:120}),r.jsx(ut,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#fff"}}),r.jsx(_r,{dataKey:"value",fill:"#8b5cf6",radius:[0,4,4,0],name:"Searches"})]})})})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsx(Ce,{className:"text-white",children:"Cities"}),r.jsx(st,{className:"text-gray-400",children:"Top cities"})]}),r.jsx(je,{children:sr.length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"No data available"}):r.jsx(pr,{width:"100%",height:300,children:r.jsxs(ea,{data:sr,layout:"vertical",margin:{left:100},children:[r.jsx(Br,{strokeDasharray:"3 3",stroke:"#ffffff10"}),r.jsx(ir,{type:"number",stroke:"#9ca3af",tick:{fill:"#9ca3af"}}),r.jsx(or,{type:"category",dataKey:"name",stroke:"#9ca3af",tick:{fill:"#9ca3af"},width:120}),r.jsx(ut,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#fff"}}),r.jsx(_r,{dataKey:"value",fill:"#ec4899",radius:[0,4,4,0],name:"Searches"})]})})})]})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsx(Ce,{className:"text-white",children:"Timezones"}),r.jsx(st,{className:"text-gray-400",children:"Where users are searching from (browser timezone)"})]}),r.jsx(je,{children:Ka.length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"No data available"}):r.jsx(pr,{width:"100%",height:300,children:r.jsxs(ea,{data:Ka,layout:"vertical",margin:{left:120},children:[r.jsx(Br,{strokeDasharray:"3 3",stroke:"#ffffff10"}),r.jsx(ir,{type:"number",stroke:"#9ca3af",tick:{fill:"#9ca3af"}}),r.jsx(or,{type:"category",dataKey:"name",stroke:"#9ca3af",tick:{fill:"#9ca3af"},width:160}),r.jsx(ut,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#fff"}}),r.jsx(_r,{dataKey:"value",fill:"#10b981",radius:[0,4,4,0],name:"Searches"})]})})})]})]})]})}),r.jsx(lt,{value:"sessions",children:r.jsxs("div",{className:"space-y-6",children:[_&&r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ce,{className:"text-sm font-medium text-gray-300",children:"Total Sessions"}),r.jsx(EC,{className:"h-4 w-4 text-sky-400"})]}),r.jsxs(je,{children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:_.totalSessions}),r.jsxs("p",{className:"text-xs text-gray-400",children:[_.avgSearchesPerSession.toFixed(1)," ","searches/session"]})]})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ce,{className:"text-sm font-medium text-gray-300",children:"Conversion Rate"}),r.jsx(zt,{className:"h-4 w-4 text-green-400"})]}),r.jsxs(je,{children:[r.jsxs("div",{className:"text-2xl font-bold text-white",children:[_.conversionRate.toFixed(1),"%"]}),r.jsx("p",{className:"text-xs text-gray-400",children:"Sessions → Checkout"})]})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ce,{className:"text-sm font-medium text-gray-300",children:"Add to Cart Rate"}),r.jsx(sn,{className:"h-4 w-4 text-amber-400"})]}),r.jsxs(je,{children:[r.jsxs("div",{className:"text-2xl font-bold text-white",children:[_.addToCartRate.toFixed(1),"%"]}),r.jsx("p",{className:"text-xs text-gray-400",children:"Sessions → Cart"})]})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ce,{className:"text-sm font-medium text-gray-300",children:"Abandonment Rate"}),r.jsx(ui,{className:"h-4 w-4 text-red-400"})]}),r.jsxs(je,{children:[r.jsxs("div",{className:"text-2xl font-bold text-white",children:[_.abandonmentRate.toFixed(1),"%"]}),r.jsx("p",{className:"text-xs text-gray-400",children:"No action taken"})]})]})]}),_&&_.topConversionPaths.length>0&&r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsx(Ce,{className:"text-white",children:"Top Conversion Paths"}),r.jsx(st,{className:"text-gray-400",children:"Search journeys that led to checkout"})]}),r.jsx(je,{children:r.jsx("div",{className:"space-y-3",children:_.topConversionPaths.map((U,Q)=>r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5 border border-white/10 hover:border-green-500/30 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[r.jsxs(H,{className:"bg-green-500/20 border-green-500/40 text-green-400 shrink-0",children:["#",Q+1]}),r.jsx("p",{className:"text-white text-sm truncate",children:U.path})]}),r.jsxs(H,{className:"bg-sky-500/20 border-sky-500/40 text-sky-400 shrink-0",children:[U.conversions," ",U.conversions===1?"conversion":"conversions"]})]},Q))})})]}),_&&_.commonPatterns.length>0&&r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsx(Ce,{className:"text-white",children:"Common Search Patterns"}),r.jsx(st,{className:"text-gray-400",children:"Most frequent search sequences (showing conversion rates)"})]}),r.jsx(je,{children:r.jsxs(Pa,{children:[r.jsx(Ca,{children:r.jsxs(yr,{className:"border-white/10",children:[r.jsx(Le,{className:"text-gray-300",children:"Pattern"}),r.jsx(Le,{className:"text-gray-300",children:"Occurrences"}),r.jsx(Le,{className:"text-gray-300",children:"Conv. Rate"})]})}),r.jsx(Oa,{children:_.commonPatterns.map((U,Q)=>r.jsxs(yr,{className:"border-white/10",children:[r.jsx(Re,{className:"text-white font-mono text-sm",children:U.pattern}),r.jsx(Re,{children:r.jsxs(H,{className:"bg-sky-500/20 border-sky-500/40 text-sky-400",children:[U.count,"x"]})}),r.jsx(Re,{children:r.jsxs(H,{className:U.conversionRate>50?"bg-green-500/20 border-green-500/40 text-green-400":U.conversionRate>20?"bg-amber-500/20 border-amber-500/40 text-amber-400":"bg-red-500/20 border-red-500/40 text-red-400",children:[U.conversionRate.toFixed(0),"%"]})})]},Q))})]})})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsx(Ce,{className:"text-white",children:"Search Sessions"}),r.jsx(st,{className:"text-gray-400",children:"Individual user search journeys"})]}),r.jsx(je,{children:o?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"Loading..."}):S.length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"No session data yet"}):r.jsxs(Pa,{children:[r.jsx(Ca,{children:r.jsxs(yr,{className:"border-white/10",children:[r.jsx(Le,{className:"text-gray-300",children:"Session Journey"}),r.jsx(Le,{className:"text-gray-300",children:"Searches"}),r.jsx(Le,{className:"text-gray-300",children:"Duration"}),r.jsx(Le,{className:"text-gray-300",children:"Behavior"}),r.jsx(Le,{className:"text-gray-300",children:"Outcome"})]})}),r.jsx(Oa,{children:S.slice(0,20).map(U=>{const Q=qz(U),ae=Math.round(U.duration/6e4);return r.jsxs(yr,{className:"border-white/10",children:[r.jsx(Re,{className:"text-white font-mono text-sm max-w-md truncate",children:U.pattern}),r.jsx(Re,{children:r.jsx(H,{className:"bg-sky-500/20 border-sky-500/40 text-sky-400",children:U.totalSearches})}),r.jsxs(Re,{className:"text-gray-300",children:[ae<1?"<1":ae," min",ae!==1?"s":""]}),r.jsx(Re,{children:r.jsx(H,{className:Q==="Narrowing Search"?"bg-blue-500/20 border-blue-500/40 text-blue-400":Q==="Broadening Search"?"bg-purple-500/20 border-purple-500/40 text-purple-400":Q==="Exploring Options"?"bg-amber-500/20 border-amber-500/40 text-amber-400":"bg-gray-500/20 border-gray-500/40 text-gray-400",children:Q})}),r.jsx(Re,{children:U.converted?r.jsx(H,{className:"bg-green-500/20 border-green-500/40 text-green-400",children:"✓ Checkout"}):U.addedToCart?r.jsx(H,{className:"bg-amber-500/20 border-amber-500/40 text-amber-400",children:"Cart"}):r.jsx(H,{className:"bg-red-500/20 border-red-500/40 text-red-400",children:"Exit"})})]},U.sessionId)})})]})})]})]})}),r.jsx(lt,{value:"popular",children:r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsx(Ce,{className:"text-white",children:"Most Searched Terms"}),r.jsx(st,{className:"text-gray-400",children:"Identify popular products to stock"})]}),r.jsx(je,{children:o?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"Loading..."}):n.length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"No search data yet"}):r.jsxs(Pa,{children:[r.jsx(Ca,{children:r.jsxs(yr,{className:"border-white/10",children:[r.jsx(Le,{className:"text-gray-300",children:"Query"}),r.jsx(Le,{className:"text-gray-300",children:"Intent"}),r.jsx(Le,{className:"text-gray-300",children:"Count"}),r.jsx(Le,{className:"text-gray-300",children:"Avg Results"}),r.jsx(Le,{className:"text-gray-300",children:"Zero Results"}),r.jsx(Le,{className:"text-gray-300",children:"Top Category"})]})}),r.jsx(Oa,{children:n.map((U,Q)=>{var _e;const ae=Object.entries(U.categories).sort(([,ze],[,vt])=>vt-ze)[0],Se=U.intents?(_e=Object.entries(U.intents).sort(([,ze],[,vt])=>vt-ze)[0])==null?void 0:_e[0]:void 0,qe=Se?Ou(Se):null;return r.jsxs(yr,{className:"border-white/10",children:[r.jsx(Re,{className:"text-white font-medium",children:U.query}),r.jsx(Re,{children:Se&&qe?r.jsx(H,{className:`${qe.bg} ${qe.border} ${qe.text}`,children:Tu(Se)}):r.jsx("span",{className:"text-gray-500 text-sm",children:"-"})}),r.jsx(Re,{className:"text-white",children:r.jsx(H,{className:"bg-sky-500/20 border-sky-500/40 text-sky-400",children:U.count})}),r.jsx(Re,{className:"text-gray-300",children:U.avgResults}),r.jsx(Re,{children:U.zeroResults>0?r.jsx(H,{className:"bg-yellow-500/20 border-yellow-500/40 text-yellow-400",children:U.zeroResults}):r.jsx("span",{className:"text-gray-500",children:"0"})}),r.jsx(Re,{className:"text-gray-300",children:(ae==null?void 0:ae[0])||"-"})]},Q)})})]})})]})}),r.jsx(lt,{value:"recent",children:r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsx(Ce,{className:"text-white",children:"Recent Searches"}),r.jsx(st,{className:"text-gray-400",children:"Live search activity from users"}),r.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[r.jsx(Jx,{className:"w-4 h-4 text-gray-400"}),r.jsx(xe,{placeholder:"Filter searches...",value:g,onChange:U=>p(U.target.value),className:"max-w-sm bg-white/5 border-white/10 text-white"})]})]}),r.jsx(je,{children:o?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"Loading..."}):ce.length===0?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"No searches found"}):r.jsx("div",{className:"max-h-[600px] overflow-y-auto",children:r.jsxs(Pa,{children:[r.jsx(Ca,{children:r.jsxs(yr,{className:"border-white/10",children:[r.jsx(Le,{className:"text-gray-300",children:"Query"}),r.jsx(Le,{className:"text-gray-300",children:"Intent"}),r.jsx(Le,{className:"text-gray-300",children:"Category"}),r.jsx(Le,{className:"text-gray-300",children:"Results"}),r.jsx(Le,{className:"text-gray-300",children:"Time"})]})}),r.jsx(Oa,{children:ce.map(U=>{var ae;const Q=U.intent?Ou(U.intent):null;return r.jsxs(yr,{className:"border-white/10",children:[r.jsx(Re,{className:"text-white font-medium",children:U.originalQuery}),r.jsx(Re,{children:U.intent&&Q?r.jsx(H,{className:`${Q.bg} ${Q.border} ${Q.text}`,children:Tu(U.intent)}):r.jsx("span",{className:"text-gray-500 text-sm",children:"-"})}),r.jsx(Re,{children:r.jsx(H,{className:"bg-blue-500/20 border-blue-500/40 text-blue-400",children:U.category})}),r.jsx(Re,{children:r.jsx(H,{className:U.resultsCount===0?"bg-red-500/20 border-red-500/40 text-red-400":"bg-green-500/20 border-green-500/40 text-green-400",children:U.resultsCount})}),r.jsx(Re,{className:"text-gray-400 text-sm",children:(ae=U.timestamp)!=null&&ae.toDate?Uy(U.timestamp.toDate()):"-"})]},U.id)})})]})})})]})}),r.jsx(lt,{value:"zero",children:r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10",children:[r.jsxs(Pe,{children:[r.jsxs(Ce,{className:"text-white flex items-center gap-2",children:[r.jsx(mt,{className:"w-5 h-5 text-yellow-400"}),"Zero Result Searches"]}),r.jsx(st,{className:"text-gray-400",children:"Products users want but you don't have - sourcing opportunities!"})]}),r.jsx(je,{children:o?r.jsx("div",{className:"text-center py-8 text-gray-400",children:"Loading..."}):s.length===0?r.jsx("div",{className:"text-center py-8 text-green-400",children:"✓ All searches returned results!"}):r.jsx("div",{className:"space-y-4",children:s.map(U=>{var ae;const Q=U.suggestions&&U.suggestions.length>0;return r.jsx(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 hover:border-yellow-500/30 transition-colors",children:r.jsx(je,{className:"pt-6",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(mt,{className:"w-4 h-4 text-yellow-400"}),r.jsxs("span",{className:"text-white font-semibold text-lg",children:['"',U.originalQuery,'"']})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(H,{className:"bg-yellow-500/20 border-yellow-500/40 text-yellow-400",children:U.category}),r.jsx("span",{className:"text-gray-400 text-sm",children:(ae=U.timestamp)!=null&&ae.toDate?Uy(U.timestamp.toDate()):"-"})]})]}),Q?r.jsxs("div",{className:"pl-7 space-y-2",children:[r.jsx("p",{className:"text-gray-300 text-sm font-medium mb-2",children:"💡 Smart Suggestions:"}),U.suggestions.map((Se,qe)=>{const _e=fC(Se.type);return r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-white/5 border border-white/10",children:[r.jsx("span",{className:"text-xl",children:_e.icon}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:`${_e.color} font-medium`,children:mC(Se)}),r.jsx("p",{className:"text-gray-400 text-xs mt-1",children:Se.reason})]}),r.jsxs(H,{className:Se.confidence>=.9?"bg-green-500/20 border-green-500/40 text-green-400":Se.confidence>=.7?"bg-amber-500/20 border-amber-500/40 text-amber-400":"bg-gray-500/20 border-gray-500/40 text-gray-400",children:[Math.round(Se.confidence*100),"%"]})]},qe)})]}):r.jsx("div",{className:"pl-7",children:r.jsx("p",{className:"text-gray-500 text-sm italic",children:"No suggestions available for this search"})})]})})},U.id)})})})]})})]}),r.jsx(xC,{open:u,onOpenChange:h,children:r.jsxs(pC,{className:"bg-gray-900 border-white/10",children:[r.jsxs(gC,{children:[r.jsx(yC,{className:"text-white",children:"Clear Search Analytics Data?"}),r.jsx(bC,{className:"text-gray-400",children:"This will permanently delete all search queries and zero-result searches from the database. This action cannot be undone."})]}),r.jsxs(vC,{children:[r.jsx(wC,{className:"bg-white/5 border-white/10 text-white hover:bg-white/10",children:"Cancel"}),r.jsx(jC,{onClick:X,className:"bg-red-600 hover:bg-red-700 text-white",children:"Clear All Data"})]})]})})]})}const Kz=()=>{var S,v,N,A,P,T,M,E;const[e,t]=k.useState(null),[n,a]=k.useState(!1),[s,i]=k.useState(null),[o,l]=k.useState(30),[c,d]=k.useState(null),[u,h]=k.useState(new Set),[f,m]=k.useState(new Set),[g,p]=k.useState(0),x=k.useCallback(async()=>{a(!0),i(null);try{let C=null;try{const{auth:W}=await Ie(async()=>{const{auth:ce}=await import("./index-C09NoPC0.js").then(de=>de.cq);return{auth:ce}},__vite__mapDeps([0,1,2,3,4]));W!=null&&W.currentUser&&(C=await W.currentUser.getIdToken())}catch(W){J.warn("Failed to get Firebase token",{error:W})}const O={};C&&(O.Authorization=`Bearer ${C}`);const _=await fetch(`/api/admin/analytics/recommendations?days=${o}`,{headers:O}),D=_.headers.get("content-type")||"";let L=null,V=null;if(D.includes("application/json"))try{L=await _.json()}catch{V=await _.text()}else V=await _.text();if(!_.ok){const W=(V||"").trim().slice(0,120),ce=L,fe=ce&&typeof ce.error=="string"&&ce.error||ce&&typeof ce.message=="string"&&ce.message||void 0||(W?`Server error: ${W}`:`Failed to load recommendations (HTTP ${_.status})`);throw new Error(fe)}const X=L==null?void 0:L.recommendations;t(X||{missingProducts:[],underperformingCategories:[],quickWins:[],spellingCorrections:[],windowDays:o,generatedAt:new Date().toISOString()})}catch(C){const O=C instanceof Error?/Unexpected token/.test(C.message)?"A server response was not valid JSON. Please refresh or try again.":C.message:"Failed to load recommendations";i(O),te.error(O)}finally{a(!1)}},[o]);k.useEffect(()=>{x()},[x]);function b(C,O){const _=O.map(X=>X.map(W=>`"${String(W).replace(/"/g,'""')}"`).join(",")).join(`
`),D=new Blob([_],{type:"text/csv;charset=utf-8;"}),L=URL.createObjectURL(D),V=document.createElement("a");V.href=L,V.download=`recommendations_${C}_${new Date().toISOString().slice(0,10)}.csv`,V.click(),URL.revokeObjectURL(L)}function y(C){return C===void 0?{label:"n/a",className:"bg-gray-500/20 border-gray-500/40 text-gray-300"}:C>=70?{label:"High",className:"bg-red-500/30 border-red-500/50 text-red-200"}:C>=40?{label:"Med",className:"bg-amber-500/30 border-amber-500/50 text-amber-200"}:{label:"Low",className:"bg-blue-500/30 border-blue-500/50 text-blue-200"}}async function w(C,O,_){try{d(`${C}:${O}:${_}`);const D=localStorage.getItem("vortex_user");let L=null;if(D)try{const de=JSON.parse(D);L=(de==null?void 0:de.authToken)||(de==null?void 0:de.accessToken)||null}catch{}const V={"Content-Type":"application/json"};L&&(V.Authorization=`Bearer ${L}`);const X=await fetch("/api/admin/analytics/synonyms",{method:"POST",headers:V,body:JSON.stringify({action:C,canonical:O,variant:_})}),W=await X.json();if(!X.ok)throw new Error(W.error||"Action failed");const ce=`${O}|${_}`;C==="accept"?(h(de=>new Set(de).add(ce)),te.success(`Accepted '${_}' → '${O}'`)):(m(de=>new Set(de).add(ce)),te.info(`Ignored '${_}' for '${O}'`))}catch(D){te.error(D instanceof Error?D.message:"Action failed")}finally{d(null)}}return n&&!e?r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl",children:r.jsx(je,{className:"p-8 flex items-center justify-center",children:r.jsx(aa,{className:"h-6 w-6 animate-spin text-sky-400"})})}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Actionable Recommendations"}),r.jsxs("p",{className:"text-gray-400 mt-1",children:["Automatically generated insights from search behavior (last ",o," ","days)"]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{className:"bg-white/5 border-white/10 text-white text-sm rounded px-2 py-1",value:o,onChange:C=>l(parseInt(C.target.value)),children:[r.jsx("option",{value:7,children:"7d"}),r.jsx("option",{value:30,children:"30d"}),r.jsx("option",{value:90,children:"90d"})]}),r.jsxs("select",{className:"bg-white/5 border-white/10 text-white text-sm rounded px-2 py-1",value:g,onChange:C=>p(parseInt(C.target.value)),children:[r.jsx("option",{value:0,children:"All Impact"}),r.jsx("option",{value:30,children:"30+"}),r.jsx("option",{value:40,children:"40+"}),r.jsx("option",{value:70,children:"70+"})]}),r.jsxs($,{variant:"outline",onClick:x,disabled:n,className:"border-sky-500/40 text-sky-400",children:[r.jsx(Bt,{className:"h-4 w-4 mr-1"})," Refresh"]})]})]}),s&&r.jsx(q,{className:"bg-red-500/10 border-red-500/30",children:r.jsx(je,{className:"p-4 text-red-300 text-sm",children:s})}),r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl",children:[r.jsx(Pe,{children:r.jsx(Ce,{className:"text-white",children:"Missing Products"})}),r.jsxs(je,{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold text-white",children:"Top 5 Missing Products"}),r.jsx("p",{className:"text-sm text-gray-400 max-w-2xl",children:"High-demand searches with unavailable or insufficient results."})]}),r.jsxs($,{size:"sm",variant:"outline",disabled:!((S=e==null?void 0:e.missingProducts)!=null&&S.length),onClick:()=>e&&b("missing_products",[["query","searches","zeroResults","avgResults","reason"],...e.missingProducts.map(C=>[C.query,String(C.searches),String(C.zeroResults),String(C.avgResults),C.reason])]),className:"border-sky-500/40 text-sky-400",children:[r.jsx(jn,{className:"h-4 w-4 mr-1"})," CSV"]})]}),r.jsx("div",{className:"space-y-3",children:(v=e==null?void 0:e.missingProducts)!=null&&v.length?e.missingProducts.filter(C=>(C.impactScore??0)>=g).sort((C,O)=>(O.impactScore??0)-(C.impactScore??0)||O.searches-C.searches).slice(0,5).map(C=>r.jsxs("div",{className:"flex items-start justify-between p-3 rounded-lg bg-white/5 border border-white/10",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium",children:C.query}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:C.reason})]}),r.jsxs("div",{className:"flex flex-col items-end gap-1",children:[r.jsxs(H,{className:"bg-gradient-to-r from-red-500/30 to-pink-500/30 border-red-500/40 text-red-200",children:[C.searches," searches"]}),r.jsxs(H,{className:"bg-red-500/20 border-red-500/40 text-red-300",children:[C.zeroResults," zero-results"]}),C.impactScore!==void 0&&r.jsxs(H,{className:y(C.impactScore).className,children:[y(C.impactScore).label," ",C.impactScore]}),C.stockLevel!==void 0&&r.jsxs(H,{className:"bg-purple-500/20 border-purple-500/40 text-purple-300",children:["stock ",C.stockLevel]}),C.checkoutConversions&&C.checkoutConversions>0&&r.jsxs(H,{className:"bg-green-500/20 border-green-500/40 text-green-300",children:["chk ",C.checkoutConversions]}),C.revenue&&C.revenue>0&&r.jsxs(H,{className:"bg-green-600/30 border-green-600/50 text-green-200",children:["£",C.revenue.toFixed(0)," rev"]})]})]},C.query)):r.jsx("p",{className:"text-sm text-gray-400",children:"No strong missing product signals."})})]})]}),r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl",children:[r.jsx(Pe,{children:r.jsx(Ce,{className:"text-white",children:"Underperforming Categories"})}),r.jsxs(je,{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold text-white",children:"Low Conversion / High Friction"}),r.jsx("p",{className:"text-sm text-gray-400 max-w-2xl",children:"Categories with high search volume but low results or high zero-result rate."})]}),r.jsxs($,{size:"sm",variant:"outline",disabled:!((N=e==null?void 0:e.underperformingCategories)!=null&&N.length),onClick:()=>e&&b("underperforming_categories",[["category","searches","avgResults","zeroResultRate","reason"],...e.underperformingCategories.map(C=>[C.category,String(C.searches),String(C.avgResults),String(C.zeroResultRate),C.reason])]),className:"border-sky-500/40 text-sky-400",children:[r.jsx(jn,{className:"h-4 w-4 mr-1"})," CSV"]})]}),r.jsx("div",{className:"space-y-3",children:(A=e==null?void 0:e.underperformingCategories)!=null&&A.length?e.underperformingCategories.sort((C,O)=>O.searches-C.searches).map(C=>r.jsxs("div",{className:"flex items-start justify-between p-3 rounded-lg bg-white/5 border border-white/10",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium capitalize",children:C.category}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:C.reason})]}),r.jsxs("div",{className:"flex flex-col items-end gap-1",children:[r.jsxs(H,{className:"bg-gradient-to-r from-orange-500/30 to-amber-500/30 border-orange-500/40 text-amber-200",children:[C.searches," searches"]}),r.jsxs(H,{className:"bg-amber-500/20 border-amber-500/40 text-amber-300",children:["avg ",C.avgResults]})]})]},C.category)):r.jsx("p",{className:"text-sm text-gray-400",children:"No underperforming categories detected."})})]})]}),r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl",children:[r.jsx(Pe,{children:r.jsx(Ce,{className:"text-white",children:"Quick Wins"})}),r.jsxs(je,{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold text-white",children:"Immediate Impact Items"}),r.jsx("p",{className:"text-sm text-gray-400 max-w-2xl",children:"Moderate-demand queries needing minor additions or tuning."})]}),r.jsxs($,{size:"sm",variant:"outline",disabled:!((P=e==null?void 0:e.quickWins)!=null&&P.length),onClick:()=>e&&b("quick_wins",[["item","type","searches","potentialImpact","reason"],...e.quickWins.map(C=>[C.item,C.type,String(C.searches),C.potentialImpact,C.reason])]),className:"border-sky-500/40 text-sky-400",children:[r.jsx(jn,{className:"h-4 w-4 mr-1"})," CSV"]})]}),r.jsx("div",{className:"space-y-3",children:(T=e==null?void 0:e.quickWins)!=null&&T.length?e.quickWins.filter(C=>(C.impactScore??0)>=g).sort((C,O)=>(O.impactScore??0)-(C.impactScore??0)||O.searches-C.searches).map(C=>r.jsxs("div",{className:"flex items-start justify-between p-3 rounded-lg bg-white/5 border border-white/10",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium",children:C.item}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:C.reason})]}),r.jsxs("div",{className:"flex flex-col items-end gap-1",children:[r.jsxs(H,{className:"bg-gradient-to-r from-blue-500/30 to-cyan-500/30 border-blue-500/40 text-cyan-200",children:[C.searches," searches"]}),r.jsx(H,{className:"bg-blue-500/20 border-blue-500/40 text-blue-300",children:C.potentialImpact}),C.impactScore!==void 0&&r.jsxs(H,{className:y(C.impactScore).className,children:[y(C.impactScore).label," ",C.impactScore]}),C.stockLevel!==void 0&&r.jsxs(H,{className:"bg-purple-500/20 border-purple-500/40 text-purple-300",children:["stock ",C.stockLevel]}),C.checkoutConversions&&C.checkoutConversions>0&&r.jsxs(H,{className:"bg-green-500/20 border-green-500/40 text-green-300",children:["chk ",C.checkoutConversions]}),C.revenue&&C.revenue>0&&r.jsxs(H,{className:"bg-green-600/30 border-green-600/50 text-green-200",children:["£",C.revenue.toFixed(0)," rev"]})]})]},C.item)):r.jsx("p",{className:"text-sm text-gray-400",children:"No quick win opportunities found."})})]})]}),r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl",children:[r.jsx(Pe,{children:r.jsx(Ce,{className:"text-white",children:"Spelling / Synonym Corrections"})}),r.jsxs(je,{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold text-white",children:"Typos & Normalization"}),r.jsx("p",{className:"text-sm text-gray-400 max-w-2xl",children:"Clusters of variant spellings and near matches that should map to a canonical query."})]}),r.jsxs($,{size:"sm",variant:"outline",disabled:!((M=e==null?void 0:e.spellingCorrections)!=null&&M.length),onClick:()=>e&&b("spelling_corrections",[["canonical","variant","count","distance"],...e.spellingCorrections.flatMap(C=>C.variants.map(O=>[C.canonical,O.variant,String(O.count),String(O.distance)]))]),className:"border-sky-500/40 text-sky-400",children:[r.jsx(jn,{className:"h-4 w-4 mr-1"})," CSV"]})]}),r.jsx("div",{className:"space-y-3",children:(E=e==null?void 0:e.spellingCorrections)!=null&&E.length?e.spellingCorrections.map(C=>r.jsxs("div",{className:"p-3 rounded-lg bg-white/5 border border-white/10",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-white font-medium",children:C.canonical}),r.jsxs(H,{className:"bg-purple-500/30 border-purple-500/40 text-purple-200",children:[C.totalVariants," variants"]})]}),r.jsx("p",{className:"text-xs text-gray-400 mb-2",children:C.suggestion}),r.jsx("div",{className:"flex flex-wrap gap-2",children:C.variants.map(O=>{const _=`${C.canonical}|${O.variant}`,D=u.has(_),L=f.has(_);return r.jsxs("div",{className:"flex items-center gap-2 bg-purple-500/10 border border-purple-500/30 rounded px-2 py-1",children:[r.jsxs("span",{className:"text-purple-200 text-xs",children:[O.variant," (",O.count,") d=",O.distance]}),!D&&!L&&r.jsxs(r.Fragment,{children:[r.jsx($,{size:"sm",variant:"outline",disabled:c!==null,className:"h-5 px-2 text-[10px] border-green-500/40 text-green-300",onClick:()=>w("accept",C.canonical,O.variant),children:c===`accept:${C.canonical}:${O.variant}`?"...":"Accept"}),r.jsx($,{size:"sm",variant:"outline",disabled:c!==null,className:"h-5 px-2 text-[10px] border-red-500/40 text-red-300",onClick:()=>w("ignore",C.canonical,O.variant),children:c===`ignore:${C.canonical}:${O.variant}`?"...":"Ignore"})]}),D&&r.jsx(H,{className:"bg-green-500/20 border-green-500/40 text-green-300",children:"Accepted"}),L&&r.jsx(H,{className:"bg-red-500/20 border-red-500/40 text-red-300",children:"Ignored"})]},O.variant)})})]},C.canonical)):r.jsx("p",{className:"text-sm text-gray-400",children:"No correction clusters detected."})})]})]}),r.jsx(UP,{className:"bg-white/10"}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Generated"," ",e!=null&&e.generatedAt?new Date(e.generatedAt).toLocaleString():""," · Window ",e==null?void 0:e.windowDays," days"]})]})};var ri={},Nx,TS;function Yz(){return TS||(TS=1,Nx=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Nx}var Sx={},Sa={},_S;function Ls(){if(_S)return Sa;_S=1;let e;const t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Sa.getSymbolSize=function(a){if(!a)throw new Error('"version" cannot be null or undefined');if(a<1||a>40)throw new Error('"version" should be in range from 1 to 40');return a*4+17},Sa.getSymbolTotalCodewords=function(a){return t[a]},Sa.getBCHDigit=function(n){let a=0;for(;n!==0;)a++,n>>>=1;return a},Sa.setToSJISFunction=function(a){if(typeof a!="function")throw new Error('"toSJISFunc" is not a valid function.');e=a},Sa.isKanjiModeEnabled=function(){return typeof e<"u"},Sa.toSJIS=function(a){return e(a)},Sa}var kx={},ES;function _g(){return ES||(ES=1,(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+n)}}e.isValid=function(a){return a&&typeof a.bit<"u"&&a.bit>=0&&a.bit<4},e.from=function(a,s){if(e.isValid(a))return a;try{return t(a)}catch{return s}}})(kx)),kx}var Ax,DS;function Xz(){if(DS)return Ax;DS=1;function e(){this.buffer=[],this.length=0}return e.prototype={get:function(t){const n=Math.floor(t/8);return(this.buffer[n]>>>7-t%8&1)===1},put:function(t,n){for(let a=0;a<n;a++)this.putBit((t>>>n-a-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),t&&(this.buffer[n]|=128>>>this.length%8),this.length++}},Ax=e,Ax}var Px,MS;function Qz(){if(MS)return Px;MS=1;function e(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}return e.prototype.set=function(t,n,a,s){const i=t*this.size+n;this.data[i]=a,s&&(this.reservedBit[i]=!0)},e.prototype.get=function(t,n){return this.data[t*this.size+n]},e.prototype.xor=function(t,n,a){this.data[t*this.size+n]^=a},e.prototype.isReserved=function(t,n){return this.reservedBit[t*this.size+n]},Px=e,Px}var Cx={},IS;function Jz(){return IS||(IS=1,(function(e){const t=Ls().getSymbolSize;e.getRowColCoords=function(a){if(a===1)return[];const s=Math.floor(a/7)+2,i=t(a),o=i===145?26:Math.ceil((i-13)/(2*s-2))*2,l=[i-7];for(let c=1;c<s-1;c++)l[c]=l[c-1]-o;return l.push(6),l.reverse()},e.getPositions=function(a){const s=[],i=e.getRowColCoords(a),o=i.length;for(let l=0;l<o;l++)for(let c=0;c<o;c++)l===0&&c===0||l===0&&c===o-1||l===o-1&&c===0||s.push([i[l],i[c]]);return s}})(Cx)),Cx}var Ox={},RS;function Zz(){if(RS)return Ox;RS=1;const e=Ls().getSymbolSize,t=7;return Ox.getPositions=function(a){const s=e(a);return[[0,0],[s-t,0],[0,s-t]]},Ox}var Tx={},$S;function e9(){return $S||($S=1,(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},e.from=function(s){return e.isValid(s)?parseInt(s,10):void 0},e.getPenaltyN1=function(s){const i=s.size;let o=0,l=0,c=0,d=null,u=null;for(let h=0;h<i;h++){l=c=0,d=u=null;for(let f=0;f<i;f++){let m=s.get(h,f);m===d?l++:(l>=5&&(o+=t.N1+(l-5)),d=m,l=1),m=s.get(f,h),m===u?c++:(c>=5&&(o+=t.N1+(c-5)),u=m,c=1)}l>=5&&(o+=t.N1+(l-5)),c>=5&&(o+=t.N1+(c-5))}return o},e.getPenaltyN2=function(s){const i=s.size;let o=0;for(let l=0;l<i-1;l++)for(let c=0;c<i-1;c++){const d=s.get(l,c)+s.get(l,c+1)+s.get(l+1,c)+s.get(l+1,c+1);(d===4||d===0)&&o++}return o*t.N2},e.getPenaltyN3=function(s){const i=s.size;let o=0,l=0,c=0;for(let d=0;d<i;d++){l=c=0;for(let u=0;u<i;u++)l=l<<1&2047|s.get(d,u),u>=10&&(l===1488||l===93)&&o++,c=c<<1&2047|s.get(u,d),u>=10&&(c===1488||c===93)&&o++}return o*t.N3},e.getPenaltyN4=function(s){let i=0;const o=s.data.length;for(let c=0;c<o;c++)i+=s.data[c];return Math.abs(Math.ceil(i*100/o/5)-10)*t.N4};function n(a,s,i){switch(a){case e.Patterns.PATTERN000:return(s+i)%2===0;case e.Patterns.PATTERN001:return s%2===0;case e.Patterns.PATTERN010:return i%3===0;case e.Patterns.PATTERN011:return(s+i)%3===0;case e.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case e.Patterns.PATTERN101:return s*i%2+s*i%3===0;case e.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case e.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+a)}}e.applyMask=function(s,i){const o=i.size;for(let l=0;l<o;l++)for(let c=0;c<o;c++)i.isReserved(c,l)||i.xor(c,l,n(s,c,l))},e.getBestMask=function(s,i){const o=Object.keys(e.Patterns).length;let l=0,c=1/0;for(let d=0;d<o;d++){i(d),e.applyMask(d,s);const u=e.getPenaltyN1(s)+e.getPenaltyN2(s)+e.getPenaltyN3(s)+e.getPenaltyN4(s);e.applyMask(d,s),u<c&&(c=u,l=d)}return l}})(Tx)),Tx}var gc={},LS;function W4(){if(LS)return gc;LS=1;const e=_g(),t=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],n=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return gc.getBlocksCount=function(s,i){switch(i){case e.L:return t[(s-1)*4+0];case e.M:return t[(s-1)*4+1];case e.Q:return t[(s-1)*4+2];case e.H:return t[(s-1)*4+3];default:return}},gc.getTotalCodewordsCount=function(s,i){switch(i){case e.L:return n[(s-1)*4+0];case e.M:return n[(s-1)*4+1];case e.Q:return n[(s-1)*4+2];case e.H:return n[(s-1)*4+3];default:return}},gc}var _x={},vo={},BS;function t9(){if(BS)return vo;BS=1;const e=new Uint8Array(512),t=new Uint8Array(256);return(function(){let a=1;for(let s=0;s<255;s++)e[s]=a,t[a]=s,a<<=1,a&256&&(a^=285);for(let s=255;s<512;s++)e[s]=e[s-255]})(),vo.log=function(a){if(a<1)throw new Error("log("+a+")");return t[a]},vo.exp=function(a){return e[a]},vo.mul=function(a,s){return a===0||s===0?0:e[t[a]+t[s]]},vo}var FS;function r9(){return FS||(FS=1,(function(e){const t=t9();e.mul=function(a,s){const i=new Uint8Array(a.length+s.length-1);for(let o=0;o<a.length;o++)for(let l=0;l<s.length;l++)i[o+l]^=t.mul(a[o],s[l]);return i},e.mod=function(a,s){let i=new Uint8Array(a);for(;i.length-s.length>=0;){const o=i[0];for(let c=0;c<s.length;c++)i[c]^=t.mul(s[c],o);let l=0;for(;l<i.length&&i[l]===0;)l++;i=i.slice(l)}return i},e.generateECPolynomial=function(a){let s=new Uint8Array([1]);for(let i=0;i<a;i++)s=e.mul(s,new Uint8Array([1,t.exp(i)]));return s}})(_x)),_x}var Ex,qS;function n9(){if(qS)return Ex;qS=1;const e=r9();function t(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}return t.prototype.initialize=function(a){this.degree=a,this.genPoly=e.generateECPolynomial(this.degree)},t.prototype.encode=function(a){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(a.length+this.degree);s.set(a);const i=e.mod(s,this.genPoly),o=this.degree-i.length;if(o>0){const l=new Uint8Array(this.degree);return l.set(i,o),l}return i},Ex=t,Ex}var Dx={},Mx={},Ix={},US;function H4(){return US||(US=1,Ix.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}),Ix}var En={},zS;function G4(){if(zS)return En;zS=1;const e="[0-9]+",t="[A-Z $%*+\\-./:]+";let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n=n.replace(/u/g,"\\u");const a="(?:(?![A-Z0-9 $%*+\\-./:]|"+n+`)(?:.|[\r
]))+`;En.KANJI=new RegExp(n,"g"),En.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),En.BYTE=new RegExp(a,"g"),En.NUMERIC=new RegExp(e,"g"),En.ALPHANUMERIC=new RegExp(t,"g");const s=new RegExp("^"+n+"$"),i=new RegExp("^"+e+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return En.testKanji=function(c){return s.test(c)},En.testNumeric=function(c){return i.test(c)},En.testAlphanumeric=function(c){return o.test(c)},En}var VS;function Bs(){return VS||(VS=1,(function(e){const t=H4(),n=G4();e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!t.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},e.getBestModeForData=function(i){return n.testNumeric(i)?e.NUMERIC:n.testAlphanumeric(i)?e.ALPHANUMERIC:n.testKanji(i)?e.KANJI:e.BYTE},e.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},e.isValid=function(i){return i&&i.bit&&i.ccBits};function a(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+s)}}e.from=function(i,o){if(e.isValid(i))return i;try{return a(i)}catch{return o}}})(Mx)),Mx}var WS;function a9(){return WS||(WS=1,(function(e){const t=Ls(),n=W4(),a=_g(),s=Bs(),i=H4(),o=7973,l=t.getBCHDigit(o);function c(f,m,g){for(let p=1;p<=40;p++)if(m<=e.getCapacity(p,g,f))return p}function d(f,m){return s.getCharCountIndicator(f,m)+4}function u(f,m){let g=0;return f.forEach(function(p){const x=d(p.mode,m);g+=x+p.getBitsLength()}),g}function h(f,m){for(let g=1;g<=40;g++)if(u(f,g)<=e.getCapacity(g,m,s.MIXED))return g}e.from=function(m,g){return i.isValid(m)?parseInt(m,10):g},e.getCapacity=function(m,g,p){if(!i.isValid(m))throw new Error("Invalid QR Code version");typeof p>"u"&&(p=s.BYTE);const x=t.getSymbolTotalCodewords(m),b=n.getTotalCodewordsCount(m,g),y=(x-b)*8;if(p===s.MIXED)return y;const w=y-d(p,m);switch(p){case s.NUMERIC:return Math.floor(w/10*3);case s.ALPHANUMERIC:return Math.floor(w/11*2);case s.KANJI:return Math.floor(w/13);case s.BYTE:default:return Math.floor(w/8)}},e.getBestVersionForData=function(m,g){let p;const x=a.from(g,a.M);if(Array.isArray(m)){if(m.length>1)return h(m,x);if(m.length===0)return 1;p=m[0]}else p=m;return c(p.mode,p.getLength(),x)},e.getEncodedBits=function(m){if(!i.isValid(m)||m<7)throw new Error("Invalid QR Code version");let g=m<<12;for(;t.getBCHDigit(g)-l>=0;)g^=o<<t.getBCHDigit(g)-l;return m<<12|g}})(Dx)),Dx}var Rx={},HS;function s9(){if(HS)return Rx;HS=1;const e=Ls(),t=1335,n=21522,a=e.getBCHDigit(t);return Rx.getEncodedBits=function(i,o){const l=i.bit<<3|o;let c=l<<10;for(;e.getBCHDigit(c)-a>=0;)c^=t<<e.getBCHDigit(c)-a;return(l<<10|c)^n},Rx}var $x={},Lx,GS;function i9(){if(GS)return Lx;GS=1;const e=Bs();function t(n){this.mode=e.NUMERIC,this.data=n.toString()}return t.getBitsLength=function(a){return 10*Math.floor(a/3)+(a%3?a%3*3+1:0)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(a){let s,i,o;for(s=0;s+3<=this.data.length;s+=3)i=this.data.substr(s,3),o=parseInt(i,10),a.put(o,10);const l=this.data.length-s;l>0&&(i=this.data.substr(s),o=parseInt(i,10),a.put(o,l*3+1))},Lx=t,Lx}var Bx,KS;function o9(){if(KS)return Bx;KS=1;const e=Bs(),t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n(a){this.mode=e.ALPHANUMERIC,this.data=a}return n.getBitsLength=function(s){return 11*Math.floor(s/2)+6*(s%2)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(s){let i;for(i=0;i+2<=this.data.length;i+=2){let o=t.indexOf(this.data[i])*45;o+=t.indexOf(this.data[i+1]),s.put(o,11)}this.data.length%2&&s.put(t.indexOf(this.data[i]),6)},Bx=n,Bx}var Fx,YS;function l9(){if(YS)return Fx;YS=1;const e=Bs();function t(n){this.mode=e.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}return t.getBitsLength=function(a){return a*8},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(n){for(let a=0,s=this.data.length;a<s;a++)n.put(this.data[a],8)},Fx=t,Fx}var qx,XS;function c9(){if(XS)return qx;XS=1;const e=Bs(),t=Ls();function n(a){this.mode=e.KANJI,this.data=a}return n.getBitsLength=function(s){return s*13},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(a){let s;for(s=0;s<this.data.length;s++){let i=t.toSJIS(this.data[s]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),a.put(i,13)}},qx=n,qx}var Ux={exports:{}},QS;function d9(){return QS||(QS=1,(function(e){var t={single_source_shortest_paths:function(n,a,s){var i={},o={};o[a]=0;var l=t.PriorityQueue.make();l.push(a,0);for(var c,d,u,h,f,m,g,p,x;!l.empty();){c=l.pop(),d=c.value,h=c.cost,f=n[d]||{};for(u in f)f.hasOwnProperty(u)&&(m=f[u],g=h+m,p=o[u],x=typeof o[u]>"u",(x||p>g)&&(o[u]=g,l.push(u,g),i[u]=d))}if(typeof s<"u"&&typeof o[s]>"u"){var b=["Could not find a path from ",a," to ",s,"."].join("");throw new Error(b)}return i},extract_shortest_path_from_predecessor_list:function(n,a){for(var s=[],i=a;i;)s.push(i),n[i],i=n[i];return s.reverse(),s},find_path:function(n,a,s){var i=t.single_source_shortest_paths(n,a,s);return t.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(n){var a=t.PriorityQueue,s={},i;n=n||{};for(i in a)a.hasOwnProperty(i)&&(s[i]=a[i]);return s.queue=[],s.sorter=n.sorter||a.default_sorter,s},default_sorter:function(n,a){return n.cost-a.cost},push:function(n,a){var s={value:n,cost:a};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(Ux)),Ux.exports}var JS;function u9(){return JS||(JS=1,(function(e){const t=Bs(),n=i9(),a=o9(),s=l9(),i=c9(),o=G4(),l=Ls(),c=d9();function d(b){return unescape(encodeURIComponent(b)).length}function u(b,y,w){const S=[];let v;for(;(v=b.exec(w))!==null;)S.push({data:v[0],index:v.index,mode:y,length:v[0].length});return S}function h(b){const y=u(o.NUMERIC,t.NUMERIC,b),w=u(o.ALPHANUMERIC,t.ALPHANUMERIC,b);let S,v;return l.isKanjiModeEnabled()?(S=u(o.BYTE,t.BYTE,b),v=u(o.KANJI,t.KANJI,b)):(S=u(o.BYTE_KANJI,t.BYTE,b),v=[]),y.concat(w,S,v).sort(function(A,P){return A.index-P.index}).map(function(A){return{data:A.data,mode:A.mode,length:A.length}})}function f(b,y){switch(y){case t.NUMERIC:return n.getBitsLength(b);case t.ALPHANUMERIC:return a.getBitsLength(b);case t.KANJI:return i.getBitsLength(b);case t.BYTE:return s.getBitsLength(b)}}function m(b){return b.reduce(function(y,w){const S=y.length-1>=0?y[y.length-1]:null;return S&&S.mode===w.mode?(y[y.length-1].data+=w.data,y):(y.push(w),y)},[])}function g(b){const y=[];for(let w=0;w<b.length;w++){const S=b[w];switch(S.mode){case t.NUMERIC:y.push([S,{data:S.data,mode:t.ALPHANUMERIC,length:S.length},{data:S.data,mode:t.BYTE,length:S.length}]);break;case t.ALPHANUMERIC:y.push([S,{data:S.data,mode:t.BYTE,length:S.length}]);break;case t.KANJI:y.push([S,{data:S.data,mode:t.BYTE,length:d(S.data)}]);break;case t.BYTE:y.push([{data:S.data,mode:t.BYTE,length:d(S.data)}])}}return y}function p(b,y){const w={},S={start:{}};let v=["start"];for(let N=0;N<b.length;N++){const A=b[N],P=[];for(let T=0;T<A.length;T++){const M=A[T],E=""+N+T;P.push(E),w[E]={node:M,lastCount:0},S[E]={};for(let C=0;C<v.length;C++){const O=v[C];w[O]&&w[O].node.mode===M.mode?(S[O][E]=f(w[O].lastCount+M.length,M.mode)-f(w[O].lastCount,M.mode),w[O].lastCount+=M.length):(w[O]&&(w[O].lastCount=M.length),S[O][E]=f(M.length,M.mode)+4+t.getCharCountIndicator(M.mode,y))}}v=P}for(let N=0;N<v.length;N++)S[v[N]].end=0;return{map:S,table:w}}function x(b,y){let w;const S=t.getBestModeForData(b);if(w=t.from(y,S),w!==t.BYTE&&w.bit<S.bit)throw new Error('"'+b+'" cannot be encoded with mode '+t.toString(w)+`.
 Suggested mode is: `+t.toString(S));switch(w===t.KANJI&&!l.isKanjiModeEnabled()&&(w=t.BYTE),w){case t.NUMERIC:return new n(b);case t.ALPHANUMERIC:return new a(b);case t.KANJI:return new i(b);case t.BYTE:return new s(b)}}e.fromArray=function(y){return y.reduce(function(w,S){return typeof S=="string"?w.push(x(S,null)):S.data&&w.push(x(S.data,S.mode)),w},[])},e.fromString=function(y,w){const S=h(y,l.isKanjiModeEnabled()),v=g(S),N=p(v,w),A=c.find_path(N.map,"start","end"),P=[];for(let T=1;T<A.length-1;T++)P.push(N.table[A[T]].node);return e.fromArray(m(P))},e.rawSplit=function(y){return e.fromArray(h(y,l.isKanjiModeEnabled()))}})($x)),$x}var ZS;function h9(){if(ZS)return Sx;ZS=1;const e=Ls(),t=_g(),n=Xz(),a=Qz(),s=Jz(),i=Zz(),o=e9(),l=W4(),c=n9(),d=a9(),u=s9(),h=Bs(),f=u9();function m(N,A){const P=N.size,T=i.getPositions(A);for(let M=0;M<T.length;M++){const E=T[M][0],C=T[M][1];for(let O=-1;O<=7;O++)if(!(E+O<=-1||P<=E+O))for(let _=-1;_<=7;_++)C+_<=-1||P<=C+_||(O>=0&&O<=6&&(_===0||_===6)||_>=0&&_<=6&&(O===0||O===6)||O>=2&&O<=4&&_>=2&&_<=4?N.set(E+O,C+_,!0,!0):N.set(E+O,C+_,!1,!0))}}function g(N){const A=N.size;for(let P=8;P<A-8;P++){const T=P%2===0;N.set(P,6,T,!0),N.set(6,P,T,!0)}}function p(N,A){const P=s.getPositions(A);for(let T=0;T<P.length;T++){const M=P[T][0],E=P[T][1];for(let C=-2;C<=2;C++)for(let O=-2;O<=2;O++)C===-2||C===2||O===-2||O===2||C===0&&O===0?N.set(M+C,E+O,!0,!0):N.set(M+C,E+O,!1,!0)}}function x(N,A){const P=N.size,T=d.getEncodedBits(A);let M,E,C;for(let O=0;O<18;O++)M=Math.floor(O/3),E=O%3+P-8-3,C=(T>>O&1)===1,N.set(M,E,C,!0),N.set(E,M,C,!0)}function b(N,A,P){const T=N.size,M=u.getEncodedBits(A,P);let E,C;for(E=0;E<15;E++)C=(M>>E&1)===1,E<6?N.set(E,8,C,!0):E<8?N.set(E+1,8,C,!0):N.set(T-15+E,8,C,!0),E<8?N.set(8,T-E-1,C,!0):E<9?N.set(8,15-E-1+1,C,!0):N.set(8,15-E-1,C,!0);N.set(T-8,8,1,!0)}function y(N,A){const P=N.size;let T=-1,M=P-1,E=7,C=0;for(let O=P-1;O>0;O-=2)for(O===6&&O--;;){for(let _=0;_<2;_++)if(!N.isReserved(M,O-_)){let D=!1;C<A.length&&(D=(A[C]>>>E&1)===1),N.set(M,O-_,D),E--,E===-1&&(C++,E=7)}if(M+=T,M<0||P<=M){M-=T,T=-T;break}}}function w(N,A,P){const T=new n;P.forEach(function(_){T.put(_.mode.bit,4),T.put(_.getLength(),h.getCharCountIndicator(_.mode,N)),_.write(T)});const M=e.getSymbolTotalCodewords(N),E=l.getTotalCodewordsCount(N,A),C=(M-E)*8;for(T.getLengthInBits()+4<=C&&T.put(0,4);T.getLengthInBits()%8!==0;)T.putBit(0);const O=(C-T.getLengthInBits())/8;for(let _=0;_<O;_++)T.put(_%2?17:236,8);return S(T,N,A)}function S(N,A,P){const T=e.getSymbolTotalCodewords(A),M=l.getTotalCodewordsCount(A,P),E=T-M,C=l.getBlocksCount(A,P),O=T%C,_=C-O,D=Math.floor(T/C),L=Math.floor(E/C),V=L+1,X=D-L,W=new c(X);let ce=0;const de=new Array(C),fe=new Array(C);let F=0;const Te=new Uint8Array(N.buffer);for(let oe=0;oe<C;oe++){const me=oe<_?L:V;de[oe]=Te.slice(ce,ce+me),fe[oe]=W.encode(de[oe]),ce+=me,F=Math.max(F,me)}const pe=new Uint8Array(T);let re=0,be,se;for(be=0;be<F;be++)for(se=0;se<C;se++)be<de[se].length&&(pe[re++]=de[se][be]);for(be=0;be<X;be++)for(se=0;se<C;se++)pe[re++]=fe[se][be];return pe}function v(N,A,P,T){let M;if(Array.isArray(N))M=f.fromArray(N);else if(typeof N=="string"){let D=A;if(!D){const L=f.rawSplit(N);D=d.getBestVersionForData(L,P)}M=f.fromString(N,D||40)}else throw new Error("Invalid data");const E=d.getBestVersionForData(M,P);if(!E)throw new Error("The amount of data is too big to be stored in a QR Code");if(!A)A=E;else if(A<E)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+E+`.
`);const C=w(A,P,M),O=e.getSymbolSize(A),_=new a(O);return m(_,A),g(_),p(_,A),b(_,P,0),A>=7&&x(_,A),y(_,C),isNaN(T)&&(T=o.getBestMask(_,b.bind(null,_,P))),o.applyMask(T,_),b(_,P,T),{modules:_,version:A,errorCorrectionLevel:P,maskPattern:T,segments:M}}return Sx.create=function(A,P){if(typeof A>"u"||A==="")throw new Error("No input text");let T=t.M,M,E;return typeof P<"u"&&(T=t.from(P.errorCorrectionLevel,t.M),M=d.from(P.version),E=o.from(P.maskPattern),P.toSJISFunc&&e.setToSJISFunction(P.toSJISFunc)),v(A,M,T,E)},Sx}var zx={},Vx={},ek;function K4(){return ek||(ek=1,(function(e){function t(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let a=n.slice().replace("#","").split("");if(a.length<3||a.length===5||a.length>8)throw new Error("Invalid hex color: "+n);(a.length===3||a.length===4)&&(a=Array.prototype.concat.apply([],a.map(function(i){return[i,i]}))),a.length===6&&a.push("F","F");const s=parseInt(a.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+a.slice(0,6).join("")}}e.getOptions=function(a){a||(a={}),a.color||(a.color={});const s=typeof a.margin>"u"||a.margin===null||a.margin<0?4:a.margin,i=a.width&&a.width>=21?a.width:void 0,o=a.scale||4;return{width:i,scale:i?4:o,margin:s,color:{dark:t(a.color.dark||"#000000ff"),light:t(a.color.light||"#ffffffff")},type:a.type,rendererOpts:a.rendererOpts||{}}},e.getScale=function(a,s){return s.width&&s.width>=a+s.margin*2?s.width/(a+s.margin*2):s.scale},e.getImageWidth=function(a,s){const i=e.getScale(a,s);return Math.floor((a+s.margin*2)*i)},e.qrToImageData=function(a,s,i){const o=s.modules.size,l=s.modules.data,c=e.getScale(o,i),d=Math.floor((o+i.margin*2)*c),u=i.margin*c,h=[i.color.light,i.color.dark];for(let f=0;f<d;f++)for(let m=0;m<d;m++){let g=(f*d+m)*4,p=i.color.light;if(f>=u&&m>=u&&f<d-u&&m<d-u){const x=Math.floor((f-u)/c),b=Math.floor((m-u)/c);p=h[l[x*o+b]?1:0]}a[g++]=p.r,a[g++]=p.g,a[g++]=p.b,a[g]=p.a}}})(Vx)),Vx}var tk;function f9(){return tk||(tk=1,(function(e){const t=K4();function n(s,i,o){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function a(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(i,o,l){let c=l,d=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(d=a()),c=t.getOptions(c);const u=t.getImageWidth(i.modules.size,c),h=d.getContext("2d"),f=h.createImageData(u,u);return t.qrToImageData(f.data,i,c),n(h,d,u),h.putImageData(f,0,0),d},e.renderToDataURL=function(i,o,l){let c=l;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const d=e.render(i,o,c),u=c.type||"image/png",h=c.rendererOpts||{};return d.toDataURL(u,h.quality)}})(zx)),zx}var Wx={},rk;function m9(){if(rk)return Wx;rk=1;const e=K4();function t(s,i){const o=s.a/255,l=i+'="'+s.hex+'"';return o<1?l+" "+i+'-opacity="'+o.toFixed(2).slice(1)+'"':l}function n(s,i,o){let l=s+i;return typeof o<"u"&&(l+=" "+o),l}function a(s,i,o){let l="",c=0,d=!1,u=0;for(let h=0;h<s.length;h++){const f=Math.floor(h%i),m=Math.floor(h/i);!f&&!d&&(d=!0),s[h]?(u++,h>0&&f>0&&s[h-1]||(l+=d?n("M",f+o,.5+m+o):n("m",c,0),c=0,d=!1),f+1<i&&s[h+1]||(l+=n("h",u),u=0)):c++}return l}return Wx.render=function(i,o,l){const c=e.getOptions(o),d=i.modules.size,u=i.modules.data,h=d+c.margin*2,f=c.color.light.a?"<path "+t(c.color.light,"fill")+' d="M0 0h'+h+"v"+h+'H0z"/>':"",m="<path "+t(c.color.dark,"stroke")+' d="'+a(u,d,c.margin)+'"/>',g='viewBox="0 0 '+h+" "+h+'"',x='<svg xmlns="http://www.w3.org/2000/svg" '+(c.width?'width="'+c.width+'" height="'+c.width+'" ':"")+g+' shape-rendering="crispEdges">'+f+m+`</svg>
`;return typeof l=="function"&&l(null,x),x},Wx}var nk;function x9(){if(nk)return ri;nk=1;const e=Yz(),t=h9(),n=f9(),a=m9();function s(i,o,l,c,d){const u=[].slice.call(arguments,1),h=u.length,f=typeof u[h-1]=="function";if(!f&&!e())throw new Error("Callback required as last argument");if(f){if(h<2)throw new Error("Too few arguments provided");h===2?(d=l,l=o,o=c=void 0):h===3&&(o.getContext&&typeof d>"u"?(d=c,c=void 0):(d=c,c=l,l=o,o=void 0))}else{if(h<1)throw new Error("Too few arguments provided");return h===1?(l=o,o=c=void 0):h===2&&!o.getContext&&(c=l,l=o,o=void 0),new Promise(function(m,g){try{const p=t.create(l,c);m(i(p,o,c))}catch(p){g(p)}})}try{const m=t.create(l,c);d(null,i(m,o,c))}catch(m){d(m)}}return ri.create=t.create,ri.toCanvas=s.bind(null,n.render),ri.toDataURL=s.bind(null,n.renderToDataURL),ri.toString=s.bind(null,function(i,o,l){return a.render(i,l)}),ri}var p9=x9();const g9=Pt(p9);function y9({onComplete:e}){var O;const[t,n]=k.useState(!1),[a,s]=k.useState("totp"),[i,o]=k.useState(""),[l,c]=k.useState(null),[d,u]=k.useState(""),[h,f]=k.useState(""),[m,g]=k.useState(""),[p,x]=k.useState(""),[b,y]=k.useState(!1),[w,S]=k.useState(!1),v=(O=_t)==null?void 0:O.currentUser,N=()=>v?oo(v).enrolledFactors.length>0:!1,A=async()=>{if(!v){te.error("Not authenticated");return}y(!0);try{const _=await oo(v).getSession(),D=await Cy.generateSecret(_);c(D);const L=D.secretKey;u(L);const V=D.generateQrCodeUrl(v.email||"user@vortexpcs.com","Vortex PCs Admin"),X=await g9.toDataURL(V);o(X),te.success("Scan QR code with your authenticator app")}catch(_){J.error("Failed to generate TOTP secret",_),te.error("Failed to generate authentication code")}finally{y(!1)}},P=async()=>{if(!v){te.error("Not authenticated");return}y(!0);try{const _=new uC(_t,"recaptcha-container",{size:"invisible"}),D=await oo(v).getSession(),V=await new Oy(_t).verifyPhoneNumber({phoneNumber:m,session:D},_);x(V),te.success("Verification code sent to your phone")}catch(_){J.error("Failed to send SMS",_),te.error("Failed to send verification code")}finally{y(!1)}},T=async()=>{if(!v||!l){te.error("Setup incomplete");return}y(!0);try{const _=Cy.assertionForEnrollment(l,h);await oo(v).enroll(_,"Authenticator App"),S(!0),te.success("MFA enabled successfully!"),n(!1),e==null||e()}catch(_){J.error("Failed to verify TOTP",_),te.error("Invalid verification code. Please try again.")}finally{y(!1)}},M=async()=>{if(!v||!p){te.error("Setup incomplete");return}y(!0);try{const _=Oy.credential(p,h),D=hC.assertion(_);await oo(v).enroll(D,"Phone SMS"),S(!0),te.success("MFA enabled successfully!"),n(!1),e==null||e()}catch(_){J.error("Failed to verify SMS",_),te.error("Invalid verification code. Please try again.")}finally{y(!1)}},E=()=>{navigator.clipboard.writeText(d),te.success("Secret key copied to clipboard")},C=N();return r.jsxs(r.Fragment,{children:[r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-3 bg-sky-500/20 rounded-lg",children:r.jsx(Dn,{className:"h-6 w-6 text-sky-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Multi-Factor Authentication"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Add an extra layer of security to your admin account"})]})]}),C?r.jsxs(H,{className:"bg-green-500/20 border-green-500/40 text-green-400",children:[r.jsx(zP,{className:"h-3 w-3 mr-1"}),"Enabled"]}):r.jsxs(H,{className:"bg-amber-500/20 border-amber-500/40 text-amber-400",children:[r.jsx(mt,{className:"h-3 w-3 mr-1"}),"Not Enabled"]})]}),!C&&r.jsx("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-lg p-4 mb-4",children:r.jsxs("p",{className:"text-sm text-amber-200",children:[r.jsx("strong",{children:"Security Warning:"})," MFA is not enabled on your account. Enable it now to protect against unauthorized access."]})}),r.jsx("div",{className:"space-y-4",children:r.jsx($,{onClick:()=>n(!0),disabled:C||!v,className:"w-full bg-gradient-to-r from-sky-600 to-blue-600 hover:from-sky-500 hover:to-blue-500",children:C?"MFA Already Enabled":"Enable MFA"})})]}),r.jsx(Et,{open:t,onOpenChange:n,children:r.jsxs(Dt,{className:"bg-gray-900 border-white/10 text-white max-w-lg",children:[r.jsxs($t,{children:[r.jsxs(Lt,{className:"text-xl font-bold flex items-center gap-2",children:[r.jsx(Dn,{className:"h-6 w-6 text-sky-400"}),"Enable Multi-Factor Authentication"]}),r.jsx(Kx,{className:"text-gray-400",children:"Choose your preferred authentication method"})]}),r.jsxs("div",{className:"space-y-6 pt-4",children:[!i&&!p&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("button",{onClick:()=>s("totp"),className:`p-4 rounded-lg border-2 transition-all ${a==="totp"?"border-sky-500 bg-sky-500/10":"border-white/10 bg-white/5 hover:bg-white/10"}`,children:[r.jsx(SC,{className:"h-6 w-6 mx-auto mb-2 text-sky-400"}),r.jsx("div",{className:"text-sm font-semibold",children:"Authenticator App"}),r.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Recommended"})]}),r.jsxs("button",{onClick:()=>s("sms"),className:`p-4 rounded-lg border-2 transition-all ${a==="sms"?"border-sky-500 bg-sky-500/10":"border-white/10 bg-white/5 hover:bg-white/10"}`,children:[r.jsx(Dn,{className:"h-6 w-6 mx-auto mb-2 text-blue-400"}),r.jsx("div",{className:"text-sm font-semibold",children:"SMS"}),r.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Text message"})]})]}),a==="totp"&&r.jsx($,{onClick:A,disabled:b,className:"w-full bg-gradient-to-r from-sky-600 to-blue-600",children:b?"Generating...":"Continue with Authenticator"}),a==="sms"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(le,{className:"text-white mb-2 block",children:"Phone Number"}),r.jsx(xe,{type:"tel",value:m,onChange:_=>g(_.target.value),placeholder:"+1234567890",className:"bg-white/5 border-white/10 text-white"})]}),r.jsx($,{onClick:P,disabled:b||!m,className:"w-full bg-gradient-to-r from-sky-600 to-blue-600",children:b?"Sending...":"Send Verification Code"})]})]}),i&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Scan this QR code with your authenticator app (Google Authenticator, Authy, 1Password, etc.)"}),r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("img",{src:i,alt:"QR Code",className:"w-48 h-48 bg-white p-2 rounded"})}),r.jsxs("div",{className:"bg-white/10 rounded p-3",children:[r.jsx(le,{className:"text-xs text-gray-400 mb-1 block",children:"Or enter this key manually:"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"flex-1 text-sm text-sky-400 break-all",children:d}),r.jsx($,{variant:"outline",size:"sm",onClick:E,className:"border-white/20",children:r.jsx(k0,{className:"h-4 w-4"})})]})]})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-white mb-2 block",children:"Enter 6-digit code from your app"}),r.jsx(xe,{type:"text",value:h,onChange:_=>f(_.target.value),placeholder:"000000",maxLength:6,className:"bg-white/5 border-white/10 text-white text-center text-2xl tracking-widest"})]}),r.jsx($,{onClick:T,disabled:b||h.length!==6,className:"w-full bg-gradient-to-r from-sky-600 to-blue-600",children:b?"Verifying...":"Verify and Enable MFA"})]}),p&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"bg-white/5 rounded-lg p-4",children:r.jsxs("p",{className:"text-sm text-gray-300",children:["Enter the verification code sent to ",m]})}),r.jsxs("div",{children:[r.jsx(le,{className:"text-white mb-2 block",children:"Verification Code"}),r.jsx(xe,{type:"text",value:h,onChange:_=>f(_.target.value),placeholder:"000000",maxLength:6,className:"bg-white/5 border-white/10 text-white text-center text-2xl tracking-widest"})]}),r.jsx($,{onClick:M,disabled:b||h.length!==6,className:"w-full bg-gradient-to-r from-sky-600 to-blue-600",children:b?"Verifying...":"Verify and Enable MFA"})]})]}),r.jsx("div",{id:"recaptcha-container"})]})})]})}const b9=[{label:"Bold",cmd:"bold"},{label:"Italic",cmd:"italic"},{label:"Underline",cmd:"underline"},{label:"H1",cmd:"formatBlock",arg:"h1"},{label:"H2",cmd:"formatBlock",arg:"h2"},{label:"List",cmd:"insertUnorderedList"}],v9=({value:e,onChange:t,onImageInsert:n})=>{var y;const a=k.useRef(null),[s,i]=k.useState(!1),[o,l]=k.useState(null),c=!!ck&&!!(kc&&((y=kc.options)!=null&&y.storageBucket));k.useEffect(()=>{a.current&&a.current.innerHTML!==e&&(a.current.innerHTML=e||"")},[e]);const d=(w,S)=>{document.execCommand(w,!1,S),a.current&&t(a.current.innerHTML)},u=()=>{const w=prompt("Enter URL (https://...)");if(!w)return;const S=p(w);if(!S){l("Invalid URL. Must start with http:// or https://");return}const v=window.getSelection(),N=v&&v.toString()?v.toString():prompt("Link text")||S;document.execCommand("insertHTML",!1,`<a href="${S}" style="color:#0ea5e9;text-decoration:none;" target="_blank" rel="noopener noreferrer">${x(N)}</a>`),a.current&&t(a.current.innerHTML)},h=()=>{const w=prompt("Enter image URL (https://...)");if(!w)return;const S=p(w);if(!S){l("Invalid image URL. Must start with http:// or https://");return}document.execCommand("insertHTML",!1,`<img src="${S}" alt="Image" style="max-width:100%;border-radius:8px;" />`),a.current&&t(a.current.innerHTML)},f=()=>{const w=prompt("CTA button URL (https://...)");if(!w)return;const S=p(w);if(!S){l("Invalid URL for CTA button.");return}const v=prompt("Button label","Learn More")||"Learn More",N=x(v),A=`<a href="${S}" target="_blank" rel="noopener noreferrer" style="display:inline-block;background:linear-gradient(90deg,#0ea5e9,#2563eb);color:#ffffff;font-weight:600;padding:12px 20px;border-radius:8px;text-decoration:none;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;font-size:14px;">${N}</a>`;document.execCommand("insertHTML",!1,A),a.current&&t(a.current.innerHTML)},m=w=>{const S=w.clipboardData.getData("text/html");if(S){w.preventDefault();const v=g(S);document.execCommand("insertHTML",!1,v),a.current&&t(a.current.innerHTML)}},g=w=>w.replace(/<script[\s\S]*?<\/script>/gi,"").replace(/<style[\s\S]*?<\/style>/gi,"").replace(/on\w+="[^"]*"/g,"").replace(/javascript:/gi,"").replace(/<iframe[\s\S]*?<\/iframe>/gi,""),p=w=>{const S=w.trim();return!/^https?:\/\//i.test(S)||/^javascript:/i.test(S)?null:S.replace(/"/g,"%22")},x=w=>w.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),b=async w=>{var v;const S=(v=w.target.files)==null?void 0:v[0];if(S){l(null);try{i(!0);const N=await dk(S);a.current&&(document.execCommand("insertHTML",!1,`<img src="${N.url}" alt="${N.name}" style="max-width:100%;border-radius:8px;" />`),t(a.current.innerHTML)),n==null||n(N.url)}catch(N){l(N instanceof Error?N.message:"Failed to upload image")}finally{i(!1),w.target.value=""}}};return r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-4",children:[r.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[b9.map(w=>r.jsx($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 text-xs py-1 px-2",onClick:()=>d(w.cmd,w.arg),children:w.label},w.label)),r.jsxs($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 text-xs py-1 px-2",onClick:u,children:[r.jsx(pk,{className:"w-4 h-4 mr-1"})," Link"]}),r.jsxs($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 text-xs py-1 px-2",onClick:h,children:[r.jsx(Bo,{className:"w-4 h-4 mr-1"})," Img URL"]}),r.jsxs($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 text-xs py-1 px-2",onClick:f,children:[r.jsx(gk,{className:"w-4 h-4 mr-1"})," CTA"]}),c&&r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"file",accept:"image/*",onChange:b,className:"absolute inset-0 opacity-0 cursor-pointer",title:"Upload image",disabled:s}),r.jsxs($,{type:"button",variant:"outline",disabled:s,className:"border-sky-500/30 text-sky-300 hover:bg-sky-500/10 text-xs py-1 px-2",children:[r.jsx(yk,{className:"w-4 h-4 mr-1"})," Upload"]})]}),s&&r.jsx("span",{className:"text-xs text-sky-400",children:"Uploading..."})]}),o&&r.jsx("div",{className:"text-xs text-red-400 mb-2",children:o}),r.jsx("div",{ref:a,onInput:()=>a.current&&t(a.current.innerHTML),onPaste:m,className:"min-h-[220px] rounded-md border border-white/10 bg-black/20 p-3 focus:outline-none text-sm text-gray-200",contentEditable:!0,suppressContentEditableWarning:!0,"aria-label":"Rich text editor"}),r.jsxs("div",{className:"mt-2 text-[10px] text-gray-400 space-y-1 leading-relaxed",children:[r.jsx("div",{children:"Tips:"}),r.jsx("div",{children:"• Select text then click Link, or click Link and enter both URL and text."}),r.jsxs("div",{children:["• Use Img URL for external images."," ",c?" Upload stores in Firebase.":" Upload hidden (no storage)."]}),r.jsx("div",{children:"• CTA adds a styled gradient button."}),r.jsx("div",{children:"• Only http/https URLs accepted; scripts/styles stripped automatically."})]})]})},ak=[{label:"System",value:"system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif"},{label:"Arial",value:"Arial, Helvetica, sans-serif"},{label:"Georgia",value:"Georgia, serif"},{label:"Times New Roman",value:"'Times New Roman', Times, serif"},{label:"Verdana",value:"Verdana, Geneva, sans-serif"},{label:"Roboto",value:"Roboto, Helvetica, Arial, sans-serif"}],w9=[12,14,16,18,20,24,28,32],j9=({value:e,onChange:t})=>{const n=k.useRef(null),[a,s]=k.useState(!1),[i,o]=k.useState(null),[l,c]=k.useState(ak[0].value),[d,u]=k.useState(16),[h,f]=k.useState("#e5e7eb"),[m,g]=k.useState("transparent"),p=k.useMemo(()=>{var _;return!!ck&&!!(kc&&((_=kc.options)!=null&&_.storageBucket))},[]);k.useEffect(()=>{n.current&&n.current.innerHTML!==e&&(n.current.innerHTML=e||"")},[e]);const x=(_,D)=>{document.execCommand(_,!1,D),n.current&&t(n.current.innerHTML)},b=()=>{const _=window.getSelection();if(!_||_.rangeCount===0)return null;const D=_.getRangeAt(0).cloneRange(),L=document.createElement("div");return L.appendChild(D.cloneContents()),L.innerHTML},y=_=>{const D=b();if(!D)return;const L=document.createElement("span");Object.assign(L.style,_),L.innerHTML=D,document.execCommand("insertHTML",!1,L.outerHTML),n.current&&t(n.current.innerHTML)},w=()=>{const _=prompt("Enter URL (https://...)");if(!_)return;const D=E(_);if(!D){o("Invalid URL. Must start with http:// or https://");return}const L=window.getSelection(),V=L&&L.toString()?L.toString():prompt("Link text")||D;document.execCommand("insertHTML",!1,`<a href="${D}" style="color:#0ea5e9;text-decoration:none;" target="_blank" rel="noopener noreferrer">${C(V)}</a>`),n.current&&t(n.current.innerHTML)},S=()=>{const _=prompt("Enter image URL (https://...)");if(!_)return;const D=E(_);if(!D){o("Invalid image URL. Must start with http:// or https://");return}document.execCommand("insertHTML",!1,`<img src="${D}" alt="Image" style="max-width:100%;border-radius:8px;" />`),n.current&&t(n.current.innerHTML)},v=()=>{const _=prompt("CTA button URL (https://...)");if(!_)return;const D=E(_);if(!D){o("Invalid URL for CTA button.");return}const L=prompt("Button label","Learn More")||"Learn More",V=C(L),X=`<a href="${D}" target="_blank" rel="noopener noreferrer" style="display:inline-block;background:linear-gradient(90deg,#0ea5e9,#2563eb);color:#ffffff;font-weight:600;padding:12px 20px;border-radius:8px;text-decoration:none;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;font-size:14px;">${V}</a>`;document.execCommand("insertHTML",!1,X),n.current&&t(n.current.innerHTML)},N=()=>{const _=prompt("Number of rows","3"),D=prompt("Number of columns","3");if(!_||!D)return;const L=parseInt(_,10),V=parseInt(D,10);if(isNaN(L)||isNaN(V)||L<1||V<1){o("Invalid table dimensions.");return}let X='<table style="border-collapse:collapse;width:100%;margin:12px 0;">';for(let W=0;W<L;W++){X+="<tr>";for(let ce=0;ce<V;ce++)X+=`<td style="border:1px solid #374151;padding:8px;background:#0f172a;color:#e5e7eb;">${W===0?`Header ${ce+1}`:"Cell"}</td>`;X+="</tr>"}X+="</table>",document.execCommand("insertHTML",!1,X),n.current&&t(n.current.innerHTML)},A=()=>{const _=prompt("Enter code snippet");if(!_)return;const L=`<pre style="background:#0b1220;border:1px solid #374151;padding:12px;border-radius:6px;overflow-x:auto;font-family:'Courier New',Courier,monospace;font-size:13px;color:#e5e7eb;margin:12px 0;">${C(_)}</pre>`;document.execCommand("insertHTML",!1,L),n.current&&t(n.current.innerHTML)},P=_=>{var V;const D=window.getSelection();if(!D||D.rangeCount===0)return;const L=(V=D.focusNode)==null?void 0:V.parentElement;if(L&&L.tagName==="IMG"){const X=L;let W="max-width:100%;border-radius:8px;";_==="center"?W+="display:block;margin:0 auto;":_==="left"?W+="float:left;margin:0 12px 12px 0;":_==="right"&&(W+="float:right;margin:0 0 12px 12px;"),X.setAttribute("style",W),n.current&&t(n.current.innerHTML)}},T=_=>{const D=_.clipboardData.getData("text/html");if(D){_.preventDefault();const L=M(D);document.execCommand("insertHTML",!1,L),n.current&&t(n.current.innerHTML)}},M=_=>_.replace(/<script[\s\S]*?<\/script>/gi,"").replace(/<style[\s\S]*?<\/style>/gi,"").replace(/on\w+="[^"]*"/g,"").replace(/javascript:/gi,"").replace(/<iframe[\s\S]*?<\/iframe>/gi,""),E=_=>{const D=_.trim();return!/^https?:\/\//i.test(D)||/^javascript:/i.test(D)?null:D.replace(/"/g,"%22")},C=_=>_.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),O=async _=>{var L;const D=(L=_.target.files)==null?void 0:L[0];if(D){o(null);try{s(!0);const V=await dk(D);n.current&&(document.execCommand("insertHTML",!1,`<img src="${V.url}" alt="${V.name}" style="max-width:100%;border-radius:8px;" />`),t(n.current.innerHTML))}catch(V){o(V instanceof Error?V.message:"Failed to upload image")}finally{s(!1),_.target.value=""}}};return r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-4",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[r.jsx("select",{value:l,onChange:_=>{c(_.target.value),y({fontFamily:_.target.value})},className:"h-8 bg-black/30 border border-white/10 text-white text-xs rounded px-2",title:"Font family",children:ak.map(_=>r.jsx("option",{value:_.value,className:"bg-slate-900",children:_.label},_.value))}),r.jsx("select",{value:d,onChange:_=>{const D=parseInt(_.target.value,10);u(D),y({fontSize:`${D}px`})},className:"h-8 bg-black/30 border border-white/10 text-white text-xs rounded px-2",title:"Font size",children:w9.map(_=>r.jsxs("option",{value:_,className:"bg-slate-900",children:[_,"px"]},_))}),r.jsxs("label",{className:"flex items-center gap-1 text-xs text-gray-300",children:["Text",r.jsx(xe,{type:"color",value:h,onChange:_=>{f(_.target.value),y({color:_.target.value})},className:"h-8 w-10 bg-transparent border-white/10 p-0"})]}),r.jsxs("label",{className:"flex items-center gap-1 text-xs text-gray-300",children:["Background",r.jsx(xe,{type:"color",value:m,onChange:_=>{g(_.target.value),y({backgroundColor:_.target.value})},className:"h-8 w-10 bg-transparent border-white/10 p-0"})]}),r.jsxs($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 h-8 px-2",onClick:()=>x("bold"),children:[" ",r.jsx(TC,{className:"w-4 h-4"})," "]}),r.jsxs($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 h-8 px-2",onClick:()=>x("italic"),children:[" ",r.jsx(DC,{className:"w-4 h-4"})," "]}),r.jsxs($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 h-8 px-2",onClick:()=>x("underline"),children:[" ",r.jsx(qC,{className:"w-4 h-4"})," "]}),r.jsxs($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 h-8 px-2",onClick:()=>x("strikeThrough"),children:[" ",r.jsx(BC,{className:"w-4 h-4"})," "]}),r.jsx($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 h-8 px-2",onClick:()=>x("justifyLeft"),children:r.jsx(PC,{className:"w-4 h-4"})}),r.jsx($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 h-8 px-2",onClick:()=>x("justifyCenter"),children:r.jsx(AC,{className:"w-4 h-4"})}),r.jsx($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 h-8 px-2",onClick:()=>x("justifyRight"),children:r.jsx(CC,{className:"w-4 h-4"})}),r.jsx($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 h-8 px-2",onClick:()=>x("insertUnorderedList"),children:r.jsx(NC,{className:"w-4 h-4"})}),r.jsx($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 h-8 px-2",onClick:()=>x("insertOrderedList"),children:r.jsx(MC,{className:"w-4 h-4"})}),r.jsx($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 h-8 px-2",onClick:()=>x("formatBlock","blockquote"),children:r.jsx($C,{className:"w-4 h-4"})}),r.jsx($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 h-8 px-2",onClick:()=>x("insertHorizontalRule"),children:r.jsx(bc,{className:"w-4 h-4"})}),r.jsx($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 h-8 px-2",onClick:()=>x("undo"),children:r.jsx(VP,{className:"w-4 h-4"})}),r.jsx($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 h-8 px-2",onClick:()=>x("redo"),children:r.jsx(LC,{className:"w-4 h-4"})}),r.jsx($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 h-8 px-2",title:"Clear formatting",onClick:()=>x("removeFormat"),children:r.jsx(_C,{className:"w-4 h-4"})}),r.jsxs($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 h-8 px-2",onClick:w,children:[r.jsx(pk,{className:"w-4 h-4 mr-1"})," Link"]}),r.jsxs($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 h-8 px-2",onClick:S,children:[r.jsx(Bo,{className:"w-4 h-4 mr-1"})," Img URL"]}),r.jsxs($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 h-8 px-2",onClick:v,children:[r.jsx(gk,{className:"w-4 h-4 mr-1"})," CTA"]}),r.jsxs($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 h-8 px-2",onClick:N,title:"Insert table",children:[r.jsx(FC,{className:"w-4 h-4 mr-1"})," Table"]}),r.jsxs($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 h-8 px-2",onClick:A,title:"Insert code block",children:[r.jsx(Yx,{className:"w-4 h-4 mr-1"})," Code"]}),r.jsx($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 h-8 px-2",onClick:()=>P("left"),title:"Align image left",children:"Img ←"}),r.jsx($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 h-8 px-2",onClick:()=>P("center"),title:"Align image center",children:"Img ↔"}),r.jsx($,{type:"button",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 h-8 px-2",onClick:()=>P("right"),title:"Align image right",children:"Img →"}),p&&r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"file",accept:"image/*",onChange:O,className:"absolute inset-0 opacity-0 cursor-pointer",title:"Upload image",disabled:a}),r.jsxs($,{type:"button",variant:"outline",disabled:a,className:"border-sky-500/30 text-sky-300 hover:bg-sky-500/10 h-8 px-2",children:[r.jsx(Bo,{className:"w-4 h-4 mr-1"})," Upload"]})]}),a&&r.jsx("span",{className:"text-xs text-sky-400",children:"Uploading..."})]}),i&&r.jsx("div",{className:"text-xs text-red-400 mb-2",children:i}),r.jsx("div",{ref:n,onInput:()=>n.current&&t(n.current.innerHTML),onPaste:T,className:"min-h-[260px] rounded-md border border-white/10 bg-black/20 p-3 focus:outline-none text-sm text-gray-200",contentEditable:!0,suppressContentEditableWarning:!0,"aria-label":"Advanced email editor"}),r.jsxs("div",{className:"mt-2 text-[10px] text-gray-400 space-y-1 leading-relaxed",children:[r.jsx("div",{children:"Tips:"}),r.jsx("div",{children:"• Use font, size, color, alignment for fine control. Clear removes formatting on selection."}),r.jsx("div",{children:"• Table: Creates styled table. Code: Inserts monospace code block."}),r.jsx("div",{children:"• Image alignment: Select an inserted image, then click Img ←/↔/→ to position it."}),r.jsx("div",{children:"• CTA inserts a styled gradient button (transformed to bulletproof markup on send)."}),r.jsx("div",{children:"• For best email client support, keep layout simple and prefer inline styles."})]})]})};function w0(e){const{title:t="A message from Vortex PCs",preheader:n="",logoUrl:a="https://vortexpcs.com/vortexpcs-logo.png",accentFrom:s="#0ea5e9",accentTo:i="#2563eb",contentHtml:o,footerHtml:l=k9()}=e,c=jc(n||""),d=N9(o);return`<!DOCTYPE html>
  <html>
    <head>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>${jc(t)}</title>
      <style>
        /* Basic reset */
        body { margin:0; padding:0; background:#0b0b0c; color:#e5e7eb; }
        img { border:0; outline:none; text-decoration:none; max-width:100%; }
        a { color:#0ea5e9; text-decoration:none; }
        .wrapper { width:100%; background: #0b0b0c; padding:24px 12px; }
        .container { max-width:640px; margin:0 auto; background:#0f172a; border:1px solid rgba(255,255,255,0.08); border-radius:16px; overflow:hidden; }
        .header { background: linear-gradient(135deg, ${s}, ${i}); text-align:center; padding:32px 24px; }
        .logo-box { display:inline-block; background: rgba(0,0,0,0.2); padding:12px 16px; border-radius:12px; }
        .title { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; color:#fff; font-size:22px; font-weight:700; margin:16px 0 0; }
        .content { padding:28px 24px; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; line-height:1.7; color:#e5e7eb; }
        .card { background:#0b1220; border:1px solid rgba(255,255,255,0.06); border-radius:12px; padding:20px; }
        .footer { background:#0b0b0c; padding:20px; text-align:center; font-size:12px; color:#9ca3af; border-top:1px solid rgba(255,255,255,0.06); }
        .preheader { display:none !important; visibility:hidden; opacity:0; color:transparent; height:0; width:0; overflow:hidden; }
        @media only screen and (max-width:600px){ .content{ padding:22px 16px; } .header{ padding:24px 16px; } }
      </style>
    </head>
    <body>
      <span class="preheader">${c}</span>
      <div class="wrapper">
        <div class="container">
          <div class="header">
            <span class="logo-box">
              <img src="${a}" alt="Vortex PCs" style="height:48px;"/>
            </span>
            <div class="title">${jc(t)}</div>
          </div>
          <div class="content">
            <div class="card">${d}</div>
          </div>
          <div class="footer">${l}</div>
        </div>
      </div>
    </body>
  </html>`}function N9(e){return e.replace(/<a([^>]*style="[^"]*linear-gradient[^"]*"[^>]*)>([\s\S]*?)<\/a>/gi,(t,n,a)=>{const s=n.match(/href="([^"]+)"/i),i=s?s[1]:"#",o=a.replace(/<[^>]+>/g,"").trim();return`
    <!-- CTA Button -->
    <table role="presentation" cellspacing="0" cellpadding="0" border="0" align="center" style="margin:16px auto;">
      <tr>
        <td style="border-radius:8px; background:${S9(n)||"#0ea5e9"}; padding:0;">
          <a href="${i}" target="_blank" rel="noopener noreferrer" 
             style="display:inline-block;padding:12px 22px;font-family:Segoe UI,Roboto,Helvetica,Arial,sans-serif;font-size:14px;font-weight:600;line-height:18px;color:#ffffff;text-decoration:none;border-radius:8px;background:linear-gradient(90deg,#0ea5e9,#2563eb);">
            ${jc(o||"Learn More")}
          </a>
        </td>
      </tr>
    </table>`})}function S9(e){const t=e.match(/linear-gradient\([^,]+,\s*([^,\s)]+)/i);return t?t[1]:null}function k9(){return`
    <div style="margin-bottom:6px; color:#cbd5e1;">
      © ${new Date().getFullYear()} Vortex PCs Ltd
    </div>
    <div>info@vortexpcs.com • 01603 975440 • vortexpcs.com</div>
    <div style="margin-top:8px; color:#94a3b8;">You received this email because you are a Vortex PCs customer.</div>
    <div style="margin-top:4px; color:#64748b; font-size:11px;">To stop receiving marketing emails, update your preferences in your <a href="https://vortexpcs.com/member" style="color:#0ea5e9;">profile</a>.</div>
  `}function jc(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}async function Y4(e){let t=null;try{const{auth:s}=await Ie(async()=>{const{auth:i}=await import("./index-C09NoPC0.js").then(o=>o.cq);return{auth:i}},__vite__mapDeps([0,1,2,3,4]));if(s!=null&&s.currentUser){const{getIdToken:i}=await Ie(async()=>{const{getIdToken:o}=await import("./firebase-D5dyMTPx.js").then(l=>l.A);return{getIdToken:o}},[]);t=await i(s.currentUser,!0)}}catch{}const n={"Content-Type":"application/json"};t&&(n.Authorization=`Bearer ${t}`);try{const s=WP();s&&(n["X-CSRF-Token"]=s)}catch{}const a=await fetch("/api/admin/email/send",{method:"POST",headers:n,body:JSON.stringify(e)});if(!a.ok){const s=await a.json().catch(()=>({}));throw new Error((s==null?void 0:s.message)||(s==null?void 0:s.error)||`Email send failed (${a.status})`)}return a.json()}function A9(){const[e,t]=k.useState([{name:"Firebase Auth",status:"checking",message:"Checking...",icon:Qn},{name:"Firestore Database",status:"checking",message:"Checking...",icon:Qn},{name:"Contentful CMS",status:"checking",message:"Checking...",icon:Ea},{name:"Stripe Payments",status:"checking",message:"Checking...",icon:Jl},{name:"Email Service",status:"checking",message:"Checking...",icon:wn},{name:"Vercel Hosting",status:"checking",message:"Checking...",icon:_u}]),[n,a]=k.useState(!0),[s,i]=k.useState(new Date),[o,l]=k.useState(!1);k.useEffect(()=>{if(c(),o){const g=setInterval(c,6e4);return()=>clearInterval(g)}},[o]);const c=async()=>{a(!0);const g=[];try{_t&&_t.currentUser?g.push({name:"Firebase Auth",status:"healthy",message:"Connected and authenticated",icon:Qn}):_t?g.push({name:"Firebase Auth",status:"healthy",message:"Service available (not signed in)",icon:Qn}):g.push({name:"Firebase Auth",status:"error",message:"Not initialized",icon:Qn})}catch(x){g.push({name:"Firebase Auth",status:"error",message:x instanceof Error?x.message:"Connection failed",icon:Qn})}try{if(br){const x=Da(Rn(br,"orders"),No(1));await ai(x),g.push({name:"Firestore Database",status:"healthy",message:"Connected and responsive",icon:Qn})}else g.push({name:"Firestore Database",status:"error",message:"Not initialized",icon:Qn})}catch(x){g.push({name:"Firestore Database",status:"error",message:x instanceof Error?x.message:"Query failed",icon:Qn})}try{g.push({name:"Contentful CMS",status:"error",message:"Not configured",icon:Ea})}catch(x){J.warn("Contentful CMS check failed",{error:x}),g.push({name:"Contentful CMS",status:"error",message:"Connection failed",icon:Ea})}try{g.push({name:"Stripe Payments",status:"error",message:"Not configured",icon:Jl})}catch(x){J.warn("Stripe key check failed",{error:x}),g.push({name:"Stripe Payments",status:"error",message:"Configuration error",icon:Jl})}try{(await fetch("/api/email/verify-config")).ok?g.push({name:"Email Service",status:"healthy",message:"API responding",icon:wn}):g.push({name:"Email Service",status:"error",message:"API check failed",icon:wn})}catch(x){J.warn("Email service config check failed",{error:x}),g.push({name:"Email Service",status:"error",message:"Configuration error",icon:wn})}g.push({name:"Vercel Hosting",status:"healthy",message:"Application running",icon:_u}),t(g),i(new Date),a(!1);const p=g.filter(x=>x.status==="error");p.length>0&&te.warning(`${p.length} service(s) reporting issues`)},d=e.filter(g=>g.status==="healthy").length,u=e.filter(g=>g.status==="error").length,h=u===0?"healthy":u>=3?"down":"degraded",f=g=>{switch(g){case"healthy":return"text-green-400 bg-green-500/20 border-green-500/40";case"checking":return"text-yellow-400 bg-yellow-500/20 border-yellow-500/40";case"error":return"text-red-400 bg-red-500/20 border-red-500/40";default:return"text-gray-400 bg-gray-500/20 border-gray-500/40"}},m=()=>{switch(h){case"healthy":return"bg-green-500/10 border-green-500/30";case"degraded":return"bg-yellow-500/10 border-yellow-500/30";case"down":return"bg-red-500/10 border-red-500/30";default:return"bg-gray-500/10 border-gray-500/30"}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"System Monitoring"}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Real-time health checks and service status"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs($,{variant:"outline",size:"sm",onClick:()=>l(!o),className:o?"border-sky-500/50 text-sky-400":"",children:[r.jsx(on,{className:`w-4 h-4 mr-2 ${o?"animate-pulse":""}`}),"Auto-Refresh ",o?"On":"Off"]}),r.jsxs($,{variant:"outline",size:"sm",onClick:c,disabled:n,children:[r.jsx(Bt,{className:`w-4 h-4 mr-2 ${n?"animate-spin":""}`}),"Refresh"]})]})]}),r.jsx(q,{className:`p-6 ${m()}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[h==="healthy"?r.jsx($a,{className:"w-8 h-8 text-green-400"}):h==="degraded"?r.jsx(mt,{className:"w-8 h-8 text-yellow-400"}):r.jsx(di,{className:"w-8 h-8 text-red-400"}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-xl font-bold text-white capitalize",children:["System Status: ",h]}),r.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[d," of ",e.length," services operational"]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx(H,{className:f(h==="healthy"?"healthy":"error"),children:h.toUpperCase()}),r.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Last checked: ",s.toLocaleTimeString()]})]})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((g,p)=>{const x=g.icon;return r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6 hover:border-sky-500/30 transition-all",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${g.status==="healthy"?"bg-gradient-to-r from-green-500 to-emerald-500":g.status==="error"?"bg-gradient-to-r from-red-500 to-orange-500":"bg-gradient-to-r from-yellow-500 to-amber-500"}`,children:r.jsx(x,{className:"w-5 h-5 text-white"})}),r.jsx("span",{className:"font-semibold text-white",children:g.name})]}),g.status==="healthy"?r.jsx($a,{className:"w-5 h-5 text-green-400"}):g.status==="error"?r.jsx(di,{className:"w-5 h-5 text-red-400"}):r.jsx(on,{className:"w-5 h-5 text-yellow-400 animate-pulse"})]}),r.jsxs("div",{children:[r.jsx(H,{className:f(g.status),children:g.status}),r.jsx("p",{className:"text-sm text-gray-400 mt-2",children:g.message})]})]},p)})}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"System Overview"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center p-4 bg-green-500/10 rounded-lg border border-green-500/20",children:[r.jsx("div",{className:"flex items-center justify-center mb-2",children:r.jsx($a,{className:"w-6 h-6 text-green-400"})}),r.jsx("p",{className:"text-2xl font-bold text-green-400",children:d}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Healthy"})]}),r.jsxs("div",{className:"text-center p-4 bg-yellow-500/10 rounded-lg border border-yellow-500/20",children:[r.jsx("div",{className:"flex items-center justify-center mb-2",children:r.jsx(on,{className:"w-6 h-6 text-yellow-400"})}),r.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:e.filter(g=>g.status==="checking").length}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Checking"})]}),r.jsxs("div",{className:"text-center p-4 bg-red-500/10 rounded-lg border border-red-500/20",children:[r.jsx("div",{className:"flex items-center justify-center mb-2",children:r.jsx(di,{className:"w-6 h-6 text-red-400"})}),r.jsx("p",{className:"text-2xl font-bold text-red-400",children:u}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Errors"})]})]})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Quick Actions"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs($,{variant:"outline",className:"justify-start",onClick:()=>window.open("https://console.firebase.google.com","_blank"),children:[r.jsx(xk,{className:"w-4 h-4 mr-2"}),"Firebase Console"]}),r.jsxs($,{variant:"outline",className:"justify-start",onClick:()=>window.open("https://app.contentful.com","_blank"),children:[r.jsx(Ea,{className:"w-4 h-4 mr-2"}),"Contentful Dashboard"]}),r.jsxs($,{variant:"outline",className:"justify-start",onClick:()=>window.open("https://dashboard.stripe.com","_blank"),children:[r.jsx(Jl,{className:"w-4 h-4 mr-2"}),"Stripe Dashboard"]}),r.jsxs($,{variant:"outline",className:"justify-start",onClick:()=>window.open("https://vercel.com/dashboard","_blank"),children:[r.jsx(_u,{className:"w-4 h-4 mr-2"}),"Vercel Dashboard"]})]})]})]})}function P9(){var x;const[e,t]=k.useState(null),[n,a]=k.useState(!0),[s,i]=k.useState(null),[o,l]=k.useState(!0),[c,d]=k.useState(null),u=async()=>{try{if(!_t){i("Firebase not initialized");return}const b=_t.currentUser;if(!b){i("Not authenticated");return}const y=await b.getIdToken(),w=await fetch("/api/admin/analytics/live-visitors",{headers:{Authorization:`Bearer ${y}`}}),S=await w.json();if(!w.ok)throw J.error("Live visitors API error",{data:S,status:w.status}),w.status===404?new Error("API endpoint not found - please redeploy to Vercel"):new Error(S.error||S.details||`HTTP ${w.status}: ${w.statusText}`);S.success?(t(S.data),i(null)):i(S.error||"Unknown error")}catch(b){J.error("Failed to fetch live visitors",b),i(b instanceof Error?b.message:"Failed to fetch")}finally{a(!1)}};k.useEffect(()=>{if(u(),o){const b=setInterval(u,5e3);return()=>clearInterval(b)}},[o]),k.useEffect(()=>{if(!c||!o)return;const b=setInterval(()=>{u()},3e3);return()=>clearInterval(b)},[c,o]),k.useEffect(()=>{if(c&&e){const b=e.visitors.find(y=>y.sessionId===c.sessionId);b&&d(b)}},[e,c]);const h=b=>{if(b<60)return`${b}s`;const y=Math.floor(b/60),w=b%60;return`${y}m ${w}s`},f=b=>b.includes("Chrome")?"🌐 Chrome":b.includes("Firefox")?"🦊 Firefox":b.includes("Safari")&&!b.includes("Chrome")?"🧭 Safari":b.includes("Edge")?"🔷 Edge":"💻 Browser",m=b=>{try{const y=globalThis.Intl;if(!y||!y.DisplayNames)return;const w=new y.DisplayNames(["en"],{type:"region"});return typeof w.of=="function"?w.of(b):void 0}catch{return}},g=b=>{if(b)try{const y=b.toUpperCase();return m(y)||y}catch{return b.toUpperCase()}},p=b=>{if(!b)return"";try{return b.toUpperCase().replace(/[^A-Z]/g,"").split("").map(w=>String.fromCodePoint(127397+w.charCodeAt(0))).join("")}catch{return""}};return n&&!e?r.jsx(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:r.jsxs("div",{className:"flex items-center justify-center py-8",children:[r.jsx(Bt,{className:"w-6 h-6 text-sky-400 animate-spin"}),r.jsx("span",{className:"ml-2 text-gray-400",children:"Loading live visitors..."})]})}):s?r.jsx(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:r.jsxs("div",{className:"text-center py-8",children:[r.jsxs("p",{className:"text-red-400 mb-2",children:["Error: ",s]}),r.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Check browser console for details"}),r.jsx($,{onClick:u,className:"mt-4 bg-sky-500 hover:bg-sky-600",children:"Retry"})]})}):r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[r.jsx("div",{className:"mb-6 rounded-xl border border-sky-500/20 bg-gradient-to-r from-sky-500/10 to-blue-500/10 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(kr,{className:"w-6 h-6 text-green-400"}),r.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-gradient-to-br from-sky-600 to-blue-600 text-white flex items-center justify-center font-extrabold shadow-[0_0_30px_rgba(56,189,248,0.25)] ring-2 ring-white/10","aria-label":"Active visitors count",title:"Active visitors right now",children:(e==null?void 0:e.totalActive)??0}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white tracking-tight",children:"Live Visitors"}),r.jsxs("p",{className:"text-sm md:text-base text-sky-300/90 font-medium",children:[(e==null?void 0:e.totalActive)||0," active right now"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(H,{className:`${o?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"} border-0`,children:o?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"animate-pulse mr-1",children:"●"})," Live"]}):"Paused"}),r.jsx($,{size:"sm",variant:"outline",onClick:()=>l(!o),className:"border-white/20",children:o?"Pause":"Resume"}),r.jsx($,{size:"sm",variant:"outline",onClick:u,className:"border-white/20",children:r.jsx(Bt,{className:"w-4 h-4"})})]})]})}),e&&e.totalActive>0&&r.jsx("div",{className:"mb-6 grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(e.pageBreakdown).sort((b,y)=>y[1]-b[1]).slice(0,4).map(([b,y])=>r.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[r.jsx("div",{className:"text-xs text-gray-400",children:b}),r.jsx("div",{className:"text-xl font-bold text-sky-400",children:y})]},b))}),r.jsx("div",{className:"space-y-3",children:e&&e.visitors.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-400",children:[r.jsx(ha,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"No visitors currently active"}),r.jsx("p",{className:"text-sm mt-1",children:"Waiting for traffic..."})]}):e==null?void 0:e.visitors.map(b=>{var y;return r.jsx("div",{onClick:()=>d(b),className:"bg-white/5 border border-white/10 rounded-lg p-4 hover:bg-white/10 hover:border-sky-500/30 transition-all cursor-pointer",children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[b.isAuthenticated?r.jsxs(r.Fragment,{children:[r.jsx(Po,{className:"w-4 h-4 text-green-400"}),r.jsx("span",{className:"text-white font-medium",children:b.userName||"Logged In User"})]}):r.jsxs(r.Fragment,{children:[r.jsx(Po,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"text-gray-400",children:"Anonymous Visitor"})]}),r.jsx("span",{className:"text-xs text-gray-500",children:f(b.userAgent)})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(H,{className:"bg-sky-500/20 text-sky-400 border-0",children:b.currentPage}),r.jsx("span",{className:"text-sm text-gray-400",children:b.currentActivity}),((y=b.location)==null?void 0:y.country)&&r.jsxs(H,{className:"bg-white/10 text-white border-white/20",children:[p(b.location.country),r.jsx("span",{className:"ml-1",children:g(b.location.country)})]})]}),b.location&&r.jsxs("div",{className:"text-xs text-gray-500",children:["📍 ",b.location.city,b.location.country&&r.jsxs(r.Fragment,{children:[b.location.city?", ":"",g(b.location.country)]})]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400 mb-1",children:[r.jsx($o,{className:"w-3 h-3"}),h(b.duration)]}),r.jsx("div",{className:"text-xs text-gray-500",children:new Date(b.lastActive).toLocaleTimeString()})]})]})},b.sessionId)})}),e&&r.jsxs("div",{className:"mt-4 text-xs text-gray-500 text-center",children:["Last updated: ",new Date(e.timestamp).toLocaleTimeString()]}),r.jsx(Et,{open:!!c,onOpenChange:()=>d(null),children:r.jsxs(Dt,{className:"bg-gray-900 border-white/10 text-white max-w-2xl max-h-[90vh] overflow-y-auto [&>button]:hidden",children:[r.jsx($t,{children:r.jsxs(Lt,{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Po,{className:"w-5 h-5"}),"Visitor Journey Details"]}),r.jsx($,{size:"sm",variant:"outline",onClick:u,className:"border-white/20",title:"Refresh visitor data",children:r.jsx(Bt,{className:"w-4 h-4"})})]})}),c&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("h3",{className:"text-sm font-semibold text-sky-400 flex items-center gap-2",children:[r.jsx(kr,{className:"w-4 h-4"}),"Visitor Information"]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-4 space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Status:"}),r.jsx(H,{className:c.isAuthenticated?"bg-green-500/20 text-green-400 border-0":"bg-gray-500/20 text-gray-400 border-0",children:c.isAuthenticated?c.userName||"Logged In":"Anonymous"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Browser:"}),r.jsx("span",{className:"text-white",children:f(c.userAgent)})]}),c.ipAddress&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"IP Address:"}),r.jsx("span",{className:"text-white font-mono text-sm",children:c.ipAddress})]}),((x=c.location)==null?void 0:x.country)&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Country of Origin:"}),r.jsxs("span",{className:"text-white",children:[p(c.location.country),r.jsx("span",{className:"ml-1",children:g(c.location.country)})]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Session Duration:"}),r.jsx("span",{className:"text-white",children:h(c.duration)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Total Page Views:"}),r.jsx("span",{className:"text-white",children:c.totalPageViews||1})]}),c.location&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Location:"}),r.jsxs("span",{className:"text-white",children:["📍 ",c.location.city,","," ",c.location.country]})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("h3",{className:"text-sm font-semibold text-sky-400 flex items-center gap-2",children:[r.jsx(zt,{className:"w-4 h-4"}),"Entry Information"]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-4 space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Entry Method:"}),r.jsx(H,{className:"bg-purple-500/20 text-purple-400 border-0",children:c.entryMethod||"Unknown"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Entry Page:"}),r.jsx("span",{className:"text-white",children:c.entryPage||"Homepage"})]}),c.searchTerm&&r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("span",{className:"text-gray-400",children:"Search Term:"}),r.jsxs(H,{className:"bg-amber-500/20 text-amber-400 border-0 flex items-center gap-1",children:[r.jsx(js,{className:"w-3 h-3"}),c.searchTerm]})]}),c.referrer&&r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-gray-400",children:"Referrer:"}),r.jsxs("a",{href:c.referrer,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-sky-400 hover:text-sky-300 break-all flex items-center gap-1",children:[r.jsx(Tr,{className:"w-3 h-3 flex-shrink-0"}),c.referrer]})]})]})]}),c.pageViews&&c.pageViews.length>0&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("h3",{className:"text-sm font-semibold text-sky-400 flex items-center gap-2",children:[r.jsx(ha,{className:"w-4 h-4"}),"Page Journey (",c.pageViews.length," ",c.pageViews.length===1?"page":"pages",")"]}),r.jsx("div",{className:"bg-white/5 rounded-lg p-4",children:r.jsx("div",{className:"space-y-3",children:c.pageViews.map((b,y)=>r.jsxs("div",{className:"flex items-start gap-3 pb-3 border-b border-white/10 last:border-0 last:pb-0",children:[r.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-sky-500/20 text-sky-400 flex items-center justify-center text-xs font-bold",children:y+1}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium text-white",children:b.page}),r.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-3 mt-1",children:[r.jsx("span",{children:new Date(b.timestamp).toLocaleTimeString()}),b.duration!==void 0&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx($o,{className:"w-3 h-3"}),h(b.duration)]})]})]})]},y))})})]}),r.jsxs("div",{className:"bg-gradient-to-r from-sky-500/10 to-blue-500/10 border border-sky-500/20 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),r.jsx("span",{className:"text-sm font-semibold text-white",children:"Currently Viewing"})]}),r.jsx("div",{className:"text-lg font-bold text-sky-400",children:c.currentPage}),r.jsx("div",{className:"text-sm text-gray-400 mt-1",children:c.currentActivity})]})]})]})})]})}function C9(e,t){return k.useReducer((n,a)=>t[n][a]??n,e)}var Eg="ScrollArea",[X4]=GP(Eg),[O9,fn]=X4(Eg),Q4=k.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:a="hover",dir:s,scrollHideDelay:i=600,...o}=e,[l,c]=k.useState(null),[d,u]=k.useState(null),[h,f]=k.useState(null),[m,g]=k.useState(null),[p,x]=k.useState(null),[b,y]=k.useState(0),[w,S]=k.useState(0),[v,N]=k.useState(!1),[A,P]=k.useState(!1),T=Ui(t,E=>c(E)),M=HP(s);return r.jsx(O9,{scope:n,type:a,dir:M,scrollHideDelay:i,scrollArea:l,viewport:d,onViewportChange:u,content:h,onContentChange:f,scrollbarX:m,onScrollbarXChange:g,scrollbarXEnabled:v,onScrollbarXEnabledChange:N,scrollbarY:p,onScrollbarYChange:x,scrollbarYEnabled:A,onScrollbarYEnabledChange:P,onCornerWidthChange:y,onCornerHeightChange:S,children:r.jsx(Nl.div,{dir:M,...o,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});Q4.displayName=Eg;var J4="ScrollAreaViewport",Z4=k.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:a,nonce:s,...i}=e,o=fn(J4,n),l=k.useRef(null),c=Ui(t,l,o.onViewportChange);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),r.jsx(Nl.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:r.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:a})})]})});Z4.displayName=J4;var Wn="ScrollAreaScrollbar",eP=k.forwardRef((e,t)=>{const{forceMount:n,...a}=e,s=fn(Wn,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,l=e.orientation==="horizontal";return k.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),s.type==="hover"?r.jsx(T9,{...a,ref:t,forceMount:n}):s.type==="scroll"?r.jsx(_9,{...a,ref:t,forceMount:n}):s.type==="auto"?r.jsx(tP,{...a,ref:t,forceMount:n}):s.type==="always"?r.jsx(Dg,{...a,ref:t}):null});eP.displayName=Wn;var T9=k.forwardRef((e,t)=>{const{forceMount:n,...a}=e,s=fn(Wn,e.__scopeScrollArea),[i,o]=k.useState(!1);return k.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[s.scrollArea,s.scrollHideDelay]),r.jsx(Cd,{present:n||i,children:r.jsx(tP,{"data-state":i?"visible":"hidden",...a,ref:t})})}),_9=k.forwardRef((e,t)=>{const{forceMount:n,...a}=e,s=fn(Wn,e.__scopeScrollArea),i=e.orientation==="horizontal",o=xu(()=>c("SCROLL_END"),100),[l,c]=C9("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return k.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,s.scrollHideDelay,c]),k.useEffect(()=>{const d=s.viewport,u=i?"scrollLeft":"scrollTop";if(d){let h=d[u];const f=()=>{const m=d[u];h!==m&&(c("SCROLL"),o()),h=m};return d.addEventListener("scroll",f),()=>d.removeEventListener("scroll",f)}},[s.viewport,i,c,o]),r.jsx(Cd,{present:n||l!=="hidden",children:r.jsx(Dg,{"data-state":l==="hidden"?"hidden":"visible",...a,ref:t,onPointerEnter:gs(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:gs(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),tP=k.forwardRef((e,t)=>{const n=fn(Wn,e.__scopeScrollArea),{forceMount:a,...s}=e,[i,o]=k.useState(!1),l=e.orientation==="horizontal",c=xu(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?d:u)}},10);return qi(n.viewport,c),qi(n.content,c),r.jsx(Cd,{present:a||i,children:r.jsx(Dg,{"data-state":i?"visible":"hidden",...s,ref:t})})}),Dg=k.forwardRef((e,t)=>{const{orientation:n="vertical",...a}=e,s=fn(Wn,e.__scopeScrollArea),i=k.useRef(null),o=k.useRef(0),[l,c]=k.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=iP(l.viewport,l.content),u={...a,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:f=>i.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function h(f,m){return $9(f,o.current,l,m)}return n==="horizontal"?r.jsx(E9,{...u,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollLeft,m=sk(f,l,s.dir);i.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=h(f,s.dir))}}):n==="vertical"?r.jsx(D9,{...u,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollTop,m=sk(f,l);i.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=h(f))}}):null}),E9=k.forwardRef((e,t)=>{const{sizes:n,onSizesChange:a,...s}=e,i=fn(Wn,e.__scopeScrollArea),[o,l]=k.useState(),c=k.useRef(null),d=Ui(t,c,i.onScrollbarXChange);return k.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),r.jsx(nP,{"data-orientation":"horizontal",...s,ref:d,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":mu(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(i.viewport){const f=i.viewport.scrollLeft+u.deltaX;e.onWheelScroll(f),lP(f,h)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&a({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Pd(o.paddingLeft),paddingEnd:Pd(o.paddingRight)}})}})}),D9=k.forwardRef((e,t)=>{const{sizes:n,onSizesChange:a,...s}=e,i=fn(Wn,e.__scopeScrollArea),[o,l]=k.useState(),c=k.useRef(null),d=Ui(t,c,i.onScrollbarYChange);return k.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),r.jsx(nP,{"data-orientation":"vertical",...s,ref:d,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":mu(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(i.viewport){const f=i.viewport.scrollTop+u.deltaY;e.onWheelScroll(f),lP(f,h)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&a({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Pd(o.paddingTop),paddingEnd:Pd(o.paddingBottom)}})}})}),[M9,rP]=X4(Wn),nP=k.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:a,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:h,...f}=e,m=fn(Wn,n),[g,p]=k.useState(null),x=Ui(t,T=>p(T)),b=k.useRef(null),y=k.useRef(""),w=m.viewport,S=a.content-a.viewport,v=cs(u),N=cs(c),A=xu(h,10);function P(T){if(b.current){const M=T.clientX-b.current.left,E=T.clientY-b.current.top;d({x:M,y:E})}}return k.useEffect(()=>{const T=M=>{const E=M.target;(g==null?void 0:g.contains(E))&&v(M,S)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[w,g,S,v]),k.useEffect(N,[a,N]),qi(g,A),qi(m.content,A),r.jsx(M9,{scope:n,scrollbar:g,hasThumb:s,onThumbChange:cs(i),onThumbPointerUp:cs(o),onThumbPositionChange:N,onThumbPointerDown:cs(l),children:r.jsx(Nl.div,{...f,ref:x,style:{position:"absolute",...f.style},onPointerDown:gs(e.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),b.current=g.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),P(T))}),onPointerMove:gs(e.onPointerMove,P),onPointerUp:gs(e.onPointerUp,T=>{const M=T.target;M.hasPointerCapture(T.pointerId)&&M.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=y.current,m.viewport&&(m.viewport.style.scrollBehavior=""),b.current=null})})})}),Ad="ScrollAreaThumb",aP=k.forwardRef((e,t)=>{const{forceMount:n,...a}=e,s=rP(Ad,e.__scopeScrollArea);return r.jsx(Cd,{present:n||s.hasThumb,children:r.jsx(I9,{ref:t,...a})})}),I9=k.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:a,...s}=e,i=fn(Ad,n),o=rP(Ad,n),{onThumbPositionChange:l}=o,c=Ui(t,h=>o.onThumbChange(h)),d=k.useRef(void 0),u=xu(()=>{d.current&&(d.current(),d.current=void 0)},100);return k.useEffect(()=>{const h=i.viewport;if(h){const f=()=>{if(u(),!d.current){const m=L9(h,l);d.current=m,l()}};return l(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[i.viewport,u,l]),r.jsx(Nl.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:gs(e.onPointerDownCapture,h=>{const m=h.target.getBoundingClientRect(),g=h.clientX-m.left,p=h.clientY-m.top;o.onThumbPointerDown({x:g,y:p})}),onPointerUp:gs(e.onPointerUp,o.onThumbPointerUp)})});aP.displayName=Ad;var Mg="ScrollAreaCorner",sP=k.forwardRef((e,t)=>{const n=fn(Mg,e.__scopeScrollArea),a=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&a?r.jsx(R9,{...e,ref:t}):null});sP.displayName=Mg;var R9=k.forwardRef((e,t)=>{const{__scopeScrollArea:n,...a}=e,s=fn(Mg,n),[i,o]=k.useState(0),[l,c]=k.useState(0),d=!!(i&&l);return qi(s.scrollbarX,()=>{var h;const u=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(u),c(u)}),qi(s.scrollbarY,()=>{var h;const u=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(u),o(u)}),d?r.jsx(Nl.div,{...a,ref:t,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Pd(e){return e?parseInt(e,10):0}function iP(e,t){const n=e/t;return isNaN(n)?0:n}function mu(e){const t=iP(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=(e.scrollbar.size-n)*t;return Math.max(a,18)}function $9(e,t,n,a="ltr"){const s=mu(n),i=s/2,o=t||i,l=s-o,c=n.scrollbar.paddingStart+o,d=n.scrollbar.size-n.scrollbar.paddingEnd-l,u=n.content-n.viewport,h=a==="ltr"?[0,u]:[u*-1,0];return oP([c,d],h)(e)}function sk(e,t,n="ltr"){const a=mu(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-s,o=t.content-t.viewport,l=i-a,c=n==="ltr"?[0,o]:[o*-1,0],d=YP(e,c);return oP([0,o],[0,l])(d)}function oP(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(n-e[0])}}function lP(e,t){return e>0&&e<t}var L9=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},a=0;return(function s(){const i={left:e.scrollLeft,top:e.scrollTop},o=n.left!==i.left,l=n.top!==i.top;(o||l)&&t(),n=i,a=window.requestAnimationFrame(s)})(),()=>window.cancelAnimationFrame(a)};function xu(e,t){const n=cs(e),a=k.useRef(0);return k.useEffect(()=>()=>window.clearTimeout(a.current),[]),k.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(n,t)},[n,t])}function qi(e,t){const n=cs(t);KP(()=>{let a=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(a),a=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(a),s.unobserve(e)}}},[e,n])}var B9=Q4,F9=Z4,q9=sP;function ik({className:e,children:t,...n}){return r.jsxs(B9,{"data-slot":"scroll-area",className:Fa("relative",e),...n,children:[r.jsx(F9,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),r.jsx(U9,{}),r.jsx(q9,{})]})}function U9({className:e,orientation:t="vertical",...n}){return r.jsx(eP,{"data-slot":"scroll-area-scrollbar",orientation:t,className:Fa("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:r.jsx(aP,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function z9({isOpen:e,onClose:t,date:n,sessions:a}){var g;const[s,i]=k.useState(null),o=p=>{if(p<60)return`${p}s`;const x=Math.floor(p/60),b=p%60;if(x<60)return`${x}m ${b}s`;const y=Math.floor(x/60),w=x%60;return`${y}h ${w}m`},l=p=>p.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"}),c=p=>{const x=p.toLowerCase();return x.includes("google")?r.jsx(js,{className:"w-4 h-4"}):x.includes("facebook")||x.includes("twitter")||x.includes("linkedin")?r.jsx(kC,{className:"w-4 h-4"}):x==="direct"?r.jsx(ha,{className:"w-4 h-4"}):r.jsx(Tr,{className:"w-4 h-4"})},d=p=>{const x=p.toLowerCase();return x.includes("google")?"bg-blue-500/20 text-blue-300 border-blue-500/30":x.includes("bing")?"bg-orange-500/20 text-orange-300 border-orange-500/30":x.includes("facebook")?"bg-blue-600/20 text-blue-300 border-blue-600/30":x.includes("twitter")?"bg-sky-500/20 text-sky-300 border-sky-500/30":x==="direct"?"bg-green-500/20 text-green-300 border-green-500/30":"bg-purple-500/20 text-purple-300 border-purple-500/30"},u=p=>{try{const x=globalThis.Intl;if(!x||!x.DisplayNames)return;const b=new x.DisplayNames(["en"],{type:"region"});return typeof b.of=="function"?b.of(p):void 0}catch{return}},h=p=>{if(!p)return;const x=p.trim();if(/^[A-Za-z]{2}$/.test(x))try{return u(x.toUpperCase())||x.toUpperCase()}catch{return x.toUpperCase()}return p},f=p=>{if(!p)return"";const x=p.trim();if(!/^[A-Za-z]{2}$/.test(x))return"";try{return x.toUpperCase().split("").map(y=>String.fromCodePoint(127397+y.charCodeAt(0))).join("")}catch{return""}},m=p=>p==="/"||p==="/home"?"Home":p==="/pc-builder"?"PC Builder":p==="/pc-finder"?"PC Finder":p==="/about"?"About":p==="/contact"?"Contact":p==="/business-solutions"?"Business Solutions":p==="/repair"?"Repair Service":p==="/member"?"Member Area":p.startsWith("/blog/")?"Blog Post":p==="/blog"?"Blog":p;return r.jsx(Et,{open:e,onOpenChange:t,children:r.jsxs(Dt,{className:"max-h-[90vh] bg-gray-900 border-white/10",style:{width:"95vw",maxWidth:"1350px"},children:[r.jsxs($t,{children:[r.jsxs(Lt,{className:"text-2xl font-bold text-white",children:["Visitor Sessions -"," ",new Date(n).toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric",year:"numeric"})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400 mt-2",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(kr,{className:"w-4 h-4"}),a.length," total visitors"]}),r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Dy,{className:"w-4 h-4"}),a.reduce((p,x)=>p+x.totalPageViews,0)," total views"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-4",children:[r.jsxs(q,{className:"bg-white/5 border-white/10 p-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[r.jsx(ha,{className:"w-5 h-5 text-sky-400"}),"All Visitors"]}),r.jsx(ik,{className:"h-[500px] pr-4",children:r.jsx("div",{className:"space-y-3",children:a.map((p,x)=>r.jsxs(q,{onClick:()=>i(p),className:`p-4 cursor-pointer transition-all duration-200 ${(s==null?void 0:s.sessionId)===p.sessionId?"bg-sky-500/20 border-sky-500/50 shadow-lg shadow-sky-500/20":"bg-white/5 border-white/10 hover:bg-white/10 hover:border-sky-500/30"}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsxs("span",{className:"text-white font-semibold",children:["Visitor #",x+1]}),r.jsx(H,{className:`text-xs ${d(p.referrerSource)}`,children:r.jsxs("span",{className:"flex items-center gap-1",children:[c(p.referrerSource),p.referrerSource]})})]}),r.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx($o,{className:"w-3 h-3"}),l(p.startTime)]}),p.location&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Hx,{className:"w-3 h-3"}),p.location.city,","," ",p.location.country]})]})]}),r.jsx(XP,{className:`w-5 h-5 transition-all ${(s==null?void 0:s.sessionId)===p.sessionId?"text-sky-400 rotate-90":"text-gray-500"}`})]}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400 mt-2 pt-2 border-t border-white/10",children:[r.jsxs("span",{children:[p.totalPageViews," pages"]}),r.jsx("span",{children:"•"}),r.jsxs("span",{children:[o(p.totalTime)," duration"]})]})]},p.sessionId))})})]}),r.jsx(q,{className:"bg-white/5 border-white/10 p-4",children:s?r.jsxs(r.Fragment,{children:[r.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[r.jsx(kr,{className:"w-5 h-5 text-sky-400"}),"Session Details"]}),r.jsx(ik,{className:"h-[500px] pr-4",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs(q,{className:"bg-white/5 border-white/10 p-4",children:[r.jsx("h4",{className:"text-sm font-semibold text-sky-400 mb-3",children:"Overview"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"IP Address:"}),r.jsx("span",{className:"text-white font-mono",children:s.ip})]}),((g=s.location)==null?void 0:g.country)&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Country of Origin:"}),r.jsxs("span",{className:"text-white",children:[f(s.location.country),r.jsx("span",{className:"ml-1",children:h(s.location.country)})]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Arrived:"}),r.jsx("span",{className:"text-white",children:l(s.startTime)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Total Time:"}),r.jsx("span",{className:"text-white",children:o(s.totalTime)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Total Pages:"}),r.jsx("span",{className:"text-white",children:s.totalPageViews})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Exit Page:"}),r.jsx("span",{className:"text-white",children:m(s.exitPage)})]})]})]}),r.jsxs(q,{className:"bg-white/5 border-white/10 p-4",children:[r.jsx("h4",{className:"text-sm font-semibold text-sky-400 mb-3",children:"Traffic Source"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:"Source:"}),r.jsx(H,{className:`${d(s.referrerSource)}`,children:r.jsxs("span",{className:"flex items-center gap-1",children:[c(s.referrerSource),s.referrerSource]})})]}),s.referrerTerm&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Search Term:"}),r.jsxs("span",{className:"text-white",children:['"',s.referrerTerm,'"']})]}),s.referrerUrl&&r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-gray-400",children:"Referrer URL:"}),r.jsxs("a",{href:s.referrerUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sky-400 hover:text-sky-300 text-xs break-all flex items-center gap-1",children:[s.referrerUrl,r.jsx(Tr,{className:"w-3 h-3 flex-shrink-0"})]})]})]})]}),s.device&&r.jsxs(q,{className:"bg-white/5 border-white/10 p-4",children:[r.jsxs("h4",{className:"text-sm font-semibold text-sky-400 mb-3 flex items-center gap-2",children:[r.jsx(QP,{className:"w-4 h-4"}),"Device Information"]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Type:"}),r.jsx(H,{className:"bg-white/10 text-white border-white/20 capitalize",children:s.device.type})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Browser:"}),r.jsx("span",{className:"text-white",children:s.device.browser})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"OS:"}),r.jsx("span",{className:"text-white",children:s.device.os})]})]})]}),s.location&&r.jsxs(q,{className:"bg-white/5 border-white/10 p-4",children:[r.jsxs("h4",{className:"text-sm font-semibold text-sky-400 mb-3 flex items-center gap-2",children:[r.jsx(Hx,{className:"w-4 h-4"}),"Location"]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[s.location.city&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"City:"}),r.jsx("span",{className:"text-white",children:s.location.city})]}),s.location.country&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Country:"}),r.jsx("span",{className:"text-white",children:s.location.country})]})]})]}),r.jsxs(q,{className:"bg-white/5 border-white/10 p-4",children:[r.jsx("h4",{className:"text-sm font-semibold text-sky-400 mb-3",children:"Page Journey"}),r.jsx("div",{className:"space-y-3",children:s.pages.map((p,x)=>r.jsxs("div",{className:"flex items-start gap-3 pb-3 border-b border-white/10 last:border-0",children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-sky-500/20 border border-sky-500/30 flex items-center justify-center text-sky-400 text-xs font-semibold",children:x+1}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-white font-medium mb-1",children:m(p.path)}),r.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[r.jsxs("div",{children:[l(p.timestamp),p.timeOnPage&&r.jsxs("span",{className:"ml-2 text-sky-400",children:["• ",o(p.timeOnPage)]})]}),r.jsx("div",{className:"text-gray-500 break-all",children:p.path})]})]})]},x))})]})]})})]}):r.jsx("div",{className:"h-[500px] flex items-center justify-center text-gray-400",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Dy,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"Select a visitor to view details"})]})})})]})]})})}function V9(){const[e,t]=k.useState(null),n=()=>{try{const{analytics:s}=JP(),i=sessionStorage.getItem("vortex_session_id"),o=localStorage.getItem("vortex_user"),l=o?JSON.parse(o):null,c=(l==null?void 0:l.role)==="admin",d=s||c;t({firebaseConfigured:Co,cookieConsent:s,sessionId:i,isAdmin:c,trackingActive:d,lastError:null}),J.info("📊 [Diagnostics] Analytics check complete",{firebaseConfigured:Co,consentAnalytics:s,sessionId:i,isAdmin:c,trackingActive:d})}catch(s){t({firebaseConfigured:!1,cookieConsent:!1,sessionId:null,isAdmin:!1,trackingActive:!1,lastError:s instanceof Error?s.message:"Unknown error"})}};if(k.useEffect(()=>{n()},[]),!e)return r.jsx(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:r.jsx("p",{className:"text-gray-400",children:"Loading diagnostics..."})});const a=({condition:s,label:i})=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg border border-white/10",children:[r.jsx("span",{className:"text-white",children:i}),s?r.jsxs(H,{className:"bg-green-500/20 text-green-400 border-green-500/40",children:[r.jsx($a,{className:"w-3 h-3 mr-1"}),"Active"]}):r.jsxs(H,{className:"bg-red-500/20 text-red-400 border-red-500/40",children:[r.jsx(di,{className:"w-3 h-3 mr-1"}),"Inactive"]})]});return r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-white",children:"Analytics Diagnostics"}),r.jsxs($,{onClick:n,variant:"outline",size:"sm",className:"border-white/20",children:[r.jsx(Bt,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(a,{condition:e.firebaseConfigured,label:"Firebase Configured"}),r.jsx(a,{condition:e.cookieConsent,label:"Cookie Consent"}),r.jsx(a,{condition:e.isAdmin,label:"Admin User"}),r.jsx(a,{condition:e.trackingActive,label:"Analytics Tracking"}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg border border-white/10",children:[r.jsx("span",{className:"text-white",children:"Session ID"}),e.sessionId?r.jsxs("span",{className:"text-xs text-green-400 font-mono",children:[e.sessionId.substring(0,20),"..."]}):r.jsxs(H,{className:"bg-yellow-500/20 text-yellow-400 border-yellow-500/40",children:[r.jsx(Ra,{className:"w-3 h-3 mr-1"}),"Not initialized"]})]}),e.lastError&&r.jsx("div",{className:"p-3 bg-red-500/10 rounded-lg border border-red-500/40",children:r.jsx("p",{className:"text-sm text-red-400",children:e.lastError})}),!e.trackingActive&&r.jsx("div",{className:"p-3 bg-yellow-500/10 rounded-lg border border-yellow-500/40",children:r.jsxs("p",{className:"text-sm text-yellow-400",children:[r.jsx(Ra,{className:"w-4 h-4 inline mr-2"}),"Analytics tracking is currently inactive.",!e.cookieConsent&&!e.isAdmin&&r.jsxs("span",{children:[" ","Please accept cookies or sign in as admin to enable tracking."]})]})}),!e.firebaseConfigured&&r.jsx("div",{className:"p-3 bg-blue-500/10 rounded-lg border border-blue-500/40",children:r.jsxs("p",{className:"text-sm text-blue-400",children:[r.jsx(Ra,{className:"w-4 h-4 inline mr-2"}),"Firebase is not configured. Analytics will use API fallback if deployed."]})}),e.trackingActive&&e.sessionId&&r.jsx("div",{className:"p-3 bg-green-500/10 rounded-lg border border-green-500/40",children:r.jsxs("p",{className:"text-sm text-green-400",children:[r.jsx($a,{className:"w-4 h-4 inline mr-2"}),"Analytics are active and tracking!"]})})]}),r.jsxs("div",{className:"mt-6 p-4 bg-black/20 rounded-lg border border-white/5",children:[r.jsx("h4",{className:"text-sm font-semibold text-white mb-2",children:"Troubleshooting Tips"}),r.jsxs("ul",{className:"text-xs text-gray-400 space-y-1",children:[r.jsx("li",{children:"• Check browser console for detailed analytics logs"}),r.jsx("li",{children:"• Ensure you're logged in as an admin user"}),r.jsx("li",{children:"• Accept analytics cookies or use admin override for testing"}),r.jsx("li",{children:"• Verify Firebase environment variables are set correctly"}),r.jsx("li",{children:"• Check that Firestore rules allow analytics writes"})]})]})]})}function W9(e){if(!e||typeof e!="object")return{month:"Unknown",year:new Date().getFullYear(),visitors:0,pageViews:0,sessions:0,avgSessionDuration:0,bounceRate:0,newUsers:0,revenue:0,orders:0};const t=e,n=(s,i=0,o=1/0)=>{const l=typeof s=="number"?s:Number(s)||0;return Number.isFinite(l)?Math.min(Math.max(l,i),o):0};return{month:((s,i="")=>typeof s=="string"?s.trim().slice(0,50):i)(t.month,"Unknown"),year:n(t.year,2020,2100)||new Date().getFullYear(),visitors:n(t.visitors),pageViews:n(t.pageViews),sessions:n(t.sessions),avgSessionDuration:n(t.avgSessionDuration),bounceRate:n(t.bounceRate,0,100),newUsers:n(t.newUsers),revenue:n(t.revenue),orders:n(t.orders)}}function H9(e){if(!e||typeof e!="object")return{monthlyData:[]};const t=e,a=(Array.isArray(t.monthlyData)?t.monthlyData:[]).map(o=>W9(o)),s=t.summary&&typeof t.summary=="object"?{totalVisitors:as(t.summary.totalVisitors),avgVisitorsPerMonth:as(t.summary.avgVisitorsPerMonth),totalPageViews:as(t.summary.totalPageViews),totalSessions:as(t.summary.totalSessions),totalRevenue:as(t.summary.totalRevenue),avgRevenuePerMonth:as(t.summary.avgRevenuePerMonth),totalOrders:as(t.summary.totalOrders)}:void 0,i=t.trends&&typeof t.trends=="object"?{visitors:wo(t.trends.visitors),pageViews:wo(t.trends.pageViews),sessions:wo(t.trends.sessions),revenue:wo(t.trends.revenue),orders:wo(t.trends.orders)}:void 0;return{monthlyData:a,summary:s,trends:i}}function wo(e){if(typeof e=="string"){const t=e.trim().slice(0,20);if(/^[+-]/.test(t)||/\d/.test(t))return t}return"0%"}function as(e,t=0,n=1/0){const a=typeof e=="number"?e:Number(e)||0;return Number.isFinite(a)?Math.min(Math.max(a,t),n):0}function G9(){var vt,Ir,Tn,_n,Fs,Ya,Me,Ft,rt,mn,El,Rr;const[e,t]=k.useState(null),[n,a]=k.useState(null),[s,i]=k.useState(null),[o,l]=k.useState(null),[c,d]=k.useState(null),[u,h]=k.useState(null),[f,m]=k.useState(null),[g,p]=k.useState(null),[x,b]=k.useState(null),[y,w]=k.useState(null),[S,v]=k.useState(null),[N,A]=k.useState(null),[P,T]=k.useState(null),[M,E]=k.useState(null),[C,O]=k.useState(!0),[_,D]=k.useState(7),[L,V]=k.useState(!1),[X,W]=k.useState("standard"),ce=k.useMemo(()=>new Date().getFullYear(),[]),[de,fe]=k.useState("7d"),[F,Te]=k.useState(null),[pe,re]=k.useState(null),[be,se]=k.useState(ce),[oe,me]=k.useState({}),ve=k.useMemo(()=>Array.from({length:5},(B,ie)=>ce-ie),[ce]),[I,ge]=k.useState(!1),[Ne,He]=k.useState(""),[bt,It]=k.useState("all"),[Ar,Ur]=k.useState(!1),[Pr,Cr]=k.useState(!1),[zr,Hn]=k.useState(""),[Jr,Cn]=k.useState([]),[Ha,Ga]=k.useState(!1),[sr,Gn]=k.useState([]),[Ka,ya]=k.useState(null),xr=!!((vt=_t)!=null&&vt.currentUser),On=!!br,U=typeof window<"u"&&localStorage.getItem("vortex_cookie_consent")==="accepted",Q=xr&&!U,ae=async()=>{if(!(!_t||!_t.currentUser))try{const B=await _t.currentUser.getIdToken(),ie=await fetch("/api/admin/analytics/summary-monthly?months=12",{headers:{Authorization:`Bearer ${B}`}}),$e=ie.headers.get("content-type");if(!$e||!$e.includes("application/json")){const Xe=await ie.text();J.error("Monthly summary returned non-JSON",new Error(`Status: ${ie.status}, ContentType: ${$e}, Body: ${Xe.substring(0,200)}`)),te.error(`API not available (returned ${ie.status}). Deploy to Vercel to enable.`);return}const ne=await ie.json();if(ne.success){const Xe=H9(ne.data);Te(Xe)}else J.error("Monthly summary API error",new Error(JSON.stringify(ne))),te.error(ne.error||ne.details||"Failed to load monthly summary")}catch(B){J.error("Failed to fetch monthly summary",B),te.error(B instanceof Error?B.message:"Failed to load monthly summary")}},Se=async B=>{const ie=B??be;if(!(!_t||!_t.currentUser))try{const $e=await _t.currentUser.getIdToken(),ne=await fetch(`/api/admin/analytics/summary-ytd?year=${ie}`,{headers:{Authorization:`Bearer ${$e}`}}),Xe=ne.headers.get("content-type");if(!Xe||!Xe.includes("application/json")){const et=await ne.text();J.error("YTD summary returned non-JSON",new Error(`Status: ${ne.status}, ContentType: ${Xe}, Body: ${et.substring(0,200)}`)),te.error(`API not available (returned ${ne.status}). Deploy to Vercel to enable.`);return}const Je=await ne.json();if(Je.success){const et=Je.data;re(et),me(Jt=>({...Jt,[ie]:et}))}else J.error("YTD summary API error",new Error(JSON.stringify(Je))),te.error(Je.error||Je.details||"Failed to load YTD summary")}catch($e){J.error("Failed to fetch YTD summary",$e),te.error($e instanceof Error?$e.message:"Failed to load YTD summary")}},qe=async()=>{if(Ne!=="RESET"){te.error('Please type "RESET" to confirm');return}Ur(!0);try{if(!_t||!_t.currentUser){te.error("Authentication required");return}const B=await _t.currentUser.getIdToken(),$e=await(await fetch("/api/admin/analytics/reset",{method:"DELETE",headers:{Authorization:`Bearer ${B}`,"Content-Type":"application/json"},body:JSON.stringify({type:bt,confirm:!0})})).json();$e.success?(te.success(`Successfully reset analytics. Deleted ${$e.data.deletedCount} documents.`),ge(!1),He(""),_e(),X==="monthly"&&ae(),X==="ytd"&&Se()):te.error($e.error||"Failed to reset analytics")}catch(B){J.error("Reset error",B),te.error("Failed to reset analytics")}finally{Ur(!1)}},_e=async()=>{var B,ie;try{if(!_t||!_t.currentUser){O(!1);return}const $e=await _t.currentUser.getIdToken(),ne=[],[Xe,Je,et,Jt,vr,Kn,xn,Be,qt,wt,Ot,Vt,$r,Lr]=await Promise.all([fetch("/api/admin/analytics/live",{headers:{Authorization:`Bearer ${$e}`}}),fetch(`/api/admin/analytics/visitors?period=${_}`,{headers:{Authorization:`Bearer ${$e}`}}),fetch(`/api/admin/analytics/pages?days=${_}`,{headers:{Authorization:`Bearer ${$e}`}}),fetch(`/api/admin/analytics/security?days=${_}`,{headers:{Authorization:`Bearer ${$e}`}}),fetch(`/api/admin/analytics/downloads?days=${_}`,{headers:{Authorization:`Bearer ${$e}`}}),fetch(`/api/admin/analytics/products?days=${_}`,{headers:{Authorization:`Bearer ${$e}`}}),fetch(`/api/admin/analytics/builds?days=${_}`,{headers:{Authorization:`Bearer ${$e}`}}),fetch(`/api/admin/analytics/saves?days=${_}`,{headers:{Authorization:`Bearer ${$e}`}}),fetch(`/api/admin/analytics/cart?days=${_}`,{headers:{Authorization:`Bearer ${$e}`}}),fetch(`/api/admin/analytics/compat?days=${_}`,{headers:{Authorization:`Bearer ${$e}`}}),fetch(`/api/admin/analytics/sessionQuality?days=${_}`,{headers:{Authorization:`Bearer ${$e}`}}),fetch(`/api/admin/analytics/frustration?days=${_}`,{headers:{Authorization:`Bearer ${$e}`}}),fetch(`/api/admin/analytics/performance?days=${_}`,{headers:{Authorization:`Bearer ${$e}`}}),fetch(`/api/admin/analytics/adoption?days=${_}`,{headers:{Authorization:`Bearer ${$e}`}})]),Tt=async Ke=>{try{const wa=await Ke.text();return wa?JSON.parse(wa):{success:!1,error:"Empty response"}}catch(wa){return{success:!1,error:`Failed to parse response: ${wa instanceof Error?wa.message:"Unknown error"}`}}},[Zr,Zt,jt,wr,qs,Xa,en,Qa,Us,Yn,Wt,ba,va,Ja]=await Promise.all([Tt(Xe),Tt(Je),Tt(et),Tt(Jt),Tt(vr),Tt(Kn),Tt(xn),Tt(Be),Tt(qt),Tt(wt),Tt(Ot),Tt(Vt),Tt($r),Tt(Lr)]);if(!Xe.ok||!Zr.success){const Ke=Xe.status===401?"Authentication failed - Please sign in as admin":Zr.error||Zr.details||"Unknown error";ne.push({endpoint:"live",message:Ke,status:Xe.status})}else t(Zr.data);if(!Je.ok||!Zt.success){const Ke=Je.status===401?"Authentication failed - Please sign in as admin":Zt.error||Zt.details||"Unknown error";ne.push({endpoint:"visitors",message:Ke,status:Je.status})}else J.info("Visitor stats received",{data:Zt.data}),J.info("Time series length",{length:(ie=(B=Zt.data)==null?void 0:B.timeSeries)==null?void 0:ie.length}),a(Zt.data);if(!et.ok||!jt.success){const Ke=et.status===401?"Authentication failed - Please sign in as admin":jt.error||jt.details||"Unknown error";ne.push({endpoint:"pages",message:Ke,status:et.status})}else i(jt.data);if(!Jt.ok||!wr.success){const Ke=Jt.status===401?"Authentication failed - Please sign in as admin":wr.error||wr.details||"Unknown error";ne.push({endpoint:"security",message:Ke,status:Jt.status})}else l(wr.data);if(!vr.ok||!qs.success){const Ke=vr.status===401?"Authentication failed - Please sign in as admin":qs.error||qs.details||"Unknown error";ne.push({endpoint:"downloads",message:Ke,status:vr.status})}else d(qs.data);if(!Kn.ok||!Xa.success){const Ke=Kn.status===401?"Authentication failed - Please sign in as admin":Xa.error||Xa.details||"Unknown error";ne.push({endpoint:"products",message:Ke,status:Kn.status})}else h(Xa.data);if(!xn.ok||!en.success){const Ke=xn.status===401?"Authentication failed - Please sign in as admin":en.error||en.details||"Unknown error";ne.push({endpoint:"builds",message:Ke,status:xn.status})}else m(en.data);if(!Be.ok||!Qa.success){const Ke=Be.status===401?"Authentication failed - Please sign in as admin":Qa.error||Qa.details||"Unknown error";ne.push({endpoint:"saves",message:Ke,status:Be.status})}else p(Qa.data);if(!qt.ok||!Us.success){const Ke=qt.status===401?"Authentication failed - Please sign in as admin":Us.error||Us.details||"Unknown error";ne.push({endpoint:"cart",message:Ke,status:qt.status})}else b(Us.data);if(!wt.ok||!Yn.success){const Ke=wt.status===401?"Authentication failed - Please sign in as admin":Yn.error||Yn.details||"Unknown error";ne.push({endpoint:"compat",message:Ke,status:wt.status})}else w(Yn.data);if(!Ot.ok||!Wt.success){const Ke=Ot.status===401?"Authentication failed - Please sign in as admin":Wt.error||Wt.details||"Unknown error";ne.push({endpoint:"sessionQuality",message:Ke,status:Ot.status})}else v(Wt.data);if(!Vt.ok||!ba.success){const Ke=Vt.status===401?"Authentication failed - Please sign in as admin":ba.error||ba.details||"Unknown error";ne.push({endpoint:"frustration",message:Ke,status:Vt.status})}else A(ba.data);if(!$r.ok||!va.success){const Ke=$r.status===401?"Authentication failed - Please sign in as admin":va.error||va.details||"Unknown error";ne.push({endpoint:"performance",message:Ke,status:$r.status})}else T(va.data);if(!Lr.ok||!Ja.success){const Ke=Lr.status===401?"Authentication failed - Please sign in as admin":Ja.error||Ja.details||"Unknown error";ne.push({endpoint:"adoption",message:Ke,status:Lr.status})}else E(Ja.data);Gn(ne),ne.some(Ke=>Ke.status===429||Ke.status===503)&&(V(!1),te.warning("Auto-refresh paused due to rate limit/quota. Try again later.",{duration:5e3})),O(!1),ya(new Date)}catch($e){J.error("Fetch analytics error",$e),Gn([{endpoint:"all",message:$e instanceof Error?$e.message:"Network error"}]),O(!1),ya(new Date)}};k.useEffect(()=>{_e()},[_]),k.useEffect(()=>{X==="monthly"&&!F?ae():X==="ytd"&&!pe&&Se()},[X]),k.useEffect(()=>{var ie;if(de!=="ytd"||!((ie=_t)!=null&&ie.currentUser))return;const B=oe[be];if(B){re(B);return}Se(be)},[de,be,(Ir=_t)==null?void 0:Ir.currentUser]),k.useEffect(()=>{var ie;if(!L||!((ie=_t)!=null&&ie.currentUser))return;const B=setInterval(()=>{_e()},12e4);return()=>clearInterval(B)},[L,_]);const ze=async B=>{Hn(B),Cr(!0),Ga(!0);try{const $e=(await eC(B)).map(ne=>{const Xe=ne.lastActivity?Math.floor((ne.lastActivity.getTime()-ne.startTime.getTime())/1e3):0;return{sessionId:ne.sessionId,ip:ne.ip||"Unknown",referrerSource:ne.referrerSource||"Direct",referrerTerm:ne.referrerTerm,referrerUrl:ne.referrer,startTime:ne.startTime,endTime:ne.lastActivity,totalTime:Xe,totalPageViews:ne.pageViews,pages:ne.pages.map((Je,et)=>{const Jt=ne.pages[et+1],vr=Jt?Math.floor((new Date(Jt).getTime()-new Date(Je).getTime())/1e3):void 0;return{path:typeof Je=="string"?Je:"/",title:typeof Je=="string"?Je:"Page",timestamp:new Date(ne.startTime.getTime()+et*6e4),timeOnPage:vr}}),exitPage:ne.pages[ne.pages.length-1]||"/",location:ne.location,device:ne.device}});Cn($e)}catch(ie){J.error("Failed to load session data:",ie),te.error("Failed to load visitor sessions"),Cn([])}finally{Ga(!1)}};return C?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Bt,{className:"h-8 w-8 animate-spin text-sky-500"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsx(z9,{isOpen:Pr,onClose:()=>Cr(!1),date:zr,sessions:Ha?[]:Jr}),!xr&&r.jsx(q,{className:"bg-yellow-500/10 border-yellow-500/30 p-4",children:r.jsx("div",{className:"flex items-start justify-between gap-4",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(mt,{className:"h-5 w-5 text-yellow-400"}),r.jsx("h3",{className:"text-lg font-semibold text-yellow-400",children:"Not signed in"})]}),r.jsx("p",{className:"text-sm text-yellow-200",children:"Sign in as an admin to view analytics. The Refresh button is disabled until you are authenticated."})]})})}),sr.length>0&&r.jsx(q,{className:`p-4 ${sr.some(B=>B.status===429||B.status===503)?"bg-amber-500/10 border-amber-500/30":"bg-red-500/10 border-red-500/30"}`,children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(mt,{className:`h-5 w-5 ${sr.some(B=>B.status===429||B.status===503)?"text-amber-400":"text-red-400"}`}),r.jsx("h3",{className:`text-lg font-semibold ${sr.some(B=>B.status===429||B.status===503)?"text-amber-400":"text-red-400"}`,children:sr.some(B=>B.status===429||B.status===503)?"Analytics Cooldown (Quota/Rate Limit)":`Analytics API Errors (${sr.length})`})]}),r.jsx("div",{className:"space-y-1 text-sm",children:sr.map((B,ie)=>r.jsxs("div",{className:"text-red-300",children:[r.jsxs("span",{className:"font-semibold",children:[B.endpoint,":"]})," ",B.status&&`[${B.status}] `,B.message]},ie))}),r.jsxs("p",{className:`text-xs mt-2 ${sr.some(B=>B.status===429||B.status===503)?"text-amber-400":"text-red-400"}`,children:[sr.some(B=>B.status===429||B.status===503)?"We’ve paused auto-refresh to respect Firestore limits. Try again shortly or reduce the period.":"Check browser console for details or visit the diagnose endpoint.",r.jsx("a",{href:"/api/admin/analytics/diagnose",target:"_blank",className:"underline",children:"/api/admin/analytics/diagnose"})," ","for troubleshooting."]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs($,{onClick:_e,variant:"outline",size:"sm",className:`border-white/20 ${sr.some(B=>B.status===429||B.status===503)?"text-amber-400 hover:bg-amber-500/20":"text-red-400 hover:bg-red-500/20"}`,children:[r.jsx(Bt,{className:"h-4 w-4 mr-1"}),"Retry"]}),r.jsxs($,{onClick:()=>Gn([]),variant:"outline",size:"sm",className:`border-white/20 ${sr.some(B=>B.status===429||B.status===503)?"text-amber-400 hover:bg-amber-500/20":"text-red-400 hover:bg-red-500/20"}`,children:[r.jsx(di,{className:"h-4 w-4 mr-1"}),"Dismiss"]}),sr.some(B=>B.status===429||B.status===503)&&r.jsx($,{onClick:()=>V(!1),variant:"outline",size:"sm",className:"border-amber-500/30 text-amber-400 hover:bg-amber-500/20",children:"Pause Auto-Refresh"})]})]})}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Analytics Dashboard"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Real-time website statistics and insights"}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3",children:[On&&xr&&ao.projectId&&r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsxs(H,{className:"bg-sky-500/20 border-sky-500/30 text-sky-400 cursor-help",children:["Project: ",ao.projectId]})}),r.jsx(gt,{sideOffset:6,className:"bg-white/10 border border-white/20 text-white",children:r.jsxs("span",{children:["Auth domain: ",ao.authDomain||"—"]})})]}),Q&&r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsx(H,{className:"bg-yellow-500/20 border-yellow-500/30 text-yellow-400 cursor-help",children:"Consent bypass active"})}),r.jsx(gt,{sideOffset:6,className:"bg-white/10 border border-white/20 text-white",children:r.jsxs("span",{children:["Admin-only override while cookie consent is not accepted. See"," ",r.jsx("a",{href:"https://github.com/vortexpcsltd-afk/vortexpcs.com/blob/master/archive/ANALYTICS_DASHBOARD_GUIDE.md",target:"_blank",rel:"noreferrer",className:"underline",children:"Analytics Guide"}),"."]})})]}),!On&&r.jsxs(xt,{children:[r.jsx(pt,{asChild:!0,children:r.jsx(H,{className:"bg-red-500/20 border-red-500/30 text-red-400 cursor-help",children:"Firebase not configured"})}),r.jsx(gt,{sideOffset:6,className:"bg-white/10 border border-white/20 text-white",children:r.jsxs("span",{children:["Frontend Firebase env vars missing; analytics writes are disabled. See"," ",r.jsx("a",{href:"https://github.com/vortexpcsltd-afk/vortexpcs.com/blob/master/archive/FIREBASE_AUTH_SETUP.md",target:"_blank",rel:"noreferrer",className:"underline",children:"Firebase Setup"})," ","or run ","",r.jsx("a",{href:"/api/admin/analytics/diagnose",target:"_blank",rel:"noreferrer",className:"underline",children:"analytics/diagnose"}),"."]})})]})]}),r.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[On&&xr&&ao.projectId&&r.jsxs($,{onClick:()=>window.open(`https://console.firebase.google.com/project/${ao.projectId}/firestore/data`,"_blank"),variant:"outline",size:"sm",className:"gap-2 text-xs",children:[r.jsx(Tr,{className:"h-3 w-3"}),"Open Firestore Console"]}),Ka&&r.jsxs("span",{className:"text-xs text-gray-400",children:["Last updated: ",Ka.toLocaleTimeString()]})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("select",{value:X,onChange:B=>{const ie=B.target.value;W(ie),ie==="monthly"&&!F&&ae(),ie==="ytd"&&!pe&&Se()},className:"bg-white/5 border border-white/10 rounded-lg px-4 py-2 text-white [&>option]:bg-gray-900 [&>option]:text-white",title:"Monthly/YTD views require deployment to Vercel",children:[r.jsx("option",{value:"standard",children:"Standard View"}),r.jsx("option",{value:"monthly",children:"Monthly Summary (Vercel)"}),r.jsx("option",{value:"ytd",children:"YTD Summary (Vercel)"})]}),X==="standard"&&r.jsxs("select",{value:_,onChange:B=>D(parseInt(B.target.value)),className:"bg-white/5 border border-white/10 rounded-lg px-4 py-2 text-white [&>option]:bg-gray-900 [&>option]:text-white",children:[r.jsx("option",{value:7,children:"Last 7 Days"}),r.jsx("option",{value:30,children:"Last 30 Days"}),r.jsx("option",{value:90,children:"Last 90 Days"})]}),r.jsxs($,{onClick:()=>V(!L),variant:L?"default":"outline",size:"sm",className:"gap-2",disabled:!xr,children:[r.jsx(on,{className:"h-4 w-4"}),L?"Auto-Refresh On":"Auto-Refresh Off"]}),r.jsxs($,{onClick:_e,variant:"outline",size:"sm",className:"gap-2",disabled:!xr,children:[r.jsx(Bt,{className:"h-4 w-4"}),"Refresh Now"]}),r.jsxs($,{onClick:()=>ge(!0),variant:"outline",size:"sm",className:"gap-2 border-red-500/30 text-red-400 hover:bg-red-500/20",disabled:!xr,children:[r.jsx(Kr,{className:"h-4 w-4"}),"Reset Analytics"]})]})]}),r.jsx(Et,{open:I,onOpenChange:ge,children:r.jsxs(Dt,{className:"bg-gray-900 border-white/10 text-white max-w-md",children:[r.jsx($t,{children:r.jsxs(Lt,{className:"text-xl font-bold flex items-center gap-2",children:[r.jsx(mt,{className:"h-6 w-6 text-red-400"}),"Reset Analytics Data"]})}),r.jsxs("div",{className:"space-y-4 pt-4",children:[r.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4",children:r.jsxs("p",{className:"text-sm text-red-300",children:[r.jsx("strong",{children:"Warning:"})," This action cannot be undone. All selected analytics data will be permanently deleted."]})}),r.jsxs("div",{children:[r.jsx(le,{className:"text-white mb-2 block",children:"Reset Type"}),r.jsxs("select",{value:bt,onChange:B=>It(B.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-2 text-white [&>option]:bg-gray-900",children:[r.jsx("option",{value:"all",children:"All Analytics Data"}),r.jsx("option",{value:"sessions",children:"Sessions Only"}),r.jsx("option",{value:"pageviews",children:"Page Views Only"}),r.jsx("option",{value:"events",children:"Events Only"}),r.jsx("option",{value:"security",children:"Security Logs Only"})]})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-white mb-2 block",children:'Type "RESET" to confirm'}),r.jsx(xe,{value:Ne,onChange:B=>He(B.target.value),placeholder:"RESET",className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[r.jsx($,{onClick:()=>{ge(!1),He("")},variant:"outline",className:"border-white/20",children:"Cancel"}),r.jsx($,{onClick:qe,disabled:Ne!=="RESET"||Ar,className:"bg-red-500 hover:bg-red-600",children:Ar?r.jsxs(r.Fragment,{children:[r.jsx(Bt,{className:"h-4 w-4 mr-2 animate-spin"}),"Resetting..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Kr,{className:"h-4 w-4 mr-2"}),"Reset Data"]})})]})]})]})}),X==="monthly"&&!F&&r.jsxs(r.Fragment,{children:[r.jsx(q,{className:"bg-yellow-500/10 border-yellow-500/30 p-4 mb-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(mt,{className:"h-5 w-5 text-yellow-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-yellow-400 mb-1",children:"Deployment Required"}),r.jsx("p",{className:"text-sm text-yellow-200",children:"Monthly and YTD summary features use Vercel serverless functions that don't work in local development. Deploy your site to Vercel to enable these features."})]})]})}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-12 text-center",children:[r.jsx(Bt,{className:"h-12 w-12 animate-spin text-sky-500 mx-auto mb-4"}),r.jsx("p",{className:"text-white text-lg",children:"Loading monthly summary..."})]})]}),X==="monthly"&&F&&r.jsx("div",{className:"space-y-6",children:r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[r.jsxs("h3",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:[r.jsx(jl,{className:"h-6 w-6 text-sky-400"}),"Monthly Summary (Last 12 Months)"]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Total Visitors"}),r.jsx("div",{className:"text-2xl font-bold text-white",children:(((Tn=F.summary)==null?void 0:Tn.totalVisitors)??0).toLocaleString()}),r.jsxs("div",{className:"text-xs text-gray-500",children:["Avg:"," ",(((_n=F.summary)==null?void 0:_n.avgVisitorsPerMonth)??0).toLocaleString(),"/mo"]})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Total Page Views"}),r.jsx("div",{className:"text-2xl font-bold text-white",children:(((Fs=F.summary)==null?void 0:Fs.totalPageViews)??0).toLocaleString()})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Total Sessions"}),r.jsx("div",{className:"text-2xl font-bold text-white",children:(((Ya=F.summary)==null?void 0:Ya.totalSessions)??0).toLocaleString()})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Total Revenue"}),r.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["£",(((Me=F.summary)==null?void 0:Me.totalRevenue)??0).toLocaleString()]}),r.jsxs("div",{className:"text-xs text-gray-500",children:["Avg: £",(((Ft=F.summary)==null?void 0:Ft.avgRevenuePerMonth)??0).toLocaleString(),"/mo"]})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Total Orders"}),r.jsx("div",{className:"text-2xl font-bold text-white",children:((rt=F.summary)==null?void 0:rt.totalOrders)??0})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-white/10",children:[r.jsx("th",{className:"text-left p-2 text-gray-400 font-semibold",children:"Month"}),r.jsx("th",{className:"text-right p-2 text-gray-400 font-semibold",children:"Visitors"}),r.jsx("th",{className:"text-right p-2 text-gray-400 font-semibold",children:"Page Views"}),r.jsx("th",{className:"text-right p-2 text-gray-400 font-semibold",children:"Sessions"}),r.jsx("th",{className:"text-right p-2 text-gray-400 font-semibold",children:"Avg Duration"}),r.jsx("th",{className:"text-right p-2 text-gray-400 font-semibold",children:"Bounce Rate"}),r.jsx("th",{className:"text-right p-2 text-gray-400 font-semibold",children:"New Users"}),r.jsx("th",{className:"text-right p-2 text-gray-400 font-semibold",children:"Revenue"}),r.jsx("th",{className:"text-right p-2 text-gray-400 font-semibold",children:"Orders"})]})}),r.jsx("tbody",{children:F!=null&&F.monthlyData&&F.monthlyData.length>0?F.monthlyData.map((B,ie)=>r.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[r.jsxs("td",{className:"p-2 text-white",children:[B.month," ",B.year]}),r.jsx("td",{className:"text-right p-2 text-white",children:B.visitors.toLocaleString()}),r.jsx("td",{className:"text-right p-2 text-white",children:B.pageViews.toLocaleString()}),r.jsx("td",{className:"text-right p-2 text-white",children:B.sessions.toLocaleString()}),r.jsxs("td",{className:"text-right p-2 text-white",children:[B.avgSessionDuration,"s"]}),r.jsxs("td",{className:"text-right p-2 text-white",children:[B.bounceRate,"%"]}),r.jsx("td",{className:"text-right p-2 text-cyan-400",children:B.newUsers}),r.jsxs("td",{className:"text-right p-2 text-green-400",children:["£",B.revenue.toLocaleString()]}),r.jsx("td",{className:"text-right p-2 text-white",children:B.orders})]},ie)):r.jsx("tr",{children:r.jsx("td",{colSpan:9,className:"p-4 text-center text-gray-400",children:"No monthly data available"})})})]})}),(F==null?void 0:F.trends)&&r.jsxs("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-5 gap-4",children:[F.trends.visitors&&r.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[r.jsx("div",{className:"text-xs text-gray-400",children:"Visitor Trend"}),r.jsx("div",{className:`text-lg font-bold ${(F.trends.visitors||"0%").startsWith("+")?"text-green-400":"text-red-400"}`,children:F.trends.visitors||"0%"})]}),F.trends.pageViews&&r.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[r.jsx("div",{className:"text-xs text-gray-400",children:"Page View Trend"}),r.jsx("div",{className:`text-lg font-bold ${(F.trends.pageViews||"0%").startsWith("+")?"text-green-400":"text-red-400"}`,children:F.trends.pageViews||"0%"})]}),F.trends.sessions&&r.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[r.jsx("div",{className:"text-xs text-gray-400",children:"Session Trend"}),r.jsx("div",{className:`text-lg font-bold ${(F.trends.sessions||"0%").startsWith("+")?"text-green-400":"text-red-400"}`,children:F.trends.sessions||"0%"})]}),F.trends.revenue&&r.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[r.jsx("div",{className:"text-xs text-gray-400",children:"Revenue Trend"}),r.jsx("div",{className:`text-lg font-bold ${(F.trends.revenue||"0%").startsWith("+")?"text-green-400":"text-red-400"}`,children:F.trends.revenue||"0%"})]}),F.trends.orders&&r.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[r.jsx("div",{className:"text-xs text-gray-400",children:"Order Trend"}),r.jsx("div",{className:`text-lg font-bold ${(F.trends.orders||"0%").startsWith("+")?"text-green-400":"text-red-400"}`,children:F.trends.orders||"0%"})]})]})]})}),X==="ytd"&&!pe&&r.jsxs(r.Fragment,{children:[r.jsx(q,{className:"bg-yellow-500/10 border-yellow-500/30 p-4 mb-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(mt,{className:"h-5 w-5 text-yellow-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-yellow-400 mb-1",children:"Deployment Required"}),r.jsx("p",{className:"text-sm text-yellow-200",children:"Monthly and YTD summary features use Vercel serverless functions that don't work in local development. Deploy your site to Vercel to enable these features."})]})]})}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-12 text-center",children:[r.jsx(Bt,{className:"h-12 w-12 animate-spin text-sky-500 mx-auto mb-4"}),r.jsx("p",{className:"text-white text-lg",children:"Loading YTD summary..."})]})]}),X==="ytd"&&pe&&r.jsx("div",{className:"space-y-6",children:r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[r.jsxs("h3",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:[r.jsx(zt,{className:"h-6 w-6 text-sky-400"}),"Year-to-Date Summary (",pe.period.currentYear,")"]}),r.jsxs("div",{className:"text-sm text-gray-400 mb-6",children:["Period: ",new Date(pe.period.startDate).toLocaleDateString()," ","- ",new Date(pe.period.endDate).toLocaleDateString()," (",pe.period.daysIntoYear," days)"]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Total Visitors"}),r.jsx("div",{className:"text-3xl font-bold text-white",children:pe.overview.totalVisitors.toLocaleString()}),r.jsxs("div",{className:"text-xs text-cyan-400",children:["Avg: ",pe.dailyAverages.visitors,"/day"]})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Page Views"}),r.jsx("div",{className:"text-3xl font-bold text-white",children:pe.overview.totalPageViews.toLocaleString()}),r.jsxs("div",{className:"text-xs text-cyan-400",children:["Avg: ",pe.dailyAverages.pageViews,"/day"]})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Sessions"}),r.jsx("div",{className:"text-3xl font-bold text-white",children:pe.overview.totalSessions.toLocaleString()}),r.jsxs("div",{className:"text-xs text-cyan-400",children:["Avg: ",pe.dailyAverages.sessions,"/day"]})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Events"}),r.jsx("div",{className:"text-3xl font-bold text-white",children:pe.overview.totalEvents.toLocaleString()})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Avg Session Duration"}),r.jsxs("div",{className:"text-2xl font-bold text-white",children:[pe.overview.avgSessionDuration,"s"]})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Bounce Rate"}),r.jsxs("div",{className:"text-2xl font-bold text-white",children:[pe.overview.bounceRate,"%"]})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Avg Pages/Session"}),r.jsx("div",{className:"text-2xl font-bold text-white",children:pe.overview.avgPageViewsPerSession})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Unique IPs"}),r.jsx("div",{className:"text-2xl font-bold text-white",children:pe.overview.uniqueIPs.toLocaleString()})]})]}),r.jsxs(q,{className:"bg-white/5 border-white/5 p-4 mb-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-white mb-3",children:"User Statistics"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"New Users"}),r.jsx("div",{className:"text-2xl font-bold text-green-400",children:pe.users.newUsers.toLocaleString()}),r.jsxs("div",{className:"text-xs text-gray-500",children:["Avg: ",pe.users.avgNewUsersPerDay,"/day"]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Returning Users"}),r.jsx("div",{className:"text-2xl font-bold text-blue-400",children:pe.users.returningUsers.toLocaleString()})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Total Users"}),r.jsx("div",{className:"text-2xl font-bold text-white",children:pe.overview.totalVisitors.toLocaleString()})]})]})]}),r.jsxs(q,{className:"bg-gradient-to-br from-green-500/10 to-emerald-500/10 border-green-500/30 p-4 mb-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-white mb-3",children:"Revenue & Orders"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Total Revenue"}),r.jsxs("div",{className:"text-3xl font-bold text-green-400",children:["£",pe.revenue.total.toLocaleString()]}),r.jsxs("div",{className:"text-xs text-gray-400",children:["£",pe.dailyAverages.revenue,"/day"]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Total Orders"}),r.jsx("div",{className:"text-3xl font-bold text-white",children:pe.revenue.orders}),r.jsxs("div",{className:"text-xs text-gray-400",children:[pe.dailyAverages.orders,"/day"]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Avg Order Value"}),r.jsxs("div",{className:"text-3xl font-bold text-cyan-400",children:["£",pe.revenue.avgOrderValue.toLocaleString()]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Revenue/Day"}),r.jsxs("div",{className:"text-3xl font-bold text-green-400",children:["£",pe.revenue.avgRevenuePerDay.toLocaleString()]})]})]})]}),r.jsxs(q,{className:"bg-white/5 border-white/5 p-4 mb-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-white mb-3",children:"Top Pages"}),r.jsx("div",{className:"space-y-2",children:pe.topPages.slice(0,10).map((B,ie)=>r.jsxs("div",{className:"flex justify-between items-center p-2 bg-white/5 rounded",children:[r.jsx("span",{className:"text-white",children:B.page}),r.jsxs("span",{className:"text-sky-400 font-semibold",children:[B.views.toLocaleString()," views"]})]},ie))})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs(q,{className:"bg-white/5 border-white/5 p-4",children:[r.jsx("h4",{className:"text-lg font-semibold text-white mb-3",children:"Device Breakdown"}),r.jsx("div",{className:"space-y-2",children:Object.entries(pe.deviceBreakdown).map(([B,ie])=>r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-300 capitalize",children:B}),r.jsx("span",{className:"text-white font-semibold",children:ie.toLocaleString()})]},B))})]}),r.jsxs(q,{className:"bg-white/5 border-white/5 p-4",children:[r.jsx("h4",{className:"text-lg font-semibold text-white mb-3",children:"Browser Breakdown"}),r.jsx("div",{className:"space-y-2",children:Object.entries(pe.browserBreakdown).map(([B,ie])=>r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-300",children:B}),r.jsx("span",{className:"text-white font-semibold",children:ie.toLocaleString()})]},B))})]})]})]})}),X==="standard"&&r.jsxs(r.Fragment,{children:[e&&r.jsxs(q,{className:"bg-gradient-to-br from-sky-500/20 to-blue-500/20 border-sky-500/30 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-3 bg-sky-500/20 rounded-lg",children:r.jsx(on,{className:"h-6 w-6 text-sky-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Live Users"}),r.jsx("p",{className:"text-sm text-gray-300",children:"Currently active on site"})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-4xl font-bold text-sky-400",children:e.totalActive}),r.jsx("div",{className:"text-sm text-gray-300",children:"Active now"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[r.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[r.jsx("h5",{className:"text-xs font-semibold text-gray-400 mb-2",children:"Devices"}),Object.entries(e.deviceBreakdown).map(([B,ie])=>r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"text-sm text-gray-300 capitalize",children:B}),r.jsx("span",{className:"text-sm font-bold text-sky-400",children:ie})]},B))]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[r.jsx("h5",{className:"text-xs font-semibold text-gray-400 mb-2",children:"Browsers"}),Object.entries(e.browserBreakdown).map(([B,ie])=>r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"text-sm text-gray-300",children:B}),r.jsx("span",{className:"text-sm font-bold text-sky-400",children:ie})]},B))]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[r.jsx("h5",{className:"text-xs font-semibold text-gray-400 mb-2",children:"Traffic Sources"}),Object.entries(e.sourceBreakdown).sort(([,B],[,ie])=>ie-B).slice(0,5).map(([B,ie])=>r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"text-sm text-gray-300",children:B}),r.jsx("span",{className:"text-sm font-bold text-sky-400",children:ie})]},B))]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[r.jsx("h5",{className:"text-xs font-semibold text-gray-400 mb-2",children:"Current Pages"}),Object.entries(e.pageDistribution).slice(0,5).map(([B,ie])=>r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"text-sm text-gray-300 truncate",children:B}),r.jsx("span",{className:"text-sm font-bold text-sky-400",children:ie})]},B))]})]}),e.sessions.length>0&&r.jsxs("div",{className:"mt-4",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Active Users Details"}),r.jsx("div",{className:"bg-white/5 rounded-lg overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-white/5",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left p-2 text-gray-400 font-semibold",children:"Page"}),r.jsx("th",{className:"text-left p-2 text-gray-400 font-semibold",children:"IP Address"}),r.jsx("th",{className:"text-left p-2 text-gray-400 font-semibold",children:"Browser"}),r.jsx("th",{className:"text-left p-2 text-gray-400 font-semibold",children:"Source"}),r.jsx("th",{className:"text-left p-2 text-gray-400 font-semibold",children:"Search Term"}),r.jsx("th",{className:"text-left p-2 text-gray-400 font-semibold",children:"Device"}),r.jsx("th",{className:"text-left p-2 text-gray-400 font-semibold",children:"Time on Site"})]})}),r.jsx("tbody",{children:e.sessions.slice(0,10).map(B=>{var ie;return r.jsxs("tr",{className:"border-t border-white/5",children:[r.jsx("td",{className:"p-2 text-gray-300 truncate max-w-xs",children:B.currentPage}),r.jsx("td",{className:"p-2 text-gray-400 font-mono text-xs",children:B.ip||"N/A"}),r.jsx("td",{className:"p-2 text-gray-300",children:B.browser}),r.jsx("td",{className:"p-2 text-gray-300",children:B.source}),r.jsx("td",{className:"p-2 text-gray-400 text-xs italic max-w-xs truncate",children:B.searchTerm||"-"}),r.jsx("td",{className:"p-2 text-gray-300 capitalize",children:((ie=B.device)==null?void 0:ie.type)||"Unknown"}),r.jsxs("td",{className:"p-2 text-gray-300",children:[Math.floor(B.timeOnSite/60),"m"," ",B.timeOnSite%60,"s"]})]},B.sessionId)})})]})})})]})]}),sr.length>0&&r.jsx(V9,{}),r.jsx(P9,{}),n&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:[r.jsx(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Daily Average"}),r.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:n.summary.daily})]}),r.jsx(_a,{className:"h-8 w-8 text-sky-500"})]})}),r.jsx(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"This Week"}),r.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:n.summary.weekly})]}),r.jsx(zt,{className:"h-8 w-8 text-blue-500"})]})}),r.jsx(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"This Month"}),r.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:n.summary.monthly})]}),r.jsx(zt,{className:"h-8 w-8 text-cyan-500"})]})}),r.jsx(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Year to Date"}),r.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:n.summary.ytd})]}),r.jsx(zt,{className:"h-8 w-8 text-green-500"})]})}),r.jsx(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Avg Session"}),r.jsxs("p",{className:"text-3xl font-bold text-white mt-1",children:[Math.floor(n.summary.avgSessionDuration/60),r.jsx("span",{className:"text-lg",children:"m"})]}),r.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[n.summary.avgSessionDuration%60,"s"]})]}),r.jsx(on,{className:"h-8 w-8 text-purple-500"})]})}),r.jsx(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Bounce Rate"}),r.jsxs("p",{className:"text-3xl font-bold text-white mt-1",children:[n.summary.bounceRate,r.jsx("span",{className:"text-lg",children:"%"})]})]}),r.jsx(zt,{className:`h-8 w-8 ${parseFloat(n.summary.bounceRate)>50?"text-red-500":"text-green-500"}`})]})})]}),n&&r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Visitor Trend"}),r.jsxs("div",{className:"flex items-center gap-3",children:[[{value:"7d",label:"Last 7 Days"},{value:"wtd",label:"WTD"},{value:"mtd",label:"MTD"},{value:"ytd",label:"YTD"}].map(B=>r.jsx("button",{onClick:()=>fe(B.value),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${de===B.value?"bg-sky-500 text-white shadow-lg shadow-sky-500/30":"bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white"}`,children:B.label},B.value)),de==="ytd"&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-gray-400",children:"Year"}),r.jsx("select",{value:be,onChange:B=>se(parseInt(B.target.value,10)),className:"bg-white/5 border border-white/10 rounded-lg px-3 py-1.5 text-xs text-white [&>option]:bg-gray-900 [&>option]:text-white",title:"Select year (up to 5 years back)",children:ve.map(B=>r.jsx("option",{value:B,children:B},B))})]})]})]}),n.timeSeries&&n.timeSeries.length>0?r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"relative w-full bg-gradient-to-b from-white/[0.02] to-transparent rounded-lg border border-white/5 overflow-hidden",style:{height:"260px"},children:(()=>{const B=new Date;B.setHours(0,0,0,0);const ie=de==="ytd",$e=be,Xe=ie?Array.from({length:12},(Be,qt)=>{var Tt,Zr;const wt=new Date($e,qt,1),Ot=wt.toLocaleDateString(void 0,{month:"short"}),Vt=(Tt=pe==null?void 0:pe.monthlyBreakdown)==null?void 0:Tt.find(Zt=>Zt.year===$e&&(Zt.monthIndex===qt||Zt.month===Ot)),$r=(Zr=n.timeSeries)==null?void 0:Zr.filter(Zt=>{const jt=new Date(Zt.date);return jt.getFullYear()===$e&&jt.getMonth()===qt}).reduce((Zt,jt)=>Zt+jt.visitors,0),Lr=(Vt==null?void 0:Vt.visitors)??$r??0;return{date:wt.toISOString(),visitors:Lr,label:Ot}}):(()=>{let Be;const qt=[];if(de==="7d"){Be=new Date(B),Be.setDate(B.getDate()-6);for(let wt=0;wt<7;wt++){const Ot=new Date(Be);Ot.setDate(Be.getDate()+wt),qt.push(Ot)}}else if(de==="wtd"){Be=new Date(B);const wt=B.getDay(),Ot=wt===0?6:wt-1;Be.setDate(B.getDate()-Ot);const Vt=Ot+1;for(let $r=0;$r<Vt;$r++){const Lr=new Date(Be);Lr.setDate(Be.getDate()+$r),qt.push(Lr)}}else if(de==="mtd"){Be=new Date(B.getFullYear(),B.getMonth(),1);const wt=B.getDate();for(let Ot=0;Ot<wt;Ot++){const Vt=new Date(Be);Vt.setDate(Be.getDate()+Ot),qt.push(Vt)}}else return n.timeSeries.map(wt=>new Date(wt.date));return qt})().map(Be=>{const qt=Be.getFullYear(),wt=String(Be.getMonth()+1).padStart(2,"0"),Ot=String(Be.getDate()).padStart(2,"0"),Vt=`${qt}-${wt}-${Ot}`;return n.timeSeries.find(Lr=>{const Tt=new Date(Lr.date),Zr=Tt.getFullYear(),Zt=String(Tt.getMonth()+1).padStart(2,"0"),jt=String(Tt.getDate()).padStart(2,"0");return`${Zr}-${Zt}-${jt}`===Vt})||{date:Be.toISOString(),visitors:0}}),Je=Xe.length>0?Math.max(...Xe.map(Be=>Be.visitors),1):1,et=20,Jt=Math.max(et,Math.ceil(Je/et)*et),vr=Array.from({length:Math.floor(Jt/et)+1},(Be,qt)=>qt*et),Kn=vr.map(Be=>Be/Jt*100),xn=56;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"absolute inset-y-0 right-0 flex items-end justify-around px-4 pb-6",style:{left:`${xn}px`,gap:ie?"10px":Xe.length>14?"2px":"12px"},children:Xe.map((Be,qt)=>{const wt=ie?24:Xe.length>14?20:30,Ot=Math.max(Be.visitors===0?0:wt,Be.visitors/Jt*200),Vt=ie?Be.label||new Date(Be.date).toLocaleDateString(void 0,{month:"short"}):Xe.length>14?new Date(Be.date).toLocaleDateString(void 0,{day:"numeric"}):new Date(Be.date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"});return r.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2 group relative",style:{minWidth:ie?"32px":Xe.length>14?"8px":"20px"},children:[r.jsxs("div",{className:`w-full bg-gradient-to-t from-sky-700 via-sky-500 to-blue-400 rounded-t-xl shadow-xl shadow-sky-900/30 hover:shadow-sky-400/50 transition-all duration-300 relative overflow-hidden border border-white/10 ${ie?"cursor-default":"cursor-pointer"}`,style:{height:`${Ot}px`},onClick:ie?void 0:()=>ze(Be.date),children:[r.jsx("div",{className:"absolute top-0 inset-x-0 h-9 bg-gradient-to-b from-white/35 via-white/18 to-white/4 border-b border-white/15 rounded-t-xl"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),r.jsx("div",{className:"absolute inset-1 rounded-t-lg bg-gradient-to-b from-white/8 via-transparent to-transparent pointer-events-none"}),r.jsx("div",{className:`absolute top-1 left-0 right-0 text-center text-white pointer-events-none font-semibold rounded-md bg-white/10 backdrop-blur-sm border border-white/20 shadow-sm ${Xe.length>14?"text-[10px] px-0.5 py-0.5":"text-base md:text-lg px-2.5 py-0.5 tracking-wide"}`,children:Be.visitors.toLocaleString()})]}),r.jsx("div",{className:`text-gray-400 font-medium ${ie?"text-xs whitespace-nowrap tracking-wide":Xe.length>14?"text-[9px] whitespace-normal text-center leading-tight":"text-xs md:text-sm whitespace-nowrap tracking-wide"}`,children:Vt})]},qt)})}),r.jsx("div",{className:"absolute inset-y-0 right-0 pointer-events-none",style:{left:`${xn}px`},children:Kn.map(Be=>r.jsx("div",{className:"absolute left-0 right-0 border-t border-white/5",style:{bottom:`${Be}%`}},Be))}),r.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-14 pointer-events-none",children:vr.map(Be=>r.jsx("div",{className:"absolute -translate-y-1/2 text-xs md:text-sm text-gray-200 font-semibold text-right pr-2",style:{bottom:`${Be/Jt*100}%`},children:Be},Be))})]})})()}),r.jsx("div",{className:"grid grid-cols-3 gap-4 pt-2",children:(()=>{const B=new Date;B.setHours(0,0,0,0);let ie=n.timeSeries;if(de==="7d"){const Je=new Date(B);Je.setDate(B.getDate()-6),ie=n.timeSeries.filter(et=>new Date(et.date)>=Je)}else if(de==="wtd"){const Je=new Date(B),et=B.getDay(),Jt=et===0?6:et-1;Je.setDate(B.getDate()-Jt),ie=n.timeSeries.filter(vr=>new Date(vr.date)>=Je)}else if(de==="mtd"){const Je=new Date(B.getFullYear(),B.getMonth(),1);ie=n.timeSeries.filter(et=>new Date(et.date)>=Je)}const $e=Math.max(...ie.map(Je=>Je.visitors)),ne=ie.reduce((Je,et)=>Je+et.visitors,0),Xe=Math.round(ne/(ie.length||1));return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"relative overflow-hidden bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl px-4 py-3 shadow-lg shadow-sky-500/15 text-center space-y-2",children:[r.jsx("div",{className:"absolute inset-x-3 top-2 h-px bg-gradient-to-r from-transparent via-white/30 to-transparent"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/4 via-transparent to-transparent pointer-events-none"}),r.jsx("div",{className:"text-sm uppercase tracking-[0.2em] text-gray-300",children:"Peak"}),r.jsx("div",{className:"text-4xl md:text-5xl font-black text-sky-200 drop-shadow-[0_0_18px_rgba(56,189,248,0.45)]",style:{fontFamily:"'Orbitron', 'Rajdhani', 'Exo 2', 'Segoe UI', sans-serif",WebkitTextStroke:"1px rgba(56,189,248,0.25)",background:"linear-gradient(120deg, rgba(125,211,252,0.9), rgba(14,165,233,0.9))",WebkitBackgroundClip:"text",color:"transparent"},children:$e})]}),r.jsxs("div",{className:"relative overflow-hidden bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl px-4 py-3 shadow-lg shadow-blue-500/15 text-center space-y-2",children:[r.jsx("div",{className:"absolute inset-x-3 top-2 h-px bg-gradient-to-r from-transparent via-white/30 to-transparent"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/4 via-transparent to-transparent pointer-events-none"}),r.jsx("div",{className:"text-sm uppercase tracking-[0.2em] text-gray-300",children:"Average"}),r.jsx("div",{className:"text-4xl md:text-5xl font-black text-blue-200 drop-shadow-[0_0_18px_rgba(59,130,246,0.45)]",style:{fontFamily:"'Orbitron', 'Rajdhani', 'Exo 2', 'Segoe UI', sans-serif",WebkitTextStroke:"1px rgba(59,130,246,0.25)",background:"linear-gradient(120deg, rgba(147,197,253,0.9), rgba(59,130,246,0.9))",WebkitBackgroundClip:"text",color:"transparent"},children:Xe})]}),r.jsxs("div",{className:"relative overflow-hidden bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl px-4 py-3 shadow-lg shadow-cyan-500/15 text-center space-y-2",children:[r.jsx("div",{className:"absolute inset-x-3 top-2 h-px bg-gradient-to-r from-transparent via-white/30 to-transparent"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/4 via-transparent to-transparent pointer-events-none"}),r.jsx("div",{className:"text-sm uppercase tracking-[0.2em] text-gray-300",children:"Total"}),r.jsx("div",{className:"text-4xl md:text-5xl font-black text-cyan-200 drop-shadow-[0_0_18px_rgba(34,211,238,0.45)]",style:{fontFamily:"'Orbitron', 'Rajdhani', 'Exo 2', 'Segoe UI', sans-serif",WebkitTextStroke:"1px rgba(34,211,238,0.25)",background:"linear-gradient(120deg, rgba(165,243,252,0.9), rgba(6,182,212,0.9))",WebkitBackgroundClip:"text",color:"transparent"},children:ne})]})]})})()})]}):r.jsx("div",{className:"h-64 flex items-center justify-center",children:r.jsxs("div",{className:"text-center text-gray-400",children:[r.jsx("p",{className:"text-lg mb-2",children:"No visitor data available"}),r.jsx("p",{className:"text-sm",children:"Visitor tracking data will appear here once users visit your site"})]})})]}),s&&r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(kr,{className:"h-6 w-6 text-sky-400"}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Top Pages"}),r.jsxs(H,{className:"bg-sky-500/20 text-sky-400",children:[s.totalViews," total views"]})]}),r.jsx("div",{className:"space-y-2",children:s.topPages.slice(0,10).map((B,ie)=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg hover:bg-white/10 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-400 w-8",children:ie+1}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-white font-medium",children:B.page}),r.jsxs("div",{className:"text-xs text-gray-400",children:[B.uniqueVisitors," visitors • ",B.avgTimeOnPage,"s avg"]})]})]}),r.jsxs(H,{className:"bg-blue-500/20 text-blue-400",children:[B.views," views"]})]},B.page))}),(((mn=s.topExitPages)==null?void 0:mn.length)||((El=s.topTransitions)==null?void 0:El.length)||((Rr=s.topPaths3)==null?void 0:Rr.length))&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[s.topExitPages&&s.topExitPages.length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Top Exit Pages"}),r.jsx("div",{className:"space-y-2",children:s.topExitPages.slice(0,8).map(B=>r.jsxs("div",{className:"flex justify-between items-center p-2 bg-white/5 rounded text-sm",children:[r.jsx("span",{className:"text-gray-300 truncate max-w-[70%]",children:B.page}),r.jsx(H,{className:"bg-red-500/20 text-red-400",children:B.exits})]},B.page))})]}),s.topTransitions&&s.topTransitions.length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Top Transitions"}),r.jsx("div",{className:"space-y-2",children:s.topTransitions.slice(0,8).map((B,ie)=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[r.jsx("span",{className:"text-gray-400 truncate max-w-[40%]",children:B.from}),r.jsx(ZP,{className:"h-4 w-4 text-gray-500 shrink-0"}),r.jsx("span",{className:"text-gray-300 truncate max-w-[40%]",children:B.to})]}),r.jsx(H,{className:"bg-sky-500/20 text-sky-400",children:B.count})]},`${B.from}->${B.to}-${ie}`))})]}),s.topPaths3&&s.topPaths3.length>0&&r.jsxs("div",{className:"lg:col-span-2",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Top 3-Step Paths"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:s.topPaths3.slice(0,10).map((B,ie)=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded text-sm",children:[r.jsx("span",{className:"text-gray-300 truncate mr-3",children:B.path}),r.jsx(H,{className:"bg-violet-500/20 text-violet-400",children:B.count})]},`p3-${ie}`))})]})]})]}),x&&r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(Gx,{className:"h-6 w-6 text-rose-400"}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Cart Abandonment"}),r.jsxs(H,{className:"bg-rose-500/20 text-rose-400",children:[x.abandonmentRate,"%"]})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Builder Sessions"}),r.jsx("div",{className:"text-2xl font-bold text-white",children:x.totalBuilderSessions})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"With Selection"}),r.jsx("div",{className:"text-2xl font-bold text-white",children:x.totalWithSelection})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Completed"}),r.jsx("div",{className:"text-2xl font-bold text-white",children:x.totalCompleted})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Abandoned"}),r.jsx("div",{className:"text-2xl font-bold text-white",children:x.abandoned})]})]})]}),y&&r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(mt,{className:"h-6 w-6 text-yellow-400"}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Compatibility Issues"}),r.jsxs(H,{className:"bg-yellow-500/20 text-yellow-400",children:[y.totalWarnings," total"]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Top Issues"}),r.jsx("div",{className:"space-y-2",children:y.topIssues.slice(0,6).map(B=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded text-sm",children:[r.jsx("span",{className:"text-gray-300 truncate max-w-[70%]",children:B.title}),r.jsx(H,{className:"bg-yellow-500/20 text-yellow-400",children:B.count})]},B.title))})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Severity Breakdown"}),r.jsx("div",{className:"space-y-2",children:Object.entries(y.severityCounts).map(([B,ie])=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded text-sm",children:[r.jsx("span",{className:"capitalize text-gray-300",children:B}),r.jsx(H,{className:B==="critical"?"bg-red-500/20 text-red-400":B==="warning"?"bg-amber-500/20 text-amber-400":"bg-blue-500/20 text-blue-400",children:ie})]},B))})]})]})]}),S&&r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(on,{className:"h-6 w-6 text-sky-400"}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Session Quality"}),r.jsxs(H,{className:"bg-sky-500/20 text-sky-400",children:[S.sample," sessions"]})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Average Score"}),r.jsx("div",{className:"text-2xl font-bold text-white",children:S.avgScore})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Median Score"}),r.jsx("div",{className:"text-2xl font-bold text-white",children:S.medianScore})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Distribution"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:Object.entries(S.distribution).map(([B,ie])=>r.jsxs("div",{className:"p-3 bg-white/5 rounded",children:[r.jsx("div",{className:"text-xs text-gray-400",children:B}),r.jsx("div",{className:"text-lg font-bold text-white",children:ie})]},B))})]})]}),N&&r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(mt,{className:"h-6 w-6 text-rose-400"}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Frustration Signals"}),r.jsxs(H,{className:"bg-rose-500/20 text-rose-400",children:[N.totalSignals," total"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"By Type"}),r.jsx("div",{className:"space-y-2",children:Object.entries(N.bySubtype).sort(([,B],[,ie])=>ie-B).slice(0,6).map(([B,ie])=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded text-sm",children:[r.jsx("span",{className:"capitalize text-gray-300",children:B.replace(/_/g," ")}),r.jsx(H,{className:"bg-rose-500/20 text-rose-400",children:ie})]},B))})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Top Elements"}),r.jsx("div",{className:"space-y-2",children:N.topSelectors.slice(0,6).map(B=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded text-sm",children:[r.jsx("span",{className:"text-gray-300 truncate max-w-[70%]",children:B.selector}),r.jsx(H,{className:"bg-rose-500/20 text-rose-400",children:B.count})]},B.selector))})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Top Pages"}),r.jsx("div",{className:"space-y-2",children:N.topPages.slice(0,6).map(B=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded text-sm",children:[r.jsx("span",{className:"text-gray-300 truncate max-w-[70%]",children:B.page}),r.jsx(H,{className:"bg-rose-500/20 text-rose-400",children:B.count})]},B.page))})]})]})]}),P&&r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(on,{className:"h-6 w-6 text-amber-400"}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Performance Issues"}),r.jsxs(H,{className:"bg-amber-500/20 text-amber-400",children:[P.totalIssues," total"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"By Type"}),r.jsx("div",{className:"space-y-2",children:Object.entries(P.byType).sort(([,B],[,ie])=>ie-B).slice(0,6).map(([B,ie])=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded text-sm",children:[r.jsx("span",{className:"text-gray-300",children:B}),r.jsx(H,{className:"bg-amber-500/20 text-amber-400",children:ie})]},B))})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Browsers"}),r.jsx("div",{className:"space-y-2",children:Object.entries(P.byBrowser).sort(([,B],[,ie])=>ie-B).slice(0,6).map(([B,ie])=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded text-sm",children:[r.jsx("span",{className:"text-gray-300",children:B}),r.jsx(H,{className:"bg-amber-500/20 text-amber-400",children:ie})]},B))})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Devices"}),r.jsx("div",{className:"space-y-2",children:Object.entries(P.byDevice).sort(([,B],[,ie])=>ie-B).slice(0,6).map(([B,ie])=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded text-sm",children:[r.jsx("span",{className:"text-gray-300 capitalize",children:B}),r.jsx(H,{className:"bg-amber-500/20 text-amber-400",children:ie})]},B))})]})]})]}),M&&r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(zt,{className:"h-6 w-6 text-emerald-400"}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Feature Adoption"}),r.jsxs(H,{className:"bg-emerald-500/20 text-emerald-400",children:[M.totalFeatures," features"]})]}),M.items.length>0?r.jsx("div",{className:"space-y-2",children:M.items.slice(0,6).map(B=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded text-sm",children:[r.jsx("div",{className:"text-gray-300 truncate max-w-[60%]",children:B.feature}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(H,{className:"bg-emerald-500/20 text-emerald-400",children:[B.adoptionRate,"%"]}),r.jsxs("span",{className:"text-xs text-gray-400",children:[B.uniqueUsers," users • ",B.uses," uses"]})]})]},B.feature))}):r.jsx("div",{className:"text-sm text-gray-400",children:"No feature usage recorded in this period."})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o&&r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(Dn,{className:"h-6 w-6 text-sky-400"}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Security"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx($a,{className:"h-4 w-4 text-green-400"}),r.jsx("span",{className:"text-sm text-gray-300",children:"Successful"})]}),r.jsx("div",{className:"text-2xl font-bold text-green-400",children:o.summary.successfulLogins})]}),r.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(di,{className:"h-4 w-4 text-red-400"}),r.jsx("span",{className:"text-sm text-gray-300",children:"Failed"})]}),r.jsx("div",{className:"text-2xl font-bold text-red-400",children:o.summary.failedLogins})]})]}),o.summary.suspiciousActivity>0&&r.jsx("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-lg p-4 mb-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(mt,{className:"h-5 w-5 text-orange-400"}),r.jsxs("span",{className:"text-white font-semibold",children:[o.summary.suspiciousActivity," Suspicious Activities Detected"]})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-300",children:"Top Failed Login Attempts"}),o.topFailedEmails.slice(0,5).map(B=>r.jsxs("div",{className:"flex justify-between text-sm p-2 bg-white/5 rounded",children:[r.jsx("span",{className:"text-gray-400",children:B.email}),r.jsxs(H,{className:"bg-red-500/20 text-red-400",children:[B.attempts," attempts"]})]},B.email))]})]}),c&&r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(jn,{className:"h-6 w-6 text-sky-400"}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Downloads"}),r.jsxs(H,{className:"bg-sky-500/20 text-sky-400",children:[c.summary.totalDownloads," total"]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Average per day"}),r.jsx("div",{className:"text-2xl font-bold text-white",children:c.summary.avgDownloadsPerDay})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-300",children:"Most Downloaded"}),c.topDownloads.slice(0,5).map((B,ie)=>r.jsxs("div",{className:"flex justify-between items-center p-2 bg-white/5 rounded text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-500 font-mono",children:ie+1}),r.jsx("span",{className:"text-gray-300",children:B.file})]}),r.jsx(H,{className:"bg-blue-500/20 text-blue-400",children:B.downloads})]},B.file))]})]})]}),u&&r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(kr,{className:"h-6 w-6 text-purple-400"}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Product Views"}),r.jsxs(H,{className:"bg-purple-500/20 text-purple-400",children:[u.summary.totalViews," total"]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Unique Products"}),r.jsx("div",{className:"text-2xl font-bold text-white",children:u.summary.uniqueProducts})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Avg Views/Product"}),r.jsx("div",{className:"text-2xl font-bold text-white",children:u.summary.avgViewsPerProduct})]})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-300",children:"Most Viewed Products"}),u.topProducts.slice(0,5).map((B,ie)=>r.jsxs("div",{className:"flex justify-between items-center p-2 bg-white/5 rounded text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[r.jsx("span",{className:"text-gray-500 font-mono",children:ie+1}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("div",{className:"text-gray-300 truncate",children:B.productName}),r.jsxs("div",{className:"text-xs text-gray-500",children:[B.category,B.brand&&` • ${B.brand}`,B.price&&` • £${B.price.toFixed(2)}`]})]})]}),r.jsx(H,{className:"bg-purple-500/20 text-purple-400 ml-2",children:B.views})]},B.productId))]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-300",children:"Views by Category"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(u.categoryBreakdown).sort(([,B],[,ie])=>ie-B).slice(0,8).map(([B,ie])=>r.jsxs("div",{className:"flex justify-between items-center p-2 bg-white/5 rounded text-sm",children:[r.jsx("span",{className:"text-gray-400 capitalize",children:B}),r.jsx("span",{className:"text-gray-300 font-semibold",children:ie})]},B))})]})]}),f&&r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(on,{className:"h-6 w-6 text-emerald-400"}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Build Completions"}),r.jsxs(H,{className:"bg-emerald-500/20 text-emerald-400",children:[f.summary.totalBuildsCompleted," completed"]})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Builds Completed"}),r.jsx("div",{className:"text-2xl font-bold text-white",children:f.summary.totalBuildsCompleted})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Builder Visits"}),r.jsx("div",{className:"text-2xl font-bold text-white",children:f.summary.totalBuilderVisits})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Completion Rate"}),r.jsxs("div",{className:`text-2xl font-bold ${parseFloat(f.summary.completionRate)>=10?"text-emerald-400":"text-yellow-400"}`,children:[f.summary.completionRate,"%"]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Avg Build Value"}),r.jsxs("div",{className:"text-2xl font-bold text-white",children:["£",f.summary.avgBuildValue.toLocaleString()]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-300",children:"Builds by Price Range"}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",children:Object.entries(f.buildsByPrice).map(([B,ie])=>{const $e=Object.values(f.buildsByPrice).reduce((Xe,Je)=>Xe+Je,0),ne=$e>0?(ie/$e*100).toFixed(1):"0";return r.jsxs("div",{className:"flex flex-col p-3 bg-white/5 rounded text-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsxs("span",{className:"text-gray-400",children:["£",B]}),r.jsx(H,{className:"bg-emerald-500/20 text-emerald-400",children:ie})]}),r.jsx("div",{className:"w-full bg-white/10 rounded-full h-2",children:r.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-green-500 h-2 rounded-full",style:{width:`${ne}%`}})}),r.jsxs("span",{className:"text-xs text-gray-500 mt-1",children:[ne,"%"]})]},B)})})]})]}),g&&r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(Od,{className:"h-6 w-6 text-cyan-400"}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Saved Builds"}),r.jsxs(H,{className:"bg-cyan-500/20 text-cyan-400",children:[g.summary.totalSaves," saved"]})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Total Saves"}),r.jsx("div",{className:"text-2xl font-bold text-white",children:g.summary.totalSaves})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Saved to Account"}),r.jsx("div",{className:"text-2xl font-bold text-white",children:g.summary.savedToAccount})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Saved for Comparison"}),r.jsx("div",{className:"text-2xl font-bold text-white",children:g.summary.savedForComparison})]})]}),r.jsx("div",{className:"bg-cyan-500/10 border border-cyan-500/20 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-400",children:"Account Save Rate"}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Users saving to account (logged in)"})]}),r.jsxs("div",{className:"text-2xl font-bold text-cyan-400",children:[g.summary.accountSaveRate,"%"]})]})})]})]})]})}function K9(){const[e,t]=k.useState([]),[n,a]=k.useState([]),[s,i]=k.useState([]),[o,l]=k.useState(!0),[c,d]=k.useState("24h"),u=k.useCallback(async()=>{var b;try{l(!0);const y={data:{pageLoadAvg:1200,apiLatencyAvg:450,errorRate:2.5,pageViews:15e3},metrics:[]},w=f(y),S=m(y);(b=y==null?void 0:y.metrics)!=null&&b.length||w.length>0||S.length>0?(t(h(y.metrics)),a(w),i(S)):(J.info("No performance data found"),t([]),a([]),i([]))}catch(y){J.error("Failed to load performance data",y),t([]),a([]),i([])}finally{l(!1)}},[]);k.useEffect(()=>{u()},[u,c]);function h(b){return[{name:"Largest Contentful Paint",value:2100,unit:"ms",rating:"good",threshold:2500,trend:"stable",change:0},{name:"First Input Delay",value:85,unit:"ms",rating:"good",threshold:100,trend:"stable",change:0},{name:"Cumulative Layout Shift",value:.08,unit:"",rating:"good",threshold:.1,trend:"stable",change:0},{name:"First Contentful Paint",value:1650,unit:"ms",rating:"good",threshold:1800,trend:"stable",change:0},{name:"Time to First Byte",value:550,unit:"ms",rating:"good",threshold:600,trend:"stable",change:0}]}function f(b){return(b.topPages||[]).slice(0,10).map(S=>{const v=S.count||0;return{page:S.page||"Unknown",avgLoadTime:v*100||3e3,count:v,rating:v>10?"needs-improvement":"good"}})}function m(b){return[]}function g(b){switch(b){case"good":return"bg-green-500/20 border-green-500/40 text-green-400";case"needs-improvement":return"bg-orange-500/20 border-orange-500/40 text-orange-400";case"poor":return"bg-red-500/20 border-red-500/40 text-red-400";default:return"bg-gray-500/20 border-gray-500/40 text-gray-400"}}function p(b){switch(b){case"good":return"bg-white/5 backdrop-blur-xl border-green-500/30 shadow-green-500/10";case"needs-improvement":return"bg-white/5 backdrop-blur-xl border-orange-500/30 shadow-orange-500/10";case"poor":return"bg-white/5 backdrop-blur-xl border-red-500/30 shadow-red-500/10";default:return"bg-white/5 backdrop-blur-xl border-white/10"}}function x(b){switch(b){case"good":return r.jsx($a,{className:"w-4 h-4"});case"needs-improvement":return r.jsx(mt,{className:"w-4 h-4"});case"poor":return r.jsx(mt,{className:"w-4 h-4"});default:return r.jsx(on,{className:"w-4 h-4"})}}return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"flex items-center gap-3 mb-2",children:r.jsx("h1",{className:"text-3xl font-bold",children:"Performance Dashboard"})}),r.jsx("p",{className:"text-gray-400",children:"Monitor Core Web Vitals, page load times, and API performance"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx($,{variant:c==="1h"?"default":"outline",onClick:()=>d("1h"),size:"sm",children:"1h"}),r.jsx($,{variant:c==="24h"?"default":"outline",onClick:()=>d("24h"),size:"sm",children:"24h"}),r.jsx($,{variant:c==="7d"?"default":"outline",onClick:()=>d("7d"),size:"sm",children:"7d"}),r.jsx($,{variant:c==="30d"?"default":"outline",onClick:()=>d("30d"),size:"sm",children:"30d"}),r.jsxs($,{onClick:u,size:"sm",className:"ml-2",children:[r.jsx(on,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),o?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(on,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-sky-400"}),r.jsx("p",{className:"text-gray-400",children:"Loading performance data..."})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:e.map(b=>r.jsxs(q,{className:`${p(b.rating)} p-6`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-400",children:b.name}),r.jsx(H,{className:g(b.rating),children:x(b.rating)})]}),r.jsxs("div",{className:"mb-2",children:[r.jsx("div",{className:"text-3xl font-bold text-white",children:b.unit==="ms"?`${Math.round(b.value)}${b.unit}`:b.value.toFixed(3)}),r.jsxs("div",{className:"text-xs text-gray-500",children:["Threshold: ",b.threshold,b.unit]})]}),b.change!==0&&r.jsxs("div",{className:`flex items-center gap-1 text-sm ${b.change<0?"text-green-400":"text-red-400"}`,children:[b.trend==="down"?r.jsx(ui,{className:"w-4 h-4"}):r.jsx(zt,{className:"w-4 h-4"}),r.jsxs("span",{children:[Math.abs(b.change).toFixed(1),"%"]})]})]},b.name))}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(ha,{className:"w-5 h-5 text-sky-400"}),r.jsx("h2",{className:"text-xl font-bold",children:"Slow Pages"}),r.jsx(H,{className:"bg-red-500/20 border-red-500/40 text-red-400",children:n.length})]}),n.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-400",children:[r.jsx($a,{className:"w-12 h-12 mx-auto mb-3 text-green-400"}),r.jsx("p",{children:"All pages loading quickly! 🎉"})]}):r.jsx("div",{className:"space-y-3",children:n.map(b=>r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5 border border-white/10",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium text-white",children:b.page}),r.jsxs("div",{className:"text-sm text-gray-400",children:[b.count," views"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-xl font-bold text-white",children:[Math.round(b.avgLoadTime),"ms"]}),r.jsx(H,{className:g(b.rating),children:b.rating})]})]},b.page))})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(xk,{className:"w-5 h-5 text-sky-400"}),r.jsx("h2",{className:"text-xl font-bold",children:"Slow API Endpoints"}),r.jsx(H,{className:"bg-red-500/20 border-red-500/40 text-red-400",children:s.length})]}),s.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-400",children:[r.jsx(tC,{className:"w-12 h-12 mx-auto mb-3 text-green-400"}),r.jsx("p",{children:"All APIs responding quickly! ⚡"})]}):r.jsx("div",{className:"space-y-3",children:s.map(b=>r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5 border border-white/10",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium text-white font-mono text-sm",children:b.endpoint}),r.jsxs("div",{className:"text-sm text-gray-400",children:[b.count," calls"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-xl font-bold text-white",children:[Math.round(b.avgResponseTime),"ms"]}),r.jsx(H,{className:g(b.rating),children:b.rating})]})]},b.endpoint))})]})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx($o,{className:"w-5 h-5 text-sky-400"}),r.jsx("h2",{className:"text-xl font-bold",children:"Performance Tips"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"p-4 rounded-lg bg-green-500/10 border border-green-500/20",children:[r.jsx("h3",{className:"font-medium text-green-400 mb-2",children:"✅ Good"}),r.jsx("p",{className:"text-sm text-gray-300",children:"Metrics below threshold indicate excellent performance"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-yellow-500/10 border border-yellow-500/20",children:[r.jsx("h3",{className:"font-medium text-yellow-400 mb-2",children:"⚠️ Needs Improvement"}),r.jsx("p",{className:"text-sm text-gray-300",children:"Consider optimizing images, code splitting, or CDN usage"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-red-500/10 border border-red-500/20",children:[r.jsx("h3",{className:"font-medium text-red-400 mb-2",children:"❌ Poor"}),r.jsx("p",{className:"text-sm text-gray-300",children:"Critical issues detected. Investigate immediately"})]})]})]})]})]})}const ok=[{id:"sessions",label:"Total Sessions",category:"Analytics"},{id:"pageViews",label:"Page Views",category:"Analytics"},{id:"users",label:"Unique Users",category:"Analytics"},{id:"avgDuration",label:"Avg Session Duration",category:"Analytics"},{id:"bounceRate",label:"Bounce Rate",category:"Analytics"},{id:"orders",label:"Total Orders",category:"Orders"},{id:"revenue",label:"Revenue",category:"Orders"},{id:"avgOrderValue",label:"Avg Order Value",category:"Orders"},{id:"completedOrders",label:"Completed Orders",category:"Orders"},{id:"pendingOrders",label:"Pending Orders",category:"Orders"},{id:"totalCustomers",label:"Total Customers",category:"Customers"},{id:"newCustomers",label:"New Customers",category:"Customers"},{id:"returningCustomers",label:"Returning Customers",category:"Customers"},{id:"supportTickets",label:"Support Tickets",category:"Support"},{id:"openTickets",label:"Open Tickets",category:"Support"},{id:"avgResponseTime",label:"Avg Response Time",category:"Support"}],Y9=[{value:"7days",label:"Last 7 Days"},{value:"30days",label:"Last 30 Days"},{value:"90days",label:"Last 90 Days"},{value:"thisMonth",label:"This Month"},{value:"lastMonth",label:"Last Month"},{value:"thisYear",label:"This Year"},{value:"custom",label:"Custom Range"}];function X9(){const{user:e,loading:t,isAdmin:n}=j0(),[a,s]=k.useState(!1),[i,o]=k.useState([]),l=async()=>{if(!Co)throw new Error("Authentication unavailable (Firebase not configured).");let re=4;for(;re-- >0;){if(t){await new Promise(se=>setTimeout(se,300));continue}const be=await Sy();if(be)return be;try{if(e&&typeof e.getIdToken=="function"){const se=await e.getIdToken();if(se)return se}}catch(se){J.error("Fallback token retrieval failed",se)}await new Promise(se=>setTimeout(se,400))}throw new Error("Unable to authenticate. Please reload the page and try again.")},[c,d]=k.useState("pdf"),[u,h]=k.useState("30days"),[f,m]=k.useState(""),[g,p]=k.useState(""),[x,b]=k.useState(["sessions","orders","revenue"]),[y,w]=k.useState(!1),[S,v]=k.useState(""),[N,A]=k.useState("weekly"),[P,T]=k.useState("pdf"),[M,E]=k.useState([]),[C,O]=k.useState(""),[_,D]=k.useState(["sessions","orders","revenue"]),L=k.useCallback(async()=>{try{if(!Co||t||!e)return;const re=await Sy();if(!re)return;const be=await fetch("/api/admin/reports/schedule",{headers:{Authorization:`Bearer ${re}`}});if(!be.ok)throw new Error("Failed to fetch scheduled reports");const se=await be.json();o(se.reports||[])}catch(re){J.error("Error fetching scheduled reports:",re)}},[t,e]);k.useEffect(()=>{L()},[L]);async function V(){if(x.length===0){te.error("Please select at least one metric");return}s(!0);try{const re=await l();let be=`format=${c}`;if(u==="custom"){if(!f||!g){te.error("Please select start and end dates"),s(!1);return}be+=`&startDate=${f}&endDate=${g}`}else be+=`&period=${u}`;const se=await fetch(`/api/admin/reports/generate?${be}`,{headers:{Authorization:`Bearer ${re}`}});if(!se.ok)throw new Error("Failed to generate report");const oe=await se.blob(),me=window.URL.createObjectURL(oe),ve=document.createElement("a");ve.href=me,ve.download=`vortex-report-${us(new Date,"yyyy-MM-dd")}.${c==="pdf"?"pdf":"xlsx"}`,document.body.appendChild(ve),ve.click(),document.body.removeChild(ve),window.URL.revokeObjectURL(me),te.success("Report downloaded successfully")}catch(re){J.error("Report generation error",re),te.error("Failed to generate report")}finally{s(!1)}}async function X(){if(!S||M.length===0||_.length===0){te.error("Please fill in all required fields");return}s(!0);try{const re=await l();if(!(await fetch("/api/admin/reports/schedule",{method:"POST",headers:{Authorization:`Bearer ${re}`,"Content-Type":"application/json"},body:JSON.stringify({name:S,frequency:N,format:P,recipients:M,metrics:_,enabled:!0})})).ok)throw new Error("Failed to create scheduled report");te.success("Scheduled report created"),w(!1),v(""),E([]),L()}catch(re){J.error("Error creating scheduled report",re),te.error("Failed to create scheduled report")}finally{s(!1)}}async function W(re){if(confirm("Are you sure you want to delete this scheduled report?"))try{const be=await l();if(!(await fetch(`/api/admin/reports/schedule?id=${re}`,{method:"DELETE",headers:{Authorization:`Bearer ${be}`}})).ok)throw new Error("Failed to delete scheduled report");te.success("Scheduled report deleted"),L()}catch(be){J.error("Error deleting scheduled report",be),te.error("Failed to delete scheduled report")}}async function ce(re,be){try{const se=await l();if(!(await fetch("/api/admin/reports/schedule",{method:"PUT",headers:{Authorization:`Bearer ${se}`,"Content-Type":"application/json"},body:JSON.stringify({id:re,enabled:be})})).ok)throw new Error("Failed to update scheduled report");te.success(`Report ${be?"enabled":"disabled"}`),L()}catch(se){J.error("Error updating scheduled report",se),te.error("Failed to update scheduled report")}}async function de(re){if(confirm(`Send "${re.name}" now to ${re.recipients.length} recipient(s)?`))try{s(!0);const be=await l(),se=new Date,oe=new Date;switch(re.frequency){case"daily":oe.setDate(se.getDate()-1);break;case"weekly":oe.setDate(se.getDate()-7);break;case"monthly":oe.setMonth(se.getMonth()-1);break}const me=new URLSearchParams({format:re.format,startDate:oe.toISOString().split("T")[0],endDate:se.toISOString().split("T")[0],metrics:re.metrics.join(",")}),ve=await fetch(`/api/admin/reports/generate?${me.toString()}`,{headers:{Authorization:`Bearer ${be}`}});if(!ve.ok)throw new Error("Failed to generate report");const I=await ve.blob(),ge=window.URL.createObjectURL(I),Ne=document.createElement("a");Ne.href=ge,Ne.download=`${re.name}-${us(new Date,"yyyy-MM-dd")}.${re.format}`,document.body.appendChild(Ne),Ne.click(),window.URL.revokeObjectURL(ge),document.body.removeChild(Ne),te.success("Report generated! Email functionality requires backend implementation.")}catch(be){J.error("Error sending report",be),te.error("Failed to send report")}finally{s(!1)}}function fe(re,be=!1){be?D(se=>se.includes(re)?se.filter(oe=>oe!==re):[...se,re]):b(se=>se.includes(re)?se.filter(oe=>oe!==re):[...se,re])}function F(){if(!C.trim())return;const re=C.trim();if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(re)){te.error("Invalid email address");return}if(M.includes(re)){te.error("Email already added");return}E([...M,re]),O("")}function Te(re){E(M.filter(be=>be!==re))}const pe=ok.reduce((re,be)=>(re[be.category]||(re[be.category]=[]),re[be.category].push(be),re),{});return n&&!Co?r.jsx(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-amber-500/20 border border-amber-500/30",children:r.jsx(Ra,{className:"w-5 h-5 text-amber-400"})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h2",{className:"text-lg font-semibold text-white",children:"Reports Unavailable"}),r.jsx("p",{className:"text-sm text-gray-300",children:"Firebase is not configured in this environment. Authentication is required for generating and scheduling admin reports."}),r.jsxs("div",{className:"text-sm text-gray-400",children:[r.jsx("div",{className:"mb-1 text-gray-300",children:"Client (Vite) variables:"}),r.jsxs("ul",{className:"list-disc pl-5",children:[r.jsx("li",{children:"VITE_FIREBASE_API_KEY"}),r.jsx("li",{children:"VITE_FIREBASE_AUTH_DOMAIN"}),r.jsx("li",{children:"VITE_FIREBASE_PROJECT_ID"})]}),r.jsx("div",{className:"mt-3 mb-1 text-gray-300",children:"Server (Admin) variables:"}),r.jsxs("ul",{className:"list-disc pl-5",children:[r.jsx("li",{children:"FIREBASE_PROJECT_ID"}),r.jsx("li",{children:"FIREBASE_CLIENT_EMAIL"}),r.jsx("li",{children:"FIREBASE_PRIVATE_KEY (or FIREBASE_SERVICE_ACCOUNT_BASE64)"})]})]}),r.jsx("div",{className:"pt-2",children:r.jsx(H,{className:"bg-amber-500/20 border-amber-500/40 text-amber-300",children:"Admin action disabled"})})]})]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"p-3 rounded-lg bg-sky-500/20 border border-sky-500/30",children:r.jsx(Ea,{className:"w-6 h-6 text-sky-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-white",children:"Generate Report"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Create and download custom analytics reports"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{className:"text-white",children:"Report Format"}),r.jsxs(dr,{value:c,onValueChange:re=>d(re),children:[r.jsx(ur,{className:"bg-white/5 border-white/10 text-white",children:r.jsx(hr,{})}),r.jsxs(fr,{children:[r.jsx(Oe,{value:"pdf",children:"PDF Document"}),r.jsx(Oe,{value:"excel",children:"Excel Spreadsheet"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{className:"text-white",children:"Time Period"}),r.jsxs(dr,{value:u,onValueChange:h,children:[r.jsx(ur,{className:"bg-white/5 border-white/10 text-white",children:r.jsx(hr,{})}),r.jsx(fr,{children:Y9.map(re=>r.jsx(Oe,{value:re.value,children:re.label},re.value))})]})]}),u==="custom"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{className:"text-white",children:"Start Date"}),r.jsx(xe,{type:"date",value:f,onChange:re=>m(re.target.value),className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{className:"text-white",children:"End Date"}),r.jsx(xe,{type:"date",value:g,onChange:re=>p(re.target.value),className:"bg-white/5 border-white/10 text-white"})]})]})]}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsx(le,{className:"text-white",children:"Select Metrics to Include"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(pe).map(([re,be])=>r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"text-sm font-semibold text-sky-400",children:re}),be.map(se=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ty,{id:se.id,checked:x.includes(se.id),onCheckedChange:()=>fe(se.id),className:"border-white/20"}),r.jsx("label",{htmlFor:se.id,className:"text-sm text-gray-300 cursor-pointer",children:se.label})]},se.id))]},re))})]}),r.jsx($,{onClick:V,disabled:a||t||x.length===0,className:"bg-gradient-to-r from-sky-600 to-blue-600 hover:from-sky-500 hover:to-blue-500",children:a||t?r.jsxs(r.Fragment,{children:[r.jsx(aa,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(jn,{className:"w-4 h-4 mr-2"}),"Generate & Download Report"]})})]}),r.jsxs(q,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-3 rounded-lg bg-blue-500/20 border border-blue-500/30",children:r.jsx(jl,{className:"w-6 h-6 text-blue-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-white",children:"Scheduled Reports"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Automate report delivery via email"})]})]}),r.jsxs($,{onClick:()=>w(!y),variant:"outline",className:"border-sky-500/30 text-sky-400 hover:bg-sky-500/10",children:[r.jsx(dn,{className:"w-4 h-4 mr-2"}),"New Schedule"]})]}),y&&r.jsxs("div",{className:"mb-6 p-4 rounded-lg bg-white/5 border border-white/10 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{className:"text-white",children:"Report Name"}),r.jsx(xe,{value:S,onChange:re=>v(re.target.value),placeholder:"Weekly Sales Report",className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{className:"text-white",children:"Frequency"}),r.jsxs(dr,{value:N,onValueChange:re=>A(re),children:[r.jsx(ur,{className:"bg-white/5 border-white/10 text-white",children:r.jsx(hr,{})}),r.jsxs(fr,{children:[r.jsx(Oe,{value:"daily",children:"Daily"}),r.jsx(Oe,{value:"weekly",children:"Weekly"}),r.jsx(Oe,{value:"monthly",children:"Monthly"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{className:"text-white",children:"Format"}),r.jsxs(dr,{value:P,onValueChange:re=>T(re),children:[r.jsx(ur,{className:"bg-white/5 border-white/10 text-white",children:r.jsx(hr,{})}),r.jsxs(fr,{children:[r.jsx(Oe,{value:"pdf",children:"PDF"}),r.jsx(Oe,{value:"excel",children:"Excel"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{className:"text-white",children:"Email Recipients"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(xe,{value:C,onChange:re=>O(re.target.value),onKeyDown:re=>re.key==="Enter"&&F(),placeholder:"email@example.com",className:"bg-white/5 border-white/10 text-white"}),r.jsx($,{onClick:F,variant:"outline",className:"border-white/20",children:r.jsx(dn,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:M.map(re=>r.jsxs(H,{className:"bg-sky-500/20 border-sky-500/30 text-sky-400",children:[re,r.jsx("button",{onClick:()=>Te(re),className:"ml-2 hover:text-red-400",children:"×"})]},re))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(le,{className:"text-white",children:"Metrics to Include"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:ok.map(re=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ty,{id:`schedule-${re.id}`,checked:_.includes(re.id),onCheckedChange:()=>fe(re.id,!0),className:"border-white/20"}),r.jsx("label",{htmlFor:`schedule-${re.id}`,className:"text-xs text-gray-300 cursor-pointer",children:re.label})]},re.id))})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx($,{onClick:X,disabled:a||t,className:"bg-gradient-to-r from-sky-600 to-blue-600",children:a||t?r.jsxs(r.Fragment,{children:[r.jsx(aa,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Od,{className:"w-4 h-4 mr-2"}),"Create Schedule"]})}),r.jsx($,{onClick:()=>w(!1),variant:"outline",className:"border-white/20 text-white",children:"Cancel"})]})]}),r.jsx("div",{className:"space-y-3",children:i.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-400",children:[r.jsx(wn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"No scheduled reports yet"}),r.jsx("p",{className:"text-sm",children:"Create one to automate report delivery"})]}):i.map(re=>r.jsxs("div",{className:"p-4 rounded-lg bg-white/5 border border-white/10 flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("h3",{className:"font-semibold text-white",children:re.name}),r.jsx(H,{className:re.enabled?"bg-green-500/20 border-green-500/30 text-green-400":"bg-gray-500/20 border-gray-500/30 text-gray-400",children:re.enabled?"Active":"Disabled"}),r.jsx(H,{className:"bg-blue-500/20 border-blue-500/30 text-blue-400",children:re.frequency}),r.jsx(H,{className:"bg-purple-500/20 border-purple-500/30 text-purple-400",children:re.format.toUpperCase()})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[r.jsxs("span",{children:["📧 ",re.recipients.length," recipients"]}),r.jsxs("span",{children:["📊 ",re.metrics.length," metrics"]}),re.nextScheduled&&r.jsxs("span",{children:["Next:"," ",us(new Date(re.nextScheduled),"MMM dd, yyyy HH:mm")]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs($,{onClick:()=>de(re),variant:"outline",size:"sm",className:"border-sky-500/30 text-sky-400 hover:bg-sky-500/10",disabled:a,children:[r.jsx(uk,{className:"w-4 h-4 mr-1"}),"Send Now"]}),r.jsx($,{onClick:()=>ce(re.id,!re.enabled),variant:"outline",size:"sm",className:"border-white/20",children:re.enabled?"Disable":"Enable"}),r.jsx($,{onClick:()=>W(re.id),variant:"outline",size:"sm",className:"border-red-500/30 text-red-400 hover:bg-red-500/10",children:r.jsx(Kr,{className:"w-4 h-4"})})]})]},re.id))})]}),r.jsx(q,{className:"bg-blue-500/10 backdrop-blur-xl border-blue-500/30 p-4",children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Ra,{className:"w-5 h-5 text-blue-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"text-sm text-blue-300",children:[r.jsx("p",{className:"font-semibold mb-1",children:"Report Generation Tips"}),r.jsxs("ul",{className:"space-y-1 text-blue-300/80",children:[r.jsx("li",{children:"• PDF reports are best for sharing and presentations"}),r.jsx("li",{children:"• Excel reports allow further data analysis"}),r.jsx("li",{children:"• Scheduled reports are sent at 9:00 AM on the scheduled day"}),r.jsx("li",{children:"• You can enable/disable scheduled reports without deleting them"})]})]})]})})]})}const yc=e=>{const t=new Map;for(const n of e){const a=n.paymentId||n.orderId||n.id||Math.random().toString();t.has(a)||t.set(a,n)}return Array.from(t.values())},jo=e=>e.map(t=>{const n=t,s=(Array.isArray(n.items)?n.items:[]).map(h=>({productId:h.productId||"unknown",productName:h.productName||h.name||"Item",price:typeof h.price=="number"?h.price:0,quantity:typeof h.quantity=="number"?h.quantity:1})),i=typeof n.total=="number"?n.total:typeof n.amount=="number"?n.amount:s.reduce((h,f)=>h+(f.price||0)*(f.quantity||1),0);let o=t.address;const l=t.shippingAddress;!o&&l&&typeof l=="object"&&(o={line1:l.line1||"",line2:l.line2||"",city:l.city||l.town||"",postcode:l.postcode||l.postalCode||"",country:l.country||""});const c=t.bankTransferVerifiedAt;let d;if(c instanceof Date)d=c;else if(c&&typeof c=="object"&&"toDate"in c&&typeof c.toDate=="function")try{d=c.toDate()}catch{d=void 0}else if(typeof c=="string"||typeof c=="number"){const h=new Date(c);isNaN(h.getTime())||(d=h)}const u=!!n.orderNumber||!!n.amount||!!n.createdAt&&!t.orderDate||!t.paymentMethod;return{...t,items:s,orderId:n.orderId||n.orderNumber||t.id,total:i,orderDate:t.orderDate||n.createdAt||t.orderDate,address:o,bankTransferVerifiedAt:d,legacy:u}}),Q9=e=>{if(!e)return"";let t=null;if(e instanceof Date)t=e;else if(typeof e=="object"&&e!==null&&"toDate"in e&&typeof e.toDate=="function")try{t=e.toDate()}catch{t=null}else if(typeof e=="string"||typeof e=="number"){const n=new Date(e);isNaN(n.getTime())||(t=n)}return t?t.toLocaleDateString("en-GB",{day:"2-digit",month:"short"}):""},ss=e=>e.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),J9=(e,t)=>{try{if(!t||t.length===0){te.info("Nothing to export yet");return}const n=Array.from(t.reduce((c,d)=>(Object.keys(d).forEach(u=>c.add(u)),c),new Set)),a=c=>{const d=c==null?"":String(c);return/[",\n]/.test(d)?`"${d.replace(/"/g,'""')}"`:d},s=[n.join(","),...t.map(c=>{const d=c;return n.map(u=>a(d[u])).join(",")})],i=new Blob([s.join(`
`)],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(i),l=document.createElement("a");l.href=o,l.download=e,document.body.appendChild(l),l.click(),setTimeout(()=>{document.body.removeChild(l),URL.revokeObjectURL(o)},0)}catch(n){te.error(n instanceof Error?n.message:"Failed to export")}};function mV(){var cy,dy,uy,hy,fy,my,xy,py;const{isAdmin:e,user:t,userProfile:n,loading:a}=j0(),[s,i]=k.useState(!1),[o,l]=k.useState(!1),[c,d]=k.useState(!1),[u,h]=k.useState(!1),[f,m]=k.useState({accountName:"",bankName:"",sortCode:"",accountNumber:"",iban:"",bic:"",referenceNote:"",instructions:""});k.useEffect(()=>{let j=!1;return(async()=>{if(u)try{const{fetchBankTransferSettings:K}=await Ie(async()=>{const{fetchBankTransferSettings:G}=await import("./settings-BIczTR3D.js");return{fetchBankTransferSettings:G}},[]),Y=await K();if(j)return;m({accountName:Y.accountName||"",bankName:Y.bankName||"",sortCode:Y.sortCode||"",accountNumber:Y.accountNumber||"",iban:Y.iban||"",bic:Y.bic||"",referenceNote:Y.referenceNote||"",instructions:Y.instructions||""})}catch{}})(),()=>{j=!0}},[u]);const[g,p]=k.useState(!0),[x,b]=k.useState("dashboard");k.useEffect(()=>{const j=()=>{const z=window.location.hash.replace(/^#/,"");new Set(["dashboard","orders","inventory","customers","support","analytics","recommendations","reports","monitoring","performance","security","content","email"]).has(z)&&b(z)};return j(),window.addEventListener("hashchange",j),()=>window.removeEventListener("hashchange",j)},[]);const[y,w]=k.useState(!1),[S,v]=k.useState(""),[N,A]=k.useState(""),[P,T]=k.useState(""),[M,E]=k.useState(""),[C,O]=k.useState(""),[_,D]=k.useState(!1),[L,V]=k.useState(null),[X,W]=k.useState(null),[ce,de]=k.useState(null),[fe,F]=k.useState(null),[Te,pe]=k.useState(!1),[re,be]=k.useState(""),[se,oe]=k.useState({siteName:"Vortex PCs",siteDescription:"Custom PC Building & Gaming Systems",siteKeywords:"custom pc, gaming pc, pc builder, gaming systems",ogImage:"https://vortexpcs.com/og-image.jpg",twitterHandle:"@VortexPCs"}),[me,ve]=k.useState({orders:{total:0,change:"+0%",trend:"up"},revenue:{total:0,change:"+0%",trend:"up"},customers:{total:0,change:"+0%",trend:"up"},builds:{total:0,change:"+0%",trend:"up"}}),[I,ge]=k.useState(0),[Ne,He]=k.useState(0),[bt,It]=k.useState(0),[Ar,Ur]=k.useState(0),[Pr,Cr]=k.useState(0),[zr,Hn]=k.useState(0),[Jr,Cn]=k.useState(0),[Ha,Ga]=k.useState(0),[sr,Gn]=k.useState(0),[Ka,ya]=k.useState(""),[xr,On]=k.useState({installs:0,dismissals:0,promptShown:0,installRate:0}),[U,Q]=k.useState([]),[ae,Se]=k.useState(null),[qe,_e]=k.useState([]),[ze,vt]=k.useState([]),[Ir,Tn]=k.useState(null),[_n,Fs]=k.useState(!1),[Ya,Me]=k.useState(!1),[Ft,rt]=k.useState([]),mn=k.useRef(!1),El=()=>{let j=0;for(const z of ze)z.legacy&&j++;return{legacy:j,primary:ze.length-j,total:ze.length}};k.useEffect(()=>{if(!ze.length){ve(K=>({...K,orders:{...K.orders,total:0},revenue:{...K.revenue,total:0},builds:{...K.builds,total:0}}));return}const j=ze.reduce((K,Y)=>{const G=Y.total;let ee=0;if(typeof G=="number"&&Number.isFinite(G))ee=G;else if(typeof G=="string"){const ue=G.replace(/[^0-9.-]/g,""),we=parseFloat(ue);Number.isFinite(we)&&(ee=we)}return K+ee},0),z=ze.filter(K=>K.status==="building"||K.status==="testing").length;ve(K=>({...K,orders:{...K.orders,total:ze.length},revenue:{...K.revenue,total:j},builds:{...K.builds,total:z}}))},[ze]);const[Rr,B]=k.useState({totalPageViews:0,totalVisitors:0,averagePageViewsPerDay:0,topPages:[],viewsByDay:{}}),[ie,$e]=k.useState(!1),[ne,Xe]=k.useState(null),[Je,et]=k.useState(!1),[Jt,vr]=k.useState(!1),[Kn,xn]=k.useState(!1),[Be,qt]=k.useState(""),[wt,Ot]=k.useState("");k.useEffect(()=>{},[Jt]);const[Vt,$r]=k.useState(0),[Lr,Tt]=k.useState("pending"),[Zr,Zt]=k.useState(""),[jt,wr]=k.useState([]),[qs,Xa]=k.useState(null),[en,Qa]=k.useState([]),[Us,Yn]=k.useState(!1),[Wt,ba]=k.useState(null),[va,Ja]=k.useState(!0),[Ke,wa]=k.useState(!1),[Ig,Rg]=k.useState(!1),[cP,Dl]=k.useState(!1),[dt,$g]=k.useState(null),[zs,Lg]=k.useState(""),[Ml,Bg]=k.useState(!1),[Fg,qg]=k.useState(!1),[Ug,zg]=k.useState(null),[Qi,Vg]=k.useState([]),[Wg,Hg]=k.useState(0),[dP,Vs]=k.useState(!1),[Nt,Il]=k.useState(null),[uP,Rl]=k.useState(!1),[$l,Gg]=k.useState(""),[Kg,pu]=k.useState(!1),[Yg,Ji]=k.useState(null),[hP,Ll]=k.useState(!1),[Bl,Xg]=k.useState(""),[Qg,Jg]=k.useState(""),[Zg,gu]=k.useState(!1),[ey,Zi]=k.useState(null),[yu,Fl]=k.useState([]),[eo,Xn]=k.useState(!1),[Ws,fP]=k.useState(!1),[Hs,ql]=k.useState(1),[Gs,mP]=k.useState(25),[Za,xP]=k.useState(""),[pP,Ul]=k.useState(0),[gP,zl]=k.useState(0),[yP,Vl]=k.useState(0),[ty,Wl]=k.useState(!1),[ry,Hl]=k.useState(!1),[bu,bP]=k.useState("");k.useEffect(()=>{const j=setTimeout(()=>{xP(bu.trim()),ql(1)},300);return()=>clearTimeout(j)},[bu]),k.useEffect(()=>{let j=!1;return(async()=>{if(a||!t){J.debug("Skipping IP blocks load - auth loading or no user");return}Xn(!0);try{let K="";try{const{auth:ee}=await Ie(async()=>{const{auth:we}=await import("./index-C09NoPC0.js").then(tt=>tt.cq);return{auth:we}},__vite__mapDeps([0,1,2,3,4])),ue=ee==null?void 0:ee.currentUser;ue&&typeof ue.getIdToken=="function"?K=await ue.getIdToken():J.warn("Firebase auth not available or no current user")}catch(ee){J.error("Failed to get ID token:",ee)}if(!K){J.warn("No ID token available for IP blocks request"),j||(J.debug("Skipping IP blocks load - no auth token"),Xn(!1));return}const{listIpBlocks:Y}=await Ie(async()=>{const{listIpBlocks:ee}=await import("./index-C09NoPC0.js").then(ue=>ue.cu);return{listIpBlocks:ee}},__vite__mapDeps([0,1,2,3,4])),G=await Y(K,{includeUnblocked:Ws,page:Hs,limit:Gs,search:Za});if(j)return;Fl(G.entries.map(ee=>({id:ee.id,ip:ee.ip,attempts:ee.attempts,blocked:ee.blocked,blockedAt:ee.blockedAt,reason:ee.reason??null,lastEmailTried:ee.lastEmailTried??null}))),Ul(G.totalPages),zl(G.total),Vl(G.count),Wl(G.hasNext),Hl(G.hasPrev)}catch(K){j||(J.error("Error loading IP blocks:",K),te.error("Failed to load IP blocks"))}finally{j||Xn(!1)}})(),()=>{j=!0}},[a,t,Ws,Hs,Gs,Za]);const[vP,to]=k.useState(!1),[Gl,vu]=k.useState("view"),[Kl,wu]=k.useState(!1),[ny,es]=k.useState(null),[ay,Yl]=k.useState(null),[ro,ju]=k.useState(""),[no,Nu]=k.useState("user"),[Kt,Su]=k.useState(null),[sy,iy]=k.useState(!1),[oy,ly]=k.useState(null),wP=async j=>{if(!(dt!=null&&dt.id))return;const z=j.target.files;if(!(!z||z.length===0)){for(let K=0;K<z.length;K++){const Y=z[K];try{const{uploadTicketAttachment:G}=await Ie(async()=>{const{uploadTicketAttachment:ue}=await import("./storage-CDzUfK7n.js").then(we=>we.s);return{uploadTicketAttachment:ue}},__vite__mapDeps([6,0,1,2,3,4])),ee=await G(dt.id,Y,ue=>{Hg(Math.round(ue))});Vg(ue=>[...ue,ee])}catch(G){alert(G instanceof Error?`Upload failed: ${G.message}`:"Upload failed")}finally{Hg(0)}}j.target.value=""}},jP=async()=>{if(!(!(dt!=null&&dt.id)||!zs.trim())){qg(!0),zg(null);try{const{replyToTicket:j}=await Ie(async()=>{const{replyToTicket:K}=await import("./support-Ct0jW65w.js");return{replyToTicket:K}},__vite__mapDeps([7,1,2])),z=await j({ticketId:dt.id,body:zs.trim(),internal:Ml,attachments:Qi.map(K=>({name:K.name,url:K.url,size:K.size,type:K.type,path:K.path,scanStatus:K.scanStatus}))});z!=null&&z.success&&(wr(K=>K.map(Y=>Y.id===dt.id?{...Y,messages:[...Y.messages||[],{senderId:(t==null?void 0:t.uid)||null,senderName:(t==null?void 0:t.displayName)||(t==null?void 0:t.email)||null,body:zs.trim(),internal:Ml,timestamp:new Date,attachments:Qi}]}:Y)),$g(K=>K&&{...K,messages:[...K.messages||[],{senderId:(t==null?void 0:t.uid)||null,senderName:(t==null?void 0:t.displayName)||(t==null?void 0:t.email)||null,body:zs.trim(),internal:Ml,timestamp:new Date,attachments:Qi}]}),Lg(""),Bg(!1),Vg([]))}catch(j){zg(j instanceof Error?j.message:"Failed to send reply")}finally{qg(!1)}}},ku=k.useCallback(async()=>{p(!0);try{J.debug("Loading customers");const j=jo(await so(1e3));J.debug("Orders fetched",{count:j.length});let z="";try{const{auth:ue}=await Ie(async()=>{const{auth:tt}=await import("./index-C09NoPC0.js").then(Fe=>Fe.cq);return{auth:tt}},__vite__mapDeps([0,1,2,3,4])),we=ue==null?void 0:ue.currentUser;we&&typeof we.getIdToken=="function"&&(z=await we.getIdToken(!0))}catch(ue){J.debug("Could not get auth token for customer refresh",{error:ue})}const K=await fetch("/api/admin/users/list",{headers:z?{Authorization:`Bearer ${z}`}:{}});if(!K.ok){let ue="";try{ue=await K.text()}catch(we){J.debug("Failed to read error response body",{error:we})}throw new Error(`Failed to fetch users (${K.status}): ${ue||"Unknown error"}`)}const G=(await K.json()).data||[];if(J.debug("Users fetched",{count:G.length}),!G||G.length===0){J.warn("No users returned from API"),rt([]);return}const ee=G.filter(ue=>!!ue.id).map(ue=>{var Fe;const we=j.filter(Ge=>Ge.userId===ue.id),tt=we.reduce((Ge,it)=>Ge+it.total,0);return J.debug("User summary",{email:ue.email,id:ue.id,orders:we.length,spent:tt,createdAt:ue.createdAt}),{id:ue.id,name:ue.displayName||((Fe=ue.email)==null?void 0:Fe.split("@")[0])||"Unknown",email:ue.email||"",orders:we.length,spent:tt,joined:ue.createdAt||null,role:(ue!=null&&ue.role?String(ue.role):"user").toLowerCase(),accountType:(ue==null?void 0:ue.accountType)||"general",companyName:(ue==null?void 0:ue.companyName)||void 0}});rt(ee),J.debug("Customers loaded",{count:ee.length,customers:ee})}catch(j){J.error("Error loading customers",{error:j}),alert(`Failed to load customers: ${j instanceof Error?j.message:String(j)}`)}finally{p(!1)}},[]);k.useEffect(()=>{if(a){J.debug("Auth still loading, deferring admin data load");return}if(!t){J.debug("No user present, skipping admin data load");return}const j=async()=>{var G,ee;try{p(!0),J.debug("Admin Panel - Loading dashboard data");const we={...await aC()},tt=Ae=>{Number.isFinite(Ae.total)||(Ae.total=0),typeof Ae.change=="string"&&/NaN/i.test(Ae.change)&&(Ae.change="+0%"),Ae.trend!=="up"&&Ae.trend!=="down"&&(Ae.trend="up")};tt(we.orders),tt(we.revenue),tt(we.customers),tt(we.builds),ve(we),J.debug("Dashboard stats loaded",{safeStats:we});let Fe=await Zl(1200,600);(!Fe||Fe.length===0)&&(J.warn("Extended orders fetch returned empty; falling back to basic getAllOrders"),Fe=await so(1e3));const it=[...yc(jo(Fe))].sort((Ae,Ht)=>{const pn=Ae.orderDate instanceof Date&&!isNaN(Ae.orderDate.getTime())?Ae.orderDate.getTime():0;return(Ht.orderDate instanceof Date&&!isNaN(Ht.orderDate.getTime())?Ht.orderDate.getTime():0)-pn});vt(it),_e(it.slice(0,5)),Tn(new Date);try{const Ae=it.map(Ht=>({...Ht,orderDate:Ht.orderDate instanceof Date?Ht.orderDate.toISOString():null,bankTransferVerifiedAt:Ht.bankTransferVerifiedAt instanceof Date?Ht.bankTransferVerifiedAt.toISOString():null}));sessionStorage.setItem("admin_orders_cache_v1",JSON.stringify(Ae))}catch{}J.debug("Admin Panel - Extended orders loaded",{count:it.length});let We=[];try{let Ae="";try{const{auth:pn}=await Ie(async()=>{const{auth:ja}=await import("./index-C09NoPC0.js").then(Ks=>Ks.cq);return{auth:ja}},__vite__mapDeps([0,1,2,3,4])),Or=pn==null?void 0:pn.currentUser;Or&&typeof Or.getIdToken=="function"&&(Ae=await Or.getIdToken(!0))}catch(pn){J.debug("Could not get auth token for users list",{error:pn})}const Ht=await fetch("/api/admin/users/list",{headers:Ae?{Authorization:`Bearer ${Ae}`}:{}});if(Ht.ok){if(We=(await Ht.json()).data||[],J.debug("Users loaded from API",{count:We.length}),We.length===0&&e)try{const Or=(G=(await Ie(async()=>{const{auth:by}=await import("./index-C09NoPC0.js").then(_P=>_P.cq);return{auth:by}},__vite__mapDeps([0,1,2,3,4]))).auth)==null?void 0:G.currentUser,ja=await((ee=Or==null?void 0:Or.getIdToken)==null?void 0:ee.call(Or,!0)),Ks=await fetch("/api/admin/users/list",{headers:ja?{Authorization:`Bearer ${ja}`}:{}});Ks.ok&&(We=(await Ks.json()).data||[],J.debug("Users loaded after token refresh",{count:We.length}))}catch(Or){J.debug("Retry after token refresh failed",{error:Or})}}else J.warn("Users API request failed",{status:Ht.status}),We=[]}catch(Ae){J.debug("Failed to load users from API",{error:Ae}),We=[]}J.debug("Raw users from database",{users:We});const ot=We.filter(Ae=>!!Ae.id).map(Ae=>{var Or;const Ht=it.filter(ja=>ja.userId===Ae.id),pn=Ht.reduce((ja,Ks)=>ja+Ks.total,0);return J.debug("Processing user",{email:Ae.email,orders:Ht.length,spent:pn,createdAt:Ae.createdAt}),{id:Ae.id,name:Ae.displayName||((Or=Ae.email)==null?void 0:Or.split("@")[0])||"Unknown",email:Ae.email||"",orders:Ht.length,spent:pn,joined:Ae.createdAt||null,role:(Ae!=null&&Ae.role?String(Ae.role):"user").toLowerCase(),accountType:(Ae==null?void 0:Ae.accountType)||"general",companyName:(Ae==null?void 0:Ae.companyName)||void 0}});rt(ot);const Rt=new Date,Yt=Rt.getMonth(),jr=Rt.getFullYear(),tn=Rt.toLocaleDateString("en-GB",{month:"long"});ya(tn);const Ql=ot.filter(Ae=>{if(!Ae.joined)return!1;const Ht=new Date(Ae.joined);return Ht.getMonth()===Yt&&Ht.getFullYear()===jr}),Pu=ot.filter(Ae=>Ae.joined?new Date(Ae.joined).getFullYear()===jr:!1),gy=Ql.filter(Ae=>Ae.accountType!=="business").length,yy=Ql.filter(Ae=>Ae.accountType==="business").length,OP=Pu.filter(Ae=>Ae.accountType!=="business").length,TP=Pu.filter(Ae=>Ae.accountType==="business").length;Ur(Ql.length),Cr(gy),Hn(yy),Cn(Pu.length),Ga(OP),Gn(TP),J.debug("Admin Panel - Customers loaded",{count:ot.length,customers:ot,newThisMonth:Ql.length,newMembers:gy,newBusinesses:yy})}catch(ue){J.error("Admin Panel - Error loading data",{error:ue})}finally{p(!1)}},z=async()=>{try{const{fetchPCComponents:G,fetchPCOptionalExtras:ee}=await Ie(async()=>{const{fetchPCComponents:Fe,fetchPCOptionalExtras:Ge}=await import("./index-C09NoPC0.js").then(it=>it.ct);return{fetchPCComponents:Fe,fetchPCOptionalExtras:Ge}},__vite__mapDeps([0,1,2,3,4])),[ue,we]=await Promise.all([G().catch(Fe=>(J.error("❌ Error fetching PC components",{err:Fe}),[])),ee().catch(Fe=>(J.error("❌ Error fetching optional extras",{err:Fe}),[]))]),tt=((ue==null?void 0:ue.length)||0)+((we==null?void 0:we.length)||0);ge(tt),J.debug("📊 Total products for dashboard",{total:tt,components:(ue==null?void 0:ue.length)||0,extras:(we==null?void 0:we.length)||0})}catch(G){J.error("Admin Panel - Error loading total products",{error:G}),ge(0)}},K=async()=>{var G,ee,ue,we,tt,Fe;try{J.debug("Admin Panel - Loading analytics data");const Ge=await sC(30);B(Ge);try{J.debug("📊 [AdminPanel] Loading monthly visitor stats...");let it="";try{const{auth:We}=await Ie(async()=>{const{auth:Rt}=await import("./index-C09NoPC0.js").then(Yt=>Yt.cq);return{auth:Rt}},__vite__mapDeps([0,1,2,3,4])),ot=We==null?void 0:We.currentUser;ot&&typeof ot.getIdToken=="function"?(it=await ot.getIdToken(!0),J.debug("🔑 [AdminPanel] Auth token obtained for visitor stats")):J.warn("⚠️ [AdminPanel] No current user for auth token")}catch(We){J.error("❌ [AdminPanel] Error getting auth token",{error:We})}try{const We=new Date,ot=new Date(We.getFullYear(),We.getMonth()+1,0).getDate(),Rt=await fetch(`/api/admin/analytics/visitors?period=${ot}`,{headers:it?{Authorization:`Bearer ${it}`}:{}});if(J.debug("📊 [AdminPanel] Visitors API response status",{status:Rt.status,ok:Rt.ok}),Rt.ok){const Yt=await Rt.json();J.debug("📊 [AdminPanel] Visitors API response data",{visitorsData:Yt});const jr=((ee=(G=Yt.data)==null?void 0:G.summary)==null?void 0:ee.monthly)||0,tn=((we=(ue=Yt.data)==null?void 0:ue.summary)==null?void 0:we.totalPageViews)||0;He(jr),It(tn),J.success("✅ [AdminPanel] Monthly visitors loaded",{visitors:jr,pageViews:tn,period:ot})}else{const Yt=await Rt.text();J.error("❌ [AdminPanel] Visitors API failed",{status:Rt.status,error:Yt}),He(0),It(0)}}catch(We){J.error("❌ [AdminPanel] Failed to load visitor stats",{error:We}),He(0),It(0)}}catch(it){J.error("❌ [AdminPanel] Outer error in visitor stats",{error:it}),He(0),It(0)}J.debug("Analytics loaded",{analytics:Ge});try{J.debug("📲 [AdminPanel] Loading PWA installation stats...");let it="";try{const{auth:We}=await Ie(async()=>{const{auth:Rt}=await import("./index-C09NoPC0.js").then(Yt=>Yt.cq);return{auth:Rt}},__vite__mapDeps([0,1,2,3,4])),ot=We==null?void 0:We.currentUser;ot&&typeof ot.getIdToken=="function"?(it=await ot.getIdToken(!0),J.debug("🔑 [AdminPanel] Auth token obtained for PWA stats")):J.warn("⚠️ [AdminPanel] No current user for PWA stats")}catch(We){J.error("❌ [AdminPanel] Error getting auth token for PWA",{error:We})}try{const We=await fetch("/api/analytics/pwa-stats",{headers:it?{Authorization:`Bearer ${it}`}:{}});if(J.debug("📲 [AdminPanel] PWA API response status",{status:We.status,ok:We.ok}),We.ok){const ot=await We.json();J.debug("📲 [AdminPanel] PWA API response data",{pwaData:ot});const Rt=((tt=ot.data)==null?void 0:tt.installs)||ot.installs||0,Yt=((Fe=ot.data)==null?void 0:Fe.dismissals)||ot.dismissals||0,jr=Rt+Yt,tn=jr>0?Rt/jr*100:0;On({installs:Rt,dismissals:Yt,promptShown:jr,installRate:Math.round(tn)}),J.success("✅ [AdminPanel] PWA stats loaded",{installs:Rt,dismissals:Yt,promptShown:jr,installRate:Math.round(tn)})}else{const ot=await We.text();J.error("❌ [AdminPanel] PWA API failed",{status:We.status,error:ot}),On({installs:0,dismissals:0,promptShown:0,installRate:0})}}catch(We){J.error("❌ [AdminPanel] Failed to load PWA stats",{error:We}),On({installs:0,dismissals:0,promptShown:0,installRate:0})}}catch(it){J.error("❌ [AdminPanel] Outer error in PWA stats",{error:it}),On({installs:0,dismissals:0,promptShown:0,installRate:0})}}catch(Ge){J.error("Admin Panel - Error loading analytics",{error:Ge})}},Y=async()=>{try{J.debug("Admin Panel - Loading support tickets and refund requests");const G=await Jn(),ee=await iC();wr(G),Qa(ee),Xa(null),J.debug("Loaded tickets and refunds",{tickets:G.length,refunds:ee.length})}catch(G){J.error("Admin Panel - Error loading tickets/refunds",{error:G});const ee=G,ue=(ee&&typeof ee.code=="string"?`(${ee.code}) `:"")+(G instanceof Error?G.message:"Failed to load support tickets");Xa(ue)}};if(e){try{const ee=sessionStorage.getItem("admin_orders_cache_v1");if(ee){const tt=[...JSON.parse(ee).map(Fe=>{const Ge=Fe;return{...Ge,orderDate:Ge.orderDate?new Date(Ge.orderDate):null,bankTransferVerifiedAt:Ge.bankTransferVerifiedAt?new Date(Ge.bankTransferVerifiedAt):void 0}})].sort((Fe,Ge)=>{const it=Fe.orderDate instanceof Date&&!isNaN(Fe.orderDate.getTime())?Fe.orderDate.getTime():0;return(Ge.orderDate instanceof Date&&!isNaN(Ge.orderDate.getTime())?Ge.orderDate.getTime():0)-it});vt(tt),_e(tt.slice(0,5))}}catch{}j(),K(),z(),Y(),(async()=>{try{const ee=localStorage.getItem("vortex_last_admin_login"),ue=ee?new Date(ee):new Date(Date.now()-10080*60*1e3);Se(ue);const{db:we}=await Ie(async()=>{const{db:tt}=await import("./index-C09NoPC0.js").then(Fe=>Fe.cq);return{db:tt}},__vite__mapDeps([0,1,2,3,4]));if(we){const{collection:tt,getDocs:Fe,where:Ge,query:it}=await Ie(async()=>{const{collection:ot,getDocs:Rt,where:Yt,query:jr}=await import("./firebase-D5dyMTPx.js").then(tn=>tn.B);return{collection:ot,getDocs:Rt,where:Yt,query:jr}},[]),We=it(tt(we,"security_events"),Ge("timestamp",">=",ue));try{const Rt=(await Fe(We)).docs.map(Yt=>{var tn;const jr=Yt.data();return{id:Yt.id,type:jr.type||"unknown",timestamp:((tn=jr.timestamp)==null?void 0:tn.toDate())||new Date,description:jr.description||"Security event detected"}});Q(Rt)}catch(ot){J.debug("No security events collection found",{err:ot}),Q([])}}localStorage.setItem("vortex_last_admin_login",new Date().toISOString())}catch(ee){J.error("Error loading security data",{error:ee})}})()}else J.warn("Non-admin user: skipping admin data loads."),p(!1)},[e,a,t]),k.useEffect(()=>{x==="customers"&&!mn.current&&e&&!a&&t&&(mn.current=!0,ku())},[x,e,a,t,ku]),k.useEffect(()=>{if(!_n||!e)return;const j=setInterval(async()=>{try{let z=await Zl(1200,600);(!z||z.length===0)&&(z=await so(1e3));const Y=[...yc(jo(z))].sort((G,ee)=>{const ue=G.orderDate instanceof Date&&!isNaN(G.orderDate.getTime())?G.orderDate.getTime():0;return(ee.orderDate instanceof Date&&!isNaN(ee.orderDate.getTime())?ee.orderDate.getTime():0)-ue});vt(Y),_e(Y.slice(0,5)),Tn(new Date);try{const G=Y.map(ee=>({...ee,orderDate:ee.orderDate instanceof Date?ee.orderDate.toISOString():null,bankTransferVerifiedAt:ee.bankTransferVerifiedAt instanceof Date?ee.bankTransferVerifiedAt.toISOString():null}));sessionStorage.setItem("admin_orders_cache_v1",JSON.stringify(G))}catch{}}catch(z){J.warn("Auto refresh failed",{e:z})}},6e4);return()=>clearInterval(j)},[_n,e]);const NP=j=>{Xe(j),$r(j.progress||0),Tt(j.status),Zt(""),$e(!0)},SP=async()=>{if(ne!=null&&ne.id)try{await oC(ne.id,Vt,Lr,Zr);const j=await so(1e3),z=yc(jo(j));vt(z),_e(z.slice(0,5)),$e(!1),alert("Build progress updated successfully!")}catch(j){J.error("Error updating build progress",{error:j}),alert("Failed to update build progress. Please try again.")}},kP=j=>{ba(j),Ja(!0),Yn(!0)},AP=async()=>{if(!(Wt!=null&&Wt.id)){te.error("Order ID is missing"),J.error("Delete attempt with no order ID",{orderToDelete:Wt});return}wa(!0);try{J.info("Deleting order",{orderId:Wt.id,orderId2:Wt.orderId});const j=await lC(Wt.id,{rejectRefundRequests:va});vt(z=>z.filter(K=>K.id!==Wt.id)),_e(z=>z.filter(K=>K.id!==Wt.id)),va&&Qa(z=>z.map(K=>K.orderId===Wt.id&&K.status==="pending"?{...K,status:"rejected"}:K)),te.success(`Order deleted${j.refundRequestsRejected>0?` (${j.refundRequestsRejected} refund request(s) rejected)`:""}`)}catch(j){J.error("Delete order failed",{error:j,orderId:Wt.id}),te.error(j instanceof Error?j.message:"Failed to delete order.")}finally{wa(!1),Yn(!1),ba(null)}},PP=async()=>{if(!Nt){te.error("No alert selected");return}try{const{db:j}=await Ie(async()=>{const{db:Y}=await import("./index-C09NoPC0.js").then(G=>G.cq);return{db:Y}},__vite__mapDeps([0,1,2,3,4]));if(!j){te.error("Database unavailable");return}const{doc:z,deleteDoc:K}=await Ie(async()=>{const{doc:Y,deleteDoc:G}=await import("./firebase-D5dyMTPx.js").then(ee=>ee.B);return{doc:Y,deleteDoc:G}},[]);await K(z(j,"security_events",Nt.id)),Q(Y=>Y.filter(G=>G.id!==Nt.id)),te.success("Security alert deleted"),Vs(!1)}catch(j){te.error(j instanceof Error?j.message:"Failed to delete alert")}},CP=async()=>{if(!Nt){te.error("No alert selected");return}Rg(!0);try{const j=Nt.severity||"High",z=Nt.status||"Requires Review",K=Nt.timestamp instanceof Date?Nt.timestamp:new Date,Y=`Security Alert: ${Nt.type} (Severity: ${j})`,G=["Investigate the event immediately","Review system logs for related activity","Verify no unauthorized access persists","Escalate to security lead if anomalous patterns found"],ee=`
        <h2 style="margin:0 0 12px;font-size:20px;font-weight:600;">Security Alert Detected</h2>
        <table style="width:100%;border-collapse:collapse;margin-bottom:16px;">
          <tr><td style="padding:4px 8px;font-weight:600;background:#0f172a;color:#fff;">Alert ID</td><td style="padding:4px 8px;background:#1e293b;color:#fff;">${Nt.id}</td></tr>
          <tr><td style="padding:4px 8px;font-weight:600;background:#0f172a;color:#fff;">Type</td><td style="padding:4px 8px;background:#1e293b;color:#fff;">${Nt.type}</td></tr>
          <tr><td style="padding:4px 8px;font-weight:600;background:#0f172a;color:#fff;">Detected At</td><td style="padding:4px 8px;background:#1e293b;color:#fff;">${K.toLocaleString("en-GB")}</td></tr>
          <tr><td style="padding:4px 8px;font-weight:600;background:#0f172a;color:#fff;">Severity</td><td style="padding:4px 8px;background:#1e293b;color:#fff;">${j}</td></tr>
          <tr><td style="padding:4px 8px;font-weight:600;background:#0f172a;color:#fff;">Status</td><td style="padding:4px 8px;background:#1e293b;color:#fff;">${z}</td></tr>
        </table>
        <h3 style="margin:0 0 8px;font-size:16px;font-weight:600;">Event Description</h3>
        <p style="margin:0 0 16px;font-size:14px;line-height:1.5;">${Nt.description||"No description provided."}</p>
        <h3 style="margin:0 0 8px;font-size:16px;font-weight:600;">Recommended Actions</h3>
        <ol style="margin:0 0 16px;padding-left:18px;font-size:14px;line-height:1.5;">${G.map(we=>`<li>${we}</li>`).join("")}</ol>
        <p style="margin:0;font-size:12px;color:#64748b;">This alert was reported automatically from the Admin Dashboard. An audit snapshot has been recorded.</p>
      `,ue=w0({title:Y,preheader:`Security alert ${Nt.type} requires attention`,contentHtml:ee});await Y4({subject:Y,html:ue,preheader:Y,mode:"emails",recipients:["kevin@vortexpcs.com"]}),te.success("Security alert reported via email"),Vs(!1)}catch(j){const z=j instanceof Error?j.message:String(j);J.error("Security alert report failed",j),z.includes("503")||z.includes("SERVICE_UNAVAILABLE")?te.error("Email service not configured. Please check SMTP settings."):z.includes("401")||z.includes("403")?te.error("Authentication failed. Please re-login and try again."):z.includes("500")||z.includes("502")?te.error("Email delivery failed. Please try again or contact support."):te.error(z||"Failed to send alert email")}finally{Rg(!1)}},Au=j=>{switch(j){case"building":case"testing":return"bg-yellow-500/20 text-yellow-300 border-yellow-500/30";case"shipped":return"bg-blue-500/20 text-blue-300 border-blue-500/30";case"completed":case"delivered":return"bg-green-500/20 text-green-300 border-green-500/30";case"pending":return"bg-orange-500/20 text-orange-300 border-orange-500/30";case"pending_payment":return"bg-amber-500/20 text-amber-300 border-amber-500/30";case"in-stock":return"bg-green-500/20 text-green-300 border-green-500/30";case"low-stock":return"bg-yellow-500/20 text-yellow-300 border-yellow-500/30";case"out-of-stock":return"bg-red-500/20 text-red-300 border-red-500/30";default:return"bg-gray-500/20 text-gray-300 border-gray-500/30"}},Xl=({title:j,value:z,change:K,trend:Y,icon:G,color:ee})=>r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:j}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-2xl font-bold text-white",children:j.toLowerCase().includes("revenue")?`£${Number.isFinite(z)?z.toLocaleString():"0"}`:Number.isFinite(z)?z.toLocaleString():"0"}),r.jsx(H,{className:`${Y==="up"?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"} border-0`,children:K})]}),!e&&r.jsx(q,{className:"bg-gradient-to-r from-amber-500/10 to-red-500/10 border-amber-500/30 backdrop-blur-xl p-4 mb-6",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Dn,{className:"w-5 h-5 text-amber-400 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold",children:"Admin access required"}),r.jsx("p",{className:"text-gray-300 text-sm",children:"You’re viewing a limited version of the Admin Panel. Sign in with an administrator account to manage orders, customers, and content."})]})]})})]}),r.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-r ${ee} flex items-center justify-center`,children:r.jsx(G,{className:"w-6 h-6 text-white"})})]})});return r.jsx(ky,{componentName:"AdminPanel",children:r.jsx("div",{className:"min-h-screen py-12 sm:py-16 md:py-20",children:r.jsx("div",{className:"container mx-auto px-3 sm:px-4 md:px-6",children:r.jsxs("div",{className:"max-w-[1480px] mx-auto",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 sm:mb-8 gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[r.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-r from-red-500 to-pink-500 flex items-center justify-center flex-shrink-0",children:r.jsx(Dn,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white truncate",children:"Admin Dashboard"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-400 truncate",children:"Manage your Vortex PCs operations"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 w-full sm:w-auto",children:[r.jsxs("div",{className:"text-right mr-2 hidden sm:block",children:[r.jsx("p",{className:"text-sm text-white font-medium truncate",children:(n==null?void 0:n.displayName)||(t==null?void 0:t.displayName)||(t==null?void 0:t.email)||"Admin"}),r.jsx("p",{className:"text-xs text-gray-400",children:"Administrator"})]}),r.jsxs($,{variant:"outline",size:"default",onClick:async()=>{if(window.confirm("Are you sure you want to logout from the admin panel?")){try{localStorage.removeItem("vortex_user");const{logoutUser:j}=await Ie(async()=>{const{logoutUser:z}=await import("./index-C09NoPC0.js").then(K=>K.cs);return{logoutUser:z}},__vite__mapDeps([0,1,2,3,4]));await j()}catch(j){J.error("Admin logout error:",j)}window.location.href="/"}},className:"border-red-500/30 text-red-400 hover:bg-red-500/10 hover:border-red-500/50",children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Logout"]}),e&&r.jsxs(r.Fragment,{children:[r.jsxs($,{variant:"outline",size:"default",onClick:()=>{Gg(""),Ji(null),Rl(!0)},className:"border-sky-500/30 text-sky-400 hover:bg-sky-500/10",title:"Unblock a blocked IP",children:[r.jsx(rc,{className:"w-4 h-4 mr-2"}),"Unblock IP"]}),r.jsxs($,{variant:"outline",size:"default",onClick:()=>{Xg(""),Jg(""),Zi(null),Ll(!0)},className:"border-green-500/30 text-green-400 hover:bg-green-500/10",title:"Add IP to whitelist (never blocked)",children:[r.jsx(ec,{className:"w-4 h-4 mr-2"}),"Whitelist IP"]})]}),r.jsxs($,{variant:"premium",size:"default",onClick:()=>b("search"),children:[r.jsx(js,{className:"w-4 h-4 mr-2"}),"Search Analytics"]})]})]}),r.jsxs(Nc,{value:x,onValueChange:j=>{b(j);const z=`#${j}`;window.location.hash!==z&&(window.location.hash=z)},className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-8 bg-gradient-to-l from-black/80 to-transparent pointer-events-none z-10 md:hidden"}),r.jsx("div",{className:"overflow-x-auto scrollbar-thin scrollbar-track-transparent scrollbar-thumb-white/10 hover:scrollbar-thumb-white/20 -mx-3 sm:mx-0 px-3 sm:px-0",children:r.jsxs(Sc,{className:"inline-flex md:flex md:flex-wrap w-full md:w-auto items-center md:content-center md:justify-center gap-1.5 sm:gap-2 bg-black/60 backdrop-blur-xl border-b border-white/10 px-2 sm:px-3 md:px-6 lg:px-8 py-3 md:py-12 min-w-max md:min-w-0",children:[r.jsx(ht,{value:"dashboard",className:"inline-flex items-center gap-1.5 sm:gap-2 px-2.5 sm:px-3 md:px-4 py-2 sm:py-2.5 md:py-6 rounded-md border border-white/10 bg-white/5 text-[11px] sm:text-xs md:text-sm text-white hover:border-sky-500/30 data-[state=active]:border-sky-500/40 data-[state=active]:bg-sky-500/10 whitespace-nowrap",children:"Dashboard"}),r.jsx(ht,{value:"orders",className:"inline-flex items-center gap-1.5 sm:gap-2 px-2.5 sm:px-3 md:px-4 py-2 sm:py-2.5 md:py-6 rounded-md border border-white/10 bg-white/5 text-[11px] sm:text-xs md:text-sm text-white hover:border-sky-500/30 data-[state=active]:border-sky-500/40 data-[state=active]:bg-sky-500/10 whitespace-nowrap",children:"Orders"}),r.jsx(ht,{value:"inventory",className:"inline-flex items-center gap-1.5 sm:gap-2 px-2.5 sm:px-3 md:px-4 py-2 sm:py-2.5 md:py-6 rounded-md border border-white/10 bg-white/5 text-[11px] sm:text-xs md:text-sm text-white hover:border-sky-500/30 data-[state=active]:border-sky-500/40 data-[state=active]:bg-sky-500/10 whitespace-nowrap",children:"Inventory"}),r.jsx(ht,{value:"customers",className:"inline-flex items-center gap-1.5 sm:gap-2 px-2.5 sm:px-3 md:px-4 py-2 sm:py-2.5 md:py-6 rounded-md border border-white/10 bg-white/5 text-[11px] sm:text-xs md:text-sm text-white hover:border-sky-500/30 data-[state=active]:border-sky-500/40 data-[state=active]:bg-sky-500/10 whitespace-nowrap",children:"Customers"}),r.jsx(ht,{value:"support",className:"inline-flex items-center gap-1.5 sm:gap-2 px-2.5 sm:px-3 md:px-4 py-2 sm:py-2.5 md:py-6 rounded-md border border-white/10 bg-white/5 text-[11px] sm:text-xs md:text-sm text-white hover:border-sky-500/30 data-[state=active]:border-sky-500/40 data-[state=active]:bg-sky-500/10 whitespace-nowrap",children:"Support"}),r.jsx(ht,{value:"analytics",className:"inline-flex items-center gap-1.5 sm:gap-2 px-2.5 sm:px-3 md:px-4 py-2 sm:py-2.5 md:py-6 rounded-md border border-white/10 bg-white/5 text-[11px] sm:text-xs md:text-sm text-white hover:border-sky-500/30 data-[state=active]:border-sky-500/40 data-[state=active]:bg-sky-500/10 whitespace-nowrap",children:"Analytics"}),r.jsx(ht,{value:"recommendations",className:"inline-flex items-center gap-1.5 sm:gap-2 px-2.5 sm:px-3 md:px-4 py-2 sm:py-2.5 md:py-6 rounded-md border border-white/10 bg-white/5 text-[11px] sm:text-xs md:text-sm text-white hover:border-sky-500/30 data-[state=active]:border-sky-500/40 data-[state=active]:bg-sky-500/10 whitespace-nowrap",children:"Recommendations"}),r.jsx(ht,{value:"reports",className:"inline-flex items-center gap-1.5 sm:gap-2 px-2.5 sm:px-3 md:px-4 py-2 sm:py-2.5 md:py-6 rounded-md border border-white/10 bg-white/5 text-[11px] sm:text-xs md:text-sm text-white hover:border-sky-500/30 data-[state=active]:border-sky-500/40 data-[state=active]:bg-sky-500/10 whitespace-nowrap",children:"Reports"}),r.jsx(ht,{value:"monitoring",className:"inline-flex items-center gap-1.5 sm:gap-2 px-2.5 sm:px-3 md:px-4 py-2 sm:py-2.5 md:py-6 rounded-md border border-white/10 bg-white/5 text-[11px] sm:text-xs md:text-sm text-white hover:border-sky-500/30 data-[state=active]:border-sky-500/40 data-[state=active]:bg-sky-500/10 whitespace-nowrap",children:"Monitoring"}),r.jsx(ht,{value:"performance",className:"inline-flex items-center gap-1.5 sm:gap-2 px-2.5 sm:px-3 md:px-4 py-2 sm:py-2.5 md:py-6 rounded-md border border-white/10 bg-white/5 text-[11px] sm:text-xs md:text-sm text-white hover:border-sky-500/30 data-[state=active]:border-sky-500/40 data-[state=active]:bg-sky-500/10 whitespace-nowrap",children:"Performance"}),r.jsx(ht,{value:"security",className:"inline-flex items-center gap-1.5 sm:gap-2 px-2.5 sm:px-3 md:px-4 py-2 sm:py-2.5 md:py-6 rounded-md border border-white/10 bg-white/5 text-[11px] sm:text-xs md:text-sm text-white hover:border-sky-500/30 data-[state=active]:border-sky-500/40 data-[state=active]:bg-sky-500/10 whitespace-nowrap",children:"Security"}),r.jsx(ht,{value:"content",className:"inline-flex items-center gap-1.5 sm:gap-2 px-2.5 sm:px-3 md:px-4 py-2 sm:py-2.5 md:py-6 rounded-md border border-white/10 bg-white/5 text-[11px] sm:text-xs md:text-sm text-white hover:border-sky-500/30 data-[state=active]:border-sky-500/40 data-[state=active]:bg-sky-500/10 whitespace-nowrap",children:"Content"}),r.jsx(ht,{value:"email",className:"inline-flex items-center gap-1.5 sm:gap-2 px-2.5 sm:px-3 md:px-4 py-2 sm:py-2.5 md:py-6 rounded-md border border-white/10 bg-white/5 text-[11px] sm:text-xs md:text-sm text-white hover:border-sky-500/30 data-[state=active]:border-sky-500/40 data-[state=active]:bg-sky-500/10 whitespace-nowrap",children:"Marketing"})]})})]}),r.jsxs(lt,{value:"security",className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[r.jsx(rc,{className:"w-6 h-6 text-red-400"}),"Security Controls"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Manage security settings, multi-factor authentication, and IP access."})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs($,{variant:"outline",className:"border-white/20 text-white hover:bg-white/10",onClick:async()=>{if(t){Xn(!0);try{let j="";try{const{auth:Y}=await Ie(async()=>{const{auth:ee}=await import("./index-C09NoPC0.js").then(ue=>ue.cq);return{auth:ee}},__vite__mapDeps([0,1,2,3,4])),G=Y==null?void 0:Y.currentUser;G&&typeof G.getIdToken=="function"&&(j=await G.getIdToken())}catch(Y){J.error("Failed to get ID token:",Y)}if(!j){J.debug("Skipping IP blocks load - no auth token"),Xn(!1);return}const{listIpBlocks:z}=await Ie(async()=>{const{listIpBlocks:Y}=await import("./index-C09NoPC0.js").then(G=>G.cu);return{listIpBlocks:Y}},__vite__mapDeps([0,1,2,3,4])),K=await z(j,{includeUnblocked:Ws,page:Hs,limit:Gs,search:Za});Fl(K.entries.map(Y=>({id:Y.id,ip:Y.ip,attempts:Y.attempts,blocked:Y.blocked,blockedAt:Y.blockedAt,reason:Y.reason??null,lastEmailTried:Y.lastEmailTried??null}))),Ul(K.totalPages),zl(K.total),Vl(K.count),Wl(K.hasNext),Hl(K.hasPrev)}catch{te.error("Failed to load IP blocks")}finally{Xn(!1)}}},children:[r.jsx(Bt,{className:`w-4 h-4 mr-2 ${eo?"animate-spin":""}`}),"Refresh"]}),r.jsx($,{variant:"outline",className:"border-white/20 text-white hover:bg-white/10",onClick:()=>fP(j=>!j),children:Ws?"Hide Unblocked":"Show All"})]})]}),r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:[r.jsxs("h4",{className:"text-lg font-bold text-white flex items-center gap-2 mb-4",children:[r.jsx(ec,{className:"w-5 h-5 text-sky-400"}),"Multi-Factor Authentication"]}),r.jsx("p",{className:"text-gray-400 mb-4",children:"Add an extra layer of security to your admin account with MFA. Use an authenticator app or SMS to verify your identity."}),r.jsx(y9,{})]}),r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:[r.jsxs("div",{className:"flex flex-col gap-3 mb-4",children:[r.jsxs("h4",{className:"text-base sm:text-lg font-bold text-white flex items-center gap-2",children:[r.jsx(OC,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-400 flex-shrink-0"}),r.jsxs("span",{className:"truncate",children:["Blocked IPs (",yu.filter(j=>j.blocked).length,")"]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full",children:[r.jsx("input",{type:"text",placeholder:"Search IP or email…",className:"bg-black/40 border border-white/15 rounded px-3 py-2 text-sm text-white placeholder:text-gray-500 focus:outline-none focus:border-sky-500/50 w-full sm:flex-1",value:bu,onChange:j=>bP(j.target.value)}),r.jsx("select",{className:"bg-black/40 border border-white/15 rounded px-2 py-2 text-sm text-white focus:outline-none focus:border-sky-500/50 w-full sm:w-auto",value:Gs,onChange:j=>{mP(Number(j.target.value)),ql(1)},children:[10,25,50,100].map(j=>r.jsxs("option",{value:j,children:[j," / page"]},j))}),r.jsxs($,{variant:"outline",className:"border-sky-500/30 text-sky-400 hover:bg-sky-500/10",onClick:async()=>{if(t){Xn(!0);try{let j="";try{const{auth:Y}=await Ie(async()=>{const{auth:ee}=await import("./index-C09NoPC0.js").then(ue=>ue.cq);return{auth:ee}},__vite__mapDeps([0,1,2,3,4])),G=Y==null?void 0:Y.currentUser;G&&typeof G.getIdToken=="function"&&(j=await G.getIdToken())}catch(Y){J.error("Failed to get ID token:",Y)}if(!j){J.debug("Skipping IP blocks load - no auth token"),Xn(!1);return}const{listIpBlocks:z}=await Ie(async()=>{const{listIpBlocks:Y}=await import("./index-C09NoPC0.js").then(G=>G.cu);return{listIpBlocks:Y}},__vite__mapDeps([0,1,2,3,4])),K=await z(j,{includeUnblocked:Ws,page:Hs,limit:Gs,search:Za});Fl(K.entries.map(Y=>({id:Y.id,ip:Y.ip,attempts:Y.attempts,blocked:Y.blocked,blockedAt:Y.blockedAt,reason:Y.reason??null,lastEmailTried:Y.lastEmailTried??null}))),Ul(K.totalPages),zl(K.total),Vl(K.count),Wl(K.hasNext),Hl(K.hasPrev)}catch{te.error("Refresh failed")}finally{Xn(!1)}}},children:[r.jsx(Bt,{className:`w-4 h-4 mr-2 ${eo?"animate-spin":""}`}),"Reload"]})]})]}),eo?r.jsxs("div",{className:"py-10 text-center",children:[r.jsx(aa,{className:"w-10 h-10 text-sky-400 animate-spin mx-auto mb-3"}),r.jsx("p",{className:"text-gray-400",children:"Loading IP entries…"})]}):yu.length===0?r.jsx("p",{className:"text-gray-400",children:"No IP entries recorded yet."}):r.jsxs("div",{className:"overflow-x-auto",children:[r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-gray-300 border-b border-white/10",children:[r.jsx("th",{className:"py-2 pr-3",children:"IP / ID"}),r.jsx("th",{className:"py-2 pr-3",children:"Attempts"}),r.jsx("th",{className:"py-2 pr-3",children:"Status"}),r.jsx("th",{className:"py-2 pr-3",children:"Last Email"}),r.jsx("th",{className:"py-2 pr-3",children:"Reason"}),r.jsx("th",{className:"py-2 pr-3",children:"Blocked At"}),r.jsx("th",{className:"py-2 pr-3",children:"Action"})]})}),r.jsx("tbody",{children:yu.map(j=>{var G;const z=!!j.blocked,K=Number(j.attempts||0),Y=(G=j.blockedAt)!=null&&G.toDate?j.blockedAt.toDate():null;return r.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[r.jsx("td",{className:"py-2 pr-3 font-mono text-white",children:j.ip||j.id}),r.jsx("td",{className:"py-2 pr-3 text-white",children:K}),r.jsx("td",{className:"py-2 pr-3",children:r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${z?"bg-red-500/20 text-red-300 border border-red-500/30":"bg-green-500/20 text-green-300 border border-green-500/30"}`,children:z?"Blocked":"Clear"})}),r.jsx("td",{className:"py-2 pr-3 text-gray-300 max-w-[160px] truncate",title:j.lastEmailTried||"",children:j.lastEmailTried||"-"}),r.jsx("td",{className:"py-2 pr-3 text-gray-300 max-w-[180px] truncate",title:j.reason||"",children:j.reason||"-"}),r.jsx("td",{className:"py-2 pr-3 text-gray-400 whitespace-nowrap",children:Y?Y.toLocaleString():"-"}),r.jsx("td",{className:"py-2 pr-3",children:z?r.jsx($,{size:"sm",variant:"outline",className:"border-sky-500/30 text-sky-400 hover:bg-sky-500/10",onClick:async()=>{if(t)try{let ee="";try{const{auth:Fe}=await Ie(async()=>{const{auth:it}=await import("./index-C09NoPC0.js").then(We=>We.cq);return{auth:it}},__vite__mapDeps([0,1,2,3,4])),Ge=Fe==null?void 0:Fe.currentUser;Ge&&typeof Ge.getIdToken=="function"&&(ee=await Ge.getIdToken())}catch(Fe){J.error("Failed to get ID token:",Fe)}if(!ee){te.error("Unable to unblock - authentication required");return}const{unblockIp:ue,listIpBlocks:we}=await Ie(async()=>{const{unblockIp:Fe,listIpBlocks:Ge}=await import("./index-C09NoPC0.js").then(it=>it.cu);return{unblockIp:Fe,listIpBlocks:Ge}},__vite__mapDeps([0,1,2,3,4]));if(await ue(j.ip||j.id,ee)){te.success(`Unblocked ${j.ip||j.id}`);const Fe=await we(ee,{includeUnblocked:Ws,page:Hs,limit:Gs,search:Za});Fl(Fe.entries.map(Ge=>({id:Ge.id,ip:Ge.ip,attempts:Ge.attempts,blocked:Ge.blocked,blockedAt:Ge.blockedAt,reason:Ge.reason??null,lastEmailTried:Ge.lastEmailTried??null}))),Ul(Fe.totalPages),zl(Fe.total),Vl(Fe.count),Wl(Fe.hasNext),Hl(Fe.hasPrev)}else te.error("Unblock failed");return}catch{te.error("Unblock error")}},children:"Unblock"}):r.jsx("span",{className:"text-gray-500",children:"—"})})]},j.id)})})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mt-4 gap-3",children:[r.jsxs("div",{className:"text-xs text-gray-400",children:["Page ",Hs," of ",pP||1," • Showing ",yP," / ",gP," entries",Za&&r.jsxs("span",{className:"ml-1",children:['for "',Za,'"']})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx($,{size:"sm",variant:"outline",disabled:!ry||eo,className:"border-white/20 text-white disabled:opacity-40",onClick:()=>ry&&ql(j=>Math.max(1,j-1)),children:"Prev"}),r.jsx($,{size:"sm",variant:"outline",disabled:!ty||eo,className:"border-white/20 text-white disabled:opacity-40",onClick:()=>ty&&ql(j=>j+1),children:"Next"})]})]})]})]})]}),r.jsxs(lt,{value:"dashboard",className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[r.jsx(Xl,{title:"Total Orders",value:me.orders.total,change:me.orders.change,trend:me.orders.trend,icon:In,color:"from-blue-500 to-cyan-500"}),r.jsx(Xl,{title:"Revenue",value:me.revenue.total,change:me.revenue.change,trend:me.revenue.trend,icon:S0,color:"from-green-500 to-emerald-500"}),r.jsx(Xl,{title:"Customers",value:me.customers.total,change:me.customers.change,trend:me.customers.trend,icon:_a,color:"from-purple-500 to-pink-500"}),r.jsx(Xl,{title:"Active Builds",value:me.builds.total,change:me.builds.change,trend:me.builds.trend,icon:io,color:"from-orange-500 to-red-500"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Total Products"}),r.jsx("p",{className:"text-3xl font-bold text-white mb-1",children:I>0?I:"N/A"}),r.jsx("p",{className:"text-xs text-gray-400",children:"Listed in inventory"})]}),r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-sky-500 to-blue-500 flex items-center justify-center flex-shrink-0",children:r.jsx(In,{className:"w-6 h-6 text-white"})})]})}),r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Monthly Visitors"}),r.jsxs("div",{className:"flex items-baseline gap-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-3xl font-bold text-white",children:Ne.toLocaleString()}),r.jsx("p",{className:"text-xs text-sky-400 mt-0.5",children:"Visitors"})]}),r.jsx("div",{className:"h-12 w-px bg-white/10"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-3xl font-bold text-white",children:bt.toLocaleString()}),r.jsx("p",{className:"text-xs text-sky-400 mt-0.5",children:"Page Views"})]})]})]}),r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-violet-500 to-purple-500 flex items-center justify-center flex-shrink-0",children:r.jsx(zt,{className:"w-6 h-6 text-white"})})]}),r.jsx("p",{className:"text-xs text-gray-400",children:"Current month statistics"})]}),r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"PWA Installs"}),r.jsx("p",{className:"text-3xl font-bold text-white mb-1",children:xr.installs}),r.jsxs("p",{className:"text-xs text-gray-400",children:[xr.installRate,"% install rate •"," ",xr.dismissals," dismissed"]})]}),r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-cyan-500 to-blue-500 flex items-center justify-center flex-shrink-0",children:r.jsx(jn,{className:"w-6 h-6 text-white"})})]}),xr.promptShown>0&&r.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-gray-400",children:"Accepted"}),r.jsx("span",{className:"text-green-400 font-medium",children:xr.installs})]}),r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-gray-400",children:"Dismissed"}),r.jsx("span",{className:"text-orange-400 font-medium",children:xr.dismissals})]}),r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-gray-400",children:"Total Shown"}),r.jsx("span",{className:"text-gray-300 font-medium",children:xr.promptShown})]})]})})]}),r.jsxs(q,{className:`border backdrop-blur-xl p-6 ${U.length>0?"bg-gradient-to-r from-red-500/10 to-orange-500/10 border-red-500/30":"bg-white/5 border-white/10"}`,children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Security Alerts"}),r.jsx("p",{className:`text-3xl font-bold mb-1 ${U.length>0?"text-red-400":"text-green-400"}`,children:U.length}),r.jsx("p",{className:"text-xs text-gray-400",children:ae?`Since ${new Date(ae).toLocaleDateString("en-GB")}`:"Since last login"})]}),r.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 ${U.length>0?"bg-gradient-to-r from-red-500 to-orange-500":"bg-gradient-to-r from-green-500 to-emerald-500"}`,children:r.jsx(rc,{className:"w-6 h-6 text-white"})})]}),U.length>0&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10",children:[r.jsx("div",{className:"space-y-2",children:U.slice(0,3).map(j=>r.jsxs("div",{className:"flex items-start space-x-2 p-2 rounded-lg hover:bg-white/5 cursor-pointer transition-colors",onClick:()=>{Il(j),Vs(!0)},children:[r.jsx(mt,{className:"w-4 h-4 text-red-400 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-xs text-gray-300",children:j.description}),r.jsx("p",{className:"text-xs text-gray-500",children:new Date(j.timestamp).toLocaleString("en-GB")})]})]},j.id))}),U.length>3&&r.jsxs($,{variant:"ghost",size:"sm",className:"text-xs text-gray-400 hover:text-white mt-2 w-full",onClick:()=>{U.length>0&&(Il(U[0]),Vs(!0))},children:["View all ",U.length," alerts"]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-bold text-white",children:["Customer Acquisition - ",Ka," 2025"]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"New Customers"}),r.jsx("p",{className:"text-3xl font-bold text-white mb-1",children:Ar}),r.jsxs("p",{className:"text-xs text-gray-400",children:["This month • ",Jr," this year"]})]}),r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-500 flex items-center justify-center flex-shrink-0",children:r.jsx(_a,{className:"w-6 h-6 text-white"})})]})}),r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"New Members"}),r.jsx("p",{className:"text-3xl font-bold text-white mb-1",children:Pr}),r.jsxs("p",{className:"text-xs text-gray-400",children:["This month • ",Ha," this year"]})]}),r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-blue-500 to-indigo-500 flex items-center justify-center flex-shrink-0",children:r.jsx(Po,{className:"w-6 h-6 text-white"})})]})}),r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"New Businesses"}),r.jsx("p",{className:"text-3xl font-bold text-white mb-1",children:zr}),r.jsxs("p",{className:"text-xs text-gray-400",children:["This month • ",sr," this year"]})]}),r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-amber-500 to-orange-500 flex items-center justify-center flex-shrink-0",children:r.jsx(rC,{className:"w-6 h-6 text-white"})})]})})]})]}),(en.length>0||jt.filter(j=>j.status==="open").length>0)&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[en.length>0&&r.jsx(q,{className:"bg-gradient-to-r from-red-500/10 to-orange-500/10 border-red-500/30 backdrop-blur-xl p-6",children:r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-red-500 to-orange-500 flex items-center justify-center flex-shrink-0",children:r.jsx(mt,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-lg font-bold text-white mb-1",children:"Refund Requests Pending"}),r.jsxs("p",{className:"text-gray-300 text-sm mb-3",children:[en.length," customer",en.length>1?"s have":" has"," ","requested refunds"]}),r.jsx($,{size:"sm",onClick:()=>b("orders"),className:"bg-red-600 hover:bg-red-500",children:"Review Requests"})]})]})}),jt.filter(j=>j.status==="open").length>0&&r.jsx(q,{className:"bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-blue-500/30 backdrop-blur-xl p-6",children:r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-blue-500 to-cyan-500 flex items-center justify-center flex-shrink-0",children:r.jsx(na,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-lg font-bold text-white mb-1",children:"Open Support Tickets"}),r.jsxs("p",{className:"text-gray-300 text-sm mb-3",children:[jt.filter(j=>j.status==="open").length," ","ticket",jt.filter(j=>j.status==="open").length>1?"s need":" needs"," ","attention"]}),r.jsx($,{size:"sm",onClick:()=>b("customers"),className:"bg-blue-600 hover:bg-blue-500",children:"View Tickets"})]})]})})]}),r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-white",children:"Recent Orders"}),r.jsx($,{variant:"outline",className:"border-white/20 text-white hover:bg-white/10",onClick:()=>b("orders"),children:"View All Orders"})]}),g?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(aa,{className:"w-12 h-12 text-sky-400 animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400",children:"Loading orders..."})]}):qe.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(In,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No Orders Yet"}),r.jsx("p",{className:"text-gray-400",children:"Orders will appear here once customers start purchasing."})]}):r.jsx("div",{className:"space-y-3 sm:space-y-4",children:qe.map(j=>r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-3 sm:p-4 bg-white/5 rounded-lg border border-white/10 gap-3 sm:gap-0",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-4 flex-1 min-w-0",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-white",children:j.customerName}),r.jsx("div",{className:"text-sm text-gray-400",children:j.orderId})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-white",children:(()=>{const z=j.items||[];if(!z.length)return"Custom Build";if(z.length===1)return`${z[0].productName} (£${(z[0].price*z[0].quantity).toFixed(2)})`;const K=z[0],Y=z.length-1,G=(K.price*K.quantity).toFixed(2);return`${K.productName} (£${G}) + ${Y} more`})()}),r.jsx("div",{className:"text-sm text-gray-400",children:j.orderDate&&j.orderDate instanceof Date&&!isNaN(j.orderDate.getTime())?j.orderDate.toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 justify-between sm:justify-start",children:[r.jsx(H,{className:`${Au(j.status)} border text-xs`,children:ss(j.status)}),r.jsxs("div",{className:"text-right sm:text-left",children:[r.jsxs("div",{className:"font-bold text-green-400",children:["£",j.total.toLocaleString()]}),(()=>{const z=j.shippingCost,K=typeof z=="number"?z:0;return K>0?r.jsxs("div",{className:"text-xs text-gray-500",children:["incl. £",K.toFixed(2)," shipping"]}):null})(),(j.status==="building"||j.status==="testing")&&r.jsxs("div",{className:"text-sm text-gray-400",children:[j.progress,"% complete"]})]}),r.jsx($,{size:"sm",variant:"outline",className:"border-white/20 text-white hover:bg-white/10",onClick:()=>{Xe(j),vr(!0)},title:"View Order Details",children:r.jsx(kr,{className:"w-4 h-4"})})]})]},j.id))})]})]}),r.jsxs(lt,{value:"orders",className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-0",children:[r.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:"Order Management"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:space-x-3 sm:gap-0 w-full sm:w-auto",children:[r.jsxs("div",{className:"flex items-center space-x-2 w-full sm:w-auto order-1 sm:order-none",children:[r.jsx(js,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),r.jsx(xe,{placeholder:"Search orders...",className:"bg-white/5 border-white/10 text-white w-full sm:w-64 text-sm h-9"})]}),r.jsx("div",{className:"flex items-center gap-2 order-2 sm:order-none overflow-x-auto pb-1 sm:pb-0",children:(()=>{const j=El();return r.jsxs(r.Fragment,{children:[r.jsx(H,{className:"bg-blue-500/20 border-blue-500/40 text-blue-300",title:"Total orders loaded",children:`Total: ${j.total}`}),r.jsx(H,{className:"bg-green-500/20 border-green-500/40 text-green-300",title:"Primary (new schema) orders",children:`Primary: ${j.primary}`}),r.jsx(H,{className:"bg-amber-500/20 border-amber-500/40 text-amber-300",title:"Legacy (older schema) orders",children:`Legacy: ${j.legacy}`}),Ir&&r.jsx(H,{className:"bg-white/10 border-white/20 text-gray-300",title:"Last successful refresh time (auto or manual)",children:Ir.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})})()}),r.jsx($,{variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:r.jsx(Jx,{className:"w-4 h-4"})}),r.jsx($,{variant:_n?"premium":"outline",onClick:()=>Fs(j=>!j),className:_n?"bg-gradient-to-r from-green-600 to-emerald-600 text-white":"border-white/20 text-white hover:bg-white/10",title:"Toggle 60s auto refresh polling",children:_n?"Auto: On":"Auto: Off"}),r.jsxs($,{variant:"outline",disabled:Ya,onClick:async()=>{Me(!0);try{const j=await Zl(1200,600),z=yc(jo(j));vt(z),_e(z.slice(0,5)),Tn(new Date);try{const K=z.map(Y=>({...Y,orderDate:Y.orderDate instanceof Date?Y.orderDate.toISOString():null,bankTransferVerifiedAt:Y.bankTransferVerifiedAt instanceof Date?Y.bankTransferVerifiedAt.toISOString():null}));sessionStorage.setItem("admin_orders_cache_v1",JSON.stringify(K))}catch{}te.success("Orders refreshed")}catch(j){te.error(j instanceof Error?j.message:"Refresh failed")}finally{Me(!1)}},className:"border-sky-500/30 text-sky-400 hover:bg-sky-500/10",title:"Fetch latest & legacy orders",children:[r.jsx(Bt,{className:`w-4 h-4 mr-1 ${Ya?"animate-spin":""}`}),"Refresh Orders"]})]})]}),r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl overflow-hidden",children:[r.jsx("div",{className:"lg:hidden px-4 py-2 bg-sky-500/10 border-b border-sky-500/20 text-xs text-sky-300 text-center",children:"← Scroll horizontally to view all columns →"}),r.jsx("div",{className:"overflow-x-auto -webkit-overflow-scrolling-touch",children:r.jsxs(Pa,{className:"min-w-[900px]",children:[r.jsx(Ca,{children:r.jsxs(yr,{className:"border-white/10",children:[r.jsx(Le,{className:"text-white",children:"Order / Placed"}),r.jsx(Le,{className:"text-white",children:"Customer"}),r.jsx(Le,{className:"text-white",children:"Product"}),r.jsx(Le,{className:"text-white",children:"Payment"}),r.jsx(Le,{className:"text-white",children:"Status"}),r.jsx(Le,{className:"text-white",children:"Total"}),r.jsx(Le,{className:"text-white",children:"Actions"})]})}),r.jsx(Oa,{children:ze.map(j=>{var z,K;return r.jsxs(yr,{className:"border-white/10",children:[r.jsx(Re,{className:"text-white font-medium",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-semibold tracking-wide",children:j.orderId}),r.jsx("span",{className:"text-xs text-gray-400 mt-0.5",children:j.orderDate&&j.orderDate instanceof Date&&!isNaN(j.orderDate.getTime())?j.orderDate.toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Date pending"})]})}),r.jsx(Re,{children:r.jsxs("div",{className:"min-w-[150px]",children:[r.jsx("div",{className:"text-white truncate",children:j.customerName}),r.jsx("div",{className:"text-sm text-gray-400 truncate",children:j.customerEmail})]})}),r.jsx(Re,{className:"text-white min-w-[200px]",children:((K=(z=j.items)==null?void 0:z[0])==null?void 0:K.productName)||"Custom Build"}),r.jsx(Re,{children:r.jsx(H,{className:j.paymentMethod==="card"?"bg-blue-500/20 text-blue-300 border-blue-500/30 whitespace-nowrap":j.paymentMethod==="paypal"?"bg-purple-500/20 text-purple-300 border-purple-500/30 whitespace-nowrap":j.paymentMethod==="bank_transfer"?"bg-amber-500/20 text-amber-300 border-amber-500/30 whitespace-nowrap":"bg-gray-500/20 text-gray-300 border-gray-500/30 whitespace-nowrap",children:j.paymentMethod==="card"?"Card":j.paymentMethod==="paypal"?"PayPal":j.paymentMethod==="bank_transfer"?"Bank Transfer":"Unknown"})}),r.jsx(Re,{children:r.jsx(H,{className:`${Au(j.status)} border whitespace-nowrap`,children:ss(j.status)})}),r.jsxs(Re,{className:"text-green-400 font-bold whitespace-nowrap",children:[r.jsxs("div",{children:["£",j.total.toLocaleString()]}),(()=>{const Y=j.shippingCost,G=typeof Y=="number"?Y:0;return G>0?r.jsxs("div",{className:"text-xs text-gray-500",children:["incl. £",G.toFixed(2)," ship"]}):null})()]}),r.jsx(Re,{children:r.jsxs("div",{className:"flex flex-wrap gap-1.5 sm:gap-2 min-w-[200px]",children:[r.jsx($,{size:"sm",variant:"outline",className:"border-white/20 text-white hover:bg-white/10 px-2 sm:px-3",title:"View Details",onClick:()=>{Xe(j),vr(!0)},children:r.jsx(kr,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})}),r.jsxs($,{size:"sm",variant:"outline",onClick:()=>NP(j),className:"border-sky-500/30 text-sky-400 hover:bg-sky-500/10",title:"Update Build Progress",children:[r.jsx(ta,{className:"w-4 h-4 mr-1"}),j.progress,"%"]}),j.paymentMethod==="bank_transfer"&&!j.bankTransferVerified&&r.jsxs($,{size:"sm",className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-semibold shadow-lg",onClick:async()=>{try{if(!j.id){te.error("Cannot verify payment: missing order ID");return}await nC(j.id),te.success("Bank transfer verified - order moved to building"),vt(Y=>Y.map(G=>G.id===j.id?{...G,bankTransferVerified:!0,bankTransferVerifiedAt:new Date,status:G.status==="pending"||G.status==="pending_payment"?"building":G.status,progress:G.status==="pending"||G.status==="pending_payment"?5:G.progress}:G)),_e(Y=>Y.map(G=>G.id===j.id?{...G,bankTransferVerified:!0,bankTransferVerifiedAt:new Date,status:G.status==="pending"||G.status==="pending_payment"?"building":G.status,progress:G.status==="pending"||G.status==="pending_payment"?5:G.progress}:G))}catch(Y){te.error(Y instanceof Error?Y.message:"Failed to verify bank transfer")}},title:"Confirm bank transfer received",children:[r.jsx(ec,{className:"w-4 h-4 mr-1"}),"Verify Payment"]}),j.paymentMethod==="bank_transfer"&&j.bankTransferVerified&&r.jsxs(H,{className:"bg-green-500/20 border-green-500/40 text-green-400",children:[r.jsx(ec,{className:"w-3 h-3 mr-1"}),"Verified",(()=>{const Y=Q9(j.bankTransferVerifiedAt);return Y?` - ${Y}`:null})()]}),r.jsx($,{size:"sm",variant:"outline",onClick:()=>kP(j),className:"border-red-500/30 text-red-400 hover:bg-red-500/10",title:"Delete Order",children:r.jsx(Kr,{className:"w-4 h-4"})})]})})]},j.id)})})]})})]}),en.length>0&&r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(mt,{className:"w-6 h-6 text-red-400"}),r.jsx("h3",{className:"text-xl font-bold text-white",children:"Pending Refund Requests"}),r.jsxs(H,{className:"bg-red-500/20 text-red-300 border-red-500/30 border",children:[en.filter(j=>j.status==="pending").length," ","Pending"]})]})}),r.jsx("div",{className:"space-y-4",children:en.map(j=>{const z=ze.find(K=>K.id===j.orderId);return r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h4",{className:"text-lg font-bold text-white",children:z?`Order #${z.orderId}`:"Order Not Found"}),r.jsx(H,{className:`${j.status==="pending"?"bg-yellow-500/20 text-yellow-300 border-yellow-500/30":j.status==="approved"?"bg-green-500/20 text-green-300 border-green-500/30":"bg-red-500/20 text-red-300 border-red-500/30"} border`,children:ss(j.status)})]}),z&&r.jsxs("div",{className:"text-sm text-gray-400 mb-2",children:["Customer: ",z.customerName," (",z.customerEmail,")"]}),r.jsxs("div",{className:"bg-white/5 border border-white/10 rounded p-3 mb-3",children:[r.jsx("p",{className:"text-white font-semibold mb-1",children:"Reason:"}),r.jsx("p",{className:"text-gray-300 text-sm",children:j.reason})]}),r.jsxs("div",{className:"text-xs text-gray-400",children:["Requested:"," ",j.createdAt&&!isNaN(new Date(j.createdAt).getTime())?new Date(j.createdAt).toLocaleString():"Recently"]})]}),z&&r.jsxs("div",{className:"ml-4 text-right",children:[r.jsxs("div",{className:"text-green-400 font-bold text-lg mb-2",children:["£",z.total.toLocaleString()]}),j.status==="pending"&&r.jsxs("div",{className:"flex flex-col space-y-2",children:[r.jsx($,{size:"sm",className:"bg-green-600 hover:bg-green-500",onClick:()=>{alert("Refund approved! (Function to be implemented)")},children:"Approve"}),r.jsx($,{size:"sm",variant:"outline",className:"border-red-500/30 text-red-400 hover:bg-red-500/10",onClick:()=>{alert("Refund rejected! (Function to be implemented)")},children:"Reject"})]})]})]})},j.id)})})]})]}),r.jsx(lt,{value:"inventory",className:"space-y-6",children:r.jsx(ky,{componentName:"InventoryManager",children:r.jsx(YO,{})})}),r.jsxs(lt,{value:"customers",className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-white",children:"Customer Management"}),r.jsxs("p",{className:"text-gray-400 mt-1",children:[r.jsx("span",{className:"text-sky-400 font-semibold",children:Ft.length})," ","total registered members"]})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx(xe,{placeholder:"Search customers...",className:"bg-white/5 border-white/10 text-white w-64"}),r.jsx($,{onClick:()=>{J.debug("Manual refresh button clicked"),ku()},variant:"outline",className:"border-white/20 text-white hover:bg-white/10",title:e?"Refresh customer list":"Admin access required",disabled:!e,children:r.jsx(Bt,{className:"w-4 h-4"})}),r.jsx($,{variant:"outline",className:"border-white/20 text-white hover:bg-white/10",onClick:()=>{try{J9("customers.csv",Ft.map(j=>({id:j.id,name:j.name,email:j.email,orders:j.orders,spent:j.spent,joined:j.joined?new Date(j.joined).toISOString():"",accountType:j.accountType||"",companyName:j.companyName||"",role:j.role})))}catch(j){te.error(j instanceof Error?j.message:"Failed to export customers")}},children:r.jsx(jn,{className:"w-4 h-4"})}),e&&r.jsxs($,{onClick:()=>{w(!0),v(""),A(""),T(""),E(""),O(""),V(null),W(null)},className:"bg-gradient-to-r from-sky-600 to-blue-600 hover:from-sky-500 hover:to-blue-500",children:[r.jsx(dn,{className:"w-4 h-4 mr-2"}),"Create Business Account"]})]})]}),g?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(aa,{className:"w-12 h-12 text-sky-400 animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-400",children:"Loading customers..."})]}):Ft.length===0?r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-12",children:r.jsxs("div",{className:"text-center",children:[r.jsx(_a,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No Registered Customers Yet"}),r.jsx("p",{className:"text-gray-400 mb-4",children:"Customer accounts will appear here once users register on the site."}),r.jsx("div",{className:"mt-6 p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-300 mb-4",children:[r.jsx("strong",{children:"Troubleshooting:"})," Check the browser console for Firebase logs. Users must register through the site to appear here."]})})]})}):r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl overflow-hidden",children:[r.jsx("div",{className:"lg:hidden px-4 py-2 bg-sky-500/10 border-b border-sky-500/20 text-xs text-sky-300 text-center",children:"← Scroll horizontally to view all columns →"}),r.jsx("div",{className:"overflow-x-auto -webkit-overflow-scrolling-touch",children:r.jsxs(Pa,{className:"min-w-[900px]",children:[r.jsx(Ca,{children:r.jsxs(yr,{className:"border-white/10",children:[r.jsx(Le,{className:"text-white",children:"Customer"}),r.jsx(Le,{className:"text-white",children:"Email"}),r.jsx(Le,{className:"text-white",children:"Orders"}),r.jsx(Le,{className:"text-white",children:"Total Spent"}),r.jsx(Le,{className:"text-white",children:"Joined"}),r.jsx(Le,{className:"text-white",children:"Type"}),r.jsx(Le,{className:"text-white",children:"Role"}),r.jsx(Le,{className:"text-white",children:"Actions"})]})}),r.jsx(Oa,{children:Ft.map(j=>r.jsxs(yr,{className:"border-white/10",children:[r.jsx(Re,{className:"text-white font-medium whitespace-nowrap",children:j.name}),r.jsx(Re,{className:"text-white min-w-[200px] truncate",children:j.email}),r.jsx(Re,{className:"text-white whitespace-nowrap",children:j.orders}),r.jsxs(Re,{className:"text-green-400 font-bold whitespace-nowrap",children:["£",j.spent.toLocaleString()]}),r.jsx(Re,{className:"text-white whitespace-nowrap",children:j.joined&&!isNaN(new Date(j.joined).getTime())?new Date(j.joined).toLocaleDateString("en-GB"):"N/A"}),r.jsx(Re,{children:r.jsx(H,{className:j.accountType==="business"?"bg-amber-500/20 text-amber-300 border-amber-500/30 border":"bg-slate-500/20 text-slate-300 border-slate-500/30 border",title:j.accountType==="business"&&j.companyName?`Business: ${j.companyName}`:"Member",children:j.accountType==="business"?"Business":"Member"})}),r.jsx(Re,{children:r.jsx(H,{className:j.role==="admin"?"bg-purple-500/20 text-purple-300 border-purple-500/30 border":"bg-sky-500/20 text-sky-300 border-sky-500/30 border",children:j.role||"user"})}),r.jsx(Re,{children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx($,{size:"sm",variant:"outline",className:"border-white/20 text-white hover:bg-white/10",onClick:()=>{Su(j),ju(j.name||""),Nu(j.role||"user"),vu("view"),es(null),Yl(null),to(!0)},children:r.jsx(kr,{className:"w-4 h-4"})}),r.jsx($,{size:"sm",variant:"outline",className:"border-white/20 text-white hover:bg-white/10",onClick:()=>{Su(j),ju(j.name||""),Nu(j.role||"user"),vu("edit"),es(null),Yl(null),to(!0)},children:r.jsx(ta,{className:"w-4 h-4"})}),r.jsx($,{size:"sm",variant:"outline",className:"border-amber-500/30 text-amber-300 hover:bg-amber-500/10",title:"Send password reset email",onClick:async()=>{try{await Ay(j.email),te.success(`Password reset email sent to ${j.email}`)}catch(z){const K=z instanceof Error?z.message:"Failed to send password reset email";te.error(K)}},children:r.jsx(wn,{className:"w-4 h-4"})}),r.jsx($,{size:"sm",variant:"outline",className:"border-sky-500/30 text-sky-300 hover:bg-sky-500/10",title:"Open CRM Profile",onClick:()=>ly(j.id),children:r.jsx(zt,{className:"w-4 h-4"})}),e&&j.role!=="admin"&&r.jsx($,{size:"sm",variant:"outline",className:"border-purple-500/30 text-purple-300 hover:bg-purple-500/10",onClick:async()=>{try{let z=null;try{const{auth:Y}=await Ie(async()=>{const{auth:G}=await import("./index-C09NoPC0.js").then(ee=>ee.cq);return{auth:G}},__vite__mapDeps([0,1,2,3,4]));if(Y!=null&&Y.currentUser){const{getIdToken:G}=await Ie(async()=>{const{getIdToken:ee}=await import("./firebase-D5dyMTPx.js").then(ue=>ue.A);return{getIdToken:ee}},[]);z=await G(Y.currentUser,!0)}}catch{}(await fetch("/api/admin/users/update-role",{method:"POST",headers:{"Content-Type":"application/json",...z?{Authorization:`Bearer ${z}`}:{}},body:JSON.stringify({userId:j.id,role:"admin"})})).ok||await tc(j.id,{role:"admin"}),rt(Y=>Y.map(G=>G.id===j.id?{...G,role:"admin"}:G)),alert(`${j.email} promoted to admin`)}catch(z){J.error("Failed to promote user",{error:z}),alert("Failed to promote user")}},children:"Make Admin"}),e&&j.role==="admin"&&r.jsx($,{size:"sm",variant:"outline",className:"border-sky-500/30 text-sky-300 hover:bg-sky-500/10",disabled:(t==null?void 0:t.uid)===j.id,title:(t==null?void 0:t.uid)===j.id?"You cannot change your own role here":"Demote to user",onClick:async()=>{try{let z=null;try{const{auth:Y}=await Ie(async()=>{const{auth:G}=await import("./index-C09NoPC0.js").then(ee=>ee.cq);return{auth:G}},__vite__mapDeps([0,1,2,3,4]));if(Y!=null&&Y.currentUser){const{getIdToken:G}=await Ie(async()=>{const{getIdToken:ee}=await import("./firebase-D5dyMTPx.js").then(ue=>ue.A);return{getIdToken:ee}},[]);z=await G(Y.currentUser,!0)}}catch{}(await fetch("/api/admin/users/update-role",{method:"POST",headers:{"Content-Type":"application/json",...z?{Authorization:`Bearer ${z}`}:{}},body:JSON.stringify({userId:j.id,role:"user"})})).ok||await tc(j.id,{role:"user"}),rt(Y=>Y.map(G=>G.id===j.id?{...G,role:"user"}:G)),alert(`${j.email} demoted to user`)}catch(z){J.error("Failed to demote user",{error:z}),alert("Failed to demote user")}},children:"Make User"}),e&&r.jsx($,{size:"sm",variant:"outline",className:"border-red-500/30 text-red-400 hover:bg-red-500/10",disabled:(t==null?void 0:t.uid)===j.id,title:(t==null?void 0:t.uid)===j.id?"You cannot delete your own account":"Delete customer account",onClick:async()=>{var z,K,Y;if(confirm(`Are you sure you want to delete ${j.email}?

This will permanently delete:
- User account
- All orders
- All support tickets
- All saved configurations

This action CANNOT be undone!`))try{let G=null;try{const{auth:we}=await Ie(async()=>{const{auth:tt}=await import("./index-C09NoPC0.js").then(Fe=>Fe.cq);return{auth:tt}},__vite__mapDeps([0,1,2,3,4]));if(we!=null&&we.currentUser){const{getIdToken:tt}=await Ie(async()=>{const{getIdToken:Fe}=await import("./firebase-D5dyMTPx.js").then(Ge=>Ge.A);return{getIdToken:Fe}},[]);G=await tt(we.currentUser,!0)}}catch{}const ee=await fetch("/api/admin/users/delete",{method:"POST",headers:{"Content-Type":"application/json",...G?{Authorization:`Bearer ${G}`}:{}},body:JSON.stringify({userId:j.id})});if(!ee.ok){const we=await ee.json();throw new Error(we.message||"Failed to delete user")}const ue=await ee.json();rt(we=>we.filter(tt=>tt.id!==j.id)),alert(`Successfully deleted ${j.email}

Deleted:
- User account
- ${((z=ue.deleted)==null?void 0:z.orders)||0} orders
- ${((K=ue.deleted)==null?void 0:K.supportTickets)||0} support tickets
- ${((Y=ue.deleted)==null?void 0:Y.configurations)||0} configurations`)}catch(G){J.error("Failed to delete user",{error:G}),alert(`Failed to delete user: ${G instanceof Error?G.message:"Unknown error"}`)}},children:"Delete"})]})})]},j.id))})]})})]}),r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(na,{className:"w-6 h-6 text-blue-400"}),r.jsx("h3",{className:"text-xl font-bold text-white",children:"Support Tickets"}),r.jsxs(H,{className:"bg-blue-500/20 text-blue-300 border-blue-500/30 border",children:[jt.filter(j=>j.status==="open").length," ","Open"]})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx($,{size:"sm",variant:"outline",className:"border-white/20 text-white hover:bg-white/10",onClick:async()=>{try{const j=await Jn();wr(j),te.success("Tickets refreshed")}catch(j){J.error("Ticket refresh failed",{error:j}),te.error("Could not refresh tickets")}},children:"Refresh"})})]}),jt.length===0&&!qs&&r.jsxs("div",{className:"text-sm text-gray-400",children:[r.jsx("p",{className:"mb-2",children:"No support tickets yet."}),r.jsx("p",{className:"text-xs text-gray-500",children:"New customer enquiries will appear here automatically."})]}),jt.length>0&&r.jsx("div",{className:"space-y-4",children:jt.slice(0,10).map(j=>r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h4",{className:"text-lg font-bold text-white",children:j.subject}),r.jsx(H,{className:`${j.status==="open"?"bg-green-500/20 text-green-300 border-green-500/30":j.status==="in-progress"?"bg-yellow-500/20 text-yellow-300 border-yellow-500/30":"bg-gray-500/20 text-gray-300 border-gray-500/30"} border`,children:ss(j.status)}),r.jsx(H,{className:"bg-purple-500/20 text-purple-300 border-purple-500/30 border",children:j.type})]}),r.jsxs("div",{className:"text-sm text-gray-400 mb-2",children:["From: ",j.name," (",j.email,")"]}),r.jsx("div",{className:"bg-white/5 border border-white/10 rounded p-3 mb-2",children:r.jsx("p",{className:"text-gray-300 text-sm",children:j.message})}),r.jsxs("div",{className:"text-xs text-gray-400",children:["Submitted:"," ",j.createdAt&&!isNaN(new Date(j.createdAt).getTime())?new Date(j.createdAt).toLocaleString("en-GB"):"Recently"]})]}),r.jsxs("div",{className:"ml-4 flex flex-col space-y-2",children:[j.status==="open"&&r.jsxs(r.Fragment,{children:[r.jsx($,{size:"sm",className:"bg-yellow-600 hover:bg-yellow-500",onClick:async()=>{if(j.id)try{await Ys(j.id,{status:"in-progress"});const z=await Jn();wr(z),alert("Ticket marked as in-progress")}catch{alert("Failed to update ticket")}},children:"Start Work"}),r.jsx($,{size:"sm",className:"bg-green-600 hover:bg-green-500",onClick:async()=>{if(j.id)try{await Ys(j.id,{status:"closed"});const z=await Jn();wr(z),alert("Ticket closed")}catch{alert("Failed to update ticket")}},children:"Close"})]}),j.status==="in-progress"&&r.jsx($,{size:"sm",className:"bg-green-600 hover:bg-green-500",onClick:async()=>{if(j.id)try{await Ys(j.id,{status:"closed"});const z=await Jn();wr(z),alert("Ticket closed")}catch{alert("Failed to update ticket")}},children:"Close Ticket"}),r.jsx($,{size:"sm",variant:"outline",className:"border-white/20 text-white hover:bg-white/10",onClick:()=>{window.location.href=`mailto:${j.email}?subject=Re: ${j.subject}`},children:"Email Reply"})]})]})},j.id))})]})]}),r.jsx(Et,{open:Jt,onOpenChange:j=>{vr(j),j||Xe(null)},children:r.jsxs(Dt,{className:"bg-slate-900/95 border-white/10 text-white w-[95vw] sm:w-[90vw] max-w-2xl max-h-[85vh] overflow-y-auto",children:[r.jsx($t,{children:r.jsx(Lt,{children:"Order Details"})}),ne?r.jsxs("div",{className:"space-y-5",children:[r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Order ID"}),r.jsx("p",{className:"text-white font-semibold break-all",children:ne.orderId})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Customer"}),r.jsx("p",{className:"text-white font-semibold",children:ne.customerName}),r.jsx("p",{className:"text-xs text-gray-400 break-all",children:ne.customerEmail})]})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Status"}),r.jsx(H,{className:`${Au(ne.status)} border`,children:ss(ne.status)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Total"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("p",{className:"text-green-400 font-bold text-lg",children:["£",ne.total.toLocaleString()]}),r.jsx($,{size:"sm",variant:"ghost",className:"h-6 text-xs text-sky-400 hover:text-sky-300 hover:bg-sky-500/10",onClick:async()=>{var G;const j=ne.shippingCost,z=typeof j=="number"?j:0,K=((G=ne.items)==null?void 0:G.reduce((ee,ue)=>ee+(ue.price||0)*(ue.quantity||1),0))||0,Y=K+z;if(Math.abs(ne.total-Y)<.01){alert("Total is already correct");return}if(confirm(`Update order total from £${ne.total.toFixed(2)} to £${Y.toFixed(2)}?\\n\\nItems: £${K.toFixed(2)}\\nShipping: £${z.toFixed(2)}\\nNew Total: £${Y.toFixed(2)}`))try{if(!ne.id){alert("Order ID not found");return}await Cu(ne.id,{total:Y,amount:Y});const ee={...ne,total:Y};Xe(ee),vt(ue=>ue.map(we=>we.id===ne.id?{...we,total:Y}:we)),_e(ue=>ue.map(we=>we.id===ne.id?{...we,total:Y}:we)),te.success("Order total updated")}catch(ee){J.error("Failed to update total",ee),alert("Failed to update total")}},title:"Fix total if shipping is missing",children:"Fix"})]}),(()=>{const j=ne.shippingCost,z=typeof j=="number"?j:0;if(z>0){const K=ne.total-z;return r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Items: £",K.toFixed(2)," + Shipping: £",z.toFixed(2)]})}return null})()]})]}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Payment Method"}),r.jsx("p",{className:"text-white font-medium",children:ne.paymentMethod||"N/A"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Shipping Method"}),r.jsx("p",{className:"text-white font-medium",children:ne.shippingMethod||"N/A"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Updated At"}),r.jsx("p",{className:"text-white font-medium",children:(()=>{const j=ne.updatedAt;try{if(j&&typeof j=="object"&&"toDate"in j&&typeof j.toDate=="function"){const K=j.toDate();return isNaN(K.getTime())?"N/A":K.toLocaleDateString("en-GB")}const z=j instanceof Date?j:j?new Date(j):null;return z&&!isNaN(z.getTime())?z.toLocaleDateString("en-GB"):"N/A"}catch{return"N/A"}})()})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Order Notes"}),r.jsxs($,{size:"sm",variant:"outline",onClick:async()=>{const j=ne.notes||"",z=prompt("Edit order notes:",j);if(z!==null&&z!==j)try{if(!ne.id){alert("Order ID not found");return}await Cu(ne.id,{notes:z});const K={...ne,notes:z};Xe(K);const Y=await Zl();vt(Y),alert("Notes updated successfully")}catch(K){J.error("Failed to update notes",K),alert("Failed to update notes")}},className:"border-white/20 text-white hover:bg-white/10 h-7 text-xs",children:[r.jsx(ta,{className:"w-3 h-3 mr-1"}),"Edit"]})]}),r.jsx(Mn,{value:ne.notes||"",readOnly:!0,placeholder:"No notes added yet",className:"bg-white/5 border-white/10 text-gray-300 min-h-[80px] text-xs"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Items"}),r.jsx("div",{className:"rounded border border-white/10 overflow-hidden",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-white/5",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left p-2 font-medium text-gray-300",children:"Product"}),r.jsx("th",{className:"text-left p-2 font-medium text-gray-300",children:"Qty"}),r.jsx("th",{className:"text-left p-2 font-medium text-gray-300",children:"Price"}),r.jsx("th",{className:"text-left p-2 font-medium text-gray-300",children:"Line Total"})]})}),r.jsxs("tbody",{children:[(cy=ne.items)==null?void 0:cy.map((j,z)=>r.jsxs("tr",{className:"border-t border-white/10",children:[r.jsx("td",{className:"p-2 text-white",children:j.productName}),r.jsx("td",{className:"p-2 text-gray-300",children:j.quantity}),r.jsxs("td",{className:"p-2 text-gray-300",children:["£",j.price.toLocaleString()]}),r.jsxs("td",{className:"p-2 text-gray-300",children:["£",(j.price*j.quantity).toLocaleString()]})]},z)),!((dy=ne.items)!=null&&dy.length)&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-400",children:"No item details available"})})]})]})})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Shipping Address"}),r.jsxs("div",{className:"p-3 rounded border border-white/10 bg-white/5 text-sm text-gray-300 space-y-1",children:[r.jsx("p",{children:(uy=ne.address)==null?void 0:uy.line1}),((hy=ne.address)==null?void 0:hy.line2)&&r.jsx("p",{children:(fy=ne.address)==null?void 0:fy.line2}),r.jsx("p",{children:(my=ne.address)==null?void 0:my.city}),r.jsx("p",{children:(xy=ne.address)==null?void 0:xy.postcode}),r.jsx("p",{children:(py=ne.address)==null?void 0:py.country})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm text-gray-400",children:"Shipping Tracking"}),!Kn&&r.jsx($,{size:"sm",variant:"ghost",className:"h-7 text-xs text-sky-400 hover:text-sky-300 hover:bg-sky-500/10",onClick:()=>{xn(!0),qt(ne.trackingNumber||""),Ot(ne.courier||"")},children:ne.trackingNumber?"Edit":"Add Tracking"})]}),Kn?r.jsxs("div",{className:"space-y-3 p-3 rounded border border-white/10 bg-white/5",children:[r.jsxs("div",{children:[r.jsx(le,{className:"text-xs text-gray-400 mb-1",children:"Courier"}),r.jsxs("select",{value:wt,onChange:j=>Ot(j.target.value),className:"w-full bg-white/5 border border-white/10 rounded px-3 py-2 text-sm text-white [&>option]:bg-gray-900 [&>option]:text-white",children:[r.jsx("option",{value:"",children:"Select Courier"}),r.jsx("option",{value:"Royal Mail",children:"Royal Mail"}),r.jsx("option",{value:"DPD",children:"DPD"}),r.jsx("option",{value:"DHL",children:"DHL"}),r.jsx("option",{value:"Evri",children:"Evri (Hermes)"}),r.jsx("option",{value:"Yodel",children:"Yodel"}),r.jsx("option",{value:"UPS",children:"UPS"}),r.jsx("option",{value:"FedEx",children:"FedEx"}),r.jsx("option",{value:"Other",children:"Other"})]})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-xs text-gray-400 mb-1",children:"Tracking Number"}),r.jsx(xe,{value:Be,onChange:j=>qt(j.target.value),placeholder:"Enter tracking number",className:"bg-white/5 border-white/10 text-white text-sm"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx($,{size:"sm",className:"bg-gradient-to-r from-sky-600 to-blue-600 hover:from-sky-500 hover:to-blue-500",onClick:async()=>{if(ne!=null&&ne.id)try{await Cu(ne.id,{trackingNumber:Be,courier:wt}),Xe({...ne,trackingNumber:Be,courier:wt}),xn(!1);const j=await so(100);vt(j)}catch(j){J.error("Failed to update shipping",j)}},children:"Save"}),r.jsx($,{size:"sm",variant:"outline",className:"border-white/20 text-white hover:bg-white/10",onClick:()=>xn(!1),children:"Cancel"})]})]}):r.jsx("div",{className:"p-3 rounded border border-white/10 bg-white/5 text-sm text-gray-300 space-y-1",children:ne.trackingNumber?r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Courier"}),r.jsx("p",{className:"text-white font-medium",children:ne.courier||"Not specified"}),r.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Tracking Number"}),r.jsx("p",{className:"text-white font-mono",children:ne.trackingNumber})]}):r.jsx("p",{className:"text-gray-400 italic",children:"No tracking information"})})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsxs($,{className:"bg-gradient-to-r from-sky-600 to-blue-600 hover:from-sky-500 hover:to-blue-500 text-white",onClick:()=>et(!0),children:[r.jsx(RC,{className:"w-4 h-4 mr-2"}),"Print Production Sheet"]}),r.jsx($,{variant:"outline",className:"border-white/20 text-white hover:bg-white/10",onClick:()=>vr(!1),children:"Close"})]})]}):r.jsx("div",{className:"text-gray-400",children:"No order selected"})]})}),oy&&r.jsx(GO,{customerId:oy,onClose:()=>ly(null)}),r.jsx(Et,{open:Je,onOpenChange:j=>{et(j),j||et(!1)},children:r.jsx(Dt,{className:"bg-white text-black w-[95vw] sm:w-[90vw] max-w-[900px] max-h-[90vh] overflow-y-auto",children:ne&&r.jsx(KO,{order:ne})})}),r.jsx(Et,{open:y,onOpenChange:w,children:r.jsxs(Dt,{className:"bg-slate-900/95 border-white/10 text-white w-[95vw] sm:w-[90vw] max-w-xl",children:[r.jsx($t,{children:r.jsx(Lt,{children:"Create Business Customer"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(le,{className:"text-white",children:"Company Name"}),r.jsx(xe,{value:S,onChange:j=>v(j.target.value),placeholder:"Example Business Ltd",className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-white",children:"Contact Name"}),r.jsx(xe,{value:N,onChange:j=>A(j.target.value),placeholder:"Jane Doe",className:"bg-white/5 border-white/10 text-white"})]})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(le,{className:"text-white",children:"Display Name"}),r.jsx(xe,{value:P,onChange:j=>T(j.target.value),placeholder:"Example Business",className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-white",children:"Email"}),r.jsx(xe,{type:"email",value:M,onChange:j=>E(j.target.value),placeholder:"accounts@example.com",className:"bg-white/5 border-white/10 text-white"})]})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-white",children:"Phone (optional)"}),r.jsx(xe,{value:C,onChange:j=>O(j.target.value),placeholder:"+44 1234 567890",className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{className:"p-3 rounded-lg border border-white/10 bg-white/5",children:[r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsx(le,{className:"text-white",children:"Set password now (no email link)"}),r.jsx("input",{type:"checkbox",checked:Te,onChange:j=>pe(j.target.checked)})]}),Te&&r.jsxs("div",{className:"mt-3",children:[r.jsx(le,{className:"text-white",children:"Temporary password"}),r.jsx(xe,{type:"text",value:re,onChange:j=>be(j.target.value),placeholder:"Set a temporary password",className:"bg-white/5 border-white/10 text-white"}),r.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"The password will be set immediately. It is not emailed — share it securely with the customer and ask them to change it after logging in."})]})]}),L&&r.jsx("div",{className:"text-red-400 text-sm",children:L}),Te&&!X?r.jsx("div",{className:"p-4 bg-blue-500/10 border border-blue-500/30 rounded",children:r.jsxs("p",{className:"text-blue-300 text-sm",children:["Password set for ",M,". No email link was sent. Share the temporary password securely and advise changing it after first login."]})}):null,X?r.jsxs("div",{className:"p-4 bg-green-500/10 border border-green-500/30 rounded",children:[r.jsx("p",{className:"text-green-300 font-semibold mb-2",children:"Business account created"}),r.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"Password setup link (send to customer):"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(xe,{readOnly:!0,value:X,className:"bg-white/5 border-white/10 text-white"}),r.jsx($,{variant:"outline",className:"border-white/20 text-white hover:bg-white/10",onClick:()=>navigator.clipboard.writeText(X),children:"Copy"})]}),ce!==null&&r.jsx("div",{className:"mt-3 text-sm",children:ce?r.jsxs("span",{className:"text-green-300",children:["Email sent automatically to"," ",M&&r.jsx("strong",{children:M})]}):r.jsxs("span",{className:"text-yellow-300",children:["Email not sent automatically",fe?`: ${fe}`:"."]})})]}):null]}),r.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[r.jsx($,{variant:"outline",className:"border-white/20 text-white hover:bg-white/10",onClick:()=>w(!1),disabled:_,children:"Close"}),r.jsx($,{onClick:async()=>{V(null),D(!0),W(null);try{if(!S||!N||!P||!M){V("Please fill all required fields"),D(!1);return}let j=null;try{const{auth:Y}=await Ie(async()=>{const{auth:G}=await import("./index-C09NoPC0.js").then(ee=>ee.cq);return{auth:G}},__vite__mapDeps([0,1,2,3,4]));if(Y!=null&&Y.currentUser){const{getIdToken:G}=await Ie(async()=>{const{getIdToken:ee}=await import("./firebase-D5dyMTPx.js").then(ue=>ue.A);return{getIdToken:ee}},[]);j=await G(Y.currentUser,!0)}}catch{}const z=await fetch("/api/admin/users/create-business",{method:"POST",headers:{"Content-Type":"application/json",...j?{Authorization:`Bearer ${j}`}:{}},body:JSON.stringify({companyName:S,contactName:N,displayName:P,email:M,phone:C,...Te&&re?{tempPassword:re}:{}})});if(!z.ok){const Y=await z.json().catch(()=>({}));throw new Error((Y==null?void 0:Y.message)||"Failed to create business account")}const K=await z.json();W(K.resetLink||null),K.passwordSet&&W(null),de(!!K.emailSent),F(K.emailError||null),K.emailSent&&te.success("Welcome email sent")}catch(j){const z=j instanceof Error?j.message:"Failed to create business account";V(z)}finally{D(!1)}},className:"bg-gradient-to-r from-sky-600 to-blue-600 hover:from-sky-500 hover:to-blue-500",disabled:_,children:_?"Creating...":"Create"})]})]})}),r.jsx(Et,{open:vP,onOpenChange:j=>{to(j),j||(Su(null),es(null),wu(!1))},children:r.jsxs(Dt,{className:"bg-slate-900/95 border-white/10 text-white w-[95vw] sm:w-[90vw] max-w-lg",children:[r.jsx($t,{children:r.jsx(Lt,{children:Gl==="edit"?"Edit Customer":"Customer Details"})}),Kt?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(le,{className:"text-white",children:"Name"}),r.jsx(xe,{value:ro,onChange:j=>ju(j.target.value),disabled:Gl==="view",className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-white",children:"Email"}),r.jsx(xe,{value:Kt.email,readOnly:!0,className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(le,{className:"text-white",children:"Orders"}),r.jsx(xe,{value:String(Kt.orders),readOnly:!0,className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-white",children:"Total Spent"}),r.jsx(xe,{value:`£${Kt.spent.toLocaleString()}`,readOnly:!0,className:"bg-white/5 border-white/10 text-white"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(le,{className:"text-white",children:"Joined"}),r.jsx(xe,{value:Kt.joined&&!isNaN(new Date(Kt.joined).getTime())?new Date(Kt.joined).toLocaleDateString("en-GB"):"N/A",readOnly:!0,className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-white",children:"Role"}),Gl==="edit"?r.jsxs(dr,{value:no,onValueChange:j=>Nu(j),children:[r.jsx(ur,{className:"bg-white/5 border-white/10 text-white",children:r.jsx(hr,{})}),r.jsxs(fr,{className:"bg-slate-800 border-white/10",children:[r.jsx(Oe,{value:"user",children:"user"}),r.jsx(Oe,{value:"admin",children:"admin"})]})]}):r.jsx(xe,{value:Kt.role,readOnly:!0,className:"bg-white/5 border-white/10 text-white"})]})]}),r.jsx("div",{className:"pt-4 border-t border-white/10",children:r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{children:[r.jsx(le,{className:"text-white",children:"Password Reset"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Send a password reset email to this user"})]}),r.jsx($,{variant:"outline",className:"border-amber-500/50 text-amber-400 hover:bg-amber-500/10",disabled:sy||Kl,onClick:async()=>{if(Kt!=null&&Kt.email){iy(!0),es(null),Yl(null);try{await Ay(Kt.email),Yl(`Password reset email sent to ${Kt.email}`),te.success("Password reset email sent!")}catch(j){const z=j instanceof Error?j.message:"Failed to send password reset email";es(z),te.error(z)}finally{iy(!1)}}},children:sy?r.jsx(r.Fragment,{children:"Sending..."}):r.jsxs(r.Fragment,{children:[r.jsx(wn,{className:"w-4 h-4 mr-2"}),"Send Reset Email"]})})]})}),ay&&r.jsx("div",{className:"text-sm text-green-400 bg-green-500/10 border border-green-500/30 rounded p-3",children:ay}),ny&&r.jsx("div",{className:"text-sm text-red-400",children:ny}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx($,{variant:"outline",className:"border-white/20 text-white hover:bg-white/10",onClick:()=>to(!1),disabled:Kl,children:"Close"}),Gl==="view"?r.jsx($,{onClick:()=>vu("edit"),className:"bg-sky-600 hover:bg-sky-500",children:"Edit"}):r.jsx($,{disabled:Kl,onClick:async()=>{if(Kt){wu(!0),es(null);try{if(ro&&ro!==Kt.name&&await tc(Kt.id,{displayName:ro}),Kt.role!==no){let j=null;try{const{auth:K}=await Ie(async()=>{const{auth:Y}=await import("./index-C09NoPC0.js").then(G=>G.cq);return{auth:Y}},__vite__mapDeps([0,1,2,3,4]));if(K!=null&&K.currentUser){const{getIdToken:Y}=await Ie(async()=>{const{getIdToken:G}=await import("./firebase-D5dyMTPx.js").then(ee=>ee.A);return{getIdToken:G}},[]);j=await Y(K.currentUser,!0)}}catch{}(await fetch("/api/admin/users/update-role",{method:"POST",headers:{"Content-Type":"application/json",...j?{Authorization:`Bearer ${j}`}:{}},body:JSON.stringify({userId:Kt.id,role:no})})).ok||await tc(Kt.id,{role:no})}rt(j=>j.map(z=>z.id===Kt.id?{...z,name:ro||z.name,role:no}:z)),to(!1),te.success("Customer updated")}catch(j){es(j instanceof Error?j.message:"Failed to update customer")}finally{wu(!1)}}},className:"bg-gradient-to-r from-sky-600 to-blue-600 hover:from-sky-500 hover:to-blue-500",children:Kl?"Saving...":"Save Changes"})]})]}):r.jsx("div",{className:"text-gray-400",children:"No customer selected"})]})}),r.jsxs(lt,{value:"support",className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-white",children:"Support Tickets"}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Manage customer support requests and tickets"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(dr,{defaultValue:"all",children:[r.jsx(ur,{className:"w-40 bg-white/5 border-white/10 text-white",children:r.jsx(hr,{})}),r.jsxs(fr,{className:"bg-zinc-900 border-white/10",children:[r.jsx(Oe,{value:"all",children:"All Tickets"}),r.jsx(Oe,{value:"open",children:"Open"}),r.jsx(Oe,{value:"in-progress",children:"In Progress"}),r.jsx(Oe,{value:"closed",children:"Closed"})]})]}),r.jsx($,{variant:"outline",onClick:async()=>{try{const j=await Jn();wr(j)}catch(j){J.error("Error refreshing tickets",{error:j})}},className:"border-white/10 hover:bg-white/5",children:r.jsx(Bt,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Total Tickets"}),r.jsx("p",{className:"text-2xl font-bold text-white",children:jt.length})]}),r.jsx(na,{className:"w-8 h-8 text-sky-400"})]})}),r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Open"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:jt.filter(j=>j.status==="open").length})]}),r.jsx(mt,{className:"w-8 h-8 text-yellow-400"})]})}),r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"In Progress"}),r.jsx("p",{className:"text-2xl font-bold text-blue-400",children:jt.filter(j=>j.status==="in-progress").length})]}),r.jsx(aa,{className:"w-8 h-8 text-blue-400"})]})}),r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Closed"}),r.jsx("p",{className:"text-2xl font-bold text-green-400",children:jt.filter(j=>j.status==="closed").length})]}),r.jsx(Dn,{className:"w-8 h-8 text-green-400"})]})})]}),r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl",children:r.jsxs("div",{className:"p-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Support Tickets"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Pa,{children:[r.jsx(Ca,{children:r.jsxs(yr,{className:"border-white/10 hover:bg-white/5",children:[r.jsx(Le,{className:"text-gray-300",children:"ID"}),r.jsx(Le,{className:"text-gray-300",children:"Subject"}),r.jsx(Le,{className:"text-gray-300",children:"User"}),r.jsx(Le,{className:"text-gray-300",children:"Type"}),r.jsx(Le,{className:"text-gray-300",children:"Priority"}),r.jsx(Le,{className:"text-gray-300",children:"Status"}),r.jsx(Le,{className:"text-gray-300",children:"Created"}),r.jsx(Le,{className:"text-gray-300",children:"Actions"})]})}),r.jsx(Oa,{children:jt.length===0?r.jsx(yr,{children:r.jsx(Re,{colSpan:8,className:"text-center text-gray-400 py-8",children:"No support tickets found"})}):jt.map(j=>{var z;return r.jsxs(yr,{className:"border-white/10 hover:bg-white/5",children:[r.jsxs(Re,{className:"text-gray-300 font-mono text-xs",children:[(z=j.id)==null?void 0:z.substring(0,8),"..."]}),r.jsx(Re,{className:"text-white font-medium",children:j.subject||"Untitled"}),r.jsx(Re,{className:"text-gray-300",children:j.email||"Unknown"}),r.jsx(Re,{children:r.jsx(H,{variant:"outline",className:"border-sky-500/40 text-sky-400 bg-sky-500/10",children:j.type||"general"})}),r.jsx(Re,{children:r.jsx(H,{variant:"outline",className:j.priority==="high"||j.priority==="urgent"?"border-red-500/40 text-red-400 bg-red-500/10":j.priority==="normal"?"border-yellow-500/40 text-yellow-400 bg-yellow-500/10":"border-green-500/40 text-green-400 bg-green-500/10",children:j.priority||"low"})}),r.jsx(Re,{children:r.jsx(H,{variant:"outline",className:j.status==="open"?"border-yellow-500/40 text-yellow-400 bg-yellow-500/10":j.status==="in-progress"?"border-blue-500/40 text-blue-400 bg-blue-500/10":"border-green-500/40 text-green-400 bg-green-500/10",children:ss(j.status)})}),r.jsx(Re,{className:"text-gray-400 text-sm",children:j.createdAt&&!isNaN(new Date(j.createdAt).getTime())?new Date(j.createdAt).toLocaleDateString("en-GB"):"Recently"}),r.jsx(Re,{children:r.jsxs("div",{className:"flex gap-2",children:[j.status==="open"&&r.jsx($,{size:"sm",variant:"outline",className:"border-yellow-500/40 text-yellow-400 hover:bg-yellow-500/10",onClick:async()=>{if(j.id)try{await Ys(j.id,{status:"in-progress"});const K=await Jn();wr(K)}catch{alert("Failed to update ticket")}},children:"Start"}),j.status!=="closed"&&r.jsx($,{size:"sm",variant:"outline",className:"border-green-500/40 text-green-400 hover:bg-green-500/10",onClick:async()=>{if(j.id)try{await Ys(j.id,{status:"closed"});const K=await Jn();wr(K)}catch{alert("Failed to update ticket")}},children:"Close"}),j.status==="closed"&&r.jsx($,{size:"sm",variant:"outline",className:"border-red-500/40 text-red-400 hover:bg-red-500/10",onClick:async()=>{if(j.id&&confirm("Delete this closed ticket permanently? This cannot be undone."))try{let K=null;try{const{auth:G}=await Ie(async()=>{const{auth:ee}=await import("./index-C09NoPC0.js").then(ue=>ue.cq);return{auth:ee}},__vite__mapDeps([0,1,2,3,4]));if(G!=null&&G.currentUser){const{getIdToken:ee}=await Ie(async()=>{const{getIdToken:ue}=await import("./firebase-D5dyMTPx.js").then(we=>we.A);return{getIdToken:ue}},[]);K=await ee(G.currentUser,!0)}}catch{}const Y=await fetch("/api/admin/support/delete",{method:"POST",headers:{"Content-Type":"application/json",...K?{Authorization:`Bearer ${K}`}:{}},body:JSON.stringify({ticketId:j.id})});if(!Y.ok){let G="Failed to delete ticket";try{const ee=await Y.json();ee&&typeof ee.message=="string"&&(G=ee.message)}catch{}throw new Error(G)}wr(G=>G.filter(ee=>ee.id!==j.id))}catch(K){alert(K instanceof Error?K.message:"Failed to delete ticket")}},children:"Delete"}),r.jsx($,{size:"sm",variant:"outline",className:"border-sky-500/40 text-sky-400 hover:bg-sky-500/10",onClick:()=>{$g(j),Dl(!0)},children:r.jsx(kr,{className:"w-3 h-3"})})]})})]},j.id)})})]})})]})})]}),r.jsx(lt,{value:"monitoring",className:"space-y-6",children:r.jsx(A9,{})}),r.jsx(lt,{value:"performance",className:"space-y-6",children:r.jsx(K9,{})}),r.jsx(lt,{value:"analytics",className:"space-y-6",children:r.jsx(G9,{})}),r.jsx(lt,{value:"recommendations",className:"space-y-6",children:r.jsx(Kz,{})}),r.jsx(lt,{value:"reports",className:"space-y-6",children:r.jsx(X9,{})}),r.jsxs(lt,{value:"content",className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-white",children:"Content Management System"}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Manage your website content through Contentful CMS"})]}),r.jsxs($,{onClick:()=>window.open("https://app.contentful.com/spaces/undefined","_blank"),className:"bg-gradient-to-r from-sky-600 to-blue-600 hover:from-sky-500 hover:to-blue-500",children:[r.jsx(Tr,{className:"w-4 h-4 mr-2"}),"Open Contentful"]})]}),r.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Products"}),r.jsx("p",{className:"text-2xl font-bold text-white",children:"N/A"})]}),r.jsx(In,{className:"w-8 h-8 text-sky-400"})]})}),r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Categories"}),r.jsx("p",{className:"text-2xl font-bold text-white",children:"N/A"})]}),r.jsx(Jx,{className:"w-8 h-8 text-green-400"})]})}),r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Pages"}),r.jsx("p",{className:"text-2xl font-bold text-white",children:"8"})]}),r.jsx(Ea,{className:"w-8 h-8 text-purple-400"})]})}),r.jsx(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Media"}),r.jsx("p",{className:"text-2xl font-bold text-white",children:"N/A"})]}),r.jsx(Bo,{className:"w-8 h-8 text-orange-400"})]})})]}),r.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6 hover:border-sky-500/30 transition-all",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-sky-500 to-blue-500 flex items-center justify-center",children:r.jsx(io,{className:"w-6 h-6 text-white"})}),r.jsx(H,{className:"bg-green-500/20 text-green-300 border-green-500/30",children:"Active"})]}),r.jsx("h4",{className:"text-lg font-bold text-white mb-2",children:"PC Components"}),r.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Manage CPUs, GPUs, RAM, storage, and all PC building components"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs($,{onClick:()=>b("inventory"),size:"sm",className:"flex-1 bg-sky-600 hover:bg-sky-500",children:[r.jsx(ta,{className:"w-4 h-4 mr-2"}),"Manage"]}),r.jsx($,{onClick:()=>window.open("https://app.contentful.com/spaces/undefined/entries","_blank"),size:"sm",variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:r.jsx(Tr,{className:"w-4 h-4"})})]})]}),r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6 hover:border-purple-500/30 transition-all",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center",children:r.jsx(Ea,{className:"w-6 h-6 text-white"})}),r.jsx(H,{className:"bg-green-500/20 text-green-300 border-green-500/30",children:"Active"})]}),r.jsx("h4",{className:"text-lg font-bold text-white mb-2",children:"Page Content"}),r.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Edit homepage, about page, and other website content"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs($,{onClick:()=>window.open("/","_blank"),size:"sm",className:"flex-1 bg-purple-600 hover:bg-purple-500",children:[r.jsx(ha,{className:"w-4 h-4 mr-2"}),"Preview"]}),r.jsx($,{onClick:()=>window.open("https://app.contentful.com/spaces/undefined/entries?content_type=pageContent","_blank"),size:"sm",variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:r.jsx(Tr,{className:"w-4 h-4"})})]})]}),r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6 hover:border-green-500/30 transition-all",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 flex items-center justify-center",children:r.jsx(na,{className:"w-6 h-6 text-white"})}),r.jsx(H,{className:"bg-green-500/20 text-green-300 border-green-500/30",children:"Active"})]}),r.jsx("h4",{className:"text-lg font-bold text-white mb-2",children:"FAQs & Support"}),r.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Manage frequently asked questions and support content"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs($,{onClick:()=>window.open("https://app.contentful.com/spaces/undefined/entries?content_type=faqItem","_blank"),size:"sm",className:"flex-1 bg-green-600 hover:bg-green-500",children:[r.jsx(ta,{className:"w-4 h-4 mr-2"}),"Edit"]}),r.jsx($,{onClick:()=>window.open("https://app.contentful.com/spaces/undefined/entries?content_type=faqItem","_blank"),size:"sm",variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:r.jsx(Tr,{className:"w-4 h-4"})})]})]}),r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6 hover:border-orange-500/30 transition-all",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-orange-500 to-red-500 flex items-center justify-center",children:r.jsx(Bo,{className:"w-6 h-6 text-white"})}),r.jsx(H,{className:"bg-green-500/20 text-green-300 border-green-500/30",children:"Active"})]}),r.jsx("h4",{className:"text-lg font-bold text-white mb-2",children:"Media Library"}),r.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Upload and manage product images and media assets"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs($,{onClick:()=>window.open("https://app.contentful.com/spaces/undefined/assets","_blank"),size:"sm",className:"flex-1 bg-orange-600 hover:bg-orange-500",children:[r.jsx(yk,{className:"w-4 h-4 mr-2"}),"Upload"]}),r.jsx($,{onClick:()=>window.open("https://app.contentful.com/spaces/undefined/assets","_blank"),size:"sm",variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:r.jsx(Tr,{className:"w-4 h-4"})})]})]}),r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6 hover:border-yellow-500/30 transition-all",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-yellow-500 to-orange-500 flex items-center justify-center",children:r.jsx(io,{className:"w-6 h-6 text-white"})}),r.jsx(H,{className:"bg-green-500/20 text-green-300 border-green-500/30",children:"Active"})]}),r.jsx("h4",{className:"text-lg font-bold text-white mb-2",children:"Site Settings"}),r.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Configure site name, contact info, and global settings"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs($,{onClick:()=>d(!0),size:"sm",className:"flex-1 bg-yellow-600 hover:bg-yellow-500",children:[r.jsx(io,{className:"w-4 h-4 mr-2"}),"Configure"]}),r.jsx($,{onClick:()=>window.open("https://app.contentful.com/spaces/undefined/entries?content_type=siteSettings","_blank"),size:"sm",variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:r.jsx(Tr,{className:"w-4 h-4"})})]})]}),r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6 hover:border-sky-500/30 transition-all",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-sky-500 to-blue-500 flex items-center justify-center",children:r.jsx(Eu,{className:"w-6 h-6 text-white"})}),r.jsx(H,{className:"bg-green-500/20 text-green-300 border-green-500/30",children:"Active"})]}),r.jsx("h4",{className:"text-lg font-bold text-white mb-2",children:"Payment Settings"}),r.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Edit Bank Transfer details shown at checkout"}),r.jsx("div",{className:"flex space-x-2",children:r.jsxs($,{onClick:()=>h(!0),size:"sm",className:"flex-1 bg-sky-600 hover:bg-sky-500",children:[r.jsx(Eu,{className:"w-4 h-4 mr-2"})," Configure"]})})]}),r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6 hover:border-indigo-500/30 transition-all",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-indigo-500 to-purple-500 flex items-center justify-center",children:r.jsx(sn,{className:"w-6 h-6 text-white"})}),r.jsx(H,{className:"bg-green-500/20 text-green-300 border-green-500/30",children:"Active"})]}),r.jsx("h4",{className:"text-lg font-bold text-white mb-2",children:"Analytics Dashboard"}),r.jsx("p",{className:"text-gray-400 text-sm mb-4",children:Rr.totalPageViews>0?`${Rr.totalPageViews} page views from ${Rr.totalVisitors} visitors`:"View visitor stats and site analytics"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs($,{onClick:()=>l(!0),size:"sm",className:"flex-1 bg-indigo-600 hover:bg-indigo-500",children:[r.jsx(sn,{className:"w-4 h-4 mr-2"}),"View Stats"]}),r.jsx($,{onClick:()=>window.open("https://console.firebase.google.com/project/undefined/analytics","_blank"),size:"sm",variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:r.jsx(Tr,{className:"w-4 h-4"})})]})]})]}),r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:[r.jsx("h4",{className:"text-lg font-bold text-white mb-4",children:"Quick Actions"}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[r.jsxs($,{onClick:()=>window.open("https://app.contentful.com/spaces/undefined/content_types","_blank"),variant:"outline",className:"border-white/20 text-white hover:bg-white/10 justify-start",children:[r.jsx(Yx,{className:"w-4 h-4 mr-3"}),"Content Models"]}),r.jsxs($,{onClick:()=>window.open("https://app.contentful.com/spaces/undefined/settings","_blank"),variant:"outline",className:"border-white/20 text-white hover:bg-white/10 justify-start",children:[r.jsx(Dn,{className:"w-4 h-4 mr-3"}),"API Keys & Security"]}),r.jsxs($,{onClick:()=>window.open("https://www.contentful.com/help/","_blank"),variant:"outline",className:"border-white/20 text-white hover:bg-white/10 justify-start",children:[r.jsx(na,{className:"w-4 h-4 mr-3"}),"Help & Documentation"]})]})]})]}),r.jsxs(lt,{value:"email",className:"space-y-6",children:[!e&&r.jsx(q,{className:"bg-gradient-to-r from-amber-500/10 to-red-500/10 border-amber-500/30 backdrop-blur-xl p-4",children:r.jsx("div",{className:"text-sm text-amber-300",children:"Admin access required to send bulk emails and manage marketing."})}),e&&r.jsxs(Nc,{defaultValue:"email",className:"space-y-6",children:[r.jsxs(Sc,{className:"grid w-full grid-cols-5 bg-white/5 border-white/10",children:[r.jsx(ht,{value:"email",className:"data-[state=active]:bg-white/10 text-white",children:"Bulk Email"}),r.jsx(ht,{value:"campaigns",className:"data-[state=active]:bg-white/10 text-white",children:"Campaigns"}),r.jsx(ht,{value:"discounts",className:"data-[state=active]:bg-white/10 text-white",children:"Discount Codes"}),r.jsx(ht,{value:"banners",className:"data-[state=active]:bg-white/10 text-white",children:"Banners"}),r.jsx(ht,{value:"competitors",className:"data-[state=active]:bg-white/10 text-white",children:"Competitors"})]}),r.jsx(lt,{value:"email",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-white",children:"Send Email"}),r.jsx("p",{className:"text-gray-400 mt-1 max-w-xl",children:"Compose and send a branded email to all registered customers or a specific list. Images you upload are hosted and inserted automatically."})]})}),r.jsx(Z9,{customers:Ft})]})}),r.jsx(lt,{value:"campaigns",children:r.jsx(XO,{})}),r.jsx(lt,{value:"discounts",children:r.jsx(QO,{})}),r.jsx(lt,{value:"banners",children:r.jsx(JO,{})}),r.jsx(lt,{value:"competitors",children:r.jsx(o5,{})})]})]}),r.jsx(lt,{value:"search",className:"space-y-6",children:r.jsx(Gz,{})})]}),e&&r.jsxs(r.Fragment,{children:[r.jsx(Et,{open:uP,onOpenChange:Rl,children:r.jsxs(Dt,{className:"bg-gradient-to-br from-slate-900 to-slate-950 border-2 border-sky-500/30 backdrop-blur-2xl w-[95vw] sm:w-[90vw] max-w-md",children:[r.jsx($t,{children:r.jsx(Lt,{className:"text-white",children:"Unblock IP Address"})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(le,{htmlFor:"unblock-ip",className:"text-gray-300",children:"IP address"}),r.jsx(xe,{id:"unblock-ip",placeholder:"e.g. 203.0.113.42",value:$l,onChange:j=>Gg(j.target.value),className:"bg-white/5 border-white/10 text-white"}),Yg&&r.jsx("p",{className:"text-sm text-gray-300",children:Yg}),r.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[r.jsx($,{variant:"outline",className:"border-white/20 text-white",onClick:()=>Rl(!1),children:"Cancel"}),r.jsx($,{disabled:!$l||Kg,className:"bg-gradient-to-r from-sky-600 to-blue-600",onClick:async()=>{if($l)try{pu(!0),Ji(null);const j=t,z=j.getIdToken?await j.getIdToken():"";if(!z){Ji("Not authenticated – please re-login as admin."),pu(!1);return}const{unblockIp:K}=await Ie(async()=>{const{unblockIp:G}=await import("./index-C09NoPC0.js").then(ee=>ee.cu);return{unblockIp:G}},__vite__mapDeps([0,1,2,3,4])),Y=await K($l.trim(),z);Ji(Y?"IP unblocked successfully.":"Failed to unblock IP."),Y&&setTimeout(()=>Rl(!1),800)}catch(j){Ji(j instanceof Error?j.message:"Unexpected error")}finally{pu(!1)}},children:Kg?"Unblocking…":"Unblock"})]})]})]})}),r.jsx(Et,{open:hP,onOpenChange:Ll,children:r.jsxs(Dt,{className:"bg-gradient-to-br from-slate-900 to-slate-950 border-2 border-green-500/30 backdrop-blur-2xl w-[95vw] sm:w-[90vw] max-w-md",children:[r.jsx($t,{children:r.jsx(Lt,{className:"text-white",children:"Whitelist IP Address"})}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"whitelist-ip",className:"text-gray-300",children:"IP address"}),r.jsx(xe,{id:"whitelist-ip",placeholder:"e.g. 203.0.113.42",value:Bl,onChange:j=>Xg(j.target.value),className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{children:[r.jsx(le,{htmlFor:"whitelist-reason",className:"text-gray-300",children:"Reason (optional)"}),r.jsx(xe,{id:"whitelist-reason",placeholder:"e.g. Trusted admin IP",value:Qg,onChange:j=>Jg(j.target.value),className:"bg-white/5 border-white/10 text-white"})]}),ey&&r.jsx("p",{className:"text-sm text-gray-300",children:ey}),r.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[r.jsx($,{variant:"outline",className:"border-white/20 text-white",onClick:()=>Ll(!1),children:"Cancel"}),r.jsx($,{disabled:!Bl||Zg,className:"bg-gradient-to-r from-green-600 to-emerald-600",onClick:async()=>{if(Bl)try{gu(!0),Zi(null);const j=t,z=j.getIdToken?await j.getIdToken():"";if(!z){Zi("Not authenticated – please re-login as admin."),gu(!1);return}const{whitelistIp:K}=await Ie(async()=>{const{whitelistIp:G}=await import("./index-C09NoPC0.js").then(ee=>ee.cu);return{whitelistIp:G}},__vite__mapDeps([0,1,2,3,4])),Y=await K(Bl.trim(),z,Qg.trim()||void 0);Zi(Y?"IP whitelisted successfully. This IP will never be blocked.":"Failed to whitelist IP."),Y&&setTimeout(()=>{Ll(!1),window.location.reload()},1200)}catch(j){Zi(j instanceof Error?j.message:"Unexpected error")}finally{gu(!1)}},children:Zg?"Adding to Whitelist…":"Whitelist"})]})]})]})})]}),r.jsx(Et,{open:s,onOpenChange:i,children:r.jsxs(Dt,{className:"bg-slate-900 border-white/10 text-white w-[95vw] sm:w-[90vw] max-w-2xl",children:[r.jsx($t,{children:r.jsx(Lt,{children:"Add New Product"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"productName",className:"text-white",children:"Product Name"}),r.jsx(xe,{id:"productName",className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{children:[r.jsx(le,{htmlFor:"category",className:"text-white",children:"Category"}),r.jsxs(dr,{children:[r.jsx(ur,{className:"bg-white/5 border-white/10 text-white",children:r.jsx(hr,{placeholder:"Select category"})}),r.jsxs(fr,{className:"bg-slate-800 border-white/10",children:[r.jsx(Oe,{value:"cpu",children:"CPU"}),r.jsx(Oe,{value:"gpu",children:"GPU"}),r.jsx(Oe,{value:"ram",children:"RAM"}),r.jsx(Oe,{value:"motherboard",children:"Motherboard"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(le,{htmlFor:"price",className:"text-white",children:"Price (£)"}),r.jsx(xe,{id:"price",type:"number",className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{children:[r.jsx(le,{htmlFor:"stock",className:"text-white",children:"Stock Quantity"}),r.jsx(xe,{id:"stock",type:"number",className:"bg-white/5 border-white/10 text-white"})]})]}),r.jsxs("div",{children:[r.jsx(le,{htmlFor:"description",className:"text-white",children:"Description"}),r.jsx(Mn,{id:"description",className:"bg-white/5 border-white/10 text-white",rows:3})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx($,{variant:"outline",onClick:()=>i(!1),className:"border-white/20 text-white hover:bg-white/10",children:"Cancel"}),r.jsx($,{className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500",children:"Add Product"})]})]})]})}),r.jsx(Et,{open:o,onOpenChange:l,children:r.jsxs(Dt,{className:"bg-slate-900 border-white/10 text-white w-[95vw] sm:w-[90vw] max-w-6xl max-h-[80vh] overflow-y-auto",children:[r.jsxs($t,{children:[r.jsxs(Lt,{className:"text-2xl font-bold flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-r from-indigo-500 to-purple-500 flex items-center justify-center",children:r.jsx(sn,{className:"w-5 h-5 text-white"})}),r.jsx("span",{children:"Analytics Dashboard"})]}),r.jsx("p",{className:"text-gray-400 mt-2",children:"Last 30 days of website activity"})]}),r.jsxs("div",{className:"space-y-6 mt-6",children:[r.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Total Views"}),r.jsx(kr,{className:"w-5 h-5 text-sky-400"})]}),r.jsx("p",{className:"text-3xl font-bold text-white",children:Rr.totalPageViews.toLocaleString()}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Page views"})]}),r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Unique Visitors"}),r.jsx(_a,{className:"w-5 h-5 text-green-400"})]}),r.jsx("p",{className:"text-3xl font-bold text-white",children:Rr.totalVisitors.toLocaleString()}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Visitors"})]}),r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Avg. Daily Views"}),r.jsx(sn,{className:"w-5 h-5 text-purple-400"})]}),r.jsx("p",{className:"text-3xl font-bold text-white",children:Rr.averagePageViewsPerDay.toLocaleString()}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Views per day"})]})]}),r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center",children:[r.jsx(Ea,{className:"w-5 h-5 mr-2 text-sky-400"}),"Top Pages"]}),Rr.topPages.length>0?r.jsx("div",{className:"space-y-3",children:Rr.topPages.map((j,z)=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-sky-500 to-blue-500 flex items-center justify-center text-white font-bold text-sm",children:z+1}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium",children:j.page==="/"?"Homepage":j.page}),r.jsx("p",{className:"text-xs text-gray-400",children:j.page})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-white font-bold",children:j.views.toLocaleString()}),r.jsx("p",{className:"text-xs text-gray-400",children:"views"})]})]},j.page))}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(sn,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-400",children:"No page view data yet"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Data will appear as users visit your site"})]})]}),r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center",children:[r.jsx(sn,{className:"w-5 h-5 mr-2 text-purple-400"}),"Daily Activity"]}),Object.keys(Rr.viewsByDay).length>0?r.jsx("div",{className:"space-y-2",children:Object.entries(Rr.viewsByDay).sort(([j],[z])=>new Date(z).getTime()-new Date(j).getTime()).slice(0,10).map(([j,z])=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded",children:[r.jsx("span",{className:"text-gray-300 text-sm",children:j}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-32 bg-white/10 rounded-full h-2",children:r.jsx("div",{className:"bg-gradient-to-r from-sky-500 to-blue-500 h-2 rounded-full",style:{width:`${Math.min(z/Math.max(...Object.values(Rr.viewsByDay))*100,100)}%`}})}),r.jsx("span",{className:"text-white font-semibold text-sm w-12 text-right",children:z})]})]},j))}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(sn,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-400",children:"No daily activity data yet"})]})]}),r.jsx(q,{className:"bg-gradient-to-r from-indigo-500/10 to-purple-500/10 border-indigo-500/30 p-4",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Dn,{className:"w-5 h-5 text-indigo-400 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-semibold mb-1",children:"Real-time Analytics"}),r.jsx("p",{className:"text-gray-300 text-sm",children:"Analytics data is automatically tracked when users visit your site. The data updates in real-time from Firebase Firestore. For more advanced analytics, click the external link to open Firebase Analytics console."})]})]})}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx($,{onClick:()=>l(!1),variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:"Close"}),r.jsxs($,{onClick:()=>window.open("https://console.firebase.google.com/project/undefined/analytics","_blank"),className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500",children:[r.jsx(Tr,{className:"w-4 h-4 mr-2"}),"Open Firebase Console"]})]})]})]})}),r.jsx(Et,{open:c,onOpenChange:d,children:r.jsxs(Dt,{className:"bg-slate-900 border-white/10 text-white w-[95vw] sm:w-[90vw] max-w-4xl max-h-[80vh] overflow-y-auto",children:[r.jsxs($t,{children:[r.jsxs(Lt,{className:"text-2xl font-bold flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-r from-yellow-500 to-orange-500 flex items-center justify-center",children:r.jsx(io,{className:"w-5 h-5 text-white"})}),r.jsx("span",{children:"Site Settings & META Tags"})]}),r.jsx("p",{className:"text-gray-400 mt-2",children:"Configure global site settings and SEO metadata"})]}),r.jsxs("div",{className:"space-y-6 mt-6",children:[r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center",children:[r.jsx(ha,{className:"w-5 h-5 mr-2 text-yellow-400"}),"General Settings"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(le,{className:"text-white mb-2 block",children:"Site Name"}),r.jsx(xe,{value:se.siteName,onChange:j=>oe({...se,siteName:j.target.value}),className:"bg-white/5 border-white/10 text-white",placeholder:"Vortex PCs"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Used in page titles and throughout the site"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-white mb-2 block",children:"Site Description"}),r.jsx(Mn,{value:se.siteDescription,onChange:j=>oe({...se,siteDescription:j.target.value}),className:"bg-white/5 border-white/10 text-white",placeholder:"Custom PC Building & Gaming Systems",rows:3}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Used in meta description tags for SEO"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-white mb-2 block",children:"SEO Keywords"}),r.jsx(xe,{value:se.siteKeywords,onChange:j=>oe({...se,siteKeywords:j.target.value}),className:"bg-white/5 border-white/10 text-white",placeholder:"custom pc, gaming pc, pc builder"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Comma-separated keywords for search engines"})]})]})]}),r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center",children:[r.jsx(na,{className:"w-5 h-5 mr-2 text-blue-400"}),"Social Media META Tags"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(le,{className:"text-white mb-2 block",children:"Open Graph Image URL"}),r.jsx(xe,{value:se.ogImage,onChange:j=>oe({...se,ogImage:j.target.value}),className:"bg-white/5 border-white/10 text-white",placeholder:"https://vortexpcs.com/og-image.jpg"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Image displayed when sharing on Facebook, LinkedIn, etc. (1200x630px recommended)"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-white mb-2 block",children:"Twitter Handle"}),r.jsx(xe,{value:se.twitterHandle,onChange:j=>oe({...se,twitterHandle:j.target.value}),className:"bg-white/5 border-white/10 text-white",placeholder:"@VortexPCs"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Your Twitter/X account handle for attribution"})]})]})]}),r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center",children:[r.jsx(Yx,{className:"w-5 h-5 mr-2 text-green-400"}),"Generated META Tags Preview"]}),r.jsx("div",{className:"bg-slate-950 p-4 rounded-lg border border-white/10 overflow-x-auto",children:r.jsx("pre",{className:"text-xs text-green-300 font-mono",children:`<!-- Primary META Tags -->
<title>${se.siteName}</title>
<meta name="title" content="${se.siteName}" />
<meta name="description" content="${se.siteDescription}" />
<meta name="keywords" content="${se.siteKeywords}" />

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website" />
<meta property="og:url" content="https://vortexpcs.com/" />
<meta property="og:title" content="${se.siteName}" />
<meta property="og:description" content="${se.siteDescription}" />
<meta property="og:image" content="${se.ogImage}" />

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:url" content="https://vortexpcs.com/" />
<meta property="twitter:title" content="${se.siteName}" />
<meta property="twitter:description" content="${se.siteDescription}" />
<meta property="twitter:image" content="${se.ogImage}" />
<meta name="twitter:site" content="${se.twitterHandle}" />
<meta name="twitter:creator" content="${se.twitterHandle}" />`})}),r.jsx("p",{className:"text-xs text-gray-400 mt-3",children:"These META tags will be applied to your site. Copy this code to your index.html file or use a META tag manager."})]}),r.jsx(q,{className:"bg-gradient-to-r from-yellow-500/10 to-orange-500/10 border-yellow-500/30 p-4",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(mt,{className:"w-5 h-5 text-yellow-400 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-semibold mb-1",children:"How to Apply META Tags"}),r.jsx("p",{className:"text-gray-300 text-sm mb-2",children:"To apply these META tags to your site:"}),r.jsxs("ol",{className:"text-gray-300 text-sm space-y-1 list-decimal list-inside",children:[r.jsx("li",{children:"Copy the generated META tags above"}),r.jsxs("li",{children:["Open your"," ",r.jsx("code",{className:"bg-white/10 px-1 rounded",children:"index.html"})," ","file"]}),r.jsxs("li",{children:["Paste the tags inside the"," ",r.jsx("code",{className:"bg-white/10 px-1 rounded",children:"<head>"})," ","section"]}),r.jsx("li",{children:"Save and redeploy your site"})]}),r.jsx("p",{className:"text-gray-300 text-sm mt-2",children:"Alternatively, use the Contentful CMS link to manage settings centrally."})]})]})}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx($,{onClick:()=>d(!1),variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:"Close"}),r.jsxs($,{onClick:()=>{navigator.clipboard.writeText(`<!-- Primary META Tags -->
<title>${se.siteName}</title>
<meta name="title" content="${se.siteName}" />
<meta name="description" content="${se.siteDescription}" />
<meta name="keywords" content="${se.siteKeywords}" />

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website" />
<meta property="og:url" content="https://vortexpcs.com/" />
<meta property="og:title" content="${se.siteName}" />
<meta property="og:description" content="${se.siteDescription}" />
<meta property="og:image" content="${se.ogImage}" />

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:url" content="https://vortexpcs.com/" />
<meta property="twitter:title" content="${se.siteName}" />
<meta property="twitter:description" content="${se.siteDescription}" />
<meta property="twitter:image" content="${se.ogImage}" />
<meta name="twitter:site" content="${se.twitterHandle}" />
<meta name="twitter:creator" content="${se.twitterHandle}" />`),alert("META tags copied to clipboard!")},className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500",children:[r.jsx(jn,{className:"w-4 h-4 mr-2"}),"Copy META Tags"]}),r.jsxs($,{onClick:()=>window.open("https://app.contentful.com/spaces/undefined/entries?content_type=siteSettings","_blank"),className:"bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500",children:[r.jsx(Tr,{className:"w-4 h-4 mr-2"}),"Open in Contentful"]})]})]})]})}),r.jsx(Et,{open:u,onOpenChange:h,children:r.jsxs(Dt,{className:"bg-slate-900 border-white/10 text-white w-[95vw] sm:w-[90vw] max-w-2xl max-h-[80vh] overflow-y-auto",children:[r.jsxs($t,{children:[r.jsxs(Lt,{className:"text-2xl font-bold flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-r from-sky-500 to-blue-500 flex items-center justify-center",children:r.jsx(Eu,{className:"w-5 h-5 text-white"})}),r.jsx("span",{children:"Bank Transfer Settings"})]}),r.jsx("p",{className:"text-gray-400 mt-2",children:"These details are displayed on the checkout when customers choose Bank Transfer."})]}),r.jsxs("div",{className:"space-y-4 mt-4",children:[r.jsxs("div",{children:[r.jsx(le,{className:"text-white mb-1 block",children:"Account Name"}),r.jsx(xe,{value:f.accountName,onChange:j=>m(z=>({...z,accountName:j.target.value})),className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-white mb-1 block",children:"Bank Name"}),r.jsx(xe,{value:f.bankName,onChange:j=>m(z=>({...z,bankName:j.target.value})),className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx(le,{className:"text-white mb-1 block",children:"Sort Code"}),r.jsx(xe,{value:f.sortCode,onChange:j=>m(z=>({...z,sortCode:j.target.value})),className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-white mb-1 block",children:"Account Number"}),r.jsx(xe,{value:f.accountNumber,onChange:j=>m(z=>({...z,accountNumber:j.target.value})),className:"bg-white/5 border-white/10 text-white"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx(le,{className:"text-white mb-1 block",children:"IBAN (optional)"}),r.jsx(xe,{value:f.iban,onChange:j=>m(z=>({...z,iban:j.target.value})),className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-white mb-1 block",children:"BIC/SWIFT (optional)"}),r.jsx(xe,{value:f.bic,onChange:j=>m(z=>({...z,bic:j.target.value})),className:"bg-white/5 border-white/10 text-white"})]})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-white mb-1 block",children:"Reference Note"}),r.jsx(xe,{value:f.referenceNote,onChange:j=>m(z=>({...z,referenceNote:j.target.value})),className:"bg-white/5 border-white/10 text-white"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-white mb-1 block",children:"Additional Instructions"}),r.jsx(Mn,{value:f.instructions,onChange:j=>m(z=>({...z,instructions:j.target.value})),className:"bg-white/5 border-white/10 text-white min-h-[90px]"})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 mt-5",children:[r.jsx($,{variant:"outline",className:"border-white/20",onClick:()=>h(!1),children:"Close"}),r.jsx($,{onClick:async()=>{try{if(!t)return;const j=t,z=j.getIdToken?await j.getIdToken():"",{updateBankTransferSettings:K,fetchBankTransferSettings:Y}=await Ie(async()=>{const{updateBankTransferSettings:ee,fetchBankTransferSettings:ue}=await import("./settings-BIczTR3D.js");return{updateBankTransferSettings:ee,fetchBankTransferSettings:ue}},[]);if(await K(f,z)){const ee=await Y();m({accountName:ee.accountName||"",bankName:ee.bankName||"",sortCode:ee.sortCode||"",accountNumber:ee.accountNumber||"",iban:ee.iban||"",bic:ee.bic||"",referenceNote:ee.referenceNote||"",instructions:ee.instructions||""}),alert("Payment settings saved."),h(!1)}else alert("Save failed. Please try again.")}catch(j){alert(j instanceof Error?j.message:"Save failed")}},className:"bg-gradient-to-r from-sky-600 to-blue-600 hover:from-sky-500 hover:to-blue-500",children:"Save Settings"})]})]})}),r.jsx(Et,{open:ie,onOpenChange:$e,children:r.jsxs(Dt,{className:"bg-slate-900 border-white/10 text-white w-[95vw] sm:w-[90vw] max-w-2xl",children:[r.jsxs($t,{children:[r.jsxs(Lt,{className:"text-2xl font-bold flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-r from-sky-500 to-blue-500 flex items-center justify-center",children:r.jsx(ta,{className:"w-5 h-5 text-white"})}),r.jsx("span",{children:"Update Build Progress"})]}),ne&&r.jsxs("p",{className:"text-gray-400 mt-2",children:["Order #",ne.orderId," -"," ",ne.customerName]})]}),r.jsxs("div",{className:"space-y-6 mt-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsx(le,{className:"text-white font-semibold",children:"Build Progress"}),r.jsxs("span",{className:"text-sky-400 font-bold text-2xl",children:[Vt,"%"]})]}),r.jsx("input",{type:"range",min:"0",max:"100",value:Vt,onChange:j=>$r(Number(j.target.value)),className:"w-full h-3 bg-white/10 rounded-lg appearance-none cursor-pointer accent-sky-500"}),r.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[r.jsx("span",{children:"0%"}),r.jsx("span",{children:"25%"}),r.jsx("span",{children:"50%"}),r.jsx("span",{children:"75%"}),r.jsx("span",{children:"100%"})]})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-white font-semibold mb-2 block",children:"Order Status"}),r.jsxs("select",{value:Lr,onChange:j=>Tt(j.target.value),className:"w-full h-12 bg-white/5 border border-white/10 text-white rounded-md px-4 focus:border-sky-500/50 focus:ring-sky-500/20 focus:outline-none",children:[r.jsx("option",{value:"pending",className:"bg-slate-900",children:"Pending"}),r.jsx("option",{value:"building",className:"bg-slate-900",children:"Building"}),r.jsx("option",{value:"testing",className:"bg-slate-900",children:"Testing"}),r.jsx("option",{value:"shipped",className:"bg-slate-900",children:"Shipped"}),r.jsx("option",{value:"delivered",className:"bg-slate-900",children:"Delivered"}),r.jsx("option",{value:"completed",className:"bg-slate-900",children:"Completed"})]})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-white font-semibold mb-2 block",children:"Status Update Note (Optional)"}),r.jsx(Mn,{value:Zr,onChange:j=>Zt(j.target.value),placeholder:"E.g., 'Completed motherboard installation', 'Running stress tests', etc.",className:"bg-white/5 border-white/10 text-white min-h-[100px] focus:border-sky-500/50 focus:ring-sky-500/20"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This note will be visible to the customer in their Member Area"})]}),ne&&r.jsxs(q,{className:"bg-white/5 border-white/10 p-4",children:[r.jsx("h4",{className:"text-white font-semibold mb-3",children:"Order Details"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Customer:"}),r.jsx("span",{className:"text-white",children:ne.customerName})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Email:"}),r.jsx("span",{className:"text-white",children:ne.customerEmail})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Order Date:"}),r.jsx("span",{className:"text-white",children:ne.orderDate&&!isNaN(new Date(ne.orderDate).getTime())?new Date(ne.orderDate).toLocaleDateString("en-GB"):"N/A"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Total:"}),r.jsxs("span",{className:"text-green-400 font-bold",children:["£",ne.total.toLocaleString()]})]})]})]}),r.jsx(q,{className:"bg-gradient-to-r from-sky-500/10 to-blue-500/10 border-sky-500/30 p-4",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(mt,{className:"w-5 h-5 text-sky-400 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-semibold mb-1",children:"Real-Time Customer Updates"}),r.jsx("p",{className:"text-gray-300 text-sm",children:`When you update the build progress, the customer will see the changes immediately in their Member Area under the "Build Progress" tab. They'll receive real-time updates on their build status.`})]})]})}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx($,{onClick:()=>$e(!1),variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:"Cancel"}),r.jsxs($,{onClick:SP,className:"bg-gradient-to-r from-sky-600 to-blue-600 hover:from-sky-500 hover:to-blue-500",children:[r.jsx(ta,{className:"w-4 h-4 mr-2"}),"Update Progress"]})]})]})]})}),r.jsx(Et,{open:Us,onOpenChange:Yn,children:r.jsxs(Dt,{className:"bg-zinc-900 border-white/10 text-white w-[95vw] sm:w-[90vw] max-w-lg",children:[r.jsx($t,{children:r.jsxs(Lt,{className:"text-2xl font-bold flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-r from-red-600 to-rose-600 flex items-center justify-center",children:r.jsx(Kr,{className:"w-5 h-5 text-white"})}),r.jsx("span",{children:"Delete Order"})]})}),Wt&&r.jsxs("div",{className:"space-y-4 mt-4",children:[r.jsxs(q,{className:"bg-white/5 border-white/10 p-4",children:[r.jsxs("p",{className:"text-sm text-gray-300",children:["You are about to permanently delete order",r.jsxs("span",{className:"font-semibold text-white ml-1",children:["#",Wt.orderId]}),". This action cannot be undone."]}),r.jsxs("div",{className:"mt-3 text-sm space-y-1",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Customer:"}),r.jsx("span",{className:"text-white",children:Wt.customerName})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Email:"}),r.jsx("span",{className:"text-white",children:Wt.customerEmail})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Total:"}),r.jsxs("span",{className:"text-green-400 font-bold",children:["£",Wt.total.toLocaleString()]})]})]})]}),r.jsx(q,{className:"bg-red-500/10 border-red-500/30 p-4",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(mt,{className:"w-5 h-5 text-red-400 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-semibold mb-1",children:"Irreversible Action"}),r.jsxs("p",{className:"text-red-200 text-xs",children:["The order document will be removed from the live database. An audit snapshot is stored in"," ",r.jsx("code",{className:"font-mono",children:"deleted_orders"})," ","for compliance."]})]})]})}),r.jsxs("label",{className:"flex items-center space-x-3 text-sm text-gray-300 select-none",children:[r.jsx("input",{type:"checkbox",checked:va,onChange:j=>Ja(j.target.checked),className:"h-4 w-4 rounded border-white/20 bg-white/10"}),r.jsx("span",{children:"Also reject any pending refund requests for this order"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[r.jsx($,{variant:"outline",onClick:()=>{Ke||(Yn(!1),ba(null))},className:"border-white/20 text-white hover:bg-white/10",children:"Cancel"}),r.jsxs($,{onClick:AP,disabled:Ke,className:"bg-gradient-to-r from-red-600 to-rose-600 hover:from-red-500 hover:to-rose-500 disabled:opacity-50",children:[Ke?r.jsx(aa,{className:"w-4 h-4 animate-spin"}):r.jsx(Kr,{className:"w-4 h-4 mr-2"}),Ke?"Deleting...":"Delete Order"]})]})]})]})}),r.jsx(Et,{open:cP,onOpenChange:Dl,children:r.jsxs(Dt,{className:"bg-zinc-900 border-white/10 text-white w-[95vw] sm:w-[90vw] max-w-3xl max-h-[80vh] overflow-y-auto",children:[r.jsx($t,{children:r.jsx(Lt,{className:"text-2xl font-bold text-white",children:"Ticket Details"})}),r.jsx("div",{className:"space-y-6",children:dt&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(le,{className:"text-gray-400 text-sm",children:"Ticket ID"}),r.jsx("p",{className:"text-white font-mono text-sm mt-1",children:dt.id})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-gray-400 text-sm",children:"Status"}),r.jsx("div",{className:"mt-1",children:r.jsx(H,{variant:"outline",className:dt.status==="open"?"border-yellow-500/40 text-yellow-400 bg-yellow-500/10":dt.status==="in-progress"?"border-blue-500/40 text-blue-400 bg-blue-500/10":"border-green-500/40 text-green-400 bg-green-500/10",children:ss(dt.status)})})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-gray-400 text-sm",children:"Priority"}),r.jsx("div",{className:"mt-1",children:r.jsx(H,{variant:"outline",className:dt.priority==="high"||dt.priority==="urgent"?"border-red-500/40 text-red-400 bg-red-500/10":dt.priority==="normal"?"border-yellow-500/40 text-yellow-400 bg-yellow-500/10":"border-green-500/40 text-green-400 bg-green-500/10",children:dt.priority||"low"})})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-gray-400 text-sm",children:"Type"}),r.jsx("p",{className:"text-white mt-1",children:dt.type||"general"})]})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-gray-400 text-sm",children:"Subject"}),r.jsx("p",{className:"text-white font-semibold mt-1",children:dt.subject||"Untitled"})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-gray-400 text-sm",children:"Initial Message"}),r.jsx(q,{className:"bg-white/5 border-white/10 p-4 mt-2",children:r.jsx("p",{className:"text-gray-300",children:dt.message||"No message"})})]}),r.jsxs("div",{children:[r.jsx(le,{className:"text-gray-400 text-sm",children:"Customer Email"}),r.jsx("p",{className:"text-white mt-1",children:dt.email||"Unknown"})]}),dt.messages&&dt.messages.length>0&&r.jsxs("div",{children:[r.jsx(le,{className:"text-gray-400 text-sm mb-3 block",children:"Conversation History"}),r.jsx("div",{className:"space-y-3",children:dt.messages.map((j,z)=>{var K,Y;return r.jsxs(q,{className:"bg-white/5 border-white/10 p-4",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx(H,{variant:"outline",className:"border-sky-500/40 text-sky-400 bg-sky-500/10",children:j.senderId?"Customer":"Support"}),r.jsx("span",{className:"text-xs text-gray-400",children:j.timestamp instanceof Date?j.timestamp.toLocaleString("en-GB"):(Y=(K=j.timestamp)==null?void 0:K.toDate)!=null&&Y.call(K)?j.timestamp.toDate().toLocaleString("en-GB"):"Recently"})]}),r.jsx("p",{className:"text-gray-300",children:j.body}),j.attachments&&j.attachments.length>0&&r.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:j.attachments.map((G,ee)=>r.jsxs(H,{variant:"outline",className:"border-purple-500/40 text-purple-400 bg-purple-500/10",children:[r.jsx(My,{className:"w-3 h-3 mr-1"}),G.name]},ee))})]},z)})})]}),e&&r.jsxs("div",{className:"mt-6 border-t border-white/10 pt-4 space-y-4",children:[r.jsx(le,{className:"text-gray-400 text-sm",children:"Reply"}),r.jsx(Mn,{value:zs,onChange:j=>Lg(j.target.value),placeholder:"Write a reply to the customer or internal note...",className:"bg-white/5 border-white/10 text-white min-h-[120px]"}),r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"internalNote",checked:Ml,onChange:j=>Bg(j.target.checked),className:"h-4 w-4 rounded bg-white/10 border-white/20"}),r.jsx(le,{htmlFor:"internalNote",className:"text-sm text-gray-300",children:"Internal (customer won't see this)"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{children:[r.jsx("input",{type:"file",multiple:!0,onChange:wP,className:"text-sm text-gray-300"}),Wg>0&&r.jsxs("div",{className:"text-xs text-sky-400 mt-1",children:["Uploading... ",Wg,"%"]})]}),Qi.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2 max-w-[300px]",children:Qi.map((j,z)=>r.jsxs(H,{variant:"outline",className:"border-purple-500/40 text-purple-400 bg-purple-500/10",children:[r.jsx(My,{className:"w-3 h-3 mr-1"}),j.name]},z))})]})]}),Ug&&r.jsx("div",{className:"text-sm text-red-400",children:Ug}),r.jsx("div",{className:"flex justify-end",children:r.jsx($,{disabled:Fg||!zs.trim(),onClick:jP,className:"bg-gradient-to-r from-sky-600 to-blue-600 hover:from-sky-500 hover:to-blue-500",children:Fg?"Sending...":"Send Reply"})})]}),r.jsxs("div",{className:"flex justify-between pt-4 border-t border-white/10",children:[r.jsx($,{onClick:()=>Dl(!1),variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:"Close"}),r.jsx("div",{className:"flex gap-2",children:dt.status!=="closed"&&r.jsx($,{onClick:async()=>{if(dt.id)try{await Ys(dt.id,{status:"closed"});const j=await Jn();wr(j),Dl(!1)}catch{alert("Failed to close ticket")}},className:"bg-gradient-to-r from-green-600 to-green-500 hover:from-green-500 hover:to-green-400",children:"Mark as Closed"})})]})]})})]})}),r.jsx(Et,{open:dP,onOpenChange:Vs,children:r.jsxs(Dt,{className:"bg-slate-900 border-red-500/30 text-white w-[95vw] sm:w-[90vw] max-w-2xl",children:[r.jsx($t,{children:r.jsxs(Lt,{className:"flex items-center gap-2 text-xl",children:[r.jsx(rc,{className:"w-6 h-6 text-red-400"}),"Security Alert Details"]})}),Nt&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"glass p-4 rounded-lg border border-red-500/30 bg-red-500/5",children:r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold text-white mb-1",children:Nt.description}),r.jsxs("p",{className:"text-xs text-gray-400",children:["Alert ID: ",Nt.id]})]}),r.jsx(H,{className:"bg-red-500/20 text-red-400 border-red-500/30",children:Nt.type||"Security Event"})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs(q,{className:"glass border-white/10 p-4",children:[r.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Detected At"}),r.jsx("p",{className:"text-sm text-white font-mono",children:new Date(Nt.timestamp).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),r.jsxs(q,{className:"glass border-white/10 p-4",children:[r.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Event Type"}),r.jsx("p",{className:"text-sm text-white capitalize",children:Nt.type||"Unknown"})]}),r.jsxs(q,{className:"glass border-white/10 p-4",children:[r.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Severity Level"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),r.jsx("p",{className:"text-sm text-red-400 font-semibold",children:"High"})]})]}),r.jsxs(q,{className:"glass border-white/10 p-4",children:[r.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Status"}),r.jsx(H,{className:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",children:"Requires Review"})]})]}),r.jsxs(q,{className:"glass border-white/10 p-4",children:[r.jsx("h4",{className:"text-sm font-semibold text-white mb-2",children:"Event Description"}),r.jsx("p",{className:"text-sm text-gray-300 leading-relaxed",children:Nt.description})]}),r.jsxs(q,{className:"glass border-blue-500/30 bg-blue-500/5 p-4",children:[r.jsxs("h4",{className:"text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[r.jsx(mt,{className:"w-4 h-4 text-blue-400"}),"Recommended Actions"]}),r.jsx("ul",{className:"space-y-2 text-sm text-gray-300",children:Nt.type==="failed_login"?r.jsxs(r.Fragment,{children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),r.jsx("span",{children:"Review login attempts and verify they are legitimate"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),r.jsx("span",{children:"Consider implementing IP blocking if suspicious activity continues"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),r.jsx("span",{children:"Enable two-factor authentication for affected accounts"})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),r.jsx("span",{children:"Investigate the security event immediately"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),r.jsx("span",{children:"Review system logs for related activities"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-blue-400 mt-1",children:"•"}),r.jsx("span",{children:"Contact your security team if necessary"})]})]})})]}),U.length>1&&r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/10",children:[r.jsx($,{variant:"outline",size:"sm",className:"border-white/20 text-white",disabled:U.findIndex(j=>j.id===Nt.id)===0,onClick:()=>{const j=U.findIndex(z=>z.id===Nt.id);j>0&&Il(U[j-1])},children:"← Previous Alert"}),r.jsxs("span",{className:"text-xs text-gray-400",children:["Alert"," ",U.findIndex(j=>j.id===Nt.id)+1," ","of ",U.length]}),r.jsx($,{variant:"outline",size:"sm",className:"border-white/20 text-white",disabled:U.findIndex(j=>j.id===Nt.id)===U.length-1,onClick:()=>{const j=U.findIndex(z=>z.id===Nt.id);j<U.length-1&&Il(U[j+1])},children:"Next Alert →"})]}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsx($,{className:"flex-1 bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 disabled:opacity-50",disabled:Ig,onClick:CP,children:Ig?r.jsx(aa,{className:"w-4 h-4 animate-spin"}):"Report to Security Team"}),r.jsxs($,{variant:"outline",className:"border-red-500/50 text-red-400 hover:bg-red-500/10 hover:border-red-500",onClick:PP,children:[r.jsx(Kr,{className:"w-4 h-4 mr-2"}),"Delete"]}),r.jsx($,{variant:"outline",className:"border-white/20 text-white hover:bg-white/10",onClick:()=>Vs(!1),children:"Close"})]})]})]})})]})})})})}const Z9=({customers:e})=>{const[t,n]=k.useState("all"),[a,s]=k.useState(""),[i,o]=k.useState(""),[l,c]=k.useState("<p>Write your message...</p>"),[d,u]=k.useState(!1),[h,f]=k.useState(null),[m,g]=k.useState(null),[p,x]=k.useState(""),[b,y]=k.useState(0),[w,S]=k.useState(!1),[v,N]=k.useState("advanced"),A="emailComposerDraft_v1";k.useEffect(()=>{try{const M=localStorage.getItem(A);if(M){const E=JSON.parse(M);E.subject&&o(E.subject),E.html&&c(E.html),E.manualEmails&&s(E.manualEmails),E.mode&&n(E.mode)}}catch{}},[]),k.useEffect(()=>{const M=setTimeout(()=>{try{const E={subject:i,html:l,manualEmails:a,mode:t};localStorage.setItem(A,JSON.stringify(E))}catch{}},500);return()=>clearTimeout(M)},[i,l,a,t]),k.useEffect(()=>{const M=w0({title:i||"Vortex PCs Update",preheader:i,contentHtml:l});x(M)},[i,l]);const P=t==="all"?e.length:a.split(/[,\n]/).map(M=>M.trim()).filter(M=>/@/.test(M)).length,T=async()=>{u(!0),f(null),g(null),y(0),S(!0);const C=Math.max(1,Math.ceil(P/50));let O=0;const _=setInterval(()=>{O+=1;const D=Math.min(90,Math.round(O/C*90));y(D),d||clearInterval(_),O>=C&&clearInterval(_)},400);try{const D=w0({title:i||"Vortex PCs Update",preheader:i,contentHtml:l}),L=t==="emails"?a.split(/[\n,]/).map(X=>X.trim()).filter(X=>/@/.test(X)):void 0,V=await Y4({subject:i,html:D,preheader:i,recipients:L,mode:t});y(100),f(`Sent ${V.sent}/${V.recipients} (batches: ${V.batches}, size: ${V.batchSize}).`)}catch(D){g(D instanceof Error?D.message:"Failed to send email")}finally{u(!1),setTimeout(()=>S(!1),1500)}};return r.jsxs(q,{className:"bg-white/5 border-white/10 backdrop-blur-xl p-6 space-y-6",children:[r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx(le,{className:"text-white",children:"Subject"}),r.jsx(xe,{value:i,onChange:M=>o(M.target.value),placeholder:"Product launch, maintenance notice, etc...",className:"bg-black/30 border-white/10 text-white"}),r.jsx(le,{className:"text-white",children:"Recipients"}),r.jsxs("div",{className:"flex gap-3 flex-wrap",children:[r.jsxs($,{type:"button",variant:t==="all"?"default":"outline",className:t==="all"?"bg-sky-600":"border-white/20 text-white hover:bg-white/10",onClick:()=>n("all"),children:["All Customers (",e.length,")"]}),r.jsx($,{type:"button",variant:t==="emails"?"default":"outline",className:t==="emails"?"bg-sky-600":"border-white/20 text-white hover:bg-white/10",onClick:()=>n("emails"),children:"Manual List"})]}),t==="emails"&&r.jsx(Mn,{value:a,onChange:M=>s(M.target.value),placeholder:"Enter one email per line or comma separated",className:"bg-black/30 border-white/10 text-white h-32"}),r.jsxs("div",{className:"text-xs text-gray-400",children:["Estimated recipients:"," ",r.jsx("span",{className:"text-sky-400 font-semibold",children:P})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(le,{className:"text-white",children:"Message Content"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx($,{type:"button",size:"sm",variant:v==="simple"?"default":"outline",className:v==="simple"?"bg-sky-600 h-7 text-xs":"border-white/20 text-white hover:bg-white/10 h-7 text-xs",onClick:()=>N("simple"),children:"Simple"}),r.jsx($,{type:"button",size:"sm",variant:v==="advanced"?"default":"outline",className:v==="advanced"?"bg-sky-600 h-7 text-xs":"border-white/20 text-white hover:bg-white/10 h-7 text-xs",onClick:()=>N("advanced"),children:"Advanced"})]})]}),v==="simple"?r.jsx(v9,{value:l,onChange:c}):r.jsx(j9,{value:l,onChange:c})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(le,{className:"text-white flex items-center gap-2",children:["Live Preview",r.jsx(H,{className:"bg-sky-500/20 text-sky-300 border-sky-500/30 border",children:"Branded"})]}),r.jsx("div",{className:"rounded-md border border-white/10 bg-black/30 overflow-hidden h-[500px]",children:r.jsx("iframe",{title:"Email Preview",style:{width:"100%",height:"100%",border:0},sandbox:"allow-same-origin allow-popups",srcDoc:p})})]}),(d||w)&&r.jsx("div",{className:"w-full bg-white/5 border border-white/10 h-3 rounded overflow-hidden",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-sky-600 to-blue-600 transition-all duration-300",style:{width:`${b}%`}})}),m&&r.jsx("div",{className:"text-sm text-red-400",children:m}),h&&r.jsx("div",{className:"text-sm text-green-400",children:h}),r.jsxs("div",{className:"flex justify-end",children:[r.jsx($,{type:"button",variant:"outline",disabled:d,onClick:()=>{o(""),c("<p>Write your message...</p>"),s(""),n("all"),f(null),g(null),y(0);try{localStorage.removeItem(A)}catch{}},className:"mr-3 border-white/20 text-white hover:bg-white/10",children:"Clear Draft"}),r.jsx($,{type:"button",disabled:d||!i||P===0,onClick:T,className:"bg-gradient-to-r from-sky-600 to-blue-600 hover:from-sky-500 hover:to-blue-500",children:d?"Sending...":"Send Email"})]}),r.jsx("div",{className:"text-xs text-gray-500 text-right",children:"Draft auto-saved locally."})]})};export{mV as AdminPanel};
