import{j as e}from"./three-DYdjUtCm.js";import{D,z as G,E as O,F as V,A as E,C as h,B as y,X as L,G as U,w as m,H as g}from"./index-C09NoPC0.js";import{T as A}from"./trending-down-PXnwlVQp.js";import"./contentful-6-L6ww-u.js";import"./firebase-D5dyMTPx.js";function W({open:v,onClose:j,builds:n,onRemoveBuild:b,componentData:w,optionalExtrasData:C}){const p=(s,a)=>(w[s]||[]).find(r=>r.id===a),P=(s,a)=>(C[s]||[]).find(r=>r.id===a),o=s=>{let a=0;return Object.entries(s.peripherals).forEach(([c,r])=>{r.forEach(l=>{const i=P(c,l);i!=null&&i.price&&(a+=i.price)})}),a},M=["case","motherboard","cpu","gpu","ram","storage","psu","cooling"],N=n.map(s=>s.totalPrice+o(s)),k=Math.max(...N),B=Math.min(...N),T=s=>{const a=Object.keys(s.components).length,c=Object.values(s.peripherals).flat().length,r=s.totalPrice+o(s);return(a+c)/(r||1)},f=n.map(s=>T(s)),S=f.indexOf(Math.max(...f)),x=(s,a,c)=>{const r=s.components[a];if(!r)return 0;const l=p(a,r);if(!l)return 0;const i=l[c];return typeof i=="number"?i:0},$=s=>({case:"Case",motherboard:"Motherboard",cpu:"CPU",gpu:"Graphics Card",ram:"Memory",storage:"Storage",psu:"Power Supply",cooling:"Cooling"})[s]||s;return e.jsx(D,{open:v,onOpenChange:j,children:e.jsxs(G,{className:"max-w-7xl max-h-[90vh] overflow-y-auto bg-black/95 border-white/10 backdrop-blur-xl",children:[e.jsx(O,{children:e.jsxs(V,{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(E,{className:"w-6 h-6 text-sky-400"}),"Build Comparison"]})}),n.length===0?e.jsxs("div",{className:"py-12 text-center",children:[e.jsx("p",{className:"text-gray-400 text-lg",children:"No builds saved for comparison yet."}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:'Use the "Save for Comparison" button to add builds here.'})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${n.length}, 1fr)`},children:n.map((s,a)=>{const c=s.totalPrice+o(s),r=c===B,l=c===k,i=a===S;return e.jsxs(h,{className:"bg-white/5 border-white/10 p-4 relative",children:[e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>b(s.id),className:"absolute top-2 right-2 w-8 h-8 p-0 text-gray-400 hover:text-red-400",children:e.jsx(L,{className:"w-4 h-4"})}),e.jsxs("div",{className:"pr-8",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(s.timestamp).toLocaleDateString()}),e.jsx(U,{className:"my-3 border-white/10"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Total Price"}),e.jsxs("span",{className:"text-xl font-bold text-sky-400",children:["£",c.toLocaleString()]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[i&&e.jsx(m,{className:"bg-green-500/20 border-green-500/40 text-green-300 text-xs",children:"Best Value"}),r&&e.jsx(m,{className:"bg-blue-500/20 border-blue-500/40 text-blue-300 text-xs",children:"Lowest Price"}),l&&n.length>1&&e.jsx(m,{className:"bg-purple-500/20 border-purple-500/40 text-purple-300 text-xs",children:"Premium"})]})]})]})]},s.id)})}),e.jsxs(h,{className:"bg-white/5 border-white/10 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Component Comparison"}),e.jsx("div",{className:"space-y-4",children:M.map(s=>{if(!n.some(l=>l.components[s]))return null;const c=n.map(l=>{const i=l.components[s];if(!i)return 0;const t=p(s,i);return(t==null?void 0:t.price)||0}),r=Math.min(...c.filter(l=>l>0));return e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-sky-400 mb-2",children:$(s)}),e.jsx("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${n.length}, 1fr)`},children:n.map(l=>{const i=l.components[s];if(!i)return e.jsx("div",{className:"p-3 rounded-lg bg-white/5 border border-white/5",children:e.jsx("p",{className:"text-sm text-gray-500 italic",children:"Not selected"})},l.id);const t=p(s,i),d=(t==null?void 0:t.price)||0,u=d===r&&d>0;return e.jsxs("div",{className:`p-3 rounded-lg bg-white/5 border transition-colors ${u?"border-green-500/30 bg-green-500/5":"border-white/10"}`,children:[e.jsx("p",{className:"text-sm font-medium text-white line-clamp-2",children:(t==null?void 0:t.name)||"Unknown"}),t!=null&&t.brand&&typeof t.brand=="string"?e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:t.brand}):null,d>0&&e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[e.jsxs("span",{className:"text-sm font-semibold text-sky-400",children:["£",d.toLocaleString()]}),u&&e.jsx(A,{className:"w-3 h-3 text-green-400"})]}),s==="cpu"&&typeof(t==null?void 0:t.cores)=="number"&&e.jsxs(m,{variant:"secondary",className:"mt-2 text-xs",children:[t.cores," Cores"]}),s==="gpu"&&typeof(t==null?void 0:t.vram)=="number"&&e.jsxs(m,{variant:"secondary",className:"mt-2 text-xs",children:[t.vram,"GB VRAM"]}),s==="ram"&&typeof(t==null?void 0:t.capacity)=="number"&&e.jsxs(m,{variant:"secondary",className:"mt-2 text-xs",children:[t.capacity,"GB"]}),s==="storage"&&typeof(t==null?void 0:t.capacity)=="number"&&e.jsxs(m,{variant:"secondary",className:"mt-2 text-xs",children:[t.capacity,"GB"]}),s==="psu"&&typeof(t==null?void 0:t.wattage)=="number"&&e.jsxs(m,{variant:"secondary",className:"mt-2 text-xs",children:[t.wattage,"W"]})]},l.id)})})]},s)})})]}),e.jsxs(h,{className:"bg-white/5 border-white/10 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Performance Highlights"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-sky-400 mb-2",children:"CPU Cores"}),e.jsx("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${n.length}, 1fr)`},children:n.map(s=>{const a=x(s,"cpu","cores"),c=Math.max(...n.map(l=>x(l,"cpu","cores"))),r=a===c&&a>0;return e.jsx("div",{className:"flex items-center gap-2",children:a>0?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`text-lg font-bold ${r?"text-green-400":"text-white"}`,children:a}),r&&e.jsx(g,{className:"w-4 h-4 text-green-400"})]}):e.jsx("span",{className:"text-sm text-gray-500",children:"—"})},s.id)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-sky-400 mb-2",children:"GPU VRAM"}),e.jsx("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${n.length}, 1fr)`},children:n.map(s=>{const a=x(s,"gpu","vram"),c=Math.max(...n.map(l=>x(l,"gpu","vram"))),r=a===c&&a>0;return e.jsx("div",{className:"flex items-center gap-2",children:a>0?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:`text-lg font-bold ${r?"text-green-400":"text-white"}`,children:[a,"GB"]}),r&&e.jsx(g,{className:"w-4 h-4 text-green-400"})]}):e.jsx("span",{className:"text-sm text-gray-500",children:"—"})},s.id)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-sky-400 mb-2",children:"RAM Capacity"}),e.jsx("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${n.length}, 1fr)`},children:n.map(s=>{const a=x(s,"ram","capacity"),c=Math.max(...n.map(l=>x(l,"ram","capacity"))),r=a===c&&a>0;return e.jsx("div",{className:"flex items-center gap-2",children:a>0?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:`text-lg font-bold ${r?"text-green-400":"text-white"}`,children:[a,"GB"]}),r&&e.jsx(g,{className:"w-4 h-4 text-green-400"})]}):e.jsx("span",{className:"text-sm text-gray-500",children:"—"})},s.id)})})]})]})]}),n.some(s=>Object.values(s.peripherals).flat().length>0)&&e.jsxs(h,{className:"bg-white/5 border-white/10 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Optional Extras"}),e.jsx("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${n.length}, 1fr)`},children:n.map(s=>{const a=Object.values(s.peripherals).flat().length,c=o(s);return e.jsxs("div",{className:"p-3 rounded-lg bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Items"}),e.jsx(m,{variant:"secondary",className:"text-xs",children:a})]}),c>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Total"}),e.jsxs("span",{className:"text-sm font-semibold text-sky-400",children:["£",c.toLocaleString()]})]})]},s.id)})})]})]}),e.jsx("div",{className:"flex justify-end gap-3 mt-6",children:e.jsx(y,{onClick:j,variant:"outline",className:"border-white/10 text-white",children:"Close"})})]})})}export{W as BuildComparisonModal};
