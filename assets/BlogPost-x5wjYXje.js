import{j as e,r as m}from"./three-DYdjUtCm.js";import{C as w,B as u,u as D,ad as M,f as G,l as $,ae as z}from"./index-C09NoPC0.js";import{S as v}from"./skeleton-B_A9_DIG.js";import{I as O,B as c,M as k,a as U}from"./contentful-6-L6ww-u.js";import"./firebase-D5dyMTPx.js";function F({post:s}){if(!(s!=null&&s.title)||!(s!=null&&s.slug))return null;const t=typeof window<"u"?window.location.href:void 0,p=s.heroImage,x={"@context":"https://schema.org","@type":"BlogPosting",headline:s.title,name:s.title,description:s.excerpt||void 0,author:s.authorName?{"@type":"Person",name:s.authorName}:void 0,image:p?[p]:void 0,datePublished:s.publishedDate||void 0,dateModified:s.updatedAt||s.publishedDate||void 0,mainEntityOfPage:t?{"@type":"WebPage","@id":t}:void 0};return e.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(x)}})}function K({title:s,url:t,className:p}){const[x,j]=m.useState(!1),i=m.useMemo(()=>t||(typeof window<"u"?window.location.href:""),[t]),g=encodeURIComponent(i),f=encodeURIComponent(s),b={twitter:`https://twitter.com/intent/tweet?url=${g}&text=${f}`,linkedin:`https://www.linkedin.com/sharing/share-offsite/?url=${g}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${g}`},N=async()=>{try{await navigator.clipboard.writeText(i),j(!0),setTimeout(()=>j(!1),1500)}catch{}};return e.jsxs(w,{className:`bg-white/5 backdrop-blur-xl border-white/10 p-3 flex flex-row flex-wrap items-center gap-2 sm:gap-3 ${p||""}`,children:[e.jsx("span",{className:"text-xs text-gray-400 mr-2 shrink-0",children:"Share:"}),e.jsx("a",{className:"inline-flex shrink-0",href:b.twitter,target:"_blank",rel:"noopener noreferrer",children:e.jsx(u,{size:"sm",className:"bg-white/10 hover:bg-white/20",children:"X / Twitter"})}),e.jsx("a",{className:"inline-flex shrink-0",href:b.linkedin,target:"_blank",rel:"noopener noreferrer",children:e.jsx(u,{size:"sm",className:"bg-white/10 hover:bg-white/20",children:"LinkedIn"})}),e.jsx("a",{className:"inline-flex shrink-0",href:b.facebook,target:"_blank",rel:"noopener noreferrer",children:e.jsx(u,{size:"sm",className:"bg-white/10 hover:bg-white/20",children:"Facebook"})}),e.jsx("span",{className:"inline-flex shrink-0",children:e.jsx(u,{size:"sm",variant:"outline",onClick:N,className:"border-white/20",children:x?"Copied":"Copy link"})})]})}function W({className:s}){const t=D();return e.jsxs(w,{className:`bg-white/5 backdrop-blur-xl border-white/10 p-6 md:p-8 text-center ${s||""}`,children:[e.jsx("h3",{className:"text-xl md:text-2xl font-semibold mb-2",children:"Not sure what to pick?"}),e.jsx("p",{className:"text-gray-300 mb-5",children:"Tell us how you use your PC and budget—we’ll recommend a quiet, upgradeable build without the hype."}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[e.jsx(u,{onClick:()=>t("/pc-finder"),className:"bg-gradient-to-r from-sky-600 to-blue-600 hover:from-sky-500 hover:to-blue-500",children:"PC Finder (60s)"}),e.jsx(u,{onClick:()=>t("/pc-builder"),variant:"outline",className:"border-white/20",children:"Start PC Builder"}),e.jsx(u,{onClick:()=>t("/contact"),variant:"outline",className:"border-white/20",children:"Talk to a Human"})]})]})}const L=s=>!!s&&typeof s=="object"&&Array.isArray(s.content),I=s=>{if(!s)return"";if(typeof s=="string")return s;if(Array.isArray(s))return s.map(I).join("");if(typeof s=="object"&&s!==null){const t=s;if(t.nodeType==="text")return t.value||"";if(L(t))return t.content.map(I).join("")}return""},P=s=>s.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),q=s=>{const t=[],p=new Map,x=j=>{for(const i of j)if(i){if(i.nodeType===c.HEADING_1||i.nodeType===c.HEADING_2||i.nodeType===c.HEADING_3||i.nodeType===c.HEADING_4){const g=I(i);let f=P(g),b=f;const N=p.get(f)||0;N>0&&(b=`${f}-${N+1}`),p.set(f,N+1);const y=i.nodeType===c.HEADING_1?1:i.nodeType===c.HEADING_2?2:i.nodeType===c.HEADING_3?3:4;t.push({id:b,text:g,level:y})}L(i)&&x(i.content)}};return x(s.content),t};function Z({slug:s}){const[t,p]=m.useState(null),[x,j]=m.useState(!0),[i,g]=m.useState(null),[f,b]=m.useState([]),N=D();m.useEffect(()=>{let r=!0;return(async()=>{try{j(!0);const l=await M(s);if(!r)return;if(!l)g("Post not found");else if(p(l),l.tags&&l.tags.length>0)try{const n=(await G({page:1,pageSize:3,tag:l.tags[0]})).items.filter(o=>o.slug!==l.slug).slice(0,3);b(n)}catch{}else b([])}catch(l){$.error("Failed to load blog post",l),g("Failed to load post")}finally{j(!1)}})(),()=>{r=!1}},[s]);const y="category:",E=r=>r.toLowerCase().startsWith(y)?r.slice(y.length).trim():r,T=r=>{if(!r||r.length===0)return null;const l=r.find(a=>a.toLowerCase().startsWith(y));return E(l||r[0])},A=m.useRef(null),[H,_]=m.useState(0);m.useEffect(()=>{const r=()=>{const l=A.current;if(!l){_(0);return}const a=l.getBoundingClientRect(),n=window.innerHeight||0,o=a.height+n,d=Math.min(Math.max(n-a.top,0),o),h=Math.max(0,Math.min(100,Math.round(d/o*100)));_(h)};return r(),window.addEventListener("scroll",r,{passive:!0}),window.addEventListener("resize",r),()=>{window.removeEventListener("scroll",r),window.removeEventListener("resize",r)}},[]);const R=m.useMemo(()=>{if(!(t!=null&&t.contentRich))return[];try{const r=t.contentRich;return q(r).filter(l=>l.level!==1)}catch{return[]}},[t]),B=m.useMemo(()=>{const r=new Map,l=a=>{const n=I(a),o=P(n),d=r.get(o)||0,h=d>0?`${o}-${d+1}`:o;return r.set(o,d+1),h};return{renderText:a=>a.split(`
`).flatMap((o,d)=>d===0?[o]:[e.jsx("br",{},d),o]),renderMark:{[k.BOLD]:a=>e.jsx("strong",{className:"font-semibold text-white",children:a}),[k.ITALIC]:a=>e.jsx("em",{className:"italic",children:a}),[k.UNDERLINE]:a=>e.jsx("span",{className:"underline decoration-sky-500/50 underline-offset-4",children:a}),[k.CODE]:a=>e.jsx("code",{className:"bg-white/10 px-1.5 py-0.5 rounded text-sky-300",children:a})},renderNode:{[c.PARAGRAPH]:(a,n)=>e.jsx("p",{className:"mb-4 leading-relaxed text-gray-300",children:n}),[c.HEADING_1]:(a,n)=>e.jsx("h1",{id:l(a),className:"text-3xl font-bold mt-8 mb-4 text-white",children:n}),[c.HEADING_2]:(a,n)=>e.jsx("h2",{id:l(a),className:"text-2xl font-bold mt-6 mb-3 text-white",children:n}),[c.HEADING_3]:(a,n)=>e.jsx("h3",{id:l(a),className:"text-xl font-semibold mt-4 mb-2 text-white",children:n}),[c.HEADING_4]:(a,n)=>e.jsx("h4",{id:l(a),className:"text-lg font-semibold mt-3 mb-2 text-white",children:n}),[c.UL_LIST]:(a,n)=>e.jsx("ul",{className:"list-disc mb-4 space-y-2 text-gray-300 pl-6",children:n}),[c.OL_LIST]:(a,n)=>e.jsx("ol",{className:"list-decimal mb-4 space-y-2 text-gray-300 pl-6",children:n}),[c.LIST_ITEM]:(a,n)=>{const o=h=>!!h&&typeof h=="object"&&h.type==="p",d=h=>Array.isArray(h)?h.map((C,S)=>o(C)?e.jsx("span",{children:C.props.children},S):e.jsx("span",{children:C},S)):h;return e.jsx("li",{className:"",children:d(n)})},[c.QUOTE]:(a,n)=>e.jsx("blockquote",{className:"border-l-4 border-sky-500 pl-4 italic my-4 text-gray-400",children:n}),[c.HR]:()=>e.jsx("hr",{className:"my-8 border-white/10"}),[O.HYPERLINK]:(a,n)=>{let o="#";const d=a.data;if(d&&typeof d=="object"&&"uri"in d){const h=d.uri;typeof h=="string"&&(o=h)}return e.jsx("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"text-sky-400 hover:text-sky-300 underline",children:n})}}}},[]);return e.jsx("div",{className:"container mx-auto px-4 md:px-6 lg:px-8",children:e.jsxs("section",{className:"py-10 md:py-16",children:[!x&&t&&e.jsx("div",{className:"h-1 w-full bg-white/10 rounded mb-4 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-sky-600 to-blue-600 transition-[width] duration-200",style:{width:`${H}%`}})}),x&&e.jsxs(w,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6",children:[e.jsx(v,{className:"w-full h-56 rounded-lg mb-6"}),e.jsx(v,{className:"w-2/3 h-8 mb-3"}),e.jsx(v,{className:"w-1/3 h-4 mb-6"}),e.jsx(v,{className:"w-full h-24"})]}),!x&&i&&e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-400 mb-6",children:i}),e.jsx(u,{onClick:()=>N("/blog"),className:"bg-gradient-to-r from-sky-600 to-blue-600 hover:from-sky-500 hover:to-blue-500",children:"Back to Blog"})]}),!x&&t&&e.jsxs("article",{ref:A,children:[e.jsx(F,{post:{title:t.title,slug:t.slug,excerpt:t.excerpt,heroImage:t.heroImage,authorName:t.authorName,publishedDate:t.publishedDate,updatedAt:t.updatedAt}}),t.heroImage&&e.jsxs("div",{className:"relative h-60 md:h-80 w-full overflow-hidden rounded-xl mb-8 border border-white/10",children:[e.jsx("img",{src:t.heroImage,alt:t.title,className:"w-full h-full object-cover",loading:"eager",decoding:"async"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"}),T(t.tags)&&e.jsx("span",{className:"absolute top-3 left-3 text-[11px] px-2 py-1 rounded-full bg-sky-500/20 border border-sky-500/40 text-sky-300 backdrop-blur-md",children:T(t.tags)})]}),e.jsxs("header",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-3",children:t.title}),e.jsxs("div",{className:"text-gray-400 text-sm flex flex-wrap gap-4",children:[t.authorName&&e.jsxs("span",{children:["By ",t.authorName]}),t.publishedDate&&e.jsx("span",{children:new Date(t.publishedDate).toLocaleDateString()}),t.readingTimeMinutes&&e.jsxs("span",{children:[t.readingTimeMinutes," min read"]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(K,{title:t.title})}),R.length>=2&&e.jsxs(w,{className:"mt-4 bg-white/5 backdrop-blur-xl border-white/10 p-4",children:[e.jsx("div",{className:"text-xs uppercase tracking-wider text-gray-400 mb-2",children:"On this page"}),e.jsx("nav",{children:e.jsx("ul",{className:"text-sm space-y-1",children:R.map(r=>e.jsx("li",{className:r.level===2?"pl-0":r.level===3?"pl-3":"pl-6",children:e.jsx("a",{href:`#${r.id}`,className:"text-sky-300 hover:text-sky-200 underline decoration-sky-500/40",children:r.text})},r.id))})})]})]}),e.jsx(w,{className:"bg-white/5 backdrop-blur-xl border-white/10 p-6 md:p-8",children:t.contentRich?e.jsx("div",{className:"prose-blog",children:U.documentToReactComponents(t.contentRich,B)}):e.jsx(z,{html:t.contentHtml||"",className:"prose-blog"})}),e.jsx(W,{className:"mt-8"}),f.length>0&&e.jsxs("section",{className:"mt-10",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Related posts"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(r=>e.jsxs(w,{className:"group bg-white/5 backdrop-blur-xl border-white/10 hover:border-sky-500/30 transition-all duration-300 overflow-hidden",children:[r.heroImage&&e.jsxs("div",{className:"relative h-36 overflow-hidden",children:[e.jsx("img",{src:r.heroImage,alt:r.title,className:"w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500",loading:"lazy",decoding:"async"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-base font-semibold mb-2 group-hover:text-sky-400 transition-colors",children:r.title}),e.jsx(u,{size:"sm",onClick:()=>N(`/blog/${r.slug}`),className:"bg-gradient-to-r from-sky-600 to-blue-600 hover:from-sky-500 hover:to-blue-500",children:"Read"})]})]},r.id))})]}),e.jsx("div",{className:"mt-8",children:e.jsx(u,{variant:"outline",onClick:()=>N("/blog"),className:"border-white/20 hover:bg-white/10",children:"← Back to Blog"})})]})]})})}export{Z as BlogPost,Z as default};
