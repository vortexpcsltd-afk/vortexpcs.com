import{u as w,r as m,M as C,C as H,j as e,b as ee,B as se,V,L as q,c as te,d as ae,e as ie,O as re,S as oe,f as z,E as ne,g as le,H as ce}from"./three-DYdjUtCm.js";import{e as de,l as T,ba as W,w as ue,B as k,X as me,bb as pe,bq as xe,Z as he,aP as fe,br as ge,bs as ye}from"./index-C09NoPC0.js";import{M as be,a as je}from"./minimize-2-Cpy4JEyB.js";import"./contentful-6-L6ww-u.js";import"./firebase-D5dyMTPx.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=de("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);function we({position:s=[.08,.4,.05],scale:l=[.008,.008,.008],rotation:n=[Math.PI/2,-Math.PI/2,0],isSelected:t=!1,isHovered:c=!1,onClick:p,onHover:d}){const{scene:o}=w("/models/gpu/Detailed_Graphics_Card.gltf"),h=m.useMemo(()=>{const i=o.clone(!0);return i.traverse(r=>{if(!(r instanceof C))return;const u=r.geometry;if(u&&u.type==="PlaneGeometry"){r.visible=!1;return}if(r.name&&r.name.toLowerCase().includes("plane")){r.visible=!1;return}if(r.castShadow=!0,r.receiveShadow=!0,r.material&&!Array.isArray(r.material)){const x=r.material;x.envMapIntensity=1.2,c||t?(x.emissive=new H(t?"#0ea5e9":"#06b6d4"),x.emissiveIntensity=t?.4:.2):x.emissiveIntensity=0}}),i},[o,c,t]);return e.jsxs("group",{position:s,rotation:n,onClick:i=>{i.stopPropagation(),p==null||p()},onPointerOver:i=>{i.stopPropagation(),document.body.style.cursor="pointer",d==null||d(!0)},onPointerOut:()=>{document.body.style.cursor="auto",d==null||d(!1)},children:[e.jsx("primitive",{object:h,scale:l}),t&&e.jsxs("mesh",{position:[0,-.005,0],rotation:[-Math.PI/2,0,0],children:[e.jsx("planeGeometry",{args:[.2,.15]}),e.jsx("meshStandardMaterial",{color:"#00ccff",emissive:"#00ccff",emissiveIntensity:.3,transparent:!0,opacity:.2})]})]})}w.preload("/models/gpu/Detailed_Graphics_Card.gltf");w.preload("/models/pc_case/meshify_c.glb");const X=m.forwardRef(({component:s,isSelected:l,onClick:n,onHover:t},c)=>{const[p,d]=m.useState(!1),{scene:o}=w("/models/pc_case/meshify_c.glb"),h=m.useMemo(()=>o.clone(!0),[o]);m.useMemo(()=>{h.traverse(r=>{r instanceof C&&(r.visible=!0,r.castShadow=!0,r.receiveShadow=!0,r.name==="Plane012"&&(r.visible=!1),r.material&&(r.material=r.material.clone(),r.material.needsUpdate=!0))})},[h]);const i=s.scale||[1,1,1];return e.jsxs("group",{ref:c,position:s.position,rotation:s.rotation,scale:i,onClick:n,onPointerOver:r=>{d(!0),t==null||t(!0);const u=r.target;T.debug("Case hover:",{name:u==null?void 0:u.name})},onPointerOut:()=>{d(!1),t==null||t(!1)},children:[e.jsx("primitive",{object:h}),l&&e.jsxs("mesh",{position:[0,-.01,0],children:[e.jsx("boxGeometry",{args:[.45,.001,.45]}),e.jsx("meshStandardMaterial",{color:"#0ea5e9",emissive:"#0ea5e9",emissiveIntensity:.5,transparent:!0,opacity:.3})]})]})});X.displayName="PCCaseGLTFModel";function Me({position:s=[-.08,.13,-.06],scale:l=[.008,.008,.008],rotation:n=[0,0,0],isSelected:t=!1}){const{scene:c}=w("/models/motherboard/motherboard.glb"),p=m.useMemo(()=>{const d=c.clone(!0);return d.traverse(o=>{if(!(o instanceof C))return;const h=o.geometry;if(h&&h.type==="PlaneGeometry"){o.visible=!1;return}if(o.name&&o.name.toLowerCase().includes("plane")){o.visible=!1;return}if(o.castShadow=!0,o.receiveShadow=!0,o.material&&!Array.isArray(o.material)){const i=o.material;i.envMapIntensity=1.2}}),d},[c]);return e.jsxs("group",{position:s,rotation:n,children:[e.jsx("primitive",{object:p,scale:l}),t&&e.jsxs("mesh",{position:[0,-.005,0],rotation:[-Math.PI/2,0,0],children:[e.jsx("planeGeometry",{args:[.3,.25]}),e.jsx("meshStandardMaterial",{color:"#00ccff",emissive:"#00ccff",emissiveIntensity:.3,transparent:!0,opacity:.2})]})]})}w.preload("/models/motherboard/motherboard.glb");function Ne({position:s=[0,0,0],scale:l=[1,1,1],rotation:n=[0,0,0],isSelected:t=!1,onClick:c,isHovered:p=!1,onHover:d}){const{scene:o}=w("/models/psu/corsair_sf850l_psu.glb"),h=m.useMemo(()=>{if(!o)return null;const i=o.clone(!0);i.frustumCulled=!1,i.traverse(N=>{if(N instanceof C&&(N.receiveShadow=!0,N.visible=!0,N.frustumCulled=!1,N.material instanceof ee)){const v=N.material;v.envMapIntensity=.08,!!v.map||(v.color.set(657930),typeof v.roughness=="number"&&(v.roughness=.95),typeof v.metalness=="number"&&(v.metalness=.06),v.emissive&&v.emissive.set(0)),v.needsUpdate=!0}});const r=new se().setFromObject(i),u=new V,x=new V;r.getSize(u),r.getCenter(x),T.debug("PSU Bounds:",{size:{x:u.x,y:u.y,z:u.z},center:{x:x.x,y:x.y,z:x.z},min:{x:r.min.x,y:r.min.y,z:r.min.z},max:{x:r.max.x,y:r.max.y,z:r.max.z}}),Number.isFinite(x.x)&&Number.isFinite(x.y)&&Number.isFinite(x.z)&&i.position.sub(x);const b=.12,S=Math.max(u.x,u.y,u.z),P=S>0?b/S:1;return i.scale.multiplyScalar(P),i},[o]);return h?e.jsxs("group",{position:s,rotation:n,scale:l,onClick:c,onPointerOver:()=>d==null?void 0:d(!0),onPointerOut:()=>d==null?void 0:d(!1),children:[e.jsx("primitive",{object:h}),t&&e.jsxs("mesh",{position:[0,-.01,0],rotation:[-Math.PI/2,0,0],children:[e.jsx("planeGeometry",{args:[.15,.1]}),e.jsx("meshStandardMaterial",{color:"#00ccff",emissive:"#00ccff",emissiveIntensity:.3,transparent:!0,opacity:.2})]})]}):null}w.preload("/models/psu/corsair_sf850l_psu.glb");w.preload("/models/liquid_cooler.glb");const Y=m.forwardRef(({component:s,isSelected:l,onClick:n,onHover:t,isHovered:c},p)=>{const[d,o]=m.useState(!1),{scene:h}=w("/models/liquid_cooler.glb"),i=m.useMemo(()=>h.clone(!0),[h]);m.useMemo(()=>{i.traverse(u=>{if(!(u instanceof C))return;u.castShadow=!0,u.receiveShadow=!0;const b=(u.name||"").includes("Pump_09");u.visible=b})},[i]);const r=s.scale||[1,1,1];return e.jsx("group",{ref:p,position:s.position,rotation:s.rotation,scale:r,onClick:n,onPointerOver:()=>{o(!0),t==null||t(!0)},onPointerOut:()=>{o(!1),t==null||t(!1)},children:e.jsx("primitive",{object:i})})});Y.displayName="AIOPumpGLTFModel";w.preload("/models/liquid_cooler.glb");const J=m.forwardRef(({component:s,isSelected:l,onClick:n,onHover:t,isHovered:c},p)=>{const[d,o]=m.useState(!1),{scene:h}=w("/models/liquid_cooler.glb"),i=m.useMemo(()=>h.clone(!0),[h]);m.useMemo(()=>{i.traverse(u=>{if(!(u instanceof C))return;u.castShadow=!0,u.receiveShadow=!0;const x=u.name||"",b=x.includes("Radiator_Cube114"),S=x.includes("Nut")&&!x.includes("Nut003_Nut004")&&!x.includes("Nut002_Nut003")&&!x.includes("Nut001_Nut002")&&!x.includes("Nut_Nut001"),P=x.includes("RGB_Rings_Cube116")||x.includes("RGB-Plug_Cube115"),N=x.includes("Fan-Plug_Cube006");u.visible=b||S||P||N})},[i]);const r=s.scale||[1,1,1];return e.jsx("group",{ref:p,position:s.position,rotation:s.rotation,scale:r,onClick:n,onPointerOver:()=>{o(!0),t==null||t(!0)},onPointerOut:()=>{o(!1),t==null||t(!1)},children:e.jsx("primitive",{object:i})})});J.displayName="AIORadiatorGLTFModel";w.preload("/models/liquid_cooler.glb");const K=m.forwardRef(({component:s,isSelected:l,onClick:n,onHover:t,isHovered:c},p)=>{const[d,o]=m.useState(!1),{scene:h}=w("/models/liquid_cooler.glb"),i=m.useMemo(()=>h.clone(!0),[h]);m.useMemo(()=>{i.traverse(u=>{if(!(u instanceof C))return;u.castShadow=!0,u.receiveShadow=!0;const x=u.name||"",b=x.includes("FAN")||x.includes("Fan_gehäuse")||x.includes("Fan-Plug");u.visible=b})},[i]);const r=s.scale||[1,1,1];return e.jsxs("group",{ref:p,position:s.position,rotation:s.rotation,scale:r,onClick:n,onPointerOver:()=>{o(!0),t==null||t(!0)},onPointerOut:()=>{o(!1),t==null||t(!1)},children:[e.jsx("primitive",{object:i}),l&&e.jsxs("mesh",{position:[0,-.01,0],children:[e.jsx("boxGeometry",{args:[.3,.001,.15]}),e.jsx("meshStandardMaterial",{color:"#0ea5e9",emissive:"#0ea5e9",emissiveIntensity:.5,transparent:!0,opacity:.3})]})]})});K.displayName="AIOFanGLTFModel";function Se(s,l,n=.3){const t=[],p=(s[0]+l[0])/2,d=(s[1]+l[1])/2+n,o=(s[2]+l[2])/2;for(let h=0;h<=20;h++){const i=h/20,r=1-i,u=r*r*s[0]+2*r*i*p+i*i*l[0],x=r*r*s[1]+2*r*i*d+i*i*l[1],b=r*r*s[2]+2*r*i*o+i*i*l[2];t.push([u,x,b])}return t}const Pe=s=>{switch(s){case"power":return"#fbbf24";case"data":return"#0ea5e9";case"sata":return"#ef4444";default:return"#888888"}};function ke({cables:s,visible:l=!0}){return!l||s.length===0?null:e.jsx("group",{children:s.map(n=>{const t=[0,0,0],c=[.2,0,0],p=Se(t,c,.15),d=Pe(n.type);return e.jsxs("group",{children:[e.jsx(q,{points:p,color:d,lineWidth:2,dashed:n.type==="data",dashScale:2,dashSize:.02,gapSize:.01}),e.jsx(q,{points:p,color:d,lineWidth:5,transparent:!0,opacity:.1}),e.jsxs("mesh",{position:t,children:[e.jsx("sphereGeometry",{args:[.008,8,8]}),e.jsx("meshStandardMaterial",{color:d,emissive:d,emissiveIntensity:1.5})]}),e.jsxs("mesh",{position:c,children:[e.jsx("sphereGeometry",{args:[.008,8,8]}),e.jsx("meshStandardMaterial",{color:d,emissive:d,emissiveIntensity:1.5})]}),e.jsxs("mesh",{position:[(t[0]+c[0])/2,(t[1]+c[1])/2+.02,(t[2]+c[2])/2],children:[e.jsx("planeGeometry",{args:[.04,.01]}),e.jsx("meshStandardMaterial",{color:"#000000",transparent:!0,opacity:0})]})]},n.id)})})}const U={static:(s,l,n,t)=>({color:s,intensity:l}),breathing:(s,l,n,t)=>{const c=(Math.sin(t*n*2)+1)/2;return{color:s,intensity:l*c}},pulse:(s,l,n,t)=>{const c=Math.max(0,Math.sin(t*n*3));return{color:s,intensity:l*c}},rainbow:(s,l,n,t)=>({color:`hsl(${t*n%360}, 100%, 50%)`,intensity:l}),wave:(s,l,n,t)=>({color:`hsl(${(Math.sin(t*n*2+90)+1)/2*360%360}, 100%, 50%)`,intensity:l})};function Ie({zones:s,visible:l=!0,autoPlay:n=!0,anchorForZone:t,showGlowGeometry:c=!1}){return!l||s.length===0||!n?null:e.jsx("group",{children:s.map(p=>{const d=t?t(p):[0,0,0];return e.jsx(Ce,{zone:p,anchor:d,showGlowGeometry:c},p.id)})})}function Ce({zone:s,anchor:l,showGlowGeometry:n}){const t=s.componentId==="case-top",c=m.useRef(null),p=m.useRef(null),d=m.useRef(null),o=U[s.pattern]||U.static;return te(({clock:h})=>{const i=o(s.color,s.intensity,s.speed,h.getElapsedTime());if(c.current&&(c.current.color.set(i.color),c.current.intensity=i.intensity),p.current&&(p.current.color.set(i.color),p.current.intensity=i.intensity),d.current){const r=d.current.material;r.color.set(i.color),r.emissive.set(i.color),r.emissiveIntensity=i.intensity*1.2,r.opacity=i.intensity*.25}}),e.jsxs("group",{position:l,children:[n&&e.jsxs("mesh",{ref:d,scale:[.3,.3,.3],children:[e.jsx("sphereGeometry",{args:[.015,16,16]}),e.jsx("meshStandardMaterial",{color:s.color,emissive:s.color,emissiveIntensity:s.intensity*1.2,wireframe:!1,transparent:!0,opacity:s.intensity*.25,toneMapped:!1})]}),t?e.jsx("spotLight",{ref:p,position:[0,-.04,0],color:s.color,intensity:s.intensity,distance:.08,angle:.18,penumbra:.4,decay:2.2,"target-position":[0,-.32,0]}):e.jsx("pointLight",{ref:c,position:[0,.03,0],color:s.color,intensity:s.intensity,distance:.14,decay:2})]})}function Re({zones:s,onZoneUpdate:l,onAllZonesUpdate:n}){return e.jsxs("div",{className:"space-y-4 p-4 bg-black/50 rounded-lg border border-cyan-500/20",children:[e.jsx("h3",{className:"text-sm font-semibold text-cyan-400",children:"RGB Lighting Control"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs text-gray-400",children:"Master Color"}),e.jsx("div",{className:"flex gap-2",children:["#0ea5e9","#ef4444","#10b981","#f59e0b","#a855f7"].map(t=>e.jsx("button",{onClick:()=>n==null?void 0:n(t,"static"),className:"w-6 h-6 rounded border-2 border-white/20 hover:border-white/50 transition-all",style:{backgroundColor:t},title:t},t))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs text-gray-400",children:"Pattern"}),e.jsxs("select",{onChange:t=>n==null?void 0:n("",t.target.value),className:"w-full px-2 py-1 bg-slate-900 border border-cyan-500/30 text-cyan-400 rounded text-xs",children:[e.jsx("option",{value:"static",children:"Static"}),e.jsx("option",{value:"breathing",children:"Breathing"}),e.jsx("option",{value:"pulse",children:"Pulse"}),e.jsx("option",{value:"rainbow",children:"Rainbow"}),e.jsx("option",{value:"wave",children:"Wave"})]})]}),s.length>0&&e.jsxs("div",{className:"space-y-2 pt-2 border-t border-cyan-500/20",children:[e.jsx("h4",{className:"text-xs text-cyan-300",children:"Zones"}),s.map(t=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("input",{type:"color",value:t.color,onChange:c=>l==null?void 0:l(t.id,{color:c.target.value}),className:"w-5 h-5 rounded cursor-pointer"}),e.jsx("span",{className:"text-gray-400 flex-1",children:t.name}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.intensity,onChange:c=>l==null?void 0:l(t.id,{intensity:parseFloat(c.target.value)}),className:"w-12"})]},t.id))]})]})}w.preload("/models/ram/Ram_Chip.gltf");const Q=m.forwardRef(({component:s,isSelected:l,onClick:n,onHover:t,isHovered:c},p)=>{const[d,o]=m.useState(!1),{scene:h}=w("/models/ram/Ram_Chip.gltf"),i=m.useMemo(()=>h.clone(!0),[h]);m.useMemo(()=>{i.traverse(x=>{x instanceof C&&(x.castShadow=!0,x.receiveShadow=!0)})},[i]);const r=s.scale||[.003,.003,.003],u=s.rotation||[Math.PI/2,0,0];return e.jsx("group",{ref:p,position:s.position,rotation:u,scale:r,onClick:n,onPointerOver:()=>{o(!0),t==null||t(!0)},onPointerOut:()=>{o(!1),t==null||t(!1)},children:e.jsx("primitive",{object:i})})});Q.displayName="RAMTexturedModel";function _e(){const{progress:s}=le();return e.jsx(ce,{center:!0,children:e.jsxs("div",{className:"flex flex-col items-center gap-3 bg-black/80 backdrop-blur-sm border border-sky-500/30 rounded-xl p-6",children:[e.jsx(W,{className:"w-12 h-12 text-sky-400 animate-spin"}),e.jsxs("div",{className:"text-white font-semibold",children:[s.toFixed(0),"%"]}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Building 3D Scene..."})]})})}function Ge({components:s,viewMode:l,selectedComponent:n,hoveredComponent:t,onComponentClick:c,onComponentHover:p,cables:d,rgbZones:o,explosionAmount:h}){var u,x,b,S,P,N,v,I,_,F,L,G,A,R,O,$,B;const i=m.useMemo(()=>ye("mid-tower"),[]),r=m.useMemo(()=>{var a;return(a=s.cooler)!=null&&a.scale?[(s.cooler.scale[0]??1)*.95,(s.cooler.scale[1]??1)*.95,(s.cooler.scale[2]??1)*.95]:[.95,.95,.95]},[(u=s.cooler)==null?void 0:u.scale]);return e.jsxs(e.Fragment,{children:[e.jsx(ie,{makeDefault:!0,position:[.25,.15,.35],fov:45}),e.jsx(re,{autoRotate:l.autoRotate,autoRotateSpeed:.75,enableZoom:!0,enablePan:!0,minDistance:.25,maxDistance:2,target:[0,.25,0]}),e.jsx(oe,{radius:8,depth:6,count:2500,factor:.25,saturation:0,fade:!0,speed:.6}),e.jsx(z,{count:120,scale:[12,10,8],size:2,speed:.1,opacity:.28,color:"#38bdf8",position:[0,.6,-1.8]}),e.jsx(ne,{preset:"night",background:!1}),e.jsx("fog",{attach:"fog",args:["#020617",1,5]}),e.jsx("ambientLight",{intensity:.78}),e.jsx("directionalLight",{position:[.4,.6,.3],intensity:1.625,castShadow:!0,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048,"shadow-camera-far":3,"shadow-camera-left":-1,"shadow-camera-right":1,"shadow-camera-top":1,"shadow-camera-bottom":-1}),e.jsx("directionalLight",{position:[-.3,.4,.2],intensity:1.3,color:"#a0d8ff"}),e.jsx("directionalLight",{position:[0,.3,-.5],intensity:1.17,color:"#06b6d4"}),e.jsx("directionalLight",{position:[.5,.2,0],intensity:.975,color:"#ffffff"}),e.jsx("directionalLight",{position:[-.5,.2,0],intensity:.975,color:"#ffffff"}),e.jsx("pointLight",{position:[.15,.2,.25],intensity:.15,color:"#0ea5e9",distance:2}),e.jsx("pointLight",{position:[-.15,.25,-.15],intensity:.12,color:"#06b6d4",distance:1.5}),e.jsx("pointLight",{position:[0,.2,.4],intensity:.2,color:"#0ea5e9",distance:2.5}),e.jsx("pointLight",{position:[.2,.1,-.2],intensity:.12,color:"#ffffff",distance:2}),e.jsx("pointLight",{position:[-.2,.3,.1],intensity:.1,color:"#38bdf8",distance:2}),e.jsx("spotLight",{position:[0,.8,0],angle:.6,penumbra:.5,intensity:.15,color:"#ffffff",castShadow:!0}),e.jsx("spotLight",{position:[.3,.6,.2],angle:.5,penumbra:.4,intensity:.12,color:"#0ea5e9"}),e.jsx("spotLight",{position:[-.3,.6,-.2],angle:.5,penumbra:.4,intensity:.12,color:"#06b6d4"}),e.jsx(z,{count:30,scale:1.5,size:1.5,speed:.3,opacity:.3,color:"#0ea5e9"}),e.jsx(Me,{position:[-.08,.13,-.06],scale:[.008,.008,.008],rotation:[0,0,0],isSelected:!1}),e.jsxs("group",{position:[-.065,.325,-.08],rotation:[Math.PI/2,0,0],children:[e.jsxs("mesh",{position:[0,-5e-4,0],children:[e.jsx("boxGeometry",{args:[.042,.001,.042]}),e.jsx("meshStandardMaterial",{color:"#d4af37",metalness:.95,roughness:.15,emissive:"#8b7355",emissiveIntensity:.2})]}),e.jsxs("mesh",{position:[0,.0015,0],children:[e.jsx("boxGeometry",{args:[.041,.003,.041]}),e.jsx("meshStandardMaterial",{color:"#707070",metalness:.3,roughness:.7,emissive:"#3a3a3a",emissiveIntensity:.05})]}),Array.from({length:8}).map((a,g)=>Array.from({length:8}).map((M,f)=>e.jsxs("mesh",{position:[-.014+g*.004,-.0013,-.014+f*.004],children:[e.jsx("cylinderGeometry",{args:[3e-4,3e-4,8e-4,8]}),e.jsx("meshStandardMaterial",{color:"#c9a961",metalness:.9,roughness:.3})]},`pin-${g}-${f}`)))]}),e.jsx(X,{component:{id:"case",name:"Gaming PC Case",type:"case",position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]},isSelected:!1,onClick:()=>{}}),e.jsxs("group",{position:[0,0,0],children:[s.gpu&&e.jsx(we,{position:[((x=s.gpu.position)==null?void 0:x[0])??i.gpu[0],(((b=s.gpu.position)==null?void 0:b[1])??i.gpu[1])+h*.15,((S=s.gpu.position)==null?void 0:S[2])??i.gpu[2]],scale:[((P=s.gpu.scale)==null?void 0:P[0])||.008,((N=s.gpu.scale)==null?void 0:N[1])||.008,((v=s.gpu.scale)==null?void 0:v[2])||.008],isSelected:n===s.gpu.id,isHovered:t===s.gpu.id,onClick:()=>c(s.gpu.id),onHover:a=>p(a?s.gpu.id:null)}),s.ram&&s.ram.length>0&&s.ram.map((a,g)=>{var y,E,D;const M=[((y=a.position)==null?void 0:y[0])??i.ram[0],((E=a.position)==null?void 0:E[1])??i.ram[1],((D=a.position)==null?void 0:D[2])??i.ram[2]],f=a.rotation||[Math.PI/2,Math.PI/2,0],j=a.scale||[.00835,.00835,.00835];return e.jsx(Q,{component:{...a,position:M,rotation:f,scale:j},isSelected:n===a.id,isHovered:t===a.id,onClick:()=>c(a.id),onHover:Z=>p(Z?a.id:null)},a.id||`ram-${g}`)}),s.psu&&e.jsx(Ne,{position:[((I=s.psu.position)==null?void 0:I[0])??i.psu[0],((_=s.psu.position)==null?void 0:_[1])??i.psu[1],((F=s.psu.position)==null?void 0:F[2])??i.psu[2]],rotation:s.psu.rotation||[0,0,0],scale:[((L=s.psu.scale)==null?void 0:L[0])??1,((G=s.psu.scale)==null?void 0:G[1])??1,((A=s.psu.scale)==null?void 0:A[2])??1],isSelected:n===s.psu.id,isHovered:t===s.psu.id,onClick:()=>c(s.psu.id),onHover:a=>p(a?s.psu.id:null)}),s.cooler&&e.jsxs(e.Fragment,{children:[e.jsx(Y,{component:{...s.cooler,id:`${s.cooler.id}-pump`,name:"AIO Pump Block",position:[-.06,.57,-.08],rotation:s.cooler.rotation?[(s.cooler.rotation[0]??0)+Math.PI/2,(s.cooler.rotation[1]??0)+Math.PI/2,s.cooler.rotation[2]??0]:[Math.PI/2,Math.PI/2,0],scale:[(r[0]??.95)*.85,(r[1]??.95)*.85,(r[2]??.95)*.85]},isSelected:n===`${s.cooler.id}-pump`,isHovered:t===`${s.cooler.id}-pump`,onClick:()=>c(`${s.cooler.id}-pump`),onHover:a=>p(a?`${s.cooler.id}-pump`:null)}),e.jsx(J,{component:{...s.cooler,id:`${s.cooler.id}-radiator`,name:"AIO Radiator",position:[(((R=s.cooler.position)==null?void 0:R[0])??-.05)+.04,.45,((O=s.cooler.position)==null?void 0:O[2])??0],rotation:s.cooler.rotation?[(s.cooler.rotation[0]??0)+Math.PI,s.cooler.rotation[1]??0,s.cooler.rotation[2]??0]:[Math.PI,0,0],scale:r},isSelected:n===`${s.cooler.id}-radiator`,isHovered:t===`${s.cooler.id}-radiator`,onClick:()=>c(`${s.cooler.id}-radiator`),onHover:a=>p(a?`${s.cooler.id}-radiator`:null)}),e.jsx(K,{component:{...s.cooler,id:`${s.cooler.id}-fans`,name:"AIO Fans",position:[((($=s.cooler.position)==null?void 0:$[0])??-.05)+.04,.45,((B=s.cooler.position)==null?void 0:B[2])??0],rotation:s.cooler.rotation?[(s.cooler.rotation[0]??0)+Math.PI,s.cooler.rotation[1]??0,s.cooler.rotation[2]??0]:[Math.PI,0,0],scale:r},isSelected:n===`${s.cooler.id}-fans`,isHovered:t===`${s.cooler.id}-fans`,onClick:()=>c(`${s.cooler.id}-fans`),onHover:a=>p(a?`${s.cooler.id}-fans`:null)})]}),l.mode==="cables"&&d.length>0&&e.jsx(ke,{cables:d,visible:!0}),l.mode==="rgb"&&o.length>0&&e.jsx(Ie,{zones:o,visible:!0,autoPlay:!0,anchorForZone:a=>{var f,j;if(s.gpu&&a.componentId===s.gpu.id){const y=s.gpu.position||i.gpu||[0,0,0];return[y[0],y[1]+h*.15,y[2]+.02]}const g=s.ram.findIndex(y=>y.id===a.componentId);if(g>=0){const y=s.ram[g].position||i.ram||[0,0,0];return[y[0],y[1],y[2]+.02]}if(s.cooler){if(a.componentId===`${s.cooler.id}-pump`)return[-.06,.57,-.08];if(a.componentId===`${s.cooler.id}-fans`)return[(((f=s.cooler.position)==null?void 0:f[0])??-.05)+.04,.45,((j=s.cooler.position)==null?void 0:j[2])??0]}const M=s.fans.find(y=>y.id===a.componentId);return M?M.position||[0,0,0]:a.componentId==="case-top"?[0,.52,-.01]:a.componentId==="case-front"?[0,.32,.18]:a.componentId==="case-undershine"?[0,.02,0]:[0,0,0]},showGlowGeometry:!1})]})]})}function Be({components:s,caseType:l="mid-tower",onComponentClick:n,showCableRouting:t=!0,rgbPreview:c=!0,isOpen:p=!0,onClose:d}){const[o,h]=m.useState({mode:"normal",autoRotate:!0,showLabels:!0,showShadows:!0}),[i,r]=m.useState(null),[u,x]=m.useState(null),[b,S]=m.useState(0),[P,N]=m.useState(!0),v=m.useCallback(a=>{var M,f;const g=[];return a.gpu&&g.push({id:`rgb-gpu-${a.gpu.id}`,componentId:a.gpu.id,name:"GPU RGB",color:"#0ea5e9",intensity:.8,pattern:"breathing",speed:.5}),(M=a.ram)==null||M.forEach((j,y)=>{g.push({id:`rgb-ram-${j.id}`,componentId:j.id,name:`RAM ${y+1} RGB`,color:"#0ea5e9",intensity:.6,pattern:"static",speed:.5})}),a.cooler&&(g.push({id:`rgb-cooler-pump-${a.cooler.id}`,componentId:`${a.cooler.id}-pump`,name:"AIO Pump RGB",color:"#0ea5e9",intensity:.9,pattern:"breathing",speed:.6}),g.push({id:`rgb-cooler-fans-${a.cooler.id}`,componentId:`${a.cooler.id}-fans`,name:"AIO Fans RGB",color:"#0ea5e9",intensity:.7,pattern:"wave",speed:.6})),(f=a.fans)==null||f.forEach((j,y)=>{g.push({id:`rgb-fan-${j.id}`,componentId:j.id,name:`Fan ${y+1} RGB`,color:"#0ea5e9",intensity:.7,pattern:"wave",speed:.6})}),g.push({id:"rgb-case-top-strip",componentId:"case-top",name:"Case Top Accent",color:"#0ea5e9",intensity:.35,pattern:"static",speed:.5},{id:"rgb-case-front",componentId:"case-front",name:"Case Front Accent",color:"#0ea5e9",intensity:.35,pattern:"static",speed:.5},{id:"rgb-case-undershine",componentId:"case-undershine",name:"Case Underglow",color:"#0ea5e9",intensity:.25,pattern:"static",speed:.5}),g},[]),[I,_]=m.useState(()=>v(s));m.useEffect(()=>{_(a=>v(s).map(f=>{const j=a.find(y=>y.id===f.id);return j?{...f,color:j.color,intensity:j.intensity,pattern:j.pattern,speed:j.speed}:f}))},[s,v]);const F=m.useCallback((a,g)=>{_(M=>M.map(f=>f.id===a?{...f,...g}:f))},[]),L=m.useCallback((a,g)=>{_(M=>M.map(f=>{const j=g||f.pattern;return{...f,color:a||f.color,pattern:j}}))},[]),G=m.useMemo(()=>t?[]:[],[t]),A=m.useCallback(a=>{r(a),n==null||n(a)},[n]),R=a=>{h(g=>({...g,mode:g.mode===a?"normal":a})),a==="exploded"&&b===0?S(100):a!=="exploded"&&b>0&&S(0)},O=m.useCallback(()=>{h(a=>({...a,autoRotate:!a.autoRotate}))},[]),$=a=>{S(a)},B=()=>{T.warn("Export 360° view functionality to be implemented")};return p?e.jsxs("div",{className:"w-full min-h-screen bg-black flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-sky-500/20 bg-black/50 sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(W,{className:"w-5 h-5 text-sky-400"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"3D PC Build Visualizer"}),e.jsx(ue,{className:"bg-sky-500/20 border-sky-500/40 text-sky-400",children:l})]}),d&&e.jsx(k,{size:"sm",variant:"ghost",onClick:d,className:"text-gray-400 hover:text-white",children:e.jsx(me,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex w-full flex-1 overflow-hidden relative",children:[e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-b from-slate-950 to-black",children:[e.jsx("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-10",children:e.jsx("div",{className:"bg-black/80 backdrop-blur-sm border border-sky-500/30 text-gray-200 rounded-md px-4 py-2 shadow-lg animate-in fade-in slide-in-from-top-2 duration-200",children:e.jsx("span",{className:"text-xs",children:"Early Access: 3D PC Build Visualiser is in active development — enhancements roll out regularly."})})}),e.jsx(ae,{shadows:!0,dpr:[1,2],style:{width:"100%",height:"100%"},children:e.jsx(m.Suspense,{fallback:e.jsx(_e,{}),children:e.jsx(Ge,{components:s,viewMode:o,selectedComponent:i,hoveredComponent:u,onComponentClick:A,onComponentHover:x,cables:G,rgbZones:I,explosionAmount:b})})}),u&&(()=>{const a=Object.values(s).flat().find(f=>f&&typeof f=="object"&&"id"in f&&f.id===u),g={gpu:"GPU: A graphics processor that accelerates visuals and parallel tasks like gaming, 3D rendering, and AI. It handles complex calculations in parallel, making it ideal for demanding visual applications and machine learning workloads.",ram:"RAM (Random Access Memory) is your computer's short-term memory, used to store and quickly access data that's actively being worked on. The more RAM you have, the more tasks and applications your system can juggle smoothly without slowing down. Think of it as your desk space—a bigger desk means more room to multitask.",cpu:"CPU (Central Processing Unit) is the brain of your computer. It executes instructions and controls all other components. A faster CPU means quicker program execution and smoother multitasking, handling everything from basic tasks to complex calculations.",motherboard:"Motherboard: The main circuit board that connects all your components together. It controls communication between the CPU, RAM, GPU, storage, and other devices, serving as the nervous system of your computer.",psu:"PSU (Power Supply Unit) safely distributes electrical power to all your components. A reliable, high-wattage PSU ensures stable operation and protects your hardware from power fluctuations. The wattage determines how many power-hungry components you can run.",cooler:"CPU Cooler: Removes heat from your processor to maintain optimal temperatures. Better cooling allows your CPU to run faster and more efficiently, and helps extend the lifespan of your components by preventing thermal damage.",case:"Computer Case: Houses and protects all your internal components while providing airflow pathways for cooling. A good case offers easy cable management, proper ventilation, and protection from dust and damage.",storage:"Storage Drive (SSD/HDD): Permanently stores all your files, programs, and operating system. SSDs are much faster than traditional hard drives, dramatically speeding up boot times and program loading.",fan:"Case Fan: Circulates air inside your case to remove heat generated by components. Good airflow prevents thermal buildup, improves component lifespan, and can boost system stability and performance.",cable:"Power Cable: Delivers electrical power from the PSU to components. Proper cable management improves airflow and system reliability."},M=(a==null?void 0:a.description)||g[a==null?void 0:a.type]||"Component";return e.jsxs("div",{className:"absolute top-4 left-4 bg-black/95 backdrop-blur-sm border border-sky-500/40 rounded-lg px-4 py-3 z-10 animate-in fade-in slide-in-from-left-2 duration-200 max-w-xs shadow-lg",children:[e.jsx("div",{className:"text-sm font-semibold text-sky-400",children:(a==null?void 0:a.name)||u}),e.jsx("div",{className:"text-xs text-gray-300 mt-2 leading-relaxed",children:M}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Click to select • Drag to rotate"})]})})(),e.jsx("div",{className:"absolute top-4 right-4 flex gap-2 z-10",children:e.jsx(k,{size:"sm",variant:"outline",onClick:()=>N(!P),className:"border-sky-500/40 text-sky-400 hover:bg-sky-500/10",title:P?"Hide controls":"Show controls",children:P?e.jsx(be,{className:"w-4 h-4"}):e.jsx(je,{className:"w-4 h-4"})})})]}),P&&e.jsx("div",{className:"absolute top-20 right-4 w-80 max-h-[calc(100vh-200px)] bg-slate-950/95 backdrop-blur-md border border-sky-500/30 rounded-lg overflow-y-auto shadow-2xl z-[100]",children:e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-sm font-semibold text-sky-400 flex items-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4"}),"View Modes"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(k,{size:"sm",variant:o.mode==="normal"?"default":"outline",onClick:()=>R("normal"),className:o.mode==="normal"?"bg-sky-600":"",children:"Normal"}),e.jsx(k,{size:"sm",variant:o.mode==="exploded"?"default":"outline",onClick:()=>R("exploded"),className:o.mode==="exploded"?"bg-sky-600":"",children:"Exploded"}),t&&e.jsxs(k,{size:"sm",variant:o.mode==="cables"?"default":"outline",onClick:()=>R("cables"),className:o.mode==="cables"?"bg-sky-600":"",children:[e.jsx(xe,{className:"w-3 h-3 mr-1"}),"Cables"]}),c&&e.jsxs(k,{size:"sm",variant:o.mode==="rgb"?"default":"outline",onClick:()=>R("rgb"),className:o.mode==="rgb"?"bg-sky-600":"",children:[e.jsx(he,{className:"w-3 h-3 mr-1"}),"RGB"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-sm font-semibold text-sky-400 flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4"}),"Camera"]}),e.jsx(k,{size:"sm",variant:"outline",onClick:O,className:o.autoRotate?"bg-sky-500/20 border-sky-500/40 text-sky-400 w-full":"w-full",children:o.autoRotate?"Auto-rotate: ON":"Auto-rotate: OFF"})]}),o.mode==="exploded"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-sky-400",children:"Explosion Amount"}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:b,onChange:a=>$(parseFloat(a.target.value)),className:"w-full accent-sky-500"}),e.jsxs("div",{className:"text-xs text-gray-400 text-right",children:[(b*100).toFixed(0),"%"]})]}),c&&I.length>0&&o.mode==="rgb"&&e.jsx(Re,{zones:I,onZoneUpdate:F,onAllZonesUpdate:L}),i&&e.jsxs("div",{className:"space-y-2 p-3 bg-sky-500/10 border border-sky-500/20 rounded",children:[e.jsx("h4",{className:"text-sm font-semibold text-sky-400",children:"Selected Component"}),e.jsx("div",{className:"text-xs text-gray-300",children:i})]}),e.jsxs("div",{className:"space-y-2 pt-4 border-t border-sky-500/20",children:[e.jsxs("h3",{className:"text-sm font-semibold text-sky-400 flex items-center gap-2",children:[e.jsx(fe,{className:"w-4 h-4"}),"Export"]}),e.jsx(k,{size:"sm",variant:"outline",onClick:B,className:"w-full border-sky-500/40 text-sky-400 hover:bg-sky-500/10",children:"Export 360° View"}),e.jsxs(k,{size:"sm",variant:"outline",onClick:()=>{T.warn("Launch AR preview")},className:"w-full border-sky-500/40 text-sky-400 hover:bg-sky-500/10",children:[e.jsx(ge,{className:"w-3 h-3 mr-2"}),"AR Preview"]})]}),e.jsxs("div",{className:"space-y-2 p-3 bg-slate-900/50 rounded text-xs text-gray-400",children:[e.jsxs("div",{children:["Components: ",Object.values(s).flat().length]}),t&&e.jsxs("div",{children:["Cables: ",G.length]}),c&&e.jsxs("div",{children:["RGB Zones: ",I.length]})]})]})})]})]}):null}export{Be as Interactive3DBuilder};
