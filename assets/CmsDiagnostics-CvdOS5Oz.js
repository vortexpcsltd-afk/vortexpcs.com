import{r as n,j as e}from"./three-DYdjUtCm.js";import{C as h,w as r,B as b,a2 as v,a3 as y,a4 as N}from"./index-C09NoPC0.js";import"./contentful-6-L6ww-u.js";import{C as E}from"./copy-C9jg9k1g.js";import"./firebase-D5dyMTPx.js";const T=!1,k=[{id:"product",optional:!0},{id:"pcBuild",optional:!0},{id:"pageContent"},{id:"faqItem",optional:!0},{id:"serviceItem",optional:!0},{id:"featureItem"},{id:"navigationMenu",optional:!0},{id:"contactInformation",optional:!0},{id:"legalPage",optional:!0},{id:"pricingTier",optional:!0},{id:"testimonial"},{id:"optionalExtra"},{id:"pcCase"},{id:"pcMotherboard"},{id:"pcCpu"},{id:"pcGpu"},{id:"pcRam"},{id:"pcStorage"},{id:"pcPsu"},{id:"pcCooling"},{id:"siteSettings",optional:!0}];function L(){const[o,j]=n.useState([]),[l,I]=n.useState(!1),[d,$]=n.useState(""),[f,D]=n.useState(0),[C,_]=n.useState(!1),t=n.useMemo(()=>({space:"missing",token:"missing",disableSettings:"false",disablePages:"false"}),[]),m=async()=>{{j([]);return}};n.useEffect(()=>{m()},[]);const x=n.useMemo(()=>{const i=o.filter(a=>a.exists).length,s=o.filter(a=>!a.exists).length;return{ok:i,missing:s}},[o]),S=async()=>{const i=[`Contentful enabled: ${T}`,`VITE_CONTENTFUL_SPACE_ID: ${t.space}`,`VITE_CONTENTFUL_ACCESS_TOKEN: ${t.token}`,`VITE_CMS_DISABLE_SETTINGS: ${t.disableSettings}`,`VITE_CMS_DISABLE_PAGES: ${t.disablePages}`,"","Content types:",...o.map(s=>`${s.id}: ${s.exists?"OK":"MISSING"}${s.items!==void 0?` (items: ${s.items})`:""}${s.error?` | ${s.error}`:""}`)].join(`
`);await navigator.clipboard.writeText(i),alert("Diagnostics copied to clipboard.")};return e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-5xl mx-auto py-10",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"CMS Diagnostics"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Quickly validate Contentful connectivity and expected content types. Use this to align your space setup and stop 400s."}),e.jsx(h,{className:"bg-white/5 border-white/10 p-5 mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[e.jsxs(r,{className:"bg-red-500/20 text-red-300 border-red-500/30",children:["Delivery SDK: ","Disabled"]}),e.jsxs(r,{className:t.space==="present"?"bg-green-500/20 text-green-300 border-green-500/30":"bg-red-500/20 text-red-300 border-red-500/30",children:["Space ID: ",t.space]}),e.jsxs(r,{className:t.token==="present"?"bg-green-500/20 text-green-300 border-green-500/30":"bg-red-500/20 text-red-300 border-red-500/30",children:["Access Token: ",t.token]}),e.jsxs(r,{className:"bg-white/10 text-white border-white/20",children:["Disable Settings: ",t.disableSettings]}),e.jsxs(r,{className:"bg-white/10 text-white border-white/20",children:["Disable Pages: ",t.disablePages]}),e.jsxs("div",{className:"ml-auto flex gap-2",children:[e.jsxs(b,{variant:"ghost",onClick:m,disabled:l,children:[e.jsx(v,{className:`w-4 h-4 ${l?"animate-spin":""}`}),l?"Checking…":"Re-run"]}),e.jsxs(b,{onClick:S,variant:"primary",children:[e.jsx(E,{className:"w-4 h-4"}),"Copy report"]})]})]})}),e.jsxs(h,{className:"bg-white/5 border-white/10 p-5",children:[l&&e.jsx("div",{className:"mb-4 text-xs text-gray-400",children:"Running checks…"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:k.map(i=>{var p,g,u;const s=o.find(w=>w.id===i.id),a=!!(s!=null&&s.exists),c=!!i.optional;return e.jsx("div",{className:`p-4 rounded-lg border transition-colors duration-300 ${a?"border-green-500/30 bg-green-500/5":c?"border-amber-500/30 bg-amber-500/5":"border-red-500/30 bg-red-500/5"} ${C&&a?"success-flash":""}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[e.jsx("span",{children:i.id}),c&&e.jsx(r,{className:"bg-white/10 text-white border-white/20",children:"optional"})]}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:a?`${(s==null?void 0:s.items)??0} item(s) available`:c?(p=s==null?void 0:s.error)!=null&&p.includes("unknownContentType")?"Not configured yet (optional)":((g=s==null?void 0:s.error)==null?void 0:g.slice(0,160))||"Optional: Missing or inaccessible":((u=s==null?void 0:s.error)==null?void 0:u.slice(0,160))||"Missing or inaccessible"})]}),a?e.jsx(y,{className:"w-5 h-5 text-green-400"}):c?e.jsx(N,{className:"w-5 h-5 text-amber-400"}):e.jsx(N,{className:"w-5 h-5 text-red-400"})]})},i.id)})}),e.jsxs("div",{className:"mt-6 text-sm text-gray-400",children:["Summary: ",e.jsxs("span",{className:"text-green-300",children:[x.ok," OK"]})," ·"," ",e.jsxs("span",{className:"text-red-300",children:[x.missing," missing"]}),e.jsx("div",{className:"mt-2 text-xs",children:"Note: Amber items are optional content types. The app will fall back to mock/default content until you create them in Contentful."}),d&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Last run: ",d," (",f," ms)"]})]})]})]})})}export{L as CmsDiagnostics};
